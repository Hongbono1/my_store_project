<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ì •ë³´ ì…ë ¥</title>
  <!-- Tailwind CSS CDN (ê°œë°œ ì¤‘ì—ëŠ” ê´œì°®ì§€ë§Œ, í”„ë¡œë•ì…˜ì—ì„œëŠ” ë¹Œë“œëœ CSS ì‚¬ìš© ê¶Œì¥) -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- ë‹¤ìŒ ìš°í¸ë²ˆí˜¸ ê²€ìƒ‰ API -->
  <script src="https://t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>
  <!-- ì¹´ì¹´ì˜¤ ì§€ë„ API (YOUR_API_KEY ë¶€ë¶„ì„ ì‹¤ì œ ì•± í‚¤ë¡œ êµì²´) -->
  <script type="text/javascript"
    src="https://dapi.kakao.com/v2/maps/sdk.js?appkey=6286d4d9bc1d503495b03f46622b5dc8&libraries=services"></script>
</head>

<body class="bg-gray-200 flex flex-col min-h-screen">
  <div id="header-placeholder"></div>
  <!-- ë©”ì¸ ì˜ì—­ -->
  <main class="flex-grow container mx-auto px-4 py-8">
    <div class="bg-white w-full max-w-4xl p-6 rounded-lg shadow-lg border-2 border-gray-300 mx-auto">
      <!-- ì œëª© -->
      <div class="flex justify-center items-center mb-6">
        <h2 class="text-3xl font-bold text-gray-800">ì •ë³´ ì…ë ¥</h2>
      </div>
      <!-- ì…ë ¥ í¼ -->
      <!-- Hidden input: storeIdê°€ ìˆìœ¼ë©´ ìˆ˜ì • ëª¨ë“œë¡œ ì¸ì‹ -->
      <form id="businessForm" enctype="multipart/form-data" class="space-y-6">
        <input type="hidden" id="storeId" name="storeId" value="" />

        <!-- [ì¶”ê°€] ì‚¬ì—…ì ë“±ë¡ ì¸ì¦ ì„¹ì…˜ (ë°©ë²• B: 3ì¹¸ ì…ë ¥) -->
        <div class="border rounded p-4 bg-yellow-50">
          <h2 class="text-xl font-semibold mb-4">ì‚¬ì—…ì ë“±ë¡ ì¸ì¦</h2>
          <div class="flex flex-col md:flex-row md:items-center gap-2 mb-3">
            <label class="w-20 font-medium leading-tight text-center">
              <span class="block">ì‚¬ì—…ì</span>
              <span class="block">ë²ˆ í˜¸</span>
            </label>
            <input type="text" id="bizNumber1" name="bizNumber1" placeholder="ì˜ˆ: 336" maxlength="4"
              oninput="this.value = this.value.replace(/[^0-9]/g, '')"
              class="flex-1 border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring focus:ring-yellow-200" />
            <span>-</span>
            <input type="text" id="bizNumber2" name="bizNumber2" placeholder="ì˜ˆ: 4" maxlength="4"
              oninput="this.value = this.value.replace(/[^0-9]/g, '')"
              class="flex-1 border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring focus:ring-yellow-200" />
            <span>-</span>
            <input type="text" id="bizNumber3" name="bizNumber3" placeholder="ì˜ˆ: 12365" maxlength="6"
              oninput="this.value = this.value.replace(/[^0-9]/g, '')"
              class="flex-1 border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring focus:ring-yellow-200" />
            <button type="button" id="verifyBizButton"
              class="ml-4 bg-yellow-500 hover:bg-yellow-600 text-white font-semibold py-2 px-4 rounded"
              onclick="verifyBizNumber()">
              ì¸ì¦
            </button>
          </div>
          <div class="flex flex-col md:flex-row md:items-center gap-2 mb-2">
            <label for="businessCertImage" class="w-32 font-medium">ë“±ë¡ì¦ ì´ë¯¸ì§€</label>
            <input type="file" id="businessCertImage" name="businessCertImage" accept="image/*,application/pdf"
              class="flex-1 border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring focus:ring-yellow-200" />
          </div>
          <p class="mt-2 text-sm text-center">
            *ì‚¬ì—…ì ë“±ë¡ì¦ì€ <span class="text-red-600">3ê°œì›” ì´ë‚´</span> ë°œê¸‰
            ë°›ì€ ê²ƒë§Œ ìœ íš¨*
          </p>
          <p id="bizVerifyResult" class="text-sm text-gray-600"></p>
        </div>

        <!-- [ì¶”ê°€] ì—…ì£¼ ì •ë³´ ì„¹ì…˜ -->
        <div class="border rounded p-4 bg-indigo-100">
          <h2 class="text-xl font-semibold mb-4">ëŒ€í‘œ ì •ë³´</h2>
          <div class="flex flex-col md:flex-row md:items-center mb-3">
            <label for="ownerName" class="w-32 font-medium">ëŒ€í‘œì ì„±í•¨</label>
            <input type="text" id="ownerName" name="ownerName" placeholder="ì˜ˆ: í™ê¸¸ë™"
              class="flex-1 border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring focus:ring-indigo-200" />
          </div>
          <div class="flex flex-col md:flex-row md:items-center mb-3">
            <label for="birthDate" class="w-32 font-medium">ìƒë…„ì›”ì¼</label>
            <input type="date" id="birthDate" name="birthDate"
              class="flex-1 border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring focus:ring-indigo-200" />
          </div>
          <div class="flex items-center gap-2 mb-4">
            <!-- ì´ë©”ì¼ (í•œ ì¤„) -->
            <div class="flex flex-col md:flex-row md:items-center mb-3">
              <!-- ë¼ë²¨: ë‹¤ë¥¸ ë¼ë²¨ê³¼ ë™ì¼ í­ (ì˜ˆ: w-32) -->
              <label for="emailId" class="w-32 font-medium">ì´ë©”ì¼</label>

              <!-- ì˜¤ë¥¸ìª½: ì•„ì´ë”” + @ + ë„ë©”ì¸ -->
              <div class="flex-1 flex items-center gap-2">
                <!-- ì•„ì´ë”” ì…ë ¥ -->
                <input type="text" id="emailId" placeholder="ì•„ì´ë””"
                  class="w-80 border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring focus:ring-indigo-200"
                  oninput="updateEmail()" />

                <!-- @ ê¸°í˜¸ (ê³ ì •) -->
                <span class="font-semibold text-gray-600 mx-1">@</span>

                <!-- ë„ë©”ì¸ (select â†” input í† ê¸€ ì˜ì—­) -->
                <div class="relative flex-1">
                  <!-- ì„ íƒ ë°•ìŠ¤ (ê¸°ë³¸ ë³´ì„) -->
                  <select id="emailDomainSelect"
                    class="w-80 border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring focus:ring-indigo-200"
                    onchange="handleDomainChange(this)">
                    <option value="">ì„ íƒí•˜ì„¸ìš”</option>
                    <option value="naver.com">naver.com</option>
                    <option value="gmail.com">gmail.com</option>
                    <option value="daum.net">daum.net</option>
                    <option value="kakao.com">kakao.com</option>
                    <option value="nate.com">nate.com</option>
                    <option value="custom">ì§ì ‘ì…ë ¥</option>
                  </select>

                  <!-- ì§ì ‘ ì…ë ¥ ì¹¸ (ê¸°ë³¸ hidden) -->
                  <input type="text" id="customDomainInput" placeholder="ë„ë©”ì¸ ì…ë ¥"
                    class="absolute inset-0 w-full h-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring focus:ring-indigo-200 hidden"
                    oninput="updateEmail()" />
                </div>
              </div>
            </div>

            <!-- ìµœì¢… ì‹¤ì œ ì „ì†¡ìš© ìˆ¨ê¹€ í•„ë“œ -->
            <input type="hidden" id="ownerEmail" name="ownerEmail" />
          </div>

          <!-- ì‹¤ì œ ì „ì†¡ë  ì´ë©”ì¼ ì „ì²´ ì£¼ì†Œ -->
          <input type="hidden" id="ownerEmail" name="ownerEmail" />
          <div class="flex flex-col md:flex-row md:items-center mb-3">
            <label for="ownerAddress" class="w-32 font-medium">ëŒ€í‘œ ì£¼ì†Œ</label>
            <input type="text" id="ownerAddress" name="ownerAddress" placeholder="ì˜ˆ: ì„œìš¸ì‹œ ê°•ë‚¨êµ¬ ..."
              class="flex-1 border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring focus:ring-indigo-200" />
          </div>
          <div class="flex flex-col md:flex-row md:items-center">
            <label for="ownerPhone" class="w-32 font-medium">í•¸ë“œí° ë²ˆí˜¸</label>
            <input type="text" id="ownerPhone" name="ownerPhone" placeholder="ex) 010-1234-5678"
              class="flex-1 border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring focus:ring-indigo-200" />
          </div>
        </div>

        <!-- [ì¶”ê°€] íœ´ëŒ€ì „í™” ì¸ì¦ ì„¹ì…˜ -->
        <div class="border rounded p-4 bg-indigo-50">
          <h2 class="text-xl font-semibold mb-4">íœ´ëŒ€ì „í™” ì¸ì¦</h2>
          <div class="flex flex-col md:flex-row md:items-center gap-2 mb-3">
            <label for="phoneAuth" class="w-32 font-medium">ì¸ì¦ë²ˆí˜¸</label>
            <input type="text" id="phoneAuth" name="phoneAuth" placeholder="ì¸ì¦ë²ˆí˜¸ ì…ë ¥"
              class="flex-1 border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring focus:ring-indigo-200" />
            <button type="button" id="verifyPhoneButton"
              class="ml-4 bg-indigo-500 hover:bg-indigo-600 text-white font-semibold py-2 px-4 rounded">
              ì¸ì¦ ìš”ì²­
            </button>
          </div>
          <p id="phoneVerifyResult" class="text-sm text-gray-600"></p>
        </div>

        <!-- ê¸°ë³¸ ì •ë³´ (ê°€ê²Œ ê´€ë ¨ ì •ë³´) -->
        <div class="border rounded p-4 bg-gray-50">
          <h2 class="text-xl font-semibold mb-4">ê¸°ë³¸ ì •ë³´</h2>
          <div class="flex flex-col md:flex-row md:items-center mb-3">
            <label for="businessName" class="w-32 font-medium">ìƒí˜¸</label>
            <input type="text" id="businessName" name="businessName" placeholder="ex) OO ì‹ë‹¹, ì¹´í˜ XX ë“±"
              class="flex-1 border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring focus:ring-blue-200" />
          </div>
          <div class="flex flex-col md:flex-row md:items-center mb-3">
            <label for="businessType" class="w-32 font-medium">ì—…ì¢…</label>
            <input type="text" id="businessType" name="businessType" placeholder="ex) ìŒì‹ì , ì¹´í˜, ê¸°íƒ€"
              class="flex-1 border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring focus:ring-blue-200" />
          </div>
          <div class="flex flex-col md:flex-row md:items-center mb-3">
            <label for="deliveryOption" class="w-32 font-medium">ë°°ì†¡/í…Œì´í¬ì•„ì›ƒ</label>
            <select id="deliveryOption" name="deliveryOption"
              class="mt-1 md:mt-0 flex-1 border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring focus:ring-blue-200">
              <option value="ê°€ëŠ¥">ê°€ëŠ¥</option>
              <option value="ë¶ˆê°€ëŠ¥">ë¶ˆê°€ëŠ¥</option>
            </select>
          </div>
          <div class="flex flex-col md:flex-row md:items-center">
            <label for="businessHours" class="w-32 font-medium">ì˜ì—…ì‹œê°„</label>
            <input type="text" id="businessHours" name="businessHours" placeholder="ex) 09:00 ~ 22:00"
              class="flex-1 border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring focus:ring-blue-200" />
          </div>
        </div>

        <!-- ì„œë¹„ìŠ¤ ë‚´ìš© -->
        <div class="border rounded p-4 bg-gray-50">
          <h2 class="text-xl font-semibold mb-4">ì„œë¹„ìŠ¤ ë‚´ìš©</h2>
          <textarea id="serviceDetails" name="serviceDetails" placeholder="ì„œë¹„ìŠ¤ ê´€ë ¨ ìƒì„¸ ì„¤ëª…, ë©”ë‰´, ì˜ˆì•½ ì •ë³´ ë“±ì„ ì…ë ¥í•˜ì„¸ìš”."
            class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring focus:ring-blue-200"
            rows="4"></textarea>
        </div>

        <!-- ê³ ê° ì´ë²¤íŠ¸ -->
        <div class="border rounded p-4 bg-gray-50">
          <h2 class="text-xl font-semibold mb-4">ê³ ê° ì´ë²¤íŠ¸</h2>
          <div class="mb-3">
            <label for="event1" class="block font-medium mb-1">ì´ë²¤íŠ¸ ë‚´ìš© 1</label>
            <input type="text" id="event1" name="event1" placeholder="ì´ë²¤íŠ¸ ë‚´ìš© 1"
              class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring focus:ring-blue-200" />
          </div>
          <div>
            <label for="event2" class="block font-medium mb-1">ì´ë²¤íŠ¸ ë‚´ìš© 2</label>
            <input type="text" id="event2" name="event2" placeholder="ì´ë²¤íŠ¸ ë‚´ìš© 2"
              class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring focus:ring-blue-200" />
          </div>
        </div>

        <!-- ê¸°íƒ€ ì •ë³´ -->
        <div class="border rounded p-4 bg-gray-50">
          <h2 class="text-xl font-semibold mb-4">ê¸°íƒ€ ì •ë³´</h2>
          <div class="flex flex-col md:flex-row md:items-center mb-3">
            <label for="facility" class="w-32 font-medium">ì¥ì• ì¸ í¸ì˜ì‹œì„¤</label>
            <input type="text" id="facility" name="facility" placeholder="ì˜ˆ: ìˆìŒ / ì—†ìŒ / ê°„ë‹¨ ì„¤ëª…"
              class="flex-1 border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring focus:ring-blue-200" />
          </div>
          <div class="flex flex-col md:flex-row md:items-center mb-3">
            <label for="pets" class="w-32 font-medium">ë°˜ë ¤ë™ë¬¼ ì¶œì…</label>
            <input type="text" id="pets" name="pets" placeholder="ì˜ˆ: ê°€ëŠ¥(ì†Œí˜•ê²¬ë§Œ) / ë¶ˆê°€ëŠ¥ ë“±"
              class="flex-1 border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring focus:ring-blue-200" />
          </div>
          <div class="flex flex-col md:flex-row md:items-center">
            <label for="parking" class="w-32 font-medium">ì£¼ì°¨ì •ë³´</label>
            <input type="text" id="parking" name="parking" placeholder="ì˜ˆ: ì „ìš©ì£¼ì°¨ì¥ / ìœ ë£Œì£¼ì°¨ / ë¶ˆê°€ëŠ¥ ë“±"
              class="flex-1 border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring focus:ring-blue-200" />
          </div>
        </div>

        <!-- í’ˆëª© ì…ë ¥ (ìµœëŒ€ 20ê°œ) -->
        <div class="border rounded p-4 bg-gray-50">
          <h2 class="text-xl font-semibold mb-4">í’ˆëª© ì…ë ¥ (ìµœëŒ€ 20ê°œ)</h2>
          <div id="itemList" class="space-y-4"></div>
          <button type="button" class="bg-blue-500 hover:bg-blue-600 text-white font-semibold py-2 px-4 rounded"
            onclick="addItem()">
            +
          </button>
        </div>

        <!-- ì—°ë½ì²˜ (ê°€ê²Œ ê´€ë ¨ ì—°ë½ ì •ë³´) -->
        <div class="border rounded p-4 bg-gray-50">
          <h2 class="text-xl font-semibold mb-4">ì—°ë½ì²˜</h2>
          <div class="flex flex-col md:flex-row md:items-center mb-3">
            <label for="phoneNumber" class="w-32 font-medium">ëŒ€í‘œì „í™”</label>
            <input type="text" id="phoneNumber" name="phoneNumber" placeholder="ex) 02-123-4567"
              class="flex-1 border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring focus:ring-blue-200" />
          </div>
          <div class="flex flex-col md:flex-row md:items-center mb-3">
            <label for="homepage" class="w-32 font-medium">í™ˆí˜ì´ì§€/ë¸”ë¡œê·¸</label>
            <input type="text" id="homepage" name="homepage" placeholder="URLì„ ì…ë ¥í•˜ì„¸ìš”"
              class="flex-1 border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring focus:ring-blue-200" />
          </div>
          <!-- ì¸ìŠ¤íƒ€ê·¸ë¨ ì£¼ì†Œ ì…ë ¥ -->
          <div class="flex flex-col md:flex-row md:items-center mb-3">
            <label for="instagram" class="w-32 font-medium">ì¸ìŠ¤íƒ€ê·¸ë¨</label>
            <input type="text" id="instagram" name="instagram" placeholder="ì¸ìŠ¤íƒ€ê·¸ë¨ URL"
              class="flex-1 border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring focus:ring-blue-200" />
          </div>
          <!-- í˜ì´ìŠ¤ë¶ ì£¼ì†Œ ì…ë ¥ -->
          <div class="flex flex-col md:flex-row md:items-center">
            <label for="facebook" class="w-32 font-medium">í˜ì´ìŠ¤ë¶</label>
            <input type="text" id="facebook" name="facebook" placeholder="í˜ì´ìŠ¤ë¶ URL"
              class="flex-1 border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring focus:ring-blue-200" />
          </div>
        </div>

        <!-- ì¶”ê°€ ì„¤ëª… -->
        <div class="border rounded p-4 bg-gray-50">
          <h2 class="text-xl font-semibold mb-4">ì¶”ê°€ ì„¤ëª…</h2>
          <textarea id="additionalDesc" name="additionalDesc" placeholder="ì¶”ê°€ ì„¤ëª…ì„ ì…ë ¥í•˜ì„¸ìš”."
            class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring focus:ring-blue-200"
            rows="4"></textarea>
        </div>

        <!-- ì´ë¯¸ì§€ ë“±ë¡ (ìµœëŒ€ 3ì¥) : ê°€ê²Œ ëŒ€í‘œ ì´ë¯¸ì§€ -->
        <div class="border rounded p-4 bg-gray-50">
          <h2 class="text-xl font-semibold mb-4">ì´ë¯¸ì§€ ë“±ë¡ (ìµœëŒ€ 3ì¥)</h2>
          <input type="file" id="imagesInput" name="images[]" accept="image/*" multiple
            class="block w-full mb-3 file:mr-4 file:py-2 file:px-4 file:rounded file:border-0 file:bg-blue-100 file:text-blue-700 hover:file:bg-blue-200" />
          <div id="imagesPreview" class="flex gap-3"></div>
        </div>

        <!-- ì£¼ì†Œ ì…ë ¥ -->
        <div class="border rounded p-4 bg-gray-50">
          <h2 class="text-xl font-semibold mb-4">ì£¼ì†Œ ì…ë ¥</h2>
          <!-- ìš°í¸ë²ˆí˜¸ ë° ì£¼ì†Œ ê²€ìƒ‰ ë²„íŠ¼ -->
          <div class="flex flex-col md:flex-row md:items-center gap-2 mb-3">
            <label for="postalCode" class="w-32 font-medium">ìš°í¸ë²ˆí˜¸</label>
            <input type="text" id="postalCode" name="postalCode" placeholder="ìš°í¸ë²ˆí˜¸" readonly
              class="flex-1 border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring focus:ring-blue-200" />
            <button type="button" onclick="openDaumPostcode()"
              class="bg-blue-500 hover:bg-blue-600 text-white font-semibold px-4 py-2 rounded">
              ì£¼ì†Œ ì°¾ê¸°
            </button>
          </div>
          <!-- ë„ë¡œëª… ì£¼ì†Œ -->
          <div class="flex flex-col md:flex-row md:items-center gap-2 mb-3">
            <label for="roadAddress" class="w-32 font-medium">ë„ë¡œëª… ì£¼ì†Œ</label>
            <input type="text" id="roadAddress" name="roadAddress" placeholder="ë„ë¡œëª… ì£¼ì†Œ" readonly
              class="flex-1 border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring focus:ring-blue-200" />
          </div>
          <!-- ìƒì„¸ ì£¼ì†Œ -->
          <div class="flex flex-col md:flex-row md:items-center gap-2">
            <label for="detailAddress" class="w-32 font-medium">ìƒì„¸ ì£¼ì†Œ</label>
            <input type="text" id="detailAddress" name="detailAddress" placeholder="ìƒì„¸ ì£¼ì†Œë¥¼ ì…ë ¥í•˜ì„¸ìš”"
              class="flex-1 border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring focus:ring-blue-200" />
          </div>
          <!-- ì§€ë„ ì˜ì—­ -->
          <div id="map" class="mt-4 w-full h-64 border border-gray-300 rounded"></div>
        </div>

        <!-- ì œì¶œ ë° ìˆ˜ì • ë²„íŠ¼ -->
        <div class="text-center space-x-4">
          <!-- ì…ë ¥ ì™„ë£Œ ë²„íŠ¼ -->
          <button type="submit" class="bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-6 rounded">
            ì…ë ¥ ì™„ë£Œ
          </button>
          <!-- ìˆ˜ì • ë²„íŠ¼ -->
          <button type="button" class="bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-6 rounded"
            onclick="updateData()">
            ìˆ˜ì •
          </button>
        </div>
      </form>
    </div>
  </main>

  <div id="footer-placeholder"></div>

  <!-- ìë°”ìŠ¤í¬ë¦½íŠ¸ -->
  <script>
    // ì´ë¯¸ì§€ ë¯¸ë¦¬ë³´ê¸° (ìµœëŒ€ 3ì¥)
    const imagesInput = document.getElementById("imagesInput");
    const imagesPreview = document.getElementById("imagesPreview");
    imagesInput.addEventListener("change", () => {
      imagesPreview.innerHTML = "";
      const files = Array.from(imagesInput.files).slice(0, 3);
      files.forEach((file) => {
        const reader = new FileReader();
        reader.onload = (e) => {
          const img = document.createElement("img");
          img.src = e.target.result;
          img.className =
            "w-32 h-20 object-cover border border-gray-300 rounded";
          imagesPreview.appendChild(img);
        };
        reader.readAsDataURL(file);
      });
    });

    // ì£¼ì†Œ ê²€ìƒ‰ (ë‹¤ìŒ ìš°í¸ë²ˆí˜¸)
    function openDaumPostcode() {
      new daum.Postcode({
        oncomplete: function (data) {
          document.getElementById("postalCode").value = data.zonecode;
          document.getElementById("roadAddress").value = data.roadAddress;
          updateMap(data.roadAddress);
          document.getElementById("detailAddress").focus();
        },
      }).open({ autoClose: true });
    }

    // ì§€ë„ í‘œì‹œ ê´€ë ¨ ë³€ìˆ˜
    let map;
    let marker;
    // ì§€ë„ ì—…ë°ì´íŠ¸ í•¨ìˆ˜ (ì£¼ì†Œë¥¼ ë°›ì•„ ì§€ë„ ì¤‘ì•™ê³¼ ë§ˆì»¤ ìœ„ì¹˜ ê°±ì‹ )
    function updateMap(address) {
      const mapContainer = document.getElementById("map");
      if (!map) {
        map = new kakao.maps.Map(mapContainer, {
          center: new kakao.maps.LatLng(37.5665, 126.978),
          level: 3,
        });
      }
      const geocoder = new kakao.maps.services.Geocoder();
      geocoder.addressSearch(address, function (result, status) {
        if (status === kakao.maps.services.Status.OK) {
          const coords = new kakao.maps.LatLng(result[0].y, result[0].x);
          map.setCenter(coords);
          if (marker) {
            marker.setPosition(coords);
          } else {
            marker = new kakao.maps.Marker({
              map: map,
              position: coords,
            });
          }
        }
      });
    }

    // ìƒì„¸ì£¼ì†Œ ì…ë ¥ í›„ ì§€ë„ ê°±ì‹ 
    document
      .getElementById("detailAddress")
      .addEventListener("blur", function () {
        const baseAddr = document.getElementById("roadAddress").value.trim();
        const detailAddr = this.value.trim();
        if (baseAddr !== "" || detailAddr !== "") {
          updateMap(baseAddr + " " + detailAddr);
        }
      });

    // ê°€ê²© ì…ë ¥: ìˆ«ì, ì½¤ë§ˆ, ì†Œìˆ˜ì  ì •ë¦¬ + 0ë„ ì§€ì›Œì§€ê²Œ ì²˜ë¦¬
    function formatCurrency(input) {
      let val = input.value.replace(/[^0-9.]/g, "");
      const parts = val.split(".");
      if (parts.length > 2) {
        val = parts[0] + "." + parts.slice(1).join("");
      }
      let intPart = parts[0] || "";
      let decPart = parts[1] || "";
      if (!intPart && decPart === "") {
        input.value = "";
        return;
      }
      if (decPart.length > 2) {
        decPart = decPart.slice(0, 2);
      }
      intPart = intPart.replace(/\B(?=(\d{3})+(?!\d))/g, ",");
      input.value = decPart ? intPart + "." + decPart : intPart;
    }

    // í’ˆëª© ì¶”ê°€ (ìµœëŒ€ 20ê°œ)
    let itemCount = 0;
    function addItem() {
      if (itemCount >= 20) {
        alert("ìµœëŒ€ 20ê°œê¹Œì§€ ì…ë ¥í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.");
        return;
      }
      itemCount++;
      const itemList = document.getElementById("itemList");
      const itemDiv = document.createElement("div");
      itemDiv.className =
        "flex flex-col md:flex-row md:items-center gap-2 border p-2 rounded";
      const menuImageInput = document.createElement("input");
      menuImageInput.type = "file";
      menuImageInput.accept = "image/*";
      menuImageInput.name = "menuImage[]";
      menuImageInput.className = "border border-gray-300 rounded px-2 py-1";
      const nameInput = document.createElement("input");
      nameInput.type = "text";
      nameInput.placeholder = "í’ˆëª© ì´ë¦„";
      nameInput.name = "menuName[]";
      nameInput.className = "flex-1 border border-gray-300 rounded px-2 py-1";
      const priceInput = document.createElement("input");
      priceInput.type = "text";
      priceInput.placeholder = "ê°€ê²©";
      priceInput.name = "menuPrice[]";
      priceInput.className = "w-32 border border-gray-300 rounded px-2 py-1";
      priceInput.setAttribute("oninput", "formatCurrency(this)");
      const removeBtn = document.createElement("button");
      removeBtn.type = "button";
      removeBtn.textContent = "ì‚­ì œ";
      removeBtn.className =
        "bg-red-500 hover:bg-red-600 text-white font-semibold px-3 py-1 rounded";
      removeBtn.onclick = function () {
        itemDiv.remove();
        itemCount--;
      };
      itemDiv.appendChild(menuImageInput);
      itemDiv.appendChild(nameInput);
      itemDiv.appendChild(priceInput);
      itemDiv.appendChild(removeBtn);
      itemList.appendChild(itemDiv);
    }

    // ì‚¬ì—…ì ë“±ë¡ë²ˆí˜¸ ì¸ì¦ ì²˜ë¦¬ (ë°©ë²• B)
    async function verifyBizNumber() {
      const part1 = document.getElementById("bizNumber1").value.trim();
      const part2 = document.getElementById("bizNumber2").value.trim();
      const part3 = document.getElementById("bizNumber3").value.trim();
      const combined = part1 + part2 + part3;
      const resultEl = document.getElementById("bizVerifyResult");
      const bizNameInput = document.getElementById("businessName");
      if (!/^\d{10}$/.test(combined)) {
        resultEl.textContent =
          "ì˜¬ë°”ë¥¸ ì‚¬ì—…ìë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš” (ì´ 10ìë¦¬ ìˆ«ì)";
        resultEl.className = "text-sm text-red-600";
        return;
      }
      try {
        const response = await fetch("/verify-biz", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ b_no: [combined] }),
        });

        const data = await response.json();

        if (data && data.data && data.data.length > 0) {
          const info = data.data[0];
          if (info.b_stt_cd === "01") {
            console.log("ì¸ì¦ ì‘ë‹µ ì „ì²´:", info);  // ğŸ” ì¶”ê°€
            resultEl.textContent = `âœ… ì¸ì¦ ì™„ë£Œ: ${info.b_no}`;
            resultEl.className = "text-sm text-green-600 text-center";

            // âœ… ìƒí˜¸ëª… ìë™ì…ë ¥ ë˜ëŠ” ì‹¤íŒ¨ ì•ˆë‚´
            if (info.b_stt_cd === "01") {
              resultEl.textContent = `âœ… ì¸ì¦ ì™„ë£Œ: ${info.b_no}`;
              resultEl.className = "text-sm text-green-600 text-center";

              // âœ… ìƒí˜¸ëª… ìë™ì…ë ¥ ë˜ëŠ” ì‹¤íŒ¨ ì•ˆë‚´
              if (info.b_nm) {
                bizNameInput.value = info.b_nm;
              } else {
                bizNameInput.value = "";
                bizNameInput.placeholder = "ìë™ì…ë ¥ ì‹¤íŒ¨ - ìƒí˜¸ëª…ì„ ì§ì ‘ ì…ë ¥í•˜ì„¸ìš”";
              }
            }
          } else {
            resultEl.textContent = "âŒ ë“±ë¡ë˜ì§€ ì•Šì•˜ê±°ë‚˜ íì—…ëœ ì‚¬ì—…ìì…ë‹ˆë‹¤.";
            resultEl.className = "text-sm text-red-600 text-center";
          }

        } else {
          resultEl.textContent = "âŒ ì¸ì¦ ì‘ë‹µì´ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤.";
          resultEl.className = "text-sm text-red-600 text-center";
        }

      } catch (err) {
        console.error("ì‚¬ì—…ì ì¸ì¦ ì‹¤íŒ¨", err);
        resultEl.textContent = "ì„œë²„ ì˜¤ë¥˜ë¡œ ì¸ì¦ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.";
        resultEl.className = "text-sm text-red-600 text-center";
      }
    }

    // íœ´ëŒ€ì „í™” ì¸ì¦ ì²˜ë¦¬ (í…ŒìŠ¤íŠ¸ ì‹œë®¬ë ˆì´ì…˜)
    document
      .getElementById("verifyPhoneButton")
      .addEventListener("click", async function () {
        // íœ´ëŒ€ì „í™” ì¸ì¦ì€ ì—…ì£¼ ì •ë³´ ì„¹ì…˜ì˜ "ownerPhone"ì„ ì‚¬ìš©
        const ownerPhone = document.getElementById("ownerPhone").value.trim();
        const phoneResultEl = document.getElementById("phoneVerifyResult");
        if (!ownerPhone) {
          phoneResultEl.textContent = "í•¸ë“œí° ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.";
          phoneResultEl.className = "text-sm text-red-600";
          return;
        }
        // ì‹¤ì œ API ëŒ€ì‹  í…ŒìŠ¤íŠ¸ìš© ì¸ì¦ë²ˆí˜¸ "123456" ë°œì†¡ ì‹œë®¬ë ˆì´ì…˜
        phoneResultEl.textContent =
          "ì¸ì¦ë²ˆí˜¸ê°€ ë°œì†¡ë˜ì—ˆìŠµë‹ˆë‹¤. (í…ŒìŠ¤íŠ¸ ì½”ë“œ: 123456)";
        phoneResultEl.className = "text-sm text-green-600";
      });

    document
      .getElementById("phoneAuth")
      .addEventListener("blur", function () {
        const code = this.value.trim();
        const phoneResultEl = document.getElementById("phoneVerifyResult");
        if (code === "123456") {
          phoneResultEl.textContent = "íœ´ëŒ€ì „í™” ì¸ì¦ ì„±ê³µ.";
          phoneResultEl.className = "text-sm text-green-600";
        } else {
          phoneResultEl.textContent = "ì¸ì¦ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.";
          phoneResultEl.className = "text-sm text-red-600";
        }
      });

    // í—¤ë”/í‘¸í„° ì‚½ì… (ì™¸ë¶€ íŒŒì¼ ì‚¬ìš©)
    fetch("/components/header.html")
      .then((res) => res.text())
      .then((data) => {
        document.getElementById("header-placeholder").innerHTML = data;
      });
    fetch("/components/footer.html")
      .then((res) => res.text())
      .then((data) => {
        document.getElementById("footer-placeholder").innerHTML = data;
      });

    // âœ… ìµœì¢… submit í•¸ë“¤ëŸ¬ - ì‹ ê·œ ë“±ë¡ (POST)
    const form = document.getElementById("businessForm");
    form.addEventListener("submit", async (event) => {
      event.preventDefault();
      try {
        const formData = new FormData(form);
        // ê°€ê²© ì •ì œ: menuPrice[] ì½¤ë§ˆ ì œê±° â†’ ê¸°ì¡´ í•„ë“œ ì œê±° í›„ ì¬ì¶”ê°€
        const priceInputs = form.querySelectorAll(
          'input[name="menuPrice[]"]'
        );
        formData.delete("menuPrice[]");
        priceInputs.forEach((input) => {
          const raw = input.value.replace(/,/g, "");
          formData.append("menuPrice[]", raw);
        });
        const response = await fetch("/store", {
          method: "POST",
          body: formData,
        });
        if (!response.ok) throw new Error("ì„œë²„ ì‘ë‹µ ì—ëŸ¬");
        const result = await response.json();
        console.log("ì„œë²„ ì‘ë‹µ (ë“±ë¡)", result);
        alert("ë“±ë¡ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!");
        document.getElementById("storeId").value = result.storeId;
        window.location.href = `detail.html?id=${result.storeId}`;
      } catch (error) {
        console.error("ì—ëŸ¬ ë°œìƒ (ë“±ë¡)", error);
        alert("ë°ì´í„° ì „ì†¡ ì¤‘ ì—ëŸ¬ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤!");
      }
    });

    // âœ… updateData í•¸ë“¤ëŸ¬ - ìˆ˜ì • (PUT)
    async function updateData() {
      const storeId = document.getElementById("storeId").value;
      if (!storeId) {
        alert("ìˆ˜ì •í•  ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤. ë¨¼ì € ë“±ë¡ì„ ì§„í–‰í•˜ì„¸ìš”.");
        return;
      }
      try {
        const formData = new FormData(form);
        const priceInputs = form.querySelectorAll(
          'input[name="menuPrice[]"]'
        );
        formData.delete("menuPrice[]");
        priceInputs.forEach((input) => {
          const raw = input.value.replace(/,/g, "");
          formData.append("menuPrice[]", raw);
        });
        const response = await fetch(`/store/${storeId}`, {
          method: "PUT",
          body: formData,
        });
        if (!response.ok) throw new Error("ì„œë²„ ì‘ë‹µ ì—ëŸ¬ (ìˆ˜ì •)");
        const result = await response.json();
        console.log("ì„œë²„ ì‘ë‹µ (ìˆ˜ì •)", result);
        alert("ìˆ˜ì •ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!");
        window.location.href = `detail.html?id=${storeId}`;
      } catch (error) {
        console.error("ì—ëŸ¬ ë°œìƒ (ìˆ˜ì •)", error);
        alert("ë°ì´í„° ìˆ˜ì • ì¤‘ ì—ëŸ¬ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤!");
      }

      function updateEmail() {
        const id = document.getElementById("emailId").value.trim();
        const domainSelect = document.getElementById("emailDomainSelect");
        const customDomain = document.getElementById("customDomainInput").value.trim();

        const domain = domainSelect.value === "custom" ? customDomain : domainSelect.value;

        const email = domain ? `${id}@${domain}` : "";
        document.getElementById("ownerEmail").value = email;
      }

      function handleDomainChange(selectEl) {
        const customInput = document.getElementById("customDomainInput");

        if (selectEl.value === "custom") {
          customInput.classList.remove("hidden");
          customInput.focus();
        } else {
          customInput.classList.add("hidden");
          updateEmail(); // ì„ íƒëœ ë„ë©”ì¸ìœ¼ë¡œ ì´ë©”ì¼ ê°’ ì—…ë°ì´íŠ¸
        }
      }

    }
  </script>
</body>

</html>