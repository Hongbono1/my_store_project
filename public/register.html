<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ì •ë³´ ì…ë ¥</title>
  <!-- Tailwind CSS CDN (ê°œë°œ ì¤‘ì—ëŠ” ê´œì°®ì§€ë§Œ, í”„ë¡œë•ì…˜ì—ì„œëŠ” ë¹Œë“œëœ CSS ì‚¬ìš© ê¶Œì¥) -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- ë‹¤ìŒ ìš°í¸ë²ˆí˜¸ ê²€ìƒ‰ API -->
  <script src="https://t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>
  <!-- ì¹´ì¹´ì˜¤ ì§€ë„ API (YOUR_API_KEY ë¶€ë¶„ì„ ì‹¤ì œ ì•± í‚¤ë¡œ êµì²´) -->
  <script type="text/javascript"
    src="https://dapi.kakao.com/v2/maps/sdk.js?appkey=6286d4d9bc1d503495b03f46622b5dc8&libraries=services"></script>
</head>

<body class="bg-gray-200 flex flex-col min-h-screen">
  <div id="header-placeholder"></div>
  <!-- ë©”ì¸ ì˜ì—­ -->
  <main class="flex-grow container mx-auto px-4 py-8">
    <div class="bg-white w-full max-w-4xl p-6 rounded-lg shadow-lg border-2 border-gray-300 mx-auto">
      <!-- ì œëª© -->
      <div class="flex justify-center items-center mb-6">
        <h2 class="text-3xl font-bold text-gray-800">ì •ë³´ ì…ë ¥</h2>
      </div>
      <!-- ì…ë ¥ í¼ -->
      <!-- Hidden input: storeIdê°€ ìˆìœ¼ë©´ ìˆ˜ì • ëª¨ë“œë¡œ ì¸ì‹ -->
      <form id="businessForm" enctype="multipart/form-data" class="space-y-6">
        <input type="hidden" id="storeId" name="storeId" value="" />

        <!-- [ì¶”ê°€] ì‚¬ì—…ì ë“±ë¡ ì¸ì¦ ì„¹ì…˜ (ë°©ë²• B: 3ì¹¸ ì…ë ¥) -->
        <div class="border rounded p-4 bg-yellow-50">
          <h2 class="text-xl font-semibold mb-4">ì‚¬ì—…ì ë“±ë¡ ì¸ì¦</h2>
          <div class="flex flex-col md:flex-row md:items-center gap-2 mb-3">
            <label class="w-20 font-medium leading-tight text-center">
              <span class="block">ì‚¬ì—…ì</span>
              <span class="block">ë²ˆ í˜¸</span>
            </label>
            <input type="text" id="bizNumber1" name="bizNumber1" placeholder="ì˜ˆ: 336" maxlength="4"
              oninput="this.value = this.value.replace(/[^0-9]/g, '')"
              class="flex-1 border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring focus:ring-yellow-200" />
            <span>-</span>
            <input type="text" id="bizNumber2" name="bizNumber2" placeholder="ì˜ˆ: 4" maxlength="4"
              oninput="this.value = this.value.replace(/[^0-9]/g, '')"
              class="flex-1 border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring focus:ring-yellow-200" />
            <span>-</span>
            <input type="text" id="bizNumber3" name="bizNumber3" placeholder="ì˜ˆ: 12365" maxlength="6"
              oninput="this.value = this.value.replace(/[^0-9]/g, '')"
              class="flex-1 border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring focus:ring-yellow-200" />
            <button type="button" id="verifyBizButton"
              class="ml-4 bg-yellow-500 hover:bg-yellow-600 text-white font-semibold py-2 px-4 rounded"
              onclick="verifyBizNumber()">
              ì¸ì¦
            </button>
          </div>
          <div class="flex flex-col md:flex-row md:items-center gap-2 mb-2">
            <label for="businessCertImage" class="w-32 font-medium">ë“±ë¡ì¦ ì´ë¯¸ì§€</label>
            <input type="file" id="businessCertImage" name="businessCertImage" accept="image/*,application/pdf"
              class="flex-1 border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring focus:ring-yellow-200" />
          </div>
          <p class="mt-2 text-sm text-center">
            *ì‚¬ì—…ì ë“±ë¡ì¦ì€ <span class="text-red-600">3ê°œì›” ì´ë‚´</span> ë°œê¸‰
            ë°›ì€ ê²ƒë§Œ ìœ íš¨*
          </p>
          <p id="bizVerifyResult" class="text-sm text-gray-600"></p>
        </div>

        <!-- [ì¶”ê°€] ì—…ì£¼ ì •ë³´ ì„¹ì…˜ -->
        <div class="border rounded p-4 bg-indigo-100">
          <h2 class="text-xl font-semibold mb-4">ëŒ€í‘œ ì •ë³´</h2>
          <div class="flex flex-col md:flex-row md:items-center mb-3">
            <label for="ownerName" class="w-32 font-medium">ëŒ€í‘œì ì„±í•¨</label>
            <input type="text" id="ownerName" name="ownerName" placeholder="ì˜ˆ: í™ê¸¸ë™"
              class="flex-1 border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring focus:ring-indigo-200" />
          </div>
          <div class="flex flex-col md:flex-row md:items-center mb-3">
            <label for="birthDate" class="w-32 font-medium">ìƒë…„ì›”ì¼</label>
            <input type="date" id="birthDate" name="birthDate"
              class="flex-1 border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring focus:ring-indigo-200" />
          </div>
          <div class="flex items-center gap-2 mb-4">
            <!-- ì´ë©”ì¼ (í•œ ì¤„) -->
            <div class="flex flex-col md:flex-row md:items-center mb-3">
              <!-- ë¼ë²¨: ë‹¤ë¥¸ ë¼ë²¨ê³¼ ë™ì¼ í­ (ì˜ˆ: w-32) -->
              <label for="emailId" class="w-32 font-medium">ì´ë©”ì¼</label>

              <!-- ì˜¤ë¥¸ìª½: ì•„ì´ë”” + @ + ë„ë©”ì¸ -->
              <div class="flex-1 flex items-center gap-2">
                <!-- ì•„ì´ë”” ì…ë ¥ -->
                <input type="text" id="emailId" placeholder="ì•„ì´ë””"
                  class="w-80 border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring focus:ring-indigo-200"
                  oninput="updateEmail()" />

                <!-- @ ê¸°í˜¸ (ê³ ì •) -->
                <span class="font-semibold text-gray-600 mx-1">@</span>

                <!-- ë„ë©”ì¸ (select â†” input í† ê¸€ ì˜ì—­) -->
                <div class="relative flex-1">
                  <!-- ì„ íƒ ë°•ìŠ¤ (ê¸°ë³¸ ë³´ì„) -->
                  <select id="emailDomainSelect"
                    class="w-80 border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring focus:ring-indigo-200"
                    onchange="handleDomainChange(this)">
                    <option value="">ì„ íƒí•˜ì„¸ìš”</option>
                    <option value="naver.com">naver.com</option>
                    <option value="gmail.com">gmail.com</option>
                    <option value="daum.net">daum.net</option>
                    <option value="kakao.com">kakao.com</option>
                    <option value="nate.com">nate.com</option>
                    <option value="custom">ì§ì ‘ì…ë ¥</option>
                  </select>

                  <!-- ì§ì ‘ ì…ë ¥ ì¹¸ (ê¸°ë³¸ hidden) -->
                  <input type="text" id="customDomainInput" placeholder="ë„ë©”ì¸ ì…ë ¥"
                    class="absolute inset-0 w-full h-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring focus:ring-indigo-200 hidden"
                    oninput="updateEmail()" />
                </div>
              </div>
            </div>

            <!-- ìµœì¢… ì‹¤ì œ ì „ì†¡ìš© ìˆ¨ê¹€ í•„ë“œ -->
            <input type="hidden" id="ownerEmail" name="ownerEmail" />
          </div>

          <!-- ì‹¤ì œ ì „ì†¡ë  ì´ë©”ì¼ ì „ì²´ ì£¼ì†Œ -->
          <div class="flex flex-col md:flex-row md:items-center mb-3">
            <label for="ownerAddress" class="w-32 font-medium">ëŒ€í‘œ ì£¼ì†Œ</label>
            <input type="text" id="ownerAddress" name="ownerAddress" placeholder="ì˜ˆ: ì„œìš¸ì‹œ ê°•ë‚¨êµ¬ ..."
              class="flex-1 border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring focus:ring-indigo-200" />
          </div>
          <div class="flex flex-col md:flex-row md:items-center">
            <label for="ownerPhone" class="w-32 font-medium">í•¸ë“œí° ë²ˆí˜¸</label>
            <input type="text" id="ownerPhone" name="ownerPhone" placeholder="ex) 010-1234-5678"
              class="flex-1 border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring focus:ring-indigo-200" />
          </div>
        </div>

        <!-- [ì¶”ê°€] íœ´ëŒ€ì „í™” ì¸ì¦ ì„¹ì…˜ -->
        <div class="border rounded p-4 bg-indigo-50">
          <h2 class="text-xl font-semibold mb-4">íœ´ëŒ€ì „í™” ì¸ì¦</h2>
          <div class="flex flex-col md:flex-row md:items-center gap-2 mb-3">
            <label for="phoneAuth" class="w-32 font-medium">ì¸ì¦ë²ˆí˜¸</label>
            <input type="text" id="phoneAuth" name="phoneAuth" placeholder="ì¸ì¦ë²ˆí˜¸ ì…ë ¥"
              class="flex-1 border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring focus:ring-indigo-200" />
            <button type="button" id="verifyPhoneButton"
              class="ml-4 bg-indigo-500 hover:bg-indigo-600 text-white font-semibold py-2 px-4 rounded">
              ì¸ì¦ ìš”ì²­
            </button>
          </div>
          <p id="phoneVerifyResult" class="text-sm text-gray-600"></p>
        </div>

        <!-- ê¸°ë³¸ ì •ë³´ (ê°€ê²Œ ê´€ë ¨ ì •ë³´) -->
        <div class="border rounded p-4 bg-gray-50">
          <h2 class="text-xl font-semibold mb-4">ê¸°ë³¸ ì •ë³´</h2>
          <div class="flex flex-col md:flex-row md:items-center mb-3">
            <label for="businessName" class="w-32 font-medium">ìƒí˜¸</label>
            <input type="text" id="businessName" name="businessName" placeholder="ex) OO ì‹ë‹¹, ì¹´í˜ XX ë“±"
              class="flex-1 border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring focus:ring-blue-200" />
          </div>
          <div class="flex flex-col md:flex-row md:items-center mb-3">
            <label for="businessType" class="w-32 font-medium">ì—…ì¢…</label>
            <input type="text" id="businessType" name="businessType" placeholder="ex) ìŒì‹ì , ì¹´í˜, ê¸°íƒ€"
              class="flex-1 border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring focus:ring-blue-200" />
          </div>
          <div class="flex flex-col md:flex-row md:items-center mb-3">
            <label for="deliveryOption" class="w-32 font-medium">ë°°ì†¡/í…Œì´í¬ì•„ì›ƒ</label>
            <select id="deliveryOption" name="deliveryOption"
              class="mt-1 md:mt-0 flex-1 border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring focus:ring-blue-200">
              <option value="ê°€ëŠ¥">ê°€ëŠ¥</option>
              <option value="ë¶ˆê°€ëŠ¥">ë¶ˆê°€ëŠ¥</option>
            </select>
          </div>
          <div class="flex flex-col md:flex-row md:items-center">
            <label for="businessHours" class="w-32 font-medium">ì˜ì—…ì‹œê°„</label>
            <input type="text" id="businessHours" name="businessHours" placeholder="ex) 09:00 ~ 22:00"
              class="flex-1 border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring focus:ring-blue-200" />
          </div>
        </div>

        <!-- ì„œë¹„ìŠ¤ ë‚´ìš© -->
        <div class="border rounded p-4 bg-gray-50">
          <h2 class="text-xl font-semibold mb-4">ì„œë¹„ìŠ¤ ë‚´ìš©</h2>
          <textarea id="serviceDetails" name="serviceDetails" placeholder="ì„œë¹„ìŠ¤ ê´€ë ¨ ìƒì„¸ ì„¤ëª…, ë©”ë‰´, ì˜ˆì•½ ì •ë³´ ë“±ì„ ì…ë ¥í•˜ì„¸ìš”."
            class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring focus:ring-blue-200"
            rows="4"></textarea>
        </div>

        <!-- ê³ ê° ì´ë²¤íŠ¸ -->
        <div class="border rounded p-4 bg-gray-50">
          <h2 class="text-xl font-semibold mb-4">ê³ ê° ì´ë²¤íŠ¸</h2>
          <div class="mb-3">
            <label for="event1" class="block font-medium mb-1">ì´ë²¤íŠ¸ ë‚´ìš© 1</label>
            <input type="text" id="event1" name="event1" placeholder="ì´ë²¤íŠ¸ ë‚´ìš© 1"
              class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring focus:ring-blue-200" />
          </div>
          <div>
            <label for="event2" class="block font-medium mb-1">ì´ë²¤íŠ¸ ë‚´ìš© 2</label>
            <input type="text" id="event2" name="event2" placeholder="ì´ë²¤íŠ¸ ë‚´ìš© 2"
              class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring focus:ring-blue-200" />
          </div>
        </div>

        <!-- ê¸°íƒ€ ì •ë³´ -->
        <div class="border rounded p-4 bg-gray-50">
          <h2 class="text-xl font-semibold mb-4">ê¸°íƒ€ ì •ë³´</h2>
          <div class="flex flex-col md:flex-row md:items-center mb-3">
            <label for="facility" class="w-32 font-medium">ì¥ì• ì¸ í¸ì˜ì‹œì„¤</label>
            <input type="text" id="facility" name="facility" placeholder="ì˜ˆ: ìˆìŒ / ì—†ìŒ / ê°„ë‹¨ ì„¤ëª…"
              class="flex-1 border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring focus:ring-blue-200" />
          </div>
          <div class="flex flex-col md:flex-row md:items-center mb-3">
            <label for="pets" class="w-32 font-medium">ë°˜ë ¤ë™ë¬¼ ì¶œì…</label>
            <input type="text" id="pets" name="pets" placeholder="ì˜ˆ: ê°€ëŠ¥(ì†Œí˜•ê²¬ë§Œ) / ë¶ˆê°€ëŠ¥ ë“±"
              class="flex-1 border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring focus:ring-blue-200" />
          </div>
          <div class="flex flex-col md:flex-row md:items-center">
            <label for="parking" class="w-32 font-medium">ì£¼ì°¨ì •ë³´</label>
            <input type="text" id="parking" name="parking" placeholder="ì˜ˆ: ì „ìš©ì£¼ì°¨ì¥ / ìœ ë£Œì£¼ì°¨ / ë¶ˆê°€ëŠ¥ ë“±"
              class="flex-1 border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring focus:ring-blue-200" />
          </div>
        </div>


        <!-- ë©”ë‰´ ì¹´í…Œê³ ë¦¬ / í’ˆëª©ì…ë ¥ -->
        <div class="bg-white p-4 rounded shadow mt-6">
          <h3 class="text-xl font-semibold mb-2">STEP 5. ë©”ë‰´ ë“±ë¡</h3>

          <!-- ì¹´í…Œê³ ë¦¬ ì…ë ¥ ì˜ì—­ -->
          <div class="flex items-center gap-2 mb-4">
            <input type="text" id="categoryInput" class="border border-gray-300 px-3 py-2 rounded w-full"
              placeholder="ì¹´í…Œê³ ë¦¬ëª… ì…ë ¥ (ì˜ˆ: ëˆê°€ìŠ¤, ìš°ë™)" />
            <button type="button" onclick="addCategory()" class="bg-gray-600 text-white px-4 py-2 rounded">
              êµ¬ë¶„ í’ˆëª©
            </button>
          </div>

          <!-- í’ˆëª© ì…ë ¥ ì•ˆë‚´ -->
          <div class="border rounded p-4 bg-gray-50">
            <h2 class="text-xl font-semibold mb-4">í’ˆëª© ì…ë ¥ (ì¹´í…Œê³ ë¦¬ë³„ ìµœëŒ€ 50ê°œ)</h2>

            <!-- ì¹´í…Œê³ ë¦¬ ë° í’ˆëª©ì´ ë“¤ì–´ê°€ëŠ” ì˜ì—­ -->
            <div id="menuContainer" class="space-y-6"></div>
          </div>
        </div>

        <!-- ì—°ë½ì²˜ (ê°€ê²Œ ê´€ë ¨ ì—°ë½ ì •ë³´) -->
        <div class="border rounded p-4 bg-gray-50">
          <h2 class="text-xl font-semibold mb-4">ì—°ë½ì²˜</h2>
          <div class="flex flex-col md:flex-row md:items-center mb-3">
            <label for="phoneNumber" class="w-32 font-medium">ëŒ€í‘œì „í™”</label>
            <input type="text" id="phoneNumber" name="phoneNumber" placeholder="ex) 02-123-4567"
              class="flex-1 border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring focus:ring-blue-200" />
          </div>
          <div class="flex flex-col md:flex-row md:items-center mb-3">
            <label for="homepage" class="w-32 font-medium">í™ˆí˜ì´ì§€/ë¸”ë¡œê·¸</label>
            <input type="text" id="homepage" name="homepage" placeholder="URLì„ ì…ë ¥í•˜ì„¸ìš”"
              class="flex-1 border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring focus:ring-blue-200" />
          </div>
          <!-- ì¸ìŠ¤íƒ€ê·¸ë¨ ì£¼ì†Œ ì…ë ¥ -->
          <div class="flex flex-col md:flex-row md:items-center mb-3">
            <label for="instagram" class="w-32 font-medium">ì¸ìŠ¤íƒ€ê·¸ë¨</label>
            <input type="text" id="instagram" name="instagram" placeholder="ì¸ìŠ¤íƒ€ê·¸ë¨ URL"
              class="flex-1 border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring focus:ring-blue-200" />
          </div>
          <!-- í˜ì´ìŠ¤ë¶ ì£¼ì†Œ ì…ë ¥ -->
          <div class="flex flex-col md:flex-row md:items-center">
            <label for="facebook" class="w-32 font-medium">í˜ì´ìŠ¤ë¶</label>
            <input type="text" id="facebook" name="facebook" placeholder="í˜ì´ìŠ¤ë¶ URL"
              class="flex-1 border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring focus:ring-blue-200" />
          </div>
        </div>

        <!-- ì¶”ê°€ ì„¤ëª… -->
        <div class="border rounded p-4 bg-gray-50">
          <h2 class="text-xl font-semibold mb-4">ì¶”ê°€ ì„¤ëª…</h2>
          <textarea id="additionalDesc" name="additionalDesc" placeholder="ì¶”ê°€ ì„¤ëª…ì„ ì…ë ¥í•˜ì„¸ìš”."
            class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring focus:ring-blue-200"
            rows="4"></textarea>
        </div>

        <!-- ì´ë¯¸ì§€ ë“±ë¡ (ìµœëŒ€ 3ì¥) : ê°€ê²Œ ëŒ€í‘œ ì´ë¯¸ì§€ -->
        <div class="border rounded p-4 bg-gray-50">
          <h2 class="text-xl font-semibold mb-4">ì´ë¯¸ì§€ ë“±ë¡ (ìµœëŒ€ 3ì¥)</h2>
          <input type="file" id="imagesInput" name="images[]" accept="image/*" multiple
            class="block w-full mb-3 file:mr-4 file:py-2 file:px-4 file:rounded file:border-0 file:bg-blue-100 file:text-blue-700 hover:file:bg-blue-200" />
          <div id="imagesPreview" class="flex gap-3"></div>
        </div>

        <!-- ì£¼ì†Œ ì…ë ¥ -->
        <div class="border rounded p-4 bg-gray-50">
          <h2 class="text-xl font-semibold mb-4">ì£¼ì†Œ ì…ë ¥</h2>
          <!-- ìš°í¸ë²ˆí˜¸ ë° ì£¼ì†Œ ê²€ìƒ‰ ë²„íŠ¼ -->
          <div class="flex flex-col md:flex-row md:items-center gap-2 mb-3">
            <label for="postalCode" class="w-32 font-medium">ìš°í¸ë²ˆí˜¸</label>
            <input type="text" id="postalCode" name="postalCode" placeholder="ìš°í¸ë²ˆí˜¸" readonly
              class="flex-1 border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring focus:ring-blue-200" />
            <button type="button" onclick="openDaumPostcode()"
              class="bg-blue-500 hover:bg-blue-600 text-white font-semibold px-4 py-2 rounded">
              ì£¼ì†Œ ì°¾ê¸°
            </button>
          </div>
          <!-- ë„ë¡œëª… ì£¼ì†Œ -->
          <div class="flex flex-col md:flex-row md:items-center gap-2 mb-3">
            <label for="roadAddress" class="w-32 font-medium">ë„ë¡œëª… ì£¼ì†Œ</label>
            <input type="text" id="roadAddress" name="roadAddress" placeholder="ë„ë¡œëª… ì£¼ì†Œ" readonly
              class="flex-1 border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring focus:ring-blue-200" />
          </div>
          <!-- ìƒì„¸ ì£¼ì†Œ -->
          <div class="flex flex-col md:flex-row md:items-center gap-2">
            <label for="detailAddress" class="w-32 font-medium">ìƒì„¸ ì£¼ì†Œ</label>
            <input type="text" id="detailAddress" name="detailAddress" placeholder="ìƒì„¸ ì£¼ì†Œë¥¼ ì…ë ¥í•˜ì„¸ìš”"
              class="flex-1 border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring focus:ring-blue-200" />
          </div>
          <!-- ì§€ë„ ì˜ì—­ -->
          <div id="map" class="mt-4 w-full h-64 border border-gray-300 rounded"></div>
        </div>

        <!-- ì œì¶œ ë° ìˆ˜ì • ë²„íŠ¼ -->
        <div class="text-center space-x-4">
          <!-- ì…ë ¥ ì™„ë£Œ ë²„íŠ¼ -->
          <button type="submit" class="bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-6 rounded">
            ì…ë ¥ ì™„ë£Œ
          </button>
          <!-- ìˆ˜ì • ë²„íŠ¼ -->
          <button type="button" class="bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-6 rounded"
            onclick="updateData()">
            ìˆ˜ì •
          </button>
        </div>
      </form>
    </div>
  </main>

  <div id="footer-placeholder"></div>

  <!-- âœ… ë©”ë‰´ ë“±ë¡Â·ì¹´í…Œê³ ë¦¬ ê´€ë¦¬ê¹Œì§€ í¬í•¨í•œ í†µí•© JavaScript -->
  <script>
    /* ----------------------------------------------------
       ê³µí†µ ì´ë©”ì¼ ìœ í‹¸
    ---------------------------------------------------- */
    function updateEmail () {
      const id          = document.getElementById('emailId').value.trim();
      const domainSel   = document.getElementById('emailDomainSelect');
      const custom      = document.getElementById('customDomainInput').value.trim();
      const domain      = domainSel.value === 'custom' ? custom : domainSel.value;
      document.getElementById('ownerEmail').value = domain ? `${id}@${domain}` : '';
    }
    function handleDomainChange (sel) {
      const customInp = document.getElementById('customDomainInput');
      if (sel.value === 'custom') {
        customInp.classList.remove('hidden');
        customInp.focus();
      } else {
        customInp.classList.add('hidden');
        updateEmail();
      }
    }
    
    /* ----------------------------------------------------
       ì¸ë„¤ì¼ ì´ë¯¸ì§€ 3ì¥ ë¯¸ë¦¬ë³´ê¸°
    ---------------------------------------------------- */
    const imagesInput   = document.getElementById('imagesInput');
    const imagesPreview = document.getElementById('imagesPreview');
    imagesInput.addEventListener('change', () => {
      imagesPreview.innerHTML = '';
      Array.from(imagesInput.files).slice(0, 3).forEach(file => {
        const reader = new FileReader();
        reader.onload = e => {
          const img   = document.createElement('img');
          img.src     = e.target.result;
          img.className = 'w-32 h-20 object-cover border border-gray-300 rounded';
          imagesPreview.appendChild(img);
        };
        reader.readAsDataURL(file);
      });
    });
    
    /* ----------------------------------------------------
       ì£¼ì†Œ ê²€ìƒ‰ + Kakao ì§€ë„
    ---------------------------------------------------- */
    function openDaumPostcode () {
      new daum.Postcode({
        oncomplete: data => {
          document.getElementById('postalCode').value  = data.zonecode;
          document.getElementById('roadAddress').value = data.roadAddress;
          updateMap(data.roadAddress);
          document.getElementById('detailAddress').focus();
        }
      }).open({ autoClose: true });
    }
    
    let map, marker;
    function updateMap (addr) {
      const mapEl = document.getElementById('map');
      if (!map) {
        map = new kakao.maps.Map(mapEl, {
          center : new kakao.maps.LatLng(37.5665, 126.978),
          level  : 3
        });
      }
      const geocoder = new kakao.maps.services.Geocoder();
      geocoder.addressSearch(addr, (res, status) => {
        if (status === kakao.maps.services.Status.OK) {
          const coords = new kakao.maps.LatLng(res[0].y, res[0].x);
          map.setCenter(coords);
          if (marker) marker.setPosition(coords);
          else        marker = new kakao.maps.Marker({ map, position: coords });
        }
      });
    }
    document.getElementById('detailAddress').addEventListener('blur', () => {
      const base   = document.getElementById('roadAddress').value.trim();
      const detail = document.getElementById('detailAddress').value.trim();
      if (base || detail) updateMap(`${base} ${detail}`);
    });
    
    /* ----------------------------------------------------
       ê°€ê²© ì…ë ¥ ì„¸ ìë¦¬ ì½¤ë§ˆ
    ---------------------------------------------------- */
    function formatCurrency (inp) {
      let v      = inp.value.replace(/[^0-9.]/g, '');
      const p    = v.split('.');
      if (p.length > 2) v = p[0] + '.' + p.slice(1).join('');
      let int    = p[0] || '';
      let dec    = p[1] || '';
      if (!int && !dec) { inp.value = ''; return; }
      if (dec.length > 2) dec = dec.slice(0, 2);
      int = int.replace(/\B(?=(\d{3})+(?!\d))/g, ',');
      inp.value = dec ? `${int}.${dec}` : int;
    }
    
    /* ----------------------------------------------------
       ë©”ë‰´ Â· ì¹´í…Œê³ ë¦¬ ê´€ë¦¬
    ---------------------------------------------------- */
    let totalMenuCount = 0;
    const MAX_MENUS    = 50;
    
    /* ì¹´í…Œê³ ë¦¬(êµ¬ë¶„) ì¶”ê°€ */
    function addCategory () {
      const catName = document.getElementById('categoryInput').value.trim();
      if (!catName) { alert('ì¹´í…Œê³ ë¦¬ëª…ì„ ì…ë ¥í•˜ì„¸ìš”.'); return; }
    
      const menuContainer = document.getElementById('menuContainer');
      const catId         = `cat-${Date.now()}`;
    
      const catBlock = document.createElement('div');
      catBlock.className      = 'border border-gray-300 p-4 rounded bg-gray-50';
      catBlock.dataset.category = catName;
    
      catBlock.innerHTML = `
        <div class="flex justify-between items-center mb-3">
          <h4 class="text-lg font-bold">${catName}</h4>
          <button type="button"
                  onclick="removeCategory(this)"
                  class="text-red-500 text-sm bg-white border border-red-400 px-2 py-1 rounded hover:bg-red-50">
            ì¹´í…Œê³ ë¦¬ ì‚­ì œ
          </button>
        </div>
        <input type="hidden" name="category[]" value="${catName}">
        <div id="${catId}" class="space-y-2"></div>
        <button type="button"
                class="mt-2 bg-blue-500 hover:bg-blue-600 text-white px-3 py-1 rounded"
                onclick="addMenu('${catId}', '${catName}')">
          + ë©”ë‰´ ì¶”ê°€
        </button>
      `;
      menuContainer.appendChild(catBlock);
      document.getElementById('categoryInput').value = '';
    
      /* ê¸°ë³¸ ë©”ë‰´ 1ê°œ ìë™ ì¶”ê°€ */
      addMenu(catId, catName);
    }
    
    /* í’ˆëª©(ë©”ë‰´) ì¶”ê°€ : íŒŒì¼ì„ íƒ â†’ ë©”ë‰´ëª… â†’ ê°€ê²© */
    function addMenu (catContainerId, catName) {
      if (totalMenuCount >= MAX_MENUS) {
        alert('ë©”ë‰´ëŠ” ìµœëŒ€ 50ê°œê¹Œì§€ë§Œ ì¶”ê°€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.');
        return;
      }
      totalMenuCount++;
    
      const cont = document.getElementById(catContainerId);
      const row  = document.createElement('div');
      row.className = 'flex items-center gap-2';
    
      row.innerHTML = `
        <input type="hidden" name="menuCategory[]" value="${catName}">
        <input type="file"  name="menuImage[]"  accept="image/*"
               class="w-1/3 border border-gray-300 rounded px-2 py-1">
        <input type="text"  name="menuName[]"   placeholder="ë©”ë‰´ëª…"
               class="flex-1 border border-gray-300 rounded px-2 py-1">
        <input type="text"  name="menuPrice[]"  placeholder="ê°€ê²©"
               class="w-32 border border-gray-300 rounded px-2 py-1"
               oninput="formatCurrency(this)">
        <button type="button"
                onclick="removeMenu(this)"
                class="text-red-500 text-lg">
          ğŸ—‘ï¸
        </button>
      `;
      cont.appendChild(row);
    }
    
    function removeMenu (btn) {
      btn.parentElement.remove();
      totalMenuCount--;
    }
    function removeCategory (btn) {
      const block  = btn.closest('div.border');
      const menus  = block.querySelectorAll('input[name="menuName[]"]').length;
      totalMenuCount -= menus;
      block.remove();
    }
    
    /* ----------------------------------------------------
       ì‚¬ì—…ì ë“±ë¡ë²ˆí˜¸ ì¸ì¦ ( /verify-biz )
    ---------------------------------------------------- */
    async function verifyBizNumber () {
      const n1  = document.getElementById('bizNumber1').value.trim();
      const n2  = document.getElementById('bizNumber2').value.trim();
      const n3  = document.getElementById('bizNumber3').value.trim();
      const biz = n1 + n2 + n3;
    
      const resEl   = document.getElementById('bizVerifyResult');
      const nameInp = document.getElementById('businessName');
    
      if (!/^\d{10}$/.test(biz)) {
        resEl.textContent = 'ì˜¬ë°”ë¥¸ ì‚¬ì—…ìë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš” (ì´ 10ìë¦¬ ìˆ«ì)';
        resEl.className   = 'text-sm text-red-600';
        return;
      }
    
      try {
        const r  = await fetch('/verify-biz', {
          method  : 'POST',
          headers : { 'Content-Type': 'application/json' },
          body    : JSON.stringify({ b_no: [biz] })
        });
        const d  = await r.json();
        const i  = d?.data?.[0];
    
        if (i && i.b_stt_cd === '01') {
          resEl.textContent = `âœ… ì¸ì¦ ì™„ë£Œ: ${i.b_no}`;
          resEl.className   = 'text-sm text-green-600 text-center';
          nameInp.value     = i.b_nm || '';
          if (!i.b_nm) nameInp.placeholder = 'ìë™ì…ë ¥ ì‹¤íŒ¨ - ìƒí˜¸ëª…ì„ ì…ë ¥í•˜ì„¸ìš”';
        } else {
          resEl.textContent = 'âŒ ë“±ë¡ë˜ì§€ ì•Šì•˜ê±°ë‚˜ íì—…ëœ ì‚¬ì—…ìì…ë‹ˆë‹¤.';
          resEl.className   = 'text-sm text-red-600 text-center';
        }
      } catch (err) {
        console.error(err);
        resEl.textContent = 'ì„œë²„ ì˜¤ë¥˜ë¡œ ì¸ì¦ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.';
        resEl.className   = 'text-sm text-red-600 text-center';
      }
    }
    
    /* ----------------------------------------------------
       íœ´ëŒ€ì „í™” ì¸ì¦ (í…ŒìŠ¤íŠ¸)
    ---------------------------------------------------- */
    document.getElementById('verifyPhoneButton').addEventListener('click', () => {
      const phone  = document.getElementById('ownerPhone').value.trim();
      const resEl  = document.getElementById('phoneVerifyResult');
      if (!phone) {
        resEl.textContent = 'í•¸ë“œí° ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.';
        resEl.className   = 'text-sm text-red-600';
        return;
      }
      resEl.textContent = 'ì¸ì¦ë²ˆí˜¸ê°€ ë°œì†¡ë˜ì—ˆìŠµë‹ˆë‹¤. (í…ŒìŠ¤íŠ¸ ì½”ë“œ: 123456)';
      resEl.className   = 'text-sm text-green-600';
    });
    document.getElementById('phoneAuth').addEventListener('blur', function () {
      const code  = this.value.trim();
      const resEl = document.getElementById('phoneVerifyResult');
      if (code === '123456') {
        resEl.textContent = 'íœ´ëŒ€ì „í™” ì¸ì¦ ì„±ê³µ.';
        resEl.className   = 'text-sm text-green-600';
      } else {
        resEl.textContent = 'ì¸ì¦ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.';
        resEl.className   = 'text-sm text-red-600';
      }
    });
    
    /* ----------------------------------------------------
       í—¤ë” / í‘¸í„° í¬í•¨
    ---------------------------------------------------- */
    fetch('/components/header.html')
      .then(r => r.text())
      .then(d => (document.getElementById('header-placeholder').innerHTML = d));
    fetch('/components/footer.html')
      .then(r => r.text())
      .then(d => (document.getElementById('footer-placeholder').innerHTML = d));
    
    /* ----------------------------------------------------
       í¼ ì œì¶œ (ë“±ë¡)
    ---------------------------------------------------- */
    const form = document.getElementById('businessForm');
    form.addEventListener('submit', async e => {
      e.preventDefault();
      try {
        const fd = new FormData(form);
    
        /* ì‚¬ì—…ìë²ˆí˜¸ ë³‘í•© */
        const biz =
          document.getElementById('bizNumber1').value.trim() +
          document.getElementById('bizNumber2').value.trim() +
          document.getElementById('bizNumber3').value.trim();
        fd.append('bizNumber', biz);
    
        /* ê°€ê²© ì½¤ë§ˆ ì œê±° */
        const priceInputs = form.querySelectorAll('input[name="menuPrice[]"]');
        fd.delete('menuPrice[]');
        priceInputs.forEach(i => fd.append('menuPrice[]', i.value.replace(/,/g, '')));
    
        /* ì´ë©”ì¼ í™•ì • */
        fd.delete('ownerEmail');
        fd.append('ownerEmail', document.getElementById('ownerEmail').value);
    
        const res = await fetch('/store', { method: 'POST', body: fd });
        if (!res.ok) throw new Error('ì„œë²„ ì‘ë‹µ ì—ëŸ¬');
        const result = await res.json();
        alert('ë“±ë¡ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!');
        window.location.href = `detail.html?id=${result.storeId}`;
      } catch (err) {
        console.error(err);
        alert('ë°ì´í„° ì „ì†¡ ì¤‘ ì—ëŸ¬ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤!');
      }
    });
    
    /* ----------------------------------------------------
       ìˆ˜ì • ë¡œì§
    ---------------------------------------------------- */
    async function updateData () {
      const storeId = document.getElementById('storeId').value;
      if (!storeId) {
        alert('ìˆ˜ì •í•  ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤. ë¨¼ì € ë“±ë¡ì„ ì§„í–‰í•˜ì„¸ìš”.');
        return;
      }
      try {
        const fd = new FormData(form);
        const priceInputs = form.querySelectorAll('input[name="menuPrice[]"]');
        fd.delete('menuPrice[]');
        priceInputs.forEach(i => fd.append('menuPrice[]', i.value.replace(/,/g, '')));
    
        const res = await fetch(`/store/${storeId}`, { method: 'PUT', body: fd });
        if (!res.ok) throw new Error('ì„œë²„ ì‘ë‹µ ì—ëŸ¬ (ìˆ˜ì •)');
        alert('ìˆ˜ì •ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!');
        window.location.href = `detail.html?id=${storeId}`;
      } catch (err) {
        console.error(err);
        alert('ë°ì´í„° ìˆ˜ì • ì¤‘ ì—ëŸ¬ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤!');
      }
    }
    </script>
    