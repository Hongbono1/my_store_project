<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ê´‘ê³  í™ˆí˜ì´ì§€ - í•œì‹</title>
  <link rel="stylesheet" href="/assets/css/tailwind.css" />
</head>

<body class="bg-gradient-to-br from-blue-50 via-white to-blue-100 min-h-screen">
  <!-- í—¤ë” -->
  <jsp:include page="components/header.html" />

  <main class="w-full max-w-7xl mx-auto px-4 sm:px-8 py-10 flex-1">
    <!-- HERO -->
    <!-- ë©”ì¸ ë¹„ì£¼ì–¼/íƒ€ì´í‹€ ì„¹ì…˜ -->
    <section class="w-full bg-white py-16 border-b border-gray-100">
      <div class="max-w-6xl mx-auto flex flex-col lg:flex-row items-center px-6 min-h-[320px]">
        <!-- ì™¼ìª½: íƒ€ì´í‹€/ê²€ìƒ‰ -->
        <div class="flex-1 flex flex-col justify-center items-start lg:pr-12">
          <h1 class="text-4xl md:text-5xl font-extrabold text-blue-700 mb-3 leading-tight">
            ìš°ë¦¬ë™ë„¤<br>ë¡œì»¬í”Œë«í¼
          </h1>
          <p class="text-lg md:text-xl text-gray-700 mb-8 font-semibold">
            ëª¨ë“  ë™ë„¤ ì •ë³´, ë§›ì§‘, ì—…ì²´ ì •ë³´(ìƒì„¸/ë¦¬ë·°/ë¬¸ì˜ ëª¨ë‘ í•œê³³ì—ì„œ)
          </p>
          <!-- ê²€ìƒ‰ë°•ìŠ¤, ë” ê¸¸ê²Œ! -->
          <form class="w-full max-w-lg">
            <div class="flex bg-gray-50 rounded-xl shadow">
              <input type="text" placeholder="ê°€ê²Œëª…/ì—…ì¢…ì„ ê²€ìƒ‰í•˜ì„¸ìš”"
                class="flex-1 outline-none border-0 bg-transparent text-base py-3 px-4 rounded-l-xl" />
              <button type="submit"
                class="px-8 py-3 bg-blue-500 text-white font-semibold rounded-r-xl hover:bg-blue-600 transition">
                ê²€ìƒ‰
              </button>
            </div>
          </form>
        </div>
        <!-- ì˜¤ë¥¸ìª½: ì´ë¯¸ì§€ ë°•ìŠ¤(ë” í¼) -->
        <div
          class="w-full lg:w-[600px] h-[400px] mt-12 lg:mt-0 rounded-2xl overflow-hidden shadow-xl border-2 border-black bg-white flex items-center justify-center">
          <img src="https://images.unsplash.com/photo-1506744038136-46273834b3fb?auto=format&fit=cover&w=400&q=80"
            alt="ë™ë„¤ ëŒ€í‘œì´ë¯¸ì§€" class="object-cover w-[60%] h-[60%] rounded-xl" />
        </div>
      </div>
    </section>


    <!-- ìŠ¤í¬ë¡¤ ë²„íŠ¼ (ì¹´í…Œê³ ë¦¬ ì„ íƒ ì˜ì—­) -->
    <section id="categorySelection" class="bg-white p-4 rounded-lg shadow border border-gray-300 mt-8 mb-8">
      <div class="bg-blue-100 p-6 rounded-lg">
        <h2 class="text-2xl font-bold mb-6">ìŠ¤í¬ë¡¤ ì„ íƒ</h2>
        <div class="flex overflow-x-auto space-x-3 py-3">

          <!-- ë°¥ -->
          <button
            class="category-btn bg-white text-[#2C3E50] font-medium px-5 py-2 text-lg rounded-full border border-[#748CAB] shadow-md hover:bg-[#7F9BBF] transition"
            data-category="ë°¥">ë°¥ (ë¹„ë¹”ë°¥/ë®ë°¥/ë°±ë°˜)</button>

          <!-- ì°Œê°œ/íƒ• -->
          <button
            class="category-btn bg-white text-[#2C3E50] font-medium px-5 py-2 text-lg rounded-full border border-[#748CAB] shadow-md hover:bg-[#7F9BBF] transition"
            data-category="ì°Œê°œ/íƒ•/êµ­">ì°Œê°œ/íƒ•/êµ­</button>

          <!-- ê³ ê¸°/êµ¬ì´ -->
          <button
            class="category-btn bg-white text-[#2C3E50] font-medium px-5 py-2 text-lg rounded-full border border-[#748CAB] shadow-md hover:bg-[#7F9BBF] transition"
            data-category="ê³ ê¸°/êµ¬ì´">ê³ ê¸°/êµ¬ì´ (ì œìœ¡ë³¶ìŒ)</button>

          <!-- ìƒì„  -->
          <button
            class="category-btn bg-white text-[#2C3E50] font-medium px-5 py-2 text-lg rounded-full border border-[#748CAB] shadow-md hover:bg-[#7F9BBF] transition"
            data-category="ìƒì„ ">ìƒì„ </button>

          <!-- ì¡±ë°œ/ë³´ìŒˆ -->
          <button
            class="category-btn bg-white text-[#2C3E50] font-medium px-5 py-2 text-lg rounded-full border border-[#748CAB] shadow-md hover:bg-[#7F9BBF] transition"
            data-category="ì¡±ë°œ/ë³´ìŒˆ">ì¡±ë°œ/ë³´ìŒˆ</button>

          <!-- êµ­ë°¥ -->
          <button
            class="category-btn bg-white text-[#2C3E50] font-medium px-5 py-2 text-lg rounded-full border border-[#748CAB] shadow-md hover:bg-[#7F9BBF] transition"
            data-category="êµ­ë°¥">êµ­ë°¥</button>

          <!-- ë°˜ì°¬ -->
          <button
            class="category-btn bg-white text-[#2C3E50] font-medium px-5 py-2 text-lg rounded-full border border-[#748CAB] shadow-md hover:bg-[#7F9BBF] transition"
            data-category="ë°˜ì°¬">ë°˜ì°¬</button>

          <!-- ì—¬ëŸ¬ê°€ì§€ -->
          <button
            class="category-btn bg-white text-[#2C3E50] font-medium px-5 py-2 text-lg rounded-full border border-[#748CAB] shadow-md hover:bg-[#7F9BBF] transition"
            data-category="ì—¬ëŸ¬ê°€ì§€">ì—¬ëŸ¬ê°€ì§€</button>
        </div>
      </div>
    </section>

    <section id="storeList" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 p-6">
      <!-- JSì—ì„œ makeCardHTML â†’ createAdCard ë¡œ ìƒì„±ëœ ì¹´ë“œê°€ ë“¤ì–´ê°‘ë‹ˆë‹¤ -->
    </section>

    <!-- íŒŒì›Œ ê´‘ê³  (SSR ì‹œë®¬ë ˆì´ì…˜) - 4ê°œ ê´‘ê³  ë°•ìŠ¤ -->
    <section id="powerAdsSection" class="bg-yellow-50 border-4 border-yellow-400 shadow-lg rounded-lg p-6">
      <h2 class="text-2xl font-bold mb-4">íŒŒì›Œ ê´‘ê³ </h2>
      <div id="powerAdsContainer" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6">
        <div
          class="ad-card relative bg-yellow-50 border-4 border-yellow-400 shadow-lg rounded-lg p-6 flex flex-col transform transition duration-300 hover:-translate-y-2 hover:shadow-2xl"
          data-title="íŒŒì›Œ ê´‘ê³  1" data-phone="010-1111-2222" data-category="ì‹ë‹¹"
          data-img="https://via.placeholder.com/300x200/111111" data-events="ì‹ ê·œ í• ì¸" data-facilities="íœ ì²´ì–´ ì ‘ê·¼ ê°€ëŠ¥"
          data-parking="ë¬´ë£Œ ì£¼ì°¨">
          <div class="absolute top-2 right-2 bg-red-500 text-white px-2 py-1 text-xs rounded">íŒŒì›Œê´‘ê³ </div>
          <img src="https://via.placeholder.com/300x200/111111" alt="íŒŒì›Œ ê´‘ê³  1"
            class="h-40 w-full object-cover rounded mb-4" />
          <h2 class="text-2xl font-bold text-center mb-2">íŒŒì›Œ ê´‘ê³  1</h2>
          <h3 class="text-xl font-semibold text-center text-gray-700">ì‹ë‹¹</h3>
          <p class="text-lg text-gray-500 text-center">010-1111-2222</p>
          <a href="#"
            class="open-modal mt-4 bg-blue-500 text-white py-2 px-4 rounded text-center shadow-lg hover:bg-blue-600">ë°”ë¡œê°€ê¸°</a>
        </div>
        <div
          class="ad-card relative bg-yellow-50 border-4 border-yellow-400 shadow-lg rounded-lg p-6 flex flex-col transform transition duration-300 hover:-translate-y-2 hover:shadow-2xl"
          data-title="íŒŒì›Œ ê´‘ê³  2" data-phone="010-2222-3333" data-category="ì‹ë‹¹"
          data-img="https://via.placeholder.com/300x200/222222" data-events="ì´ë²¤íŠ¸ ì¤‘" data-facilities="ì—†ìŒ"
          data-parking="ìœ ë£Œ ì£¼ì°¨">
          <div class="absolute top-2 right-2 bg-red-500 text-white px-2 py-1 text-xs rounded">íŒŒì›Œê´‘ê³ </div>
          <img src="https://via.placeholder.com/300x200/222222" alt="íŒŒì›Œ ê´‘ê³  2"
            class="h-40 w-full object-cover rounded mb-4" />
          <h2 class="text-2xl font-bold text-center mb-2">íŒŒì›Œ ê´‘ê³  2</h2>
          <h3 class="text-xl font-semibold text-center text-gray-700">ì‹ë‹¹</h3>
          <p class="text-lg text-gray-500 text-center">010-2222-3333</p>
          <a href="#"
            class="open-modal mt-4 bg-blue-500 text-white py-2 px-4 rounded text-center shadow-lg hover:bg-blue-600">ë°”ë¡œê°€ê¸°</a>
        </div>
        <div
          class="ad-card relative bg-yellow-50 border-4 border-yellow-400 shadow-lg rounded-lg p-6 flex flex-col transform transition duration-300 hover:-translate-y-2 hover:shadow-2xl"
          data-title="íŒŒì›Œ ê´‘ê³  3" data-phone="010-3333-4444" data-category="ì‹ë‹¹"
          data-img="https://via.placeholder.com/300x200/333333" data-events="ì‹œì¦Œ í• ì¸" data-facilities="íœ ì²´ì–´ ë¦¬í”„íŠ¸ ìˆìŒ"
          data-parking="ë¬´ë£Œ ì£¼ì°¨">
          <div class="absolute top-2 right-2 bg-red-500 text-white px-2 py-1 text-xs rounded">íŒŒì›Œê´‘ê³ </div>
          <img src="https://via.placeholder.com/300x200/333333" alt="íŒŒì›Œ ê´‘ê³  3"
            class="h-40 w-full object-cover rounded mb-4" />
          <h2 class="text-2xl font-bold text-center mb-2">íŒŒì›Œ ê´‘ê³  3</h2>
          <h3 class="text-xl font-semibold text-center text-gray-700">ì‹ë‹¹</h3>
          <p class="text-lg text-gray-500 text-center">010-3333-4444</p>
          <a href="#"
            class="open-modal mt-4 bg-blue-500 text-white py-2 px-4 rounded text-center shadow-lg hover:bg-blue-600">ë°”ë¡œê°€ê¸°</a>
        </div>
        <div
          class="ad-card relative bg-yellow-50 border-4 border-yellow-400 shadow-lg rounded-lg p-6 flex flex-col transform transition duration-300 hover:-translate-y-2 hover:shadow-2xl"
          data-title="íŒŒì›Œ ê´‘ê³  4" data-phone="010-4444-5555" data-category="ì‹ë‹¹"
          data-img="https://via.placeholder.com/300x200/444444" data-events="íŠ¹ê°€ í–‰ì‚¬" data-facilities="ì—†ìŒ"
          data-parking="ìœ ë£Œ ì£¼ì°¨">
          <div class="absolute top-2 right-2 bg-red-500 text-white px-2 py-1 text-xs rounded">íŒŒì›Œê´‘ê³ </div>
          <img src="https://via.placeholder.com/300x200/444444" alt="íŒŒì›Œ ê´‘ê³  4"
            class="h-40 w-full object-cover rounded mb-4" />
          <h2 class="text-2xl font-bold text-center mb-2">íŒŒì›Œ ê´‘ê³  4</h2>
          <h3 class="text-xl font-semibold text-center text-gray-700">ì‹ë‹¹</h3>
          <p class="text-lg text-gray-500 text-center">010-4444-5555</p>
          <a href="#"
            class="open-modal mt-4 bg-blue-500 text-white py-2 px-4 rounded text-center shadow-lg hover:bg-blue-600">ë°”ë¡œê°€ê¸°</a>
        </div>
      </div>
    </section>

    <!-- ê´‘ê³  ì„¹ì…˜ ì˜ˆì‹œ (ê° ì¹´í…Œê³ ë¦¬ë³„) -->
    <!-- ë°¥ -->
    <section id="ë°¥Section" class="mt-8 border-2 border-gray-300 rounded-lg p-6">
      <div class="flex items-center justify-between mb-6">
        <h2 class="text-2xl font-bold">ë°¥</h2>
        <div class="flex items-center space-x-6">
          <a href="#" class="home-link text-blue-500 hover:underline font-bold text-lg">ğŸ  í™ˆ</a>
          <a href="subcategory.html?category=ë°¥"
            class="more-link text-blue-500 hover:underline font-bold text-lg">+ë”ë³´ê¸°</a>
        </div>
      </div>
      <div id="ë°¥Container" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6"></div>
    </section>

    <!-- ì°Œê²Œ/íƒ•/êµ­ -->
    <section id="ì°Œê°œ/íƒ•/êµ­Section" class="mt-8 border-2 border-gray-300 rounded-lg p-6">
      <div class="flex items-center justify-between mb-6">
        <h2 class="text-2xl font-bold">ì°Œê²Œ/íƒ•/êµ­</h2>
        <div class="flex items-center space-x-6">
          <a href="#" class="home-link text-blue-500 hover:underline font-bold text-lg">ğŸ  í™ˆ</a>
          <a href="subcategory.html?category=ì°Œê°œ/íƒ•/êµ­"
            class="more-link text-blue-500 hover:underline font-bold text-lg">+ë”ë³´ê¸°</a>
        </div>
      </div>
      <div id="ì°Œê°œ/íƒ•/êµ­Container" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6"></div>
    </section>

    <!-- ê³ ê¸°/êµ¬ì´ -->
    <section id="ê³ ê¸°/êµ¬ì´Section" class="mt-8 border-2 border-gray-300 rounded-lg p-6">
      <div class="flex items-center justify-between mb-6">
        <h2 class="text-2xl font-bold">ê³ ê¸°/êµ¬ì´(ì œìœ¡ë³¶ìŒ)</h2>
        <div class="flex items-center space-x-6">
          <a href="#" class="home-link text-blue-500 hover:underline font-bold text-lg">ğŸ  í™ˆ</a>
          <a href="subcategory.html?category=ê³ ê¸°/êµ¬ì´"
            class="more-link text-blue-500 hover:underline font-bold text-lg">+ë”ë³´ê¸°</a>
        </div>
      </div>
      <div id="ê³ ê¸°/êµ¬ì´Container" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6"></div>
    </section>

    <!-- í•´ë¬¼ë¡œ ë°”êµ´ê²ƒ -->
    <section id="ìƒì„ Section" class="mt-8 border-2 border-gray-300 rounded-lg p-6">
      <div class="flex items-center justify-between mb-6">
        <h2 class="text-2xl font-bold">ìƒì„ </h2>
        <div class="flex items-center space-x-6">
          <a href="#" class="home-link text-blue-500 hover:underline font-bold text-lg">ğŸ  í™ˆ</a>
          <a href="subcategory.html?category=ìƒì„ "
            class="more-link text-blue-500 hover:underline font-bold text-lg">+ë”ë³´ê¸°</a>
        </div>
      </div>
      <div id="ìƒì„ Container" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6"></div>
    </section>

    <!-- ì¡±ë°œ/ë³´ìŒˆ -->
    <section id="ì¡±ë°œ/ë³´ìŒˆSection" class="mt-8 border-2 border-gray-300 rounded-lg p-6">
      <div class="flex items-center justify-between mb-6">
        <h2 class="text-2xl font-bold">ì¡±ë°œ/ë³´ìŒˆ</h2>
        <div class="flex items-center space-x-6">
          <a href="#" class="home-link text-blue-500 hover:underline font-bold text-lg">ğŸ  í™ˆ</a>
          <a href="subcategory.html?category=ì¡±ë°œ/ë³´ìŒˆ"
            class="more-link text-blue-500 hover:underline font-bold text-lg">+ë”ë³´ê¸°</a>
        </div>
      </div>
      <div id="ì¡±ë°œ/ë³´ìŒˆContainer" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6"></div>
    </section>

    <!-- êµ­ë°¥ -->
    <section id="êµ­ë°¥Section" class="mt-8 border-2 border-gray-300 rounded-lg p-6">
      <div class="flex items-center justify-between mb-6">
        <h2 class="text-2xl font-bold">êµ­ë°¥</h2>
        <div class="flex items-center space-x-6">
          <a href="#" class="home-link text-blue-500 hover:underline font-bold text-lg">ğŸ  í™ˆ</a>
          <a href="subcategory.html?category=êµ­ë°¥"
            class="more-link text-blue-500 hover:underline font-bold text-lg">+ë”ë³´ê¸°</a>
        </div>
      </div>
      <div id="êµ­ë°¥Container" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6"></div>
    </section>

    <!-- ë°˜ì°¬ -->
    <section id="ë°˜ì°¬Section" class="mt-8 border-2 border-gray-300 rounded-lg p-6">
      <div class="flex items-center justify-between mb-6">
        <h2 class="text-2xl font-bold">ë°˜ì°¬</h2>
        <div class="flex items-center space-x-6">
          <a href="#" class="home-link text-blue-500 hover:underline font-bold text-lg">ğŸ  í™ˆ</a>
          <a href="subcategory.html?category=ë°˜ì°¬"
            class="more-link text-blue-500 hover:underline font-bold text-lg">+ë”ë³´ê¸°</a>
        </div>
      </div>
      <div id="ë°˜ì°¬Container" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6"></div>
    </section>

    <!-- ì•¼ì‹ -->
    <section id="ì•¼ì‹ectSection" class="mt-8 border-2 border-gray-300 rounded-lg p-6">
      <div class="flex items-center justify-between mb-6">
        <h2 class="text-2xl font-bold">ì•¼ì‹</h2>
        <div class="flex items-center space-x-6">
          <a href="#" class="home-link text-blue-500 hover:underline font-bold text-lg">ğŸ  í™ˆ</a>
          <a href="subcategory.html?category=ì•¼ì‹"
            class="more-link text-blue-500 hover:underline font-bold text-lg">+ë”ë³´ê¸°</a>
        </div>
      </div>
      <div id="ì•¼ì‹Container" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6"></div>
    </section>

    <!-- ì—¬ëŸ¬ê°€ì§€ -->
    <section id="ì—¬ëŸ¬ê°€ì§€etcSection" class="mt-8 border-2 border-gray-300 rounded-lg p-6">
      <div class="flex items-center justify-between mb-6">
        <h2 class="text-2xl font-bold">ì—¬ëŸ¬ê°€ì§€</h2>
        <div class="flex items-center space-x-6">
          <a href="#" class="home-link text-blue-500 hover:underline font-bold text-lg">ğŸ  í™ˆ</a>
          <a href="subcategory.html?category=ì•¼ì‹"
            class="more-link text-blue-500 hover:underline font-bold text-lg">+ë”ë³´ê¸°</a>
        </div>
      </div>
      <div id="ì—¬ëŸ¬ê°€ì§€Container" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6"></div>
    </section>
  </main>

  <!-- í‘¸í„° (JSP ì¸í´ë£¨ë“œë¡œ ë¶ˆëŸ¬ì˜´) -->
  <jsp:include page="components/footer.html" />


  <!-- ê´‘ê³  ë Œë”ë§ ê´€ë ¨ ìŠ¤í¬ë¦½íŠ¸ -->
  <script>
    // 0) ìŠ¤í¬ë¡¤ìš© ë§µ (ì„¹ì…˜ ID â†’ ì†Œì œëª©ê¹Œì§€ ìŠ¤í¬ë¡¤)
    const scrollMap = {
      ë°¥: "ë°¥Section",
      "ì°Œê°œ/íƒ•/êµ­": "ì°Œê°œ/íƒ•/êµ­Section",
      "ê³ ê¸°/êµ¬ì´": "ê³ ê¸°/êµ¬ì´Section",
      ìƒì„ : "ìƒì„ Section",
      "ì¡±ë°œ/ë³´ìŒˆ": "ì¡±ë°œ/ë³´ìŒˆSection",
      êµ­ë°¥: "êµ­ë°¥Section",
      ë°˜ì°¬: "ë°˜ì°¬Section",
      ì—¬ëŸ¬ê°€ì§€: "ì—¬ëŸ¬ê°€ì§€etcSection"
    };

    // 1) ë Œë”ë§ìš© ë§µ (ê·¸ë¦¬ë“œ ì»¨í…Œì´ë„ˆ ID â†’ ì¹´ë“œë§Œ êµì²´)
    const renderMap = {
      ë°¥: "ë°¥Container",
      "ì°Œê°œ/íƒ•/êµ­": "ì°Œê°œ/íƒ•/êµ­Container",
      "ê³ ê¸°/êµ¬ì´": "ê³ ê¸°/êµ¬ì´Container",
      ìƒì„ : "ìƒì„ Container",
      "ì¡±ë°œ/ë³´ìŒˆ": "ì¡±ë°œ/ë³´ìŒˆContainer",
      êµ­ë°¥: "êµ­ë°¥Container",
      ë°˜ì°¬: "ë°˜ì°¬Container",
      ì—¬ëŸ¬ê°€ì§€: "ì—¬ëŸ¬ê°€ì§€Container"
    };

    // 2) ì„œë²„ì—ì„œ ë°ì´í„° ê°€ì ¸ì˜¤ê¸°
    async function fetchStores() {
      const params = new URLSearchParams(window.location.search);
      const category = params.get("category") || "";
      const subcategory = params.get("subcategory") || "";

      let url = `/category/${encodeURIComponent(category)}/stores`;
      if (subcategory) {
        url += `?subcategory=${encodeURIComponent(subcategory)}`;
      }
      console.log("â–¶ fetchStores URL:", url);

      const res = await fetch(url);
      if (!res.ok) throw new Error("ë°ì´í„° ì¡°íšŒ ì‹¤íŒ¨");
      return await res.json();
    }

    // 3) ì¹´ë“œ ë‚´ë¶€ HTML ìƒì„±
    function makeCardHTML(ad, isPower) {
      return `
      ${isPower ? '<div class="absolute top-2 right-2 bg-red-500 text-white px-2 py-1 text-xs rounded">íŒŒì›Œê´‘ê³ </div>' : ''}
      <img src="${ad.thumb || '/assets/images/no-thumb.png'}" alt="${ad.businessName}" class="h-40 w-full object-cover rounded mb-4" />
      <h2 class="text-2xl font-bold text-center mb-2">${ad.businessName}</h2>
      <p class="text-lg text-gray-500 text-center">${ad.phone || "ì „í™”ë²ˆí˜¸ ì—†ìŒ"}</p>
      <a href="/detail.html?id=${ad.id}"
        class="mt-4 bg-blue-500 text-white py-2 px-4 rounded text-center shadow-lg hover:bg-blue-600 block">
        ìƒì„¸ë³´ê¸°
      </a>
    `;
    }

    // 4) íŒŒì›Œ ê´‘ê³  ì¹´ë“œ ìƒì„±
    function createPowerAdCard(ad) {
      const box = document.createElement("div");
      box.className =
        "ad-card relative bg-yellow-50 border-4 border-yellow-400 shadow-lg rounded-lg p-6 flex flex-col transform transition duration-300 hover:-translate-y-2 hover:shadow-2xl";
      box.innerHTML = makeCardHTML(ad, true);
      return box;
    }

    // 5) ì¼ë°˜ ê´‘ê³  ì¹´ë“œ ìƒì„±
    function createAdCard(ad) {
      const box = document.createElement("div");
      box.className =
        "ad-card bg-white shadow-lg rounded-lg p-6 flex flex-col border-2 border-gray-300 transform transition duration-300 hover:-translate-y-2 hover:shadow-2xl";
      box.innerHTML = makeCardHTML(ad, false);
      return box;
    }

    // 6) ì„¹ì…˜ì— ì¹´ë“œ ë¶™ì´ê¸°
    function renderSection(items, makeCard, containerId, limit) {
      const container = document.getElementById(containerId);
      container.innerHTML = "";
      items.slice(0, limit).forEach(ad => container.appendChild(makeCard(ad)));
    }

    // 7) í˜ì´ì§€ ì´ˆê¸°í™”
    document.addEventListener("DOMContentLoaded", async () => {
      try {
        const stores = await fetchStores();
        window.stores = stores;
        console.log("âœ… stores:", stores);

        // 7-1) ì†Œì œëª© ìœ ì§€í•˜ë©° ê° ê·¸ë¦¬ë“œ ì»¨í…Œì´ë„ˆì— ì¹´ë“œ ë Œë”ë§
        Object.entries(renderMap).forEach(([cat, gridId]) => {
          const items = stores.filter(ad => ad.subcategory === cat);   // â† subcategory í‚¤ë¡œ ë¹„êµ
          console.log("â†ª", cat, "ë°›ì€ ê°œìˆ˜:", items.length);
          renderSection(items, createAdCard, gridId, 8);
        });

        // 7-2) íŒŒì›Œ ê´‘ê³ 
        renderSection(
          stores.filter(ad => ad.powerAd),
          createPowerAdCard,
          "powerAdsContainer",
          4
        );

        // 7-3) ì¹´í…Œê³ ë¦¬ ë²„íŠ¼ ìŠ¤í¬ë¡¤ (ì†Œì œëª©ê¹Œì§€)
        document.querySelectorAll(".category-btn").forEach(btn => {
          btn.addEventListener("click", () => {
            const secId = scrollMap[btn.dataset.category];
            document.getElementById(secId)?.scrollIntoView({ behavior: "smooth" });
          });
        });

        // 7-4) í™ˆ ë²„íŠ¼ ìŠ¤í¬ë¡¤
        document.querySelectorAll(".home-link").forEach(link => {
          link.addEventListener("click", e => {
            e.preventDefault();
            document.getElementById("categorySelection").scrollIntoView({ behavior: "smooth" });
          });
        });

      } catch (err) {
        console.error("ê´‘ê³  ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨:", err);
      }
    });
  </script>