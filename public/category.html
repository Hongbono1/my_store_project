<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ê´‘ê³  í™ˆí˜ì´ì§€ - í•œì‹ </title>
  <!-- Tailwind CSS -->
  <link rel="stylesheet" href="/assets/css/tailwind.css" />
  />
  <style>
    .header-content {
      gap: 1rem;
    }

    .nav-links a {
      transition: color 0.3s ease;
    }

    footer p {
      font-size: 0.875rem;
    }
  </style>
</head>

<body class="bg-gray-50">
  <!-- í—¤ë” (JSP ì¸í´ë£¨ë“œë¡œ ë¶ˆëŸ¬ì˜´) -->
  <jsp:include page="components/header.html" />

  <!-- ê¸°ì¡´ ëª¨ë‹¬ ì½”ë“œ ì‚­ì œ (ëª¨ë‹¬ ì¸í´ë£¨ë“œëŠ” ì œê±°) -->
  <!-- ëª¨ë‹¬ ì»¨í…Œì´ë„ˆ: ë™ì ìœ¼ë¡œ ëª¨ë‹¬ HTMLê³¼ JSë¥¼ ë¡œë“œí•  ì˜ì—­ -->
  <div id="modal-container"></div>

  <!-- ë©”ì¸ ì½˜í…ì¸  -->
  <main class="w-full max-w-screen-xl mx-auto px-4 sm:px-8 mt-8">
    <!-- ìƒë‹¨ ì„¹ì…˜: ë³‘ì› ë°°ê²½/íƒ€ì´í‹€ -->
    <section class="bg-gradient-to-r from-gray-800 to-blue-500 text-white p-6 rounded-lg shadow mb-8">
      <h1 class="text-4xl sm:text-5xl font-bold mb-2">í•œì‹</h1>
      <p class="text-lg sm:text-xl">ìš°ë¦¬ë™ë„¤ í•œì‹ ë§›ì§‘ì„ ì†Œê°œí•©ë‹ˆë‹¤</p>
    </section>

    <!-- ìŠ¤í¬ë¡¤ ë²„íŠ¼ (ì¹´í…Œê³ ë¦¬ ì„ íƒ ì˜ì—­) -->
    <section id="categorySelection" class="bg-white p-4 rounded-lg shadow border border-gray-300 mt-8 mb-8">
      <div class="bg-blue-100 p-6 rounded-lg">
        <h2 class="text-2xl font-bold mb-6">ìŠ¤í¬ë¡¤ ì„ íƒ</h2>
        <div class="flex overflow-x-auto space-x-3 py-3">
          <!-- ë°¥ -->
          <button
            class="category-btn bg-white text-[#2C3E50] font-medium px-5 py-2 text-lg rounded-full border border-[#748CAB] shadow-md hover:bg-[#7F9BBF] transition"
            data-category="ë°¥">ë°¥ (ë¹„ë¹”ë°¥/ë®ë°¥/ë°±ë°˜)</button>

          <!-- ì°Œê°œ/íƒ• -->
          <button
            class="category-btn bg-white text-[#2C3E50] font-medium px-5 py-2 text-lg rounded-full border border-[#748CAB] shadow-md hover:bg-[#7F9BBF] transition"
            data-category="ì°Œê°œ/íƒ•">ì°Œê°œ/íƒ•/êµ­</button>

          <!-- ê³ ê¸°/êµ¬ì´ -->
          <button
            class="category-btn bg-white text-[#2C3E50] font-medium px-5 py-2 text-lg rounded-full border border-[#748CAB] shadow-md hover:bg-[#7F9BBF] transition"
            data-category="ê³ ê¸°/êµ¬ì´">ê³ ê¸°/êµ¬ì´ (ì œìœ¡ë³¶ìŒ)</button>

          <!-- ìƒì„  -->
          <button
            class="category-btn bg-white text-[#2C3E50] font-medium px-5 py-2 text-lg rounded-full border border-[#748CAB] shadow-md hover:bg-[#7F9BBF] transition"
            data-category="ìƒì„ ">ìƒì„ </button>

          <!-- ì¡±ë°œ/ë³´ìŒˆ -->
          <button
            class="category-btn bg-white text-[#2C3E50] font-medium px-5 py-2 text-lg rounded-full border border-[#748CAB] shadow-md hover:bg-[#7F9BBF] transition"
            data-category="ì¡±ë°œ/ë³´ìŒˆ">ì¡±ë°œ/ë³´ìŒˆ</button>

          <!-- êµ­ë°¥ -->
          <button
            class="category-btn bg-white text-[#2C3E50] font-medium px-5 py-2 text-lg rounded-full border border-[#748CAB] shadow-md hover:bg-[#7F9BBF] transition"
            data-category="êµ­ë°¥">êµ­ë°¥</button>

          <!-- ë°˜ì°¬ -->
          <button
            class="category-btn bg-white text-[#2C3E50] font-medium px-5 py-2 text-lg rounded-full border border-[#748CAB] shadow-md hover:bg-[#7F9BBF] transition"
            data-category="ë°˜ì°¬">ë°˜ì°¬</button>

          <!-- ê¸°íƒ€ -->
          <button
            class="category-btn bg-white text-[#2C3E50] font-medium px-5 py-2 text-lg rounded-full border border-[#748CAB] shadow-md hover:bg-[#7F9BBF] transition"
            data-category="ê¸°íƒ€">ê¸°íƒ€</button>
        </div>
      </div>
    </section>

    <!-- íŒŒì›Œ ê´‘ê³  (SSR ì‹œë®¬ë ˆì´ì…˜) - 4ê°œ ê´‘ê³  ë°•ìŠ¤ -->
    <section id="powerAdsSection" class="bg-yellow-50 border-4 border-yellow-400 shadow-lg rounded-lg p-6">
      <h2 class="text-2xl font-bold mb-4">íŒŒì›Œ ê´‘ê³ </h2>
      <div id="powerAdsContainer" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6">
        <div
          class="ad-card relative bg-yellow-50 border-4 border-yellow-400 shadow-lg rounded-lg p-6 flex flex-col transform transition duration-300 hover:-translate-y-2 hover:shadow-2xl"
          data-title="íŒŒì›Œ ê´‘ê³  1" data-phone="010-1111-2222" data-category="ì‹ë‹¹"
          data-img="https://via.placeholder.com/300x200/111111" data-events="ì‹ ê·œ í• ì¸" data-facilities="íœ ì²´ì–´ ì ‘ê·¼ ê°€ëŠ¥"
          data-parking="ë¬´ë£Œ ì£¼ì°¨">
          <div class="absolute top-2 right-2 bg-red-500 text-white px-2 py-1 text-xs rounded">íŒŒì›Œê´‘ê³ </div>
          <img src="https://via.placeholder.com/300x200/111111" alt="íŒŒì›Œ ê´‘ê³  1"
            class="h-40 w-full object-cover rounded mb-4" />
          <h2 class="text-2xl font-bold text-center mb-2">íŒŒì›Œ ê´‘ê³  1</h2>
          <h3 class="text-xl font-semibold text-center text-gray-700">ì‹ë‹¹</h3>
          <p class="text-lg text-gray-500 text-center">010-1111-2222</p>
          <a href="#"
            class="open-modal mt-4 bg-blue-500 text-white py-2 px-4 rounded text-center shadow-lg hover:bg-blue-600">ë°”ë¡œê°€ê¸°</a>
        </div>
        <div
          class="ad-card relative bg-yellow-50 border-4 border-yellow-400 shadow-lg rounded-lg p-6 flex flex-col transform transition duration-300 hover:-translate-y-2 hover:shadow-2xl"
          data-title="íŒŒì›Œ ê´‘ê³  2" data-phone="010-2222-3333" data-category="ì‹ë‹¹"
          data-img="https://via.placeholder.com/300x200/222222" data-events="ì´ë²¤íŠ¸ ì¤‘" data-facilities="ì—†ìŒ"
          data-parking="ìœ ë£Œ ì£¼ì°¨">
          <div class="absolute top-2 right-2 bg-red-500 text-white px-2 py-1 text-xs rounded">íŒŒì›Œê´‘ê³ </div>
          <img src="https://via.placeholder.com/300x200/222222" alt="íŒŒì›Œ ê´‘ê³  2"
            class="h-40 w-full object-cover rounded mb-4" />
          <h2 class="text-2xl font-bold text-center mb-2">íŒŒì›Œ ê´‘ê³  2</h2>
          <h3 class="text-xl font-semibold text-center text-gray-700">ì‹ë‹¹</h3>
          <p class="text-lg text-gray-500 text-center">010-2222-3333</p>
          <a href="#"
            class="open-modal mt-4 bg-blue-500 text-white py-2 px-4 rounded text-center shadow-lg hover:bg-blue-600">ë°”ë¡œê°€ê¸°</a>
        </div>
        <div
          class="ad-card relative bg-yellow-50 border-4 border-yellow-400 shadow-lg rounded-lg p-6 flex flex-col transform transition duration-300 hover:-translate-y-2 hover:shadow-2xl"
          data-title="íŒŒì›Œ ê´‘ê³  3" data-phone="010-3333-4444" data-category="ì‹ë‹¹"
          data-img="https://via.placeholder.com/300x200/333333" data-events="ì‹œì¦Œ í• ì¸" data-facilities="íœ ì²´ì–´ ë¦¬í”„íŠ¸ ìˆìŒ"
          data-parking="ë¬´ë£Œ ì£¼ì°¨">
          <div class="absolute top-2 right-2 bg-red-500 text-white px-2 py-1 text-xs rounded">íŒŒì›Œê´‘ê³ </div>
          <img src="https://via.placeholder.com/300x200/333333" alt="íŒŒì›Œ ê´‘ê³  3"
            class="h-40 w-full object-cover rounded mb-4" />
          <h2 class="text-2xl font-bold text-center mb-2">íŒŒì›Œ ê´‘ê³  3</h2>
          <h3 class="text-xl font-semibold text-center text-gray-700">ì‹ë‹¹</h3>
          <p class="text-lg text-gray-500 text-center">010-3333-4444</p>
          <a href="#"
            class="open-modal mt-4 bg-blue-500 text-white py-2 px-4 rounded text-center shadow-lg hover:bg-blue-600">ë°”ë¡œê°€ê¸°</a>
        </div>
        <div
          class="ad-card relative bg-yellow-50 border-4 border-yellow-400 shadow-lg rounded-lg p-6 flex flex-col transform transition duration-300 hover:-translate-y-2 hover:shadow-2xl"
          data-title="íŒŒì›Œ ê´‘ê³  4" data-phone="010-4444-5555" data-category="ì‹ë‹¹"
          data-img="https://via.placeholder.com/300x200/444444" data-events="íŠ¹ê°€ í–‰ì‚¬" data-facilities="ì—†ìŒ"
          data-parking="ìœ ë£Œ ì£¼ì°¨">
          <div class="absolute top-2 right-2 bg-red-500 text-white px-2 py-1 text-xs rounded">íŒŒì›Œê´‘ê³ </div>
          <img src="https://via.placeholder.com/300x200/444444" alt="íŒŒì›Œ ê´‘ê³  4"
            class="h-40 w-full object-cover rounded mb-4" />
          <h2 class="text-2xl font-bold text-center mb-2">íŒŒì›Œ ê´‘ê³  4</h2>
          <h3 class="text-xl font-semibold text-center text-gray-700">ì‹ë‹¹</h3>
          <p class="text-lg text-gray-500 text-center">010-4444-5555</p>
          <a href="#"
            class="open-modal mt-4 bg-blue-500 text-white py-2 px-4 rounded text-center shadow-lg hover:bg-blue-600">ë°”ë¡œê°€ê¸°</a>
        </div>
      </div>
    </section>

    <!-- ê´‘ê³  ì„¹ì…˜ ì˜ˆì‹œ (ê° ì¹´í…Œê³ ë¦¬ë³„) -->
    <!-- ë°¥ -->
    <section id="baekbanSection" class="mt-8 border-2 border-gray-300 rounded-lg p-6">
      <div class="flex items-center justify-between mb-6">
        <h2 class="text-2xl font-bold">ë°¥</h2>
        <div class="flex items-center space-x-6">
          <a href="#" class="home-link text-blue-500 hover:underline font-bold text-lg">ğŸ  í™ˆ</a>
          <a href="detail_emergency.html" class="more-link text-blue-500 hover:underline font-bold text-lg">+ë”ë³´ê¸°</a>
        </div>
      </div>
      <div id="emergencyAdsContainer" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6"></div>
    </section>

    <!-- ì°Œê²Œ/íƒ•/êµ­ -->
    <section id="jjigaetangSection" class="mt-8 border-2 border-gray-300 rounded-lg p-6">
      <div class="flex items-center justify-between mb-6">
        <h2 class="text-2xl font-bold">ì°Œê²Œ/íƒ•/êµ­</h2>
        <div class="flex items-center space-x-6">
          <a href="#" class="home-link text-blue-500 hover:underline font-bold text-lg">ğŸ  í™ˆ</a>
          <a href="detail_generalhospital.html"
            class="more-link text-blue-500 hover:underline font-bold text-lg">+ë”ë³´ê¸°</a>
        </div>
      </div>
      <div id="generalhospitalAdsContainer" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6"></div>
    </section>

    <!-- ê³ ê¸°/êµ¬ì´ -->
    <section id="gogiguiSection" class="mt-8 border-2 border-gray-300 rounded-lg p-6">
      <div class="flex items-center justify-between mb-6">
        <h2 class="text-2xl font-bold">ê³ ê¸°/êµ¬ì´(ì œìœ¡ë³¶ìŒ)</h2>
        <div class="flex items-center space-x-6">
          <a href="#" class="home-link text-blue-500 hover:underline font-bold text-lg">ğŸ  í™ˆ</a>
          <a href="detail_hospital.html" class="more-link text-blue-500 hover:underline font-bold text-lg">+ë”ë³´ê¸°</a>
        </div>
      </div>
      <div id="hospitalAdsContainer" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6"></div>
    </section>

    <!-- ìƒì„  -->
    <section id="fishSection" class="mt-8 border-2 border-gray-300 rounded-lg p-6">
      <div class="flex items-center justify-between mb-6">
        <h2 class="text-2xl font-bold">ìƒì„ </h2>
        <div class="flex items-center space-x-6">
          <a href="#" class="home-link text-blue-500 hover:underline font-bold text-lg">ğŸ  í™ˆ</a>
          <a href="detail_clinic.html" class="more-link text-blue-500 hover:underline font-bold text-lg">+ë”ë³´ê¸°</a>
        </div>
      </div>
      <div id="clinicAdsContainer" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6"></div>
    </section>

    <!-- ì¡±ë°œ/ë³´ìŒˆ -->
    <section id="noodleSection" class="mt-8 border-2 border-gray-300 rounded-lg p-6">
      <div class="flex items-center justify-between mb-6">
        <h2 class="text-2xl font-bold">ì¡±ë°œ/ë³´ìŒˆ</h2>
        <div class="flex items-center space-x-6">
          <a href="#" class="home-link text-blue-500 hover:underline font-bold text-lg">ğŸ  í™ˆ</a>
          <a href="detail_orientalmedicine.html"
            class="more-link text-blue-500 hover:underline font-bold text-lg">+ë”ë³´ê¸°</a>
        </div>
      </div>
      <div id="orientalmedicineAdsContainer" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6"></div>
    </section>

    <!-- êµ­ë°¥ -->
    <section id="snackSection" class="mt-8 border-2 border-gray-300 rounded-lg p-6">
      <div class="flex items-center justify-between mb-6">
        <h2 class="text-2xl font-bold">êµ­ë°¥</h2>
        <div class="flex items-center space-x-6">
          <a href="#" class="home-link text-blue-500 hover:underline font-bold text-lg">ğŸ  í™ˆ</a>
          <a href="detail_nursing.html" class="more-link text-blue-500 hover:underline font-bold text-lg">+ë”ë³´ê¸°</a>
        </div>
      </div>
      <div id="nursingAdsContainer" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6"></div>
    </section>

    <!-- ë°˜ì°¬ -->
    <section id="soupSection" class="mt-8 border-2 border-gray-300 rounded-lg p-6">
      <div class="flex items-center justify-between mb-6">
        <h2 class="text-2xl font-bold">ë°˜ì°¬</h2>
        <div class="flex items-center space-x-6">
          <a href="#" class="home-link text-blue-500 hover:underline font-bold text-lg">ğŸ  í™ˆ</a>
          <a href="detail_dentistry.html" class="more-link text-blue-500 hover:underline font-bold text-lg">+ë”ë³´ê¸°</a>
        </div>
      </div>
      <div id="dentistryAdsContainer" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6"></div>
    </section>

    <!-- ì•¼ì‹ -->
    <section id="sideSection" class="mt-8 border-2 border-gray-300 rounded-lg p-6">
      <div class="flex items-center justify-between mb-6">
        <h2 class="text-2xl font-bold">ì•¼ì‹</h2>
        <div class="flex items-center space-x-6">
          <a href="#" class="home-link text-blue-500 hover:underline font-bold text-lg">ğŸ  í™ˆ</a>
          <a href="detail_dentistry.html" class="more-link text-blue-500 hover:underline font-bold text-lg">+ë”ë³´ê¸°</a>
        </div>
      </div>
      <div id="orientalAdsContainer" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6"></div>
    </section>

    <!-- ì—¬ëŸ¬ê°€ì§€ -->
    <section id="etcSection" class="mt-8 border-2 border-gray-300 rounded-lg p-6">
      <div class="flex items-center justify-between mb-6">
        <h2 class="text-2xl font-bold">ì—¬ëŸ¬ê°€ì§€</h2>
        <div class="flex items-center space-x-6">
          <a href="#" class="home-link text-blue-500 hover:underline font-bold text-lg">ğŸ  í™ˆ</a>
          <a href="detail_dentistry.html" class="more-link text-blue-500 hover:underline font-bold text-lg">+ë”ë³´ê¸°</a>
        </div>
      </div>
      <div id="orientalAdsContainer" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6"></div>
    </section>
  </main>

  <!-- í‘¸í„° (JSP ì¸í´ë£¨ë“œë¡œ ë¶ˆëŸ¬ì˜´) -->
  <jsp:include page="components/footer.html" />

  <!-- ëª¨ë‹¬ ê´€ë ¨ ê¸°ì¡´ ì½”ë“œ ì‚­ì œ ë° ìƒˆë¡œìš´ ëª¨ë‹¬ HTML/JS ë™ì  ë¡œë“œ -->
  <script>
    // ê¸°ì¡´ ëª¨ë‹¬ì´ ì¡´ì¬í•˜ë©´ ì‚­ì œ
    const existingModal = document.querySelector("#commonModal");
    if (existingModal) {
      existingModal.remove();
      console.log("ê¸°ì¡´ ëª¨ë‹¬ ì‚­ì œ ì™„ë£Œ");
    }
    // ë™ì ìœ¼ë¡œ ëª¨ë‹¬ HTMLê³¼ JS ë¡œë“œ
    fetch("modal/modal.html")
      .then(response => response.text())
      .then(html => {
        const modalContainer = document.createElement("div");
        modalContainer.id = "modal-container";
        modalContainer.innerHTML = html;
        document.body.appendChild(modalContainer);
        const script = document.createElement("script");
        script.src = "modal/modal.js";
        script.onload = function () {
          console.log("modal.js ë¡œë“œ ì™„ë£Œ");
          if (window.populateModal) {
            console.log("populateModal í•¨ìˆ˜ ì •ìƒ ë¡œë“œ");
          } else {
            console.error("populateModal í•¨ìˆ˜ ë¡œë“œ ì‹¤íŒ¨");
          }
        };
        document.body.appendChild(script);
      })
      .catch(error => console.error("modal.html ë¡œë“œ ì‹¤íŒ¨:", error));
  </script>

  <!-- ê´‘ê³  ë° ëª¨ë‹¬ ë Œë”ë§ ê´€ë ¨ ìŠ¤í¬ë¦½íŠ¸ -->
  <script>
    /* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        1) ì„œë²„ì—ì„œ ìš”ì•½ ë°ì´í„° ê°€ì ¸ì˜¤ê¸°
       â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    async function fetchStores() {
      const res = await fetch('/stores');   // âœ¦ ëª©ë¡ ì „ìš© API
      if (!res.ok) throw new Error('ë°ì´í„° ì¡°íšŒ ì‹¤íŒ¨');
      return await res.json();              // [{ id, businessName, thumbnailUrl, category, phone, powerAd, events, facilities, parking }, â€¦]
    }

    /* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        2) ì¹´ë“œ ìƒì„± í•¨ìˆ˜
       â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    function makeCardHTML(ad, isPower) {
      // ì¹´ë“œ ê³µí†µ dataset (ëª¨ë‹¬ìš©)
      return `
      ${isPower ? '<div class="absolute top-2 right-2 bg-red-500 text-white px-2 py-1 text-xs rounded">íŒŒì›Œê´‘ê³ </div>' : ''}
      <img src="${ad.thumbnailUrl}" alt="${ad.businessName}" class="h-40 w-full object-cover rounded mb-4" />
      <h2 class="text-2xl font-bold text-center mb-2">${ad.businessName}</h2>
      <h3 class="text-xl font-semibold text-center text-gray-700">${ad.category}</h3>
      <p class="text-lg text-gray-500 text-center">${ad.phone}</p>
      <a href="#" class="open-modal mt-4 bg-blue-500 text-white py-2 px-4 rounded text-center shadow-lg hover:bg-blue-600">ë°”ë¡œê°€ê¸°</a>
    `;
    }

    function createPowerAdCard(ad) {
      const box = document.createElement('div');
      box.className =
        'ad-card relative bg-yellow-50 border-4 border-yellow-400 shadow-lg rounded-lg p-6 flex flex-col transform transition duration-300 hover:-translate-y-2 hover:shadow-2xl';
      box.dataset.title = ad.businessName;
      box.dataset.phone = ad.phone || '';
      box.dataset.img = ad.thumbnailUrl;
      box.dataset.events = ad.events || '';
      box.dataset.facilities = ad.facilities || '';
      box.dataset.parking = ad.parking || '';
      box.dataset.category = ad.category;
      box.innerHTML = makeCardHTML(ad, true);
      return box;
    }

    function createAdCard(ad) {
      const box = document.createElement('div');
      box.className =
        'ad-card bg-white shadow-lg rounded-lg p-6 flex flex-col border-2 border-gray-300 transform transition duration-300 hover:-translate-y-2 hover:shadow-2xl';
      box.dataset.title = ad.businessName;
      box.dataset.phone = ad.phone || '';
      box.dataset.img = ad.thumbnailUrl;
      box.dataset.events = ad.events || '';
      box.dataset.facilities = ad.facilities || '';
      box.dataset.parking = ad.parking || '';
      box.dataset.category = ad.category;
      box.innerHTML = makeCardHTML(ad, false);
      return box;
    }

    /* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        3) ì„¹ì…˜ ë Œë”ë§ + ëª¨ë‹¬ ë²„íŠ¼ í•¸ë“¤ëŸ¬
       â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    function renderSection(items, makeCard, containerId, limit) {
      const container = document.getElementById(containerId);
      container.innerHTML = '';
      items.slice(0, limit).forEach(ad => container.appendChild(makeCard(ad)));
    }

    function attachModalHandlers() {
      document.querySelectorAll('.open-modal').forEach(btn => {
        btn.addEventListener('click', e => {
          e.preventDefault();
          const card = btn.parentElement;
          if (!card) return;

          const data = {
            title: card.dataset.title,
            phone: card.dataset.phone,
            image: card.dataset.img,
            address: 'ì£¼ì†Œ ë¯¸ì •',
            category: card.dataset.category,
            delivery: 'ì •ë³´ ì—†ìŒ',
            hours: 'ì •ë³´ ì—†ìŒ',
            serviceItems: 'ì •ë³´ ì—†ìŒ',
            events: [card.dataset.events, ''],
            facilities: card.dataset.facilities,
            pets: 'ì •ë³´ ì—†ìŒ',
            parking: card.dataset.parking,
            sliderImages: [card.dataset.img]
          };

          if (window.populateModal) {
            window.populateModal(data);
            document.getElementById('modalOverlay').classList.remove('hidden');
            document.getElementById('commonModal').classList.remove('hidden');
          } else {
            console.error('populateModal í•¨ìˆ˜ê°€ ë¡œë“œë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.');
          }
        });
      });
    }

    /* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        4) ì´ˆê¸°í™”
       â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
    document.addEventListener('DOMContentLoaded', async () => {
      try {
        const stores = await fetchStores();

        /* 4-1. íŒŒì›Œ ê´‘ê³ (4ê°œ) */
        const powerAds = stores.filter(ad => ad.powerAd);
        renderSection(powerAds, createPowerAdCard, 'powerAdsContainer', 4);

        /* 4-2. ì¹´í…Œê³ ë¦¬ë³„ CSR ê´‘ê³ (ê° 8ê°œ) */
        const containerMap = {
          ë°±ë°˜: "baekbanSection",
          ì°Œê°œíƒ•: "jjigaetangSection",
          ê³ ê¸°êµ¬ì´: "gogiguiSection",
          ìƒì„ : "fishSection",
          êµ­ìˆ˜: "noodleSection",
          ë¶„ì‹: "snackSection",
          êµ­ë°¥: "soupSection",
          ë°˜ì°¬: "sideSection",
          ì—¬ëŸ¬ê°€ì§€: "etcSection"
        };
        Object.entries(containerMap).forEach(([cat, id]) => {
          const items = stores.filter(ad => ad.category === cat);
          renderSection(items, createAdCard, id, 8);
        });

        /* 4-3. ìƒˆë¡œ ìƒì„±ëœ ì¹´ë“œì— ëª¨ë‹¬ í•¸ë“¤ëŸ¬ ì—°ê²° */
        attachModalHandlers();
      } catch (err) {
        console.error(err);
      }

      /* ========== (ê¸°ì¡´ ì½”ë“œ ê·¸ëŒ€ë¡œ ìœ ì§€) ========== */
      const categorySectionMap = {
        ë°¥ë¥˜: "baekbanSection",
        "ì°Œê²Œ/íƒ•": "jjigaetangSection",
        "ê³ ê¸°/êµ¬ì´": "gogiguiSection",
        ìƒì„ : "fishSection",
        êµ­ìˆ˜: "noodleSection",
        ë¶„ì‹: "snackSection",
        êµ­ë°¥: "soupSection",
        ë°˜ì°¬: "sideSection",
        ì—¬ëŸ¬ê°€ì§€: "etcSection"
      };

      document.querySelectorAll(".category-btn").forEach(button => {
        button.addEventListener("click", () => {
          const cat = button.dataset.category;
          const secId = categorySectionMap[cat];
          const sec = document.getElementById(secId);
          if (sec) sec.scrollIntoView({ behavior: "smooth" });
        });
      });

      document.querySelectorAll(".home-link").forEach(link => {
        link.addEventListener("click", e => {
          e.preventDefault();
          document.getElementById("categorySelection").scrollIntoView({ behavior: "smooth" });
        });
      });
    });
  </script>

</body>

</html>