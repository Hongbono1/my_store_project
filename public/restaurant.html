<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>κ΄‘κ³  ν™νμ΄μ§€ - μ‹λ‹Ή</title>

  <!-- Tailwind -->
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet" />
  <style>
    .header-content {
      gap: 1rem;
    }

    .nav-links a {
      transition: color .3s ease;
    }

    footer p {
      font-size: .875rem;
    }
  </style>
</head>

<body class="bg-gray-50">
  <!-- β–£ ν—¤λ” -->
  <div id="header-container"></div>

  <!-- β–£ λ©”μΈ -->
  <main class="w-full max-w-screen-xl mx-auto px-4 sm:px-8 mt-8">
    <!-- νƒ€μ΄ν‹€ -->
    <section class="bg-gradient-to-r from-gray-800 to-blue-500 text-white p-6 rounded-lg shadow mb-12">
      <h1 class="text-4xl sm:text-5xl font-bold mb-2">μ‹&nbsp;λ‹Ή</h1>
      <p class="text-lg sm:text-xl">λ§›μλ” μμ‹μ λ“¤μ„ μ†κ°ν•©λ‹λ‹¤. μ¤λμ€ λ­ λ¨Ήμ„κΉμ”?</p>
    </section>

    <!-- μΉ΄ν…κ³ λ¦¬ μ¤ν¬λ΅¤ λ²„νΌ -->
    <section id="categorySelection" class="bg-white p-4 rounded-lg shadow border border-gray-300 mb-12">
      <div class="bg-blue-100 p-6 rounded-lg">
        <h2 class="text-2xl font-bold mb-6">μ¤ν¬λ΅¤ μ„ νƒ</h2>
        <div class="flex overflow-x-auto space-x-3 py-3">
          <button
            class="category-btn bg-white text-gray-800 font-medium px-5 py-2 text-lg rounded-full border border-gray-400 shadow hover:bg-blue-200 transition"
            data-target="koreanAdsSection">ν•μ‹</button>
          <button
            class="category-btn bg-white text-gray-800 font-medium px-5 py-2 text-lg rounded-full border border-gray-400 shadow hover:bg-blue-200 transition"
            data-target="chineseAdsSection">μ¤‘μ‹</button>
          <button
            class="category-btn bg-white text-gray-800 font-medium px-5 py-2 text-lg rounded-full border border-gray-400 shadow hover:bg-blue-200 transition"
            data-target="japaneseAdsSection">μΌμ‹</button>
          <button
            class="category-btn bg-white text-gray-800 font-medium px-5 py-2 text-lg rounded-full border border-gray-400 shadow hover:bg-blue-200 transition"
            data-target="westernAdsSection">μ–‘μ‹</button>
          <button
            class="category-btn bg-white text-gray-800 font-medium px-5 py-2 text-lg rounded-full border border-gray-400 shadow hover:bg-blue-200 transition"
            data-target="fastfoodAdsSection">ν¨μ¤νΈν‘Έλ“</button>
          <button
            class="category-btn bg-white text-gray-800 font-medium px-5 py-2 text-lg rounded-full border border-gray-400 shadow hover:bg-blue-200 transition"
            data-target="chickenAdsSection">μΉν‚¨</button>
          <button
            class="category-btn bg-white text-gray-800 font-medium px-5 py-2 text-lg rounded-full border border-gray-400 shadow hover:bg-blue-200 transition"
            data-target="cafeAdsSection">μΉ΄ν</button>
          <button
            class="category-btn bg-white text-gray-800 font-medium px-5 py-2 text-lg rounded-full border border-gray-400 shadow hover:bg-blue-200 transition"
            data-target="streetfoodAdsSection">μ¤νΈλ¦¬νΈν‘Έλ“</button>
          <button
            class="category-btn bg-white text-gray-800 font-medium px-5 py-2 text-lg rounded-full border border-gray-400 shadow hover:bg-blue-200 transition"
            data-target="bunsikAdsSection">λ¶„μ‹</button>
        </div>
      </div>
    </section>

    <!-- νμ› κ΄‘κ³  -->
    <section id="powerAdsSection" class="bg-yellow-50 border-4 border-yellow-400 shadow-lg rounded-lg p-6 mb-16">
      <h2 class="text-2xl font-bold mb-4">νμ› κ΄‘κ³ </h2>
      <div id="powerAdsGrid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6"></div>
      <p id="powerAdsEmpty" class="text-center text-gray-500 mt-4 hidden">μ¤€λΉ„μ¤‘μ…λ‹λ‹¤.</p>
    </section>

    <!-- ===== μΉ΄ν…κ³ λ¦¬λ³„ CSR κ΄‘κ³  μ„Ήμ… ===== -->
    <!-- ν•μ‹ -->
    <section id="koreanAdsSection" class="category-box mb-16 border-2 border-gray-300 rounded-lg p-6">
      <div class="flex items-center justify-between mb-6">
        <h2 class="text-2xl font-bold">ν•μ‹ (CSR)</h2>
        <div class="flex items-center space-x-6">
          <a href="#" class="home-link text-blue-600 font-semibold hover:underline">π  ν™</a>
          <a href="category.html?category=ν•μ‹" class="more-link text-blue-600 font-semibold hover:underline">+λ”λ³΄κΈ°</a>
        </div>
      </div>

      <div id="koreanAdsContainer" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6"></div>
      <p id="koreanEmpty" class="text-center text-gray-500 mt-4 hidden">μ•„μ§ λ“±λ΅λ κ°€κ²κ°€ μ—†μµλ‹λ‹¤.</p>
    </section>
    <!-- μ¤‘μ‹ -->
    <section id="chineseAdsSection" class="category-box mb-16 border-2 border-gray-300 rounded-lg p-6">
      <div class="flex items-center justify-between mb-6">
        <h2 class="text-2xl font-bold">μ¤‘μ‹ (CSR)</h2>
        <div class="flex items-center space-x-6">
          <a href="#" class="home-link text-blue-600 font-semibold hover:underline">π  ν™</a>
          <a href="category.html?category=μ¤‘μ‹" class="more-link text-blue-600 font-semibold hover:underline">+λ”λ³΄κΈ°</a>
        </div>
      </div>

      <div id="chineseAdsContainer" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6"></div>
      <p id="chineseEmpty" class="text-center text-gray-500 mt-4 hidden">μ•„μ§ λ“±λ΅λ κ°€κ²κ°€ μ—†μµλ‹λ‹¤.</p>
    </section>
    <!-- μΌμ‹ -->
    <section id="japaneseAdsSection" class="category-box mb-16 border-2 border-gray-300 rounded-lg p-6">
      <div class="flex items-center justify-between mb-6">
        <h2 class="text-2xl font-bold">μΌμ‹ (CSR)</h2>
        <div class="flex items-center space-x-6">
          <a href="#" class="home-link text-blue-600 font-semibold hover:underline">π  ν™</a>
          <a href="category.html?category=μΌμ‹" class="more-link text-blue-600 font-semibold hover:underline">+λ”λ³΄κΈ°</a>
        </div>
      </div>

      <div id="japaneseAdsContainer" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6"></div>
      <p id="japaneseEmpty" class="text-center text-gray-500 mt-4 hidden">μ•„μ§ λ“±λ΅λ κ°€κ²κ°€ μ—†μµλ‹λ‹¤.</p>
    </section>
    <!-- μ–‘μ‹ -->
    <section id="westernAdsSection" class="category-box mb-16 border-2 border-gray-300 rounded-lg p-6">
      <div class="flex items-center justify-between mb-6">
        <h2 class="text-2xl font-bold">μ–‘μ‹ (CSR)</h2>
        <div class="flex items-center space-x-6">
          <a href="#" class="home-link text-blue-600 font-semibold hover:underline">π  ν™</a>
          <a href="category.html?category=μ–‘μ‹" class="more-link text-blue-600 font-semibold hover:underline">+λ”λ³΄κΈ°</a>
        </div>
      </div>

      <div id="westernAdsContainer" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6"></div>
      <p id="westernEmpty" class="text-center text-gray-500 mt-4 hidden">μ•„μ§ λ“±λ΅λ κ°€κ²κ°€ μ—†μµλ‹λ‹¤.</p>
    </section>
    <!-- ν¨μ¤νΈν‘Έλ“ -->
    <section id="fastfoodAdsSection" class="category-box mb-16 border-2 border-gray-300 rounded-lg p-6">
      <div class="flex items-center justify-between mb-6">
        <h2 class="text-2xl font-bold">ν¨μ¤νΈν‘Έλ“ (CSR)</h2>
        <div class="flex items-center space-x-6">
          <a href="#" class="home-link text-blue-600 font-semibold hover:underline">π  ν™</a>
          <a href="category.html?category=ν¨μ¤νΈν‘Έλ“" class="more-link text-blue-600 font-semibold hover:underline">+λ”λ³΄κΈ°</a>
        </div>
      </div>

      <div id="fastfoodAdsContainer" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6"></div>
      <p id="fastfoodEmpty" class="text-center text-gray-500 mt-4 hidden">μ•„μ§ λ“±λ΅λ κ°€κ²κ°€ μ—†μµλ‹λ‹¤.</p>
    </section>
    <!-- μΉν‚¨ -->
    <section id="chickenAdsSection" class="category-box mb-16 border-2 border-gray-300 rounded-lg p-6">
      <div class="flex items-center justify-between mb-6">
        <h2 class="text-2xl font-bold">μΉν‚¨ (CSR)</h2>
        <div class="flex items-center space-x-6">
          <a href="#" class="home-link text-blue-600 font-semibold hover:underline">π  ν™</a>
          <a href="category.html?category=μΉν‚¨" class="more-link text-blue-600 font-semibold hover:underline">+λ”λ³΄κΈ°</a>
        </div>
      </div>

      <div id="chickenAdsContainer" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6"></div>
      <p id="chickenEmpty" class="text-center text-gray-500 mt-4 hidden">μ•„μ§ λ“±λ΅λ κ°€κ²κ°€ μ—†μµλ‹λ‹¤.</p>
    </section>
    <!-- μΉ΄ν -->
    <section id="cafeAdsSection" class="category-box mb-16 border-2 border-gray-300 rounded-lg p-6">
      <div class="flex items-center justify-between mb-6">
        <h2 class="text-2xl font-bold">μΉ΄ν (CSR)</h2>
        <div class="flex items-center space-x-6">
          <a href="#" class="home-link text-blue-600 font-semibold hover:underline">π  ν™</a>
          <a href="μΉ΄category.html?category=μΉ΄ν" class="more-link text-blue-600 font-semibold hover:underline">+λ”λ³΄κΈ°</a>
        </div>
      </div>

      <div id="cafeAdsContainer" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6"></div>
      <p id="cafeEmpty" class="text-center text-gray-500 mt-4 hidden">μ•„μ§ λ“±λ΅λ κ°€κ²κ°€ μ—†μµλ‹λ‹¤.</p>
    </section>
    <!-- μ¤νΈλ¦¬νΈν‘Έλ“ -->
    <section id="streetfoodAdsSection" class="category-box mb-16 border-2 border-gray-300 rounded-lg p-6">
      <div class="flex items-center justify-between mb-6">
        <h2 class="text-2xl font-bold">μ¤νΈλ¦¬νΈν‘Έλ“ (CSR)</h2>
        <div class="flex items-center space-x-6">
          <a href="#" class="home-link text-blue-600 font-semibold hover:underline">π  ν™</a>
          <a href="category.html?category=μ¤νΈλ¦¬νΈν‘Έλ“" class="more-link text-blue-600 font-semibold hover:underline">+λ”λ³΄κΈ°</a>
        </div>
      </div>

      <div id="streetfoodAdsContainer" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6"></div>
      <p id="streetfoodEmpty" class="text-center text-gray-500 mt-4 hidden">μ•„μ§ λ“±λ΅λ κ°€κ²κ°€ μ—†μµλ‹λ‹¤.</p>
    </section>
    <!-- λ¶„μ‹ -->
    <section id="bunsikAdsSection" class="category-box mb-20 border-2 border-gray-300 rounded-lg p-6">
      <div class="flex items-center justify-between mb-6">
        <h2 class="text-2xl font-bold">λ¶„μ‹ (CSR)</h2>
        <div class="flex items-center space-x-6">
          <a href="#" class="home-link text-blue-600 font-semibold hover:underline">π  ν™</a>
          <a href="category.html?category=λ¶„μ‹" class="more-link text-blue-600 font-semibold hover:underline">+λ”λ³΄κΈ°</a>
        </div>
      </div>

      <div id="bunsikAdsContainer" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6"></div>
      <p id="bunsikEmpty" class="text-center text-gray-500 mt-4 hidden">μ•„μ§ λ“±λ΅λ κ°€κ²κ°€ μ—†μµλ‹λ‹¤.</p>
    </section>
  </main>

  <!-- β–£ ν‘Έν„° -->
  <div id="footer-container"></div>

  <!-- β–£ κ³µν†µ λ¨λ‹¬ μ¤λ²„λ μ΄/λ¨λ‹¬ (κΈ°μ΅΄ μ½”λ“ λ™μΌ) -->
  <div id="modalOverlay" class="fixed inset-0 bg-black bg-opacity-50 z-40 hidden"></div>
  <div id="commonModal" class="fixed inset-0 flex items-center justify-center z-50 hidden">
    <!-- β€¦ λ¨λ‹¬ λ‚΄μ© μƒλµ (κΈ°μ΅΄κ³Ό λ™μΌ) β€¦ -->
  </div>

  <!-- β–£ μ¤ν¬λ¦½νΈ -->
  <script>
    /* β”€β”€β”€β”€β”€β”€β”€β”€β”€ κ³µν†µ μ»΄ν¬λ„νΈ λ΅λ“ β”€β”€β”€β”€β”€β”€β”€β”€β”€ */
    async function loadComponent(url, target) {
      try {
        const r = await fetch(url);
        document.getElementById(target).innerHTML = await r.text();
      } catch (e) { console.error(url, e); }
    }

    /* β”€β”€β”€β”€β”€β”€β”€β”€β”€ μΉ΄λ“ ν…ν”λ¦Ώ β”€β”€β”€β”€β”€β”€β”€β”€β”€ */
    function createAdCard({ id, title, category, phone, img }) {
      const d = document.createElement('div');
      d.className = 'bg-white border-2 border-gray-300 shadow-lg rounded-lg p-6 flex flex-col transform transition hover:-translate-y-1 hover:shadow-2xl';
      d.innerHTML = `
        <img src="${img || '/assets/images/no-thumb.png'}" alt="${title}" class="w-full h-40 object-cover rounded mb-4">
        <h3 class="text-xl font-bold text-center mb-1">${title}</h3>
        <p class="text-gray-600 text-center text-sm">${phone || ''}</p>
        <a href="/detail.html?id=${id}"
           class="mt-4 bg-blue-500 text-white py-2 px-4 rounded text-center shadow-lg hover:bg-blue-600 block">
           μƒμ„Έλ³΄κΈ°
        </a>
      `;
      return d;
    }

    /* β”€β”€β”€β”€β”€β”€β”€β”€β”€ νμ› κ΄‘κ³  λ΅λ“ β”€β”€β”€β”€β”€β”€β”€β”€β”€ */
    async function loadPowerAds() {
      try {
        const r = await fetch('/restaurant/ads');
        const ads = await r.json();
        const grid = document.getElementById('powerAdsGrid');
        const empty = document.getElementById('powerAdsEmpty');
        grid.innerHTML = '';
        if (!ads.length) { empty.classList.remove('hidden'); return; }
        empty.classList.add('hidden');
        ads.slice(0, 4).forEach(a => grid.appendChild(createAdCard({
          title: a.businessName, category: a.category, phone: a.phone, img: a.thumb
        })));
      } catch (e) { console.error(e); }
    }

    /* β”€β”€β”€β”€β”€β”€β”€β”€β”€ μΉ΄ν…κ³ λ¦¬λ³„ λ°μ΄ν„° λ΅λ“ β”€β”€β”€β”€β”€β”€β”€β”€β”€ */
    /* β… β… β–£ μ΄κ² ν•µμ‹¬! μΉ΄ν…κ³ λ¦¬λ³„ λ°μ΄ν„° λ΅λ“ ν•¨μ */
    async function loadCategoryAds(category, containerId, emptyId) {
      try {
        const r = await fetch('/restaurant/' + encodeURIComponent(category) + '/stores');
        const data = await r.json();
        const box = document.getElementById(containerId);
        const empty = document.getElementById(emptyId);
        box.innerHTML = '';
        if (!data.length) { empty.classList.remove('hidden'); return; }
        empty.classList.add('hidden');
        data.slice(0, 8).forEach(item =>
          box.appendChild(createAdCard({
            title: item.businessName,
            category: item.category,
            phone: item.phone,
            img: item.thumb
          }))
        );
      } catch (e) { console.error(e); }
    }

    /* β”€β”€β”€β”€β”€β”€β”€β”€β”€ μ΄κΈ°ν™” β”€β”€β”€β”€β”€β”€β”€β”€β”€ */
    document.addEventListener('DOMContentLoaded', async () => {
      await loadComponent('/components/header.html', 'header-container');
      await loadComponent('/components/footer.html', 'footer-container');
      await loadPowerAds();

      const cats = [
        { n: 'ν•μ‹', c: 'koreanAdsContainer', e: 'koreanEmpty' },
        { n: 'μ¤‘μ‹', c: 'chineseAdsContainer', e: 'chineseEmpty' },
        { n: 'μΌμ‹', c: 'japaneseAdsContainer', e: 'japaneseEmpty' },
        { n: 'μ–‘μ‹', c: 'westernAdsContainer', e: 'westernEmpty' },
        { n: 'ν¨μ¤νΈν‘Έλ“', c: 'fastfoodAdsContainer', e: 'fastfoodEmpty' },
        { n: 'μΉν‚¨', c: 'chickenAdsContainer', e: 'chickenEmpty' },
        { n: 'μΉ΄ν', c: 'cafeAdsContainer', e: 'cafeEmpty' },
        { n: 'μ¤νΈλ¦¬νΈν‘Έλ“', c: 'streetfoodAdsContainer', e: 'streetfoodEmpty' },
        { n: 'λ¶„μ‹', c: 'bunsikAdsContainer', e: 'bunsikEmpty' }
      ];
      cats.forEach(cfg => loadCategoryAds(cfg.n, cfg.c, cfg.e));

      /* λ²„νΌ μ¤ν¬λ΅¤ */
      document.querySelectorAll('.category-btn').forEach(btn => {
        btn.addEventListener('click', () => {
          const id = btn.dataset.target;
          document.getElementById(id).scrollIntoView({ behavior: 'smooth' });
        });
      });

      document.querySelectorAll('.home-link').forEach(link => {
        link.addEventListener('click', e => {
          e.preventDefault();
          document.getElementById('categorySelection').scrollIntoView({ behavior: 'smooth' });
        });
      });
    });
  </script>
</body>

</html>