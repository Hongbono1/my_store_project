<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>광고 홈페이지 (SSR+CSR 혼합 예시)</title>
  <!-- Tailwind CSS -->
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet" />
  <style>
    .header-content {
      gap: 1rem;
    }

    .nav-links a {
      transition: color 0.3s ease;
    }

    footer p {
      font-size: 0.875rem;
    }
  </style>
</head>

<body class="bg-gray-50">
  <!-- 헤더 -->
  <div id="header-container"></div>
  <!-- 메인 콘텐츠 -->
  <main class="w-full max-w-screen-xl mx-auto px-4 sm:px-8 mt-8">
    <section class="bg-white py-6 px-8 rounded-lg shadow border border-gray-300 w-full max-w-none">
      <div class="bg-blue-100 p-6 rounded-lg">
        <!-- 버튼 그룹(기본 카테고리) -->
        <div class="flex justify-center gap-4 flex-wrap">
          <a href="restaurant.html"
            class="bg-white text-black font-bold text-center px-8 py-3 rounded-full shadow hover:bg-blue-600 hover:text-white transition whitespace-nowrap">
            식당</a>
          <a href="hospital.html"
            class="bg-white text-black font-bold text-center px-8 py-3 rounded-full shadow hover:bg-blue-600 hover:text-white transition whitespace-nowrap">
            병원</a>
          <button
            class="bg-white text-black font-bold text-center px-8 py-3 rounded-full shadow hover:bg-blue-600 hover:text-white transition whitespace-nowrap">
            약국
          </button>
          <button
            class="bg-white text-black font-bold text-center px-8 py-3 rounded-full shadow hover:bg-blue-600 hover:text-white transition whitespace-nowrap">
            어린이집
          </button>
          <button
            class="bg-white text-black font-bold text-center px-8 py-3 rounded-full shadow hover:bg-blue-600 hover:text-white transition whitespace-nowrap">
            학원
          </button>
          <button
            class="bg-white text-black font-bold text-center px-8 py-3 rounded-full shadow hover:bg-blue-600 hover:text-white transition whitespace-nowrap">
            마트
          </button>
          <button
            class="bg-white text-black font-bold text-center px-8 py-3 rounded-full shadow hover:bg-blue-600 hover:text-white transition whitespace-nowrap">
            편의점
          </button>
          <button
            class="bg-white text-black font-bold text-center px-8 py-3 rounded-full shadow hover:bg-blue-600 hover:text-white transition whitespace-nowrap">
            운동
          </button>
          <button
            class="bg-white text-black font-bold text-center px-8 py-3 rounded-full shadow hover:bg-blue-600 hover:text-white transition whitespace-nowrap">
            미용/이발
          </button>
          <button
            class="bg-white text-black font-bold text-center px-8 py-3 rounded-full shadow hover:bg-blue-600 hover:text-white transition whitespace-nowrap">
            스터디/독서실
          </button>
          <button
            class="bg-white text-black font-bold text-center px-8 py-3 rounded-full shadow hover:bg-blue-600 hover:text-white transition whitespace-nowrap">
            목욕
          </button>
          <button
            class="bg-white text-black font-bold text-center px-8 py-3 rounded-full shadow hover:bg-blue-600 hover:text-white transition whitespace-nowrap">
            세탁/옷수선
          </button>
          <!-- +더보기 버튼 -->
          <button id="toggleButton"
            class="bg-blue-500 text-white font-bold text-center px-8 py-3 rounded-full shadow hover:bg-orange-600 transition whitespace-nowrap">
            +더보기
          </button>

          <!-- 숨겨진 카테고리 박스 -->
          <section id="hiddenCategories" class="hidden bg-gray-100 py-6 px-8 rounded-lg shadow w-full max-w-none mt-7">
            <div class="flex justify-center gap-4 flex-wrap">
              <button
                class="bg-white text-black font-bold text-center px-8 py-3 rounded-full shadow hover:bg-blue-600 hover:text-white transition">
                숙박
              </button>
              <button
                class="bg-white text-black font-bold text-center px-8 py-3 rounded-full shadow hover:bg-blue-600 hover:text-white transition">
                중고/구제
              </button>
              <button
                class="bg-white text-black font-bold text-center px-8 py-3 rounded-full shadow hover:bg-blue-600 hover:text-white transition">
                자동차 정비/수리등
              </button>
              <button
                class="bg-white text-black font-bold text-center px-8 py-3 rounded-full shadow hover:bg-blue-600 hover:text-white transition">
                주유소
              </button>
              <button
                class="bg-white text-black font-bold text-center px-8 py-3 rounded-full shadow hover:bg-blue-600 hover:text-white transition">
                반려동물
              </button>
              <button
                class="bg-white text-black font-bold text-center px-8 py-3 rounded-full shadow hover:bg-blue-600 hover:text-white transition">
                가전제품
              </button>
              <button
                class="bg-white text-black font-bold text-center px-8 py-3 rounded-full shadow hover:bg-blue-600 hover:text-white transition">
                철물 / 자재
              </button>
              <button
                class="bg-white text-black font-bold text-center px-8 py-3 rounded-full shadow hover:bg-blue-600 hover:text-white transition">
                간판 / 광고
              </button>
              <button
                class="bg-white text-black font-bold text-center px-8 py-3 rounded-full shadow hover:bg-blue-600 hover:text-white transition">
                통신 / 인터넷 / TV
              </button>
              <button
                class="bg-white text-black font-bold text-center px-8 py-3 rounded-full shadow hover:bg-blue-600 hover:text-white transition">
                안경 / 사진 / 꽃집
              </button>
            </div>
          </section>
        </div>
      </div>
    </section>

    <!-- 액션버튼 -->
    <div class="action-buttons mt-6 flex justify-center gap-6 flex-wrap">
      <a href="gift.html"
        class="action-button flex flex-col items-center justify-center transform transition duration-300 hover:-translate-y-2 hover:shadow-lg focus:outline-none focus:ring-0 focus-visible:outline-none">
        <div class="w-24 h-24 rounded-full overflow-hidden flex items-center justify-center">
          <img src="https://i.ibb.co/VVkpfNL/image.webp" alt="선물함" class="w-full h-full object-cover" />
        </div>
        <span class="mt-2 text-base font-bold text-gray-700">선물함</span>
      </a>
      <a href="#"
        class="action-button flex flex-col items-center justify-center transform transition duration-300 hover:-translate-y-2 hover:shadow-lg focus:outline-none focus:ring-0 focus-visible:outline-none">
        <div class="w-24 h-24 rounded-full overflow-hidden flex items-center justify-center">
          <img src="https://i.ibb.co/QJqMCh3/image.webp" alt="오픈예정" class="w-full h-full object-cover" />
        </div>
        <span class="mt-2 text-base font-bold text-gray-700">오픈예정</span>
      </a>
      <a href="deliveryrider.html"
        class="action-button flex flex-col items-center justify-center transform transition duration-300 hover:-translate-y-2 hover:shadow-lg focus:outline-none focus:ring-0 focus-visible:outline-none">
        <div class="w-24 h-24 rounded-full overflow-hidden flex items-center justify-center">
          <img src="https://i.ibb.co/KXSXKf3/image.webp" alt="배달제휴" class="w-full h-full object-cover" />
        </div>
        <span class="mt-2 text-base font-bold text-gray-700">배달제휴</span>
      </a>
      <a href="alarm.html"
        class="action-button flex flex-col items-center justify-center transform transition duration-300 hover:-translate-y-2 hover:shadow-lg focus:outline-none focus:ring-0 focus-visible:outline-none">
        <div class="w-24 h-24 rounded-full overflow-hidden flex items-center justify-center">
          <img src="https://i.ibb.co/FBgNSHs/image.webp" alt="알림" class="w-full h-full object-cover" />
        </div>
        <span class="mt-2 text-base font-bold text-gray-700">알림</span>
      </a>
      <a href="notice.html"
        class="action-button flex flex-col items-center justify-center transform transition duration-300 hover:-translate-y-2 hover:shadow-lg focus:outline-none focus:ring-0 focus-visible:outline-none">
        <div class="w-24 h-24 rounded-full overflow-hidden flex items-center justify-center">
          <img src="https://i.ibb.co/fMNYxBm/image.webp" alt="공지사항" class="w-full h-full object-cover" />
        </div>
        <span class="mt-2 text-base font-bold text-gray-700">공지사항</span>
      </a>
      <a href="mypage.html"
        class="action-button flex flex-col items-center justify-center transform transition duration-300 hover:-translate-y-2 hover:shadow-lg focus:outline-none focus:ring-0 focus-visible:outline-none">
        <div class="w-24 h-24 rounded-full overflow-hidden flex items-center justify-center">
          <img src="https://i.ibb.co/2cXQy1p/image.webp" alt="마이페이지" class="w-full h-full object-cover" />
        </div>
        <span class="mt-2 text-base font-bold text-gray-700">마이페이지</span>
      </a>
    </div>

    <!-- 슬라이더 -->
    <div class="relative w-full overflow-hidden border border-gray-300 rounded-lg mt-8 px-4 mb-9">
      <!-- 슬라이드 전체 컨테이너 -->
      <div id="sliderContainer" class="flex transition-transform duration-500 h-72 items-center">
        <!-- 슬라이드 복제: 마지막 2장 -->
        <div class="flex-shrink-0 w-1/3 px-2">
          <div class="border border-gray-400 bg-white h-64 rounded-lg flex items-center justify-center">
            <img src="https://via.placeholder.com/300x200" alt="슬라이드 6" class="object-cover h-full w-full rounded-lg" />
          </div>
        </div>
        <div class="flex-shrink-0 w-1/3 px-2">
          <div class="border border-gray-400 bg-white h-64 rounded-lg flex items-center justify-center">
            <img src="https://via.placeholder.com/300x200" alt="슬라이드 7" class="object-cover h-full w-full rounded-lg" />
          </div>
        </div>
        <!-- 실제 슬라이드 7장 -->
        <div class="flex-shrink-0 w-1/3 px-2">
          <div class="border border-gray-400 bg-white h-64 rounded-lg flex items-center justify-center">
            <img src="https://via.placeholder.com/300x200" alt="슬라이드 1" class="object-cover h-full w-full rounded-lg" />
          </div>
        </div>
        <div class="flex-shrink-0 w-1/3 px-2">
          <div class="border border-gray-400 bg-white h-64 rounded-lg flex items-center justify-center">
            <img src="https://via.placeholder.com/300x200" alt="슬라이드 2" class="object-cover h-full w-full rounded-lg" />
          </div>
        </div>
        <div class="flex-shrink-0 w-1/3 px-2">
          <div class="border border-gray-400 bg-white h-64 rounded-lg flex items-center justify-center">
            <img src="https://via.placeholder.com/300x200" alt="슬라이드 3" class="object-cover h-full w-full rounded-lg" />
          </div>
        </div>
        <div class="flex-shrink-0 w-1/3 px-2">
          <div class="border border-gray-400 bg-white h-64 rounded-lg flex items-center justify-center">
            <img src="https://via.placeholder.com/300x200" alt="슬라이드 4" class="object-cover h-full w-full rounded-lg" />
          </div>
        </div>
        <div class="flex-shrink-0 w-1/3 px-2">
          <div class="border border-gray-400 bg-white h-64 rounded-lg flex items-center justify-center">
            <img src="https://via.placeholder.com/300x200" alt="슬라이드 5" class="object-cover h-full w-full rounded-lg" />
          </div>
        </div>
        <div class="flex-shrink-0 w-1/3 px-2">
          <div class="border border-gray-400 bg-white h-64 rounded-lg flex items-center justify-center">
            <img src="https://via.placeholder.com/300x200" alt="슬라이드 6" class="object-cover h-full w-full rounded-lg" />
          </div>
        </div>
        <div class="flex-shrink-0 w-1/3 px-2">
          <div class="border border-gray-400 bg-white h-64 rounded-lg flex items-center justify-center">
            <img src="https://via.placeholder.com/300x200" alt="슬라이드 7" class="object-cover h-full w-full rounded-lg" />
          </div>
        </div>
        <!-- 슬라이드 복제: 첫 2장 -->
        <div class="flex-shrink-0 w-1/3 px-2">
          <div class="border border-gray-400 bg-white h-64 rounded-lg flex items-center justify-center">
            <img src="https://via.placeholder.com/300x200" alt="슬라이드 1" class="object-cover h-full w-full rounded-lg" />
          </div>
        </div>
        <div class="flex-shrink-0 w-1/3 px-2">
          <div class="border border-gray-400 bg-white h-64 rounded-lg flex items-center justify-center">
            <img src="https://via.placeholder.com/300x200" alt="슬라이드 2" class="object-cover h-full w-full rounded-lg" />
          </div>
        </div>
      </div>
      <button id="prevBtn"
        class="absolute left-4 top-1/2 transform -translate-y-1/2 bg-gray-700 text-white p-3 rounded-full hover:bg-gray-900 transition z-10">
        &lt;
      </button>
      <button id="nextBtn"
        class="absolute right-4 top-1/2 transform -translate-y-1/2 bg-gray-700 text-white p-3 rounded-full hover:bg-gray-900 transition z-10">
        &gt;
      </button>
    </div>

    <!-- 메인 섹션: (생략, 원본 유지) -->
    <!-- ... 카테고리/액션버튼/슬라이더 코드는 그대로 ... -->
    <!-- (중간 코드 생략, 요청 시 전체 가능) -->

    <!-- 트렌드박스(실시간) -->
    <div class="bg-gray-50 py-10 px-6">
      <div class="mx-auto max-w-screen-lg grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8">
        <div class="trend-box bg-blue-100 rounded-xl shadow-lg p-6">
          <h3 class="text-xl font-extrabold text-blue-700 mb-4 text-center">실시간 인기 검색어</h3>
          <ul id="popularSearches" class="space-y-2 text-gray-700 font-medium">
            <li class="text-gray-400 text-center">정보 없음</li>
          </ul>
        </div>
        <div class="trend-box bg-green-100 rounded-xl shadow-lg p-6">
          <h3 class="text-xl font-extrabold text-green-700 mb-4 text-center">최신 소식</h3>
          <ul id="latestNews" class="space-y-2 text-gray-700 font-medium">
            <li class="text-gray-400 text-center">정보 없음</li>
          </ul>
        </div>
        <div class="trend-box bg-yellow-100 rounded-xl shadow-lg p-6">
          <h3 class="text-xl font-extrabold text-yellow-700 mb-4 text-center">이벤트 정보</h3>
          <ul id="eventInfo" class="space-y-2 text-gray-700 font-medium">
            <li class="text-gray-400 text-center">정보 없음</li>
          </ul>
        </div>
        <div class="trend-box bg-purple-100 rounded-xl shadow-lg p-6">
          <h3 class="text-xl font-extrabold text-purple-700 mb-4 text-center">추천 제품</h3>
          <ul id="recommendedProducts" class="space-y-2 text-gray-700 font-medium">
            <li class="text-gray-400 text-center">정보 없음</li>
          </ul>
        </div>
      </div>
    </div>

    <!-- 광고/홍보/가게자랑/시장/예술 섹션들도 마찬가지 -->
    <section id="paidAds" class="bg-yellow-50 border-4 border-yellow-400 shadow-lg rounded-lg p-6 mt-8">
      <h2 class="text-2xl font-bold mb-4">파워 AD (SSR 시뮬레이션)</h2>
      <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6">
        <div class="col-span-4 text-center text-gray-400 py-8 text-lg">광고 없음</div>
      </div>
    </section>

    <section id="hotNeighborhoodSection" class="bg-white border-2 border-gray-300 rounded-lg p-6 mt-8 shadow relative">
      <div class="flex items-center justify-between mb-6">
        <h2 class="text-3xl font-bold">가장 핫한 우리 동네 (CSR)</h2>
        <a href="hottest neighborhood.html"
          class="text-blue-500 text-lg font-semibold hover:underline transition">+더보기</a>
      </div>
      <div id="hotNeighborhoodContainer" class="grid grid-cols-4 gap-6">
        <div class="col-span-4 text-center text-gray-400 py-8 text-lg">광고 없음</div>
      </div>
    </section>

    <section id="promoRecommendationSection"
      class="bg-white border-2 border-gray-300 rounded-lg p-6 mt-8 shadow relative">
      <div class="flex items-center justify-between mb-6">
        <h2 class="text-3xl font-bold">홍보의 추천 (CSR)</h2>
        <a href="recommendation.html" class="text-blue-500 text-lg font-semibold hover:underline transition">+더보기</a>
      </div>
      <!-- grid grid-cols-4 gap-6 로 변경 -->
      <div id="promoRecommendationContainer" class="grid grid-cols-4 gap-6">
        <div class="col-span-4 text-center text-gray-400 py-8 text-lg">광고 없음</div>
      </div>
    </section>

    <section id="open-hot-section" class="bg-white border-2 border-gray-300 rounded-lg p-6 mt-8 shadow relative">
      <div class="flex items-center justify-between mb-6">
        <h2 class="text-3xl font-bold text-cyan-700">오픈예정</h2>
        <a href="/openlist.html" class="text-blue-500 text-lg font-semibold hover:underline transition">전체보기</a>
      </div>
      <div id="openHotContainer" class="grid grid-cols-4 gap-6">
        <div class="col-span-4 text-center text-gray-400 py-8 text-lg">광고 없음</div>
      </div>
    </section>

    <section id="storeprideSection" class="bg-white border-2 border-gray-300 rounded-lg p-6 mt-8 shadow relative">
      <div class="flex items-center justify-between mb-6">
        <h2 class="text-3xl font-bold">가게자랑 (CSR)</h2>
        <a href="storepride.html" class="text-blue-500 text-lg font-semibold hover:underline transition">+더보기</a>
      </div>
      <div id="storeprideContainer" class="grid grid-cols-4 gap-6">
        <div class="col-span-4 text-center text-gray-400 py-8 text-lg">광고 없음</div>
      </div>
    </section>

    <section id="traditionalmarketSection"
      class="bg-white border-2 border-gray-300 rounded-lg p-6 mt-8 shadow relative">
      <div class="flex items-center justify-between mb-6">
        <h2 class="text-3xl font-bold">전통시장 (CSR)</h2>
        <a href="traditionalmarket.html" class="text-blue-500 text-lg font-semibold hover:underline transition">+더보기</a>
      </div>
      <div id="traditionalmarketContainer" class="grid grid-cols-4 gap-6">
        <div class="col-span-4 text-center text-gray-400 py-8 text-lg">광고 없음</div>
      </div>
    </section>

    <section id="localartSection" class="bg-white border-2 border-gray-300 rounded-lg p-6 mt-8 shadow relative">
      <div class="flex items-center justify-between mb-6">
        <h2 class="text-3xl font-bold">지역 공연 / 예술 / 축제 (CSR)</h2>
        <a href="performingarts.html" class="text-blue-500 text-lg font-semibold hover:underline transition">+더보기</a>
      </div>
      <div id="localartContainer" class="grid grid-cols-4 gap-6">
        <div class="col-span-4 text-center text-gray-400 py-8 text-lg">광고 없음</div>
      </div>
    </section>
  </main>

  <div id="footer-container">Footer Placeholder</div>

  <!-- 모달 등은 기존 그대로 (생략) -->

  <!-- JS: 필요 시 동적 데이터/광고 삽입. 데이터 없을 때는 위의 안내문구 유지 -->
  <script>
    // 1) 헤더/푸터 로드
    async function loadComponent(url, id) {
      try {
        const res = await fetch(url);
        if (!res.ok) throw new Error(res.status);
        document.getElementById(id).innerHTML = await res.text();
      } catch { }
    }

    // 2) 유틸: 날짜/주소 포맷
    function formatDate(d) {
      if (!d) return "-";
      const D = new Date(d);
      return `${String(D.getFullYear()).slice(2)}. ${D.getMonth() + 1}. ${D.getDate()}`;
    }
    function shortAddress(a) {
      if (!a) return "";
      return a.trim().replace(/\s+/g, " ").split(" ").slice(2, 5).join(" ");
    }

    // 3) 카드 생성 (항상 w-full)
    function createCard(item, type = "open") {
      if (!item) return createEmpty(type);
      let url = "#";
      if (type === "open") url = `/opendetail.html?id=${item.id || item._id}`;
      if (type === "hot") url = `/detail.html?id=${item.id || item._id}`;
      if (type === "pride") url = `/substorepride.html?id=${item.id || item._id}`;
      if (type === "market") url = `/submarket.html?id=${item.id || item._id}`;
      if (type === "art") url = `/subart.html?id=${item.id || item._id}`;
      const name = item.store_name || item.title || "정보 없음";
      const img = item.thumbnail || item.img || "/assets/images/no-thumb.png";
      const when = item.open_date ? "오픈 " + formatDate(item.open_date)
        : item.date ? formatDate(item.date) : "";
      const div = document.createElement("div");
      div.className = "bg-white shadow-lg rounded-lg p-6 flex flex-col border border-gray-300 transition hover:-translate-y-1 hover:shadow-xl w-full";
      div.innerHTML = `
      <img src="${img}" alt="${name}" class="h-40 w-full object-cover rounded mb-4 bg-gray-50">
      <h2 class="text-xl font-bold text-center mb-2 truncate" title="${name}">${name}</h2>
      <div class="text-cyan-700 text-sm font-semibold text-center mb-1">${when}</div>
      <div class="text-gray-700 text-center mb-1 truncate">${shortAddress(item.address) || item.address || ""}</div>
      <div class="text-xs text-gray-500 text-center mb-1">${item.category || ""}</div>
      <a href="${url}" class="mt-auto bg-blue-500 text-white py-2 px-4 rounded text-center shadow hover:bg-blue-600">상세보기</a>
    `;
      return div;
    }

    // 4) 빈 카드 (w-full)
    function createEmpty(type = "open") {
      const div = document.createElement("div");
      div.className = "bg-white shadow-lg rounded-lg p-6 flex flex-col border border-gray-300 opacity-50 w-full";
      div.innerHTML = `
      <div class="h-40 w-full bg-gray-100 rounded mb-4 animate-pulse"></div>
      <h2 class="text-xl font-bold text-center mb-2 text-gray-400">정보 없음</h2>
      <div class="text-sm text-gray-500 text-center mb-2">${type === "open" ? "오픈예정" : "정보 없음"}</div>
      <a class="mt-auto bg-gray-300 text-white py-2 px-4 rounded text-center cursor-not-allowed">대기 중</a>
    `;
      return div;
    }

    // 5) 섹션 렌더러
    async function renderSectionCards(api, containerId, type = "open", max = 8) {
      // 여기가 함수 내부 시작
      let data = [];
      try {
        const r = await fetch(api);
        if (r.ok) data = await r.json();
      } catch {
        // fetch 에러 무시
      }

      const cont = document.getElementById(containerId);
      if (!cont) return;

      cont.innerHTML = "";
      const slice = (data || []).slice(0, max);
      while (slice.length < max) slice.push(null);
      slice.forEach(item => cont.appendChild(createCard(item, type)));
      // 여기가 함수 내부 끝
    } // ← 이 중괄호가 함수 선언부의 닫는 중괄호입니다.

    // 6) 초기화
    document.addEventListener("DOMContentLoaded", async () => {
      await loadComponent("components/header.html", "header-container");
      await loadComponent("components/footer.html", "footer-container");

      // → HTML 컨테이너는 반드시 grid grid-cols-4 gap-6
      await renderSectionCards("/open",        "openHotContainer",           "open",      8);
      await renderSectionCards("/index/hot",   "hotNeighborhoodContainer",   "hot",       8);
      await renderSectionCards("/recommend/api","promoRecommendationContainer","recommend", 8);
      await renderSectionCards("/api/storepride/list", "storeprideContainer", "pride", 8);
      await renderSectionCards("/api/market",  "traditionalmarketContainer", "market",    8);
      await renderSectionCards("/api/arts",    "localartContainer",          "art",       8);
    });
  </script>

</body>

</html>