<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì§€ì—­ ê³µì—° ì˜ˆìˆ  ì¶•ì œ</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-gradient-to-r from-blue-50 to-indigo-100">
    <!-- í—¤ë” -->
    <div id="header"></div>

    <!-- ë©”ì¸ ë°°ë„ˆ -->
    <section class="text-center py-12">
        <h2 class="text-5xl font-extrabold text-gray-900">ğŸ­ ê³µì—° ì˜ˆìˆ  ì¶•ì œ 2025 ğŸ¶</h2>
        <p class="text-xl text-gray-700 mt-4">í™”ë ¤í•œ ì˜ˆìˆ ì˜ í–¥ì—°ìœ¼ë¡œ ë§ˆìŒì„ ì±„ìš°ì„¸ìš”</p>
    </section>

    <!-- ê³µì—° ì¼ì • ì„¹ì…˜ -->
    <section class="max-w-7xl mx-auto px-4 py-12">
        <div class="flex justify-between items-center mb-6">
            <h3 class="text-3xl font-bold text-gray-900">ğŸ¤ ê³µì—° ì¼ì •</h3>
            <a href="event-details.html" class="text-indigo-600 text-lg font-semibold hover:underline">+ ë”ë³´ê¸°</a>
        </div>
        <div id="event-container" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6">
        </div>
    </section>

    <!-- ì˜ˆìˆ  ì„¹ì…˜ -->
    <section class="max-w-7xl mx-auto px-4 py-12 mt-12">
        <div class="flex justify-between items-center mb-6">
            <h3 class="text-3xl font-bold text-gray-900">ğŸ¨ ì˜ˆìˆ  ì „ì‹œ & ì²´í—˜</h3>
            <a href="art-details.html" class="text-indigo-600 text-lg font-semibold hover:underline">+ ë”ë³´ê¸°</a>
        </div>
        <div id="art-container" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6">
        </div>
    </section>

    <!-- ê¸¸ê±°ë¦¬ ë²„ìŠ¤ì»¤ ì„¹ì…˜ -->
    <section class="p-8 max-w-7xl mx-auto mt-12">
        <div class="flex justify-between items-center mb-6">
            <h3 class="text-3xl font-bold text-indigo-600">ğŸ¸ ê¸¸ê±°ë¦¬ ë²„ìŠ¤ì»¤ ê³µì—°</h3>
            <a href="busker-details.html" class="text-indigo-600 text-lg font-semibold hover:underline">+ ë”ë³´ê¸°</a>
        </div>
        <div id="busker-container" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6">
        </div>
    </section>

    <!-- í‘¸í„° -->
    <div id="footer"></div>

    <script>
        // í—¤ë” ë° í‘¸í„° ë¡œë“œ
        fetch('components/header.html')
            .then(response => response.text())
            .then(data => document.getElementById('header').innerHTML = data)
            .catch(error => console.error('í—¤ë” ë¡œë”© ì‹¤íŒ¨:', error));

        fetch('components/footer.html')
            .then(response => response.text())
            .then(data => document.getElementById('footer').innerHTML = data)
            .catch(error => console.error('í‘¸í„° ë¡œë”© ì‹¤íŒ¨:', error));

        document.addEventListener("DOMContentLoaded", function () {
            const eventContainer = document.getElementById("event-container");
            const artContainer = document.getElementById("art-container");
            const buskerContainer = document.getElementById("busker-container");

            const events = [
                { title: "ë®¤ì§€ì»¬ ê°ˆë¼ì‡¼", date: "5ì›” 10ì¼ | ë©”ì¸ ë¬´ëŒ€", img: "https://source.unsplash.com/400x300/?concert" },
                { title: "ì „í†µ ë¬´ìš© ê³µì—°", date: "5ì›” 11ì¼ | ì•¼ì™¸ ë¬´ëŒ€", img: "https://source.unsplash.com/400x300/?theater" },
                { title: "ì¬ì¦ˆ ë°´ë“œ ë¼ì´ë¸Œ", date: "5ì›” 12ì¼ | ìŒì•… ê´‘ì¥", img: "https://source.unsplash.com/400x300/?jazz" }
            ];

            const arts = [
                { title: "í˜„ëŒ€ ë¯¸ìˆ  ì „ì‹œ", location: "ê°¤ëŸ¬ë¦¬ A", img: "https://source.unsplash.com/400x300/?art" },
                { title: "ê³µì˜ˆ ì²´í—˜", location: "ë¬¸í™”ê´€ B", img: "https://source.unsplash.com/400x300/?craft" },
                { title: "ì‚¬ì§„ ì˜ˆìˆ ì „", location: "í¬í†  ê°¤ëŸ¬ë¦¬ C", img: "https://source.unsplash.com/400x300/?photography" }
            ];

            const buskers = [
                { title: "ë²„ìŠ¤ì»¤ A", type: "ì–´ì¿ ìŠ¤í‹± ê³µì—°", img: "https://source.unsplash.com/400x300/?guitar" },
                { title: "ë²„ìŠ¤ì»¤ B", type: "í™í•© ê³µì—°", img: "https://source.unsplash.com/400x300/?hiphop" },
                { title: "ë²„ìŠ¤ì»¤ C", type: "í´ë˜ì‹ ê³µì—°", img: "https://source.unsplash.com/400x300/?violin" }
            ];

            function renderCards(container, data, link) {
                container.innerHTML = "";
                data.forEach(item => {
                    const card = document.createElement("div");
                    card.className = "bg-white border shadow-lg rounded-lg p-4 text-center hover:shadow-2xl transition-transform transform hover:scale-105";
                    card.innerHTML = `
                        <a href="${link}?title=${encodeURIComponent(item.title)}" class="block">
                            <img class="h-48 w-full object-cover rounded" src="${item.img}" alt="${item.title}">
                            <h4 class="text-xl font-semibold mt-4">${item.title}</h4>
                            <p class="text-gray-600">${item.date || item.location || item.type}</p>
                        </a>
                    `;
                    container.appendChild(card);
                });
            }

            renderCards(eventContainer, events, "event-details.html");
            renderCards(artContainer, arts, "art-details.html");
            renderCards(buskerContainer, buskers, "busker-details.html");
        });
    </script>

    <!-- â˜…â˜… ëª¨ë‹¬ HTML (ë©”ì¸í˜ì´ì§€ì™€ ë™ì¼ êµ¬ì¡°) â˜…â˜… -->
    <!-- ëª¨ë‹¬ ì˜¤ë²„ë ˆì´ -->
    <div id="adDetailOverlay" class="fixed inset-0 bg-black bg-opacity-40 z-40 hidden"></div>
    <!-- ëª¨ë‹¬ ë°•ìŠ¤ -->
    <div id="adDetailModal" class="fixed inset-0 flex items-center justify-center z-50 hidden">
        <div class="bg-white w-11/12 md:w-[80%] h-[90vh] max-h-screen max-w-5xl p-5 rounded-lg shadow-lg overflow-y-auto">
            <div class="flex justify-between items-center mb-2">
                <h2 class="text-2xl font-bold" id="adModalTitle">ìƒì„¸ ì •ë³´</h2>
                <button id="closeAdModalBtn" class="text-gray-500 hover:text-gray-800 text-2xl font-bold">âœ•</button>
            </div>
            <!-- ì´ë¯¸ì§€ ì„¹ì…˜ -->
            <div class="w-full flex justify-center">
                <div class="flex flex-col items-center">
                    <div class="overflow-y-auto border" style="width: 600px; height: 400px;">
                        <img id="adMainImage" src="" alt="ìƒì„¸ ì´ë¯¸ì§€" class="w-[600px] h-[200px] object-cover">
                    </div>
                    <!-- ì¸ë„¤ì¼ (3ì¥ ê°€ì •) -->
                    <div class="mt-4 flex justify-center gap-2">
                        <img id="adThumb1" class="w-20 h-20 cursor-pointer border border-gray-200 hover:border-orange-500 rounded">
                        <img id="adThumb2" class="w-20 h-20 cursor-pointer border border-gray-200 hover:border-orange-500 rounded">
                        <img id="adThumb3" class="w-20 h-20 cursor-pointer border border-gray-200 hover:border-orange-500 rounded">
                    </div>
                </div>
            </div>
            <!-- ì •ë³´ ì„¹ì…˜ -->
            <div class="mt-4 text-lg">
                <p><strong>ìœ„ì¹˜:</strong> <a id="adModalLocation" href="https://map.kakao.com/" target="_blank" class="underline text-blue-500">ìœ„ì¹˜ ë³´ê¸°</a></p>
                <p><strong>ì˜¤í”ˆì¼:</strong> <span id="adModalOpenDate"></span></p>
                <p><strong>ì—…ì¢…:</strong> <span id="adModalBiz"></span></p>
                <p><strong>ì „í™”ë²ˆí˜¸:</strong> <span id="adModalPhone"></span></p>
                <p><strong>ë°°ë‹¬:</strong> <span id="adModalDelivery"></span></p>
                <p><strong>ì´ë²¤íŠ¸:</strong> <span id="adModalEvents"></span></p>
                <p><strong>ì¥ì• ì¸ í¸ì˜ ì‹œì„¤:</strong> <span id="adModalFacilities"></span></p>
            </div>
            <!-- ì¶”ê°€ ì •ë³´ ì„¹ì…˜ (í† ê¸€) -->
            <div id="adDetailHiddenFields" class="hidden mt-4">
                <p class="font-bold text-lg mb-1">ì¶”ê°€ ì •ë³´:</p>
                <p id="adModalAdditionalInfo" class="text-gray-700">
                    ì—¬ê¸°ì— ì¶”ê°€ ì •ë³´ê°€ ìˆìŠµë‹ˆë‹¤. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed euismod, velit in vestibulum interdum,
                    libero sapien facilisis magna, in molestie metus mauris nec turpis.
                    <br><br>
                    Morbi malesuada, nisi vitae faucibus cursus, nunc mauris faucibus mauris, at vehicula elit libero ac dui.
                    Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia curae; Donec mollis, lectus sed facilisis porttitor,
                    urna massa consectetur odio, sed tincidunt neque lacus sed urna.
                    <br><br>
                    Donec in consequat lorem. Nam sed laoreet sapien. Suspendisse potenti. Integer fermentum velit eu eros feugiat, et porta libero tempus.
                </p>
            </div>
            <div class="mt-4 flex justify-center gap-4">
                <button id="adDetailToggleBtn"
                    class="bg-blue-500 text-white font-bold py-3 px-8 rounded-lg shadow-md hover:bg-blue-600 transition">
                    ë”ë³´ê¸°
                </button>
                <button id="adDetailToggleBtn2"
                    class="hidden bg-blue-500 text-white font-bold py-3 px-8 rounded-lg shadow-md hover:bg-blue-600 transition">
                    ì´ì „
                </button>
            </div>
        </div>
    </div>
    <!-- â˜…â˜… ëª¨ë‹¬ HTML ë â˜…â˜… -->

    <!-- â˜…â˜… ëª¨ë‹¬ ê´€ë ¨ ìŠ¤í¬ë¦½íŠ¸ ë° Dummy Fetch ì¸í„°ì…‰í„° â˜…â˜… -->
    <script>
        /***********************
         * 1. Dummy fetch ì¸í„°ì…‰í„° (ì„œë²„ ì—†ì´ ë™ì‘í•˜ë„ë¡)
         ***********************/
        (function() {
            const originalFetch = window.fetch;
            window.fetch = function(url, options) {
                if (url.startsWith("/api/eventDetails?title=")) {
                    const urlObj = new URL(url, location.origin);
                    const title = urlObj.searchParams.get("title");
                    const dummyData = {
                        title: title + " - ê³µì—° ì¼ì • ìƒì„¸",
                        mainImage: "https://via.placeholder.com/600x200?text=" + encodeURIComponent(title),
                        mapUrl: "https://map.kakao.com/",
                        openDate: "2025-05-10",
                        biz: "ê³µì—° ì¼ì •",
                        phone: "010-1111-2222",
                        delivery: false,
                        events: "ê³µì—° ì¼ì • ì´ë²¤íŠ¸ ì •ë³´",
                        facilities: "ì¥ì• ì¸ í¸ì˜ ì‹œì„¤ ì •ë³´",
                        additionalInfo: "ê³µì—° ì¼ì •ì— ëŒ€í•œ ì¶”ê°€ ìƒì„¸ ì„¤ëª…ì…ë‹ˆë‹¤.",
                        thumbnails: [
                            "https://via.placeholder.com/150x150?text=Thumb1",
                            "https://via.placeholder.com/150x150?text=Thumb2",
                            "https://via.placeholder.com/150x150?text=Thumb3"
                        ]
                    };
                    return new Promise(resolve => {
                        setTimeout(() => {
                            resolve({
                                json: () => Promise.resolve(dummyData)
                            });
                        }, 300);
                    });
                } else if (url.startsWith("/api/artDetails?title=")) {
                    const urlObj = new URL(url, location.origin);
                    const title = urlObj.searchParams.get("title");
                    const dummyData = {
                        title: title + " - ì˜ˆìˆ  ì „ì‹œ ìƒì„¸",
                        mainImage: "https://via.placeholder.com/600x200?text=" + encodeURIComponent(title),
                        mapUrl: "https://map.kakao.com/",
                        openDate: "2025-06-15",
                        biz: "ì˜ˆìˆ  ì „ì‹œ",
                        phone: "",
                        delivery: false,
                        events: "ì „ì‹œ ì¼ì • ë° ì²´í—˜ ì •ë³´",
                        facilities: "ì „ì‹œíšŒ ì¥ì†Œ ì •ë³´",
                        additionalInfo: "ì˜ˆìˆ  ì „ì‹œ ë° ì²´í—˜ì— ê´€í•œ ìƒì„¸ ì„¤ëª…ì…ë‹ˆë‹¤.",
                        thumbnails: [
                            "https://via.placeholder.com/150x150?text=ArtThumb1",
                            "https://via.placeholder.com/150x150?text=ArtThumb2",
                            "https://via.placeholder.com/150x150?text=ArtThumb3"
                        ]
                    };
                    return new Promise(resolve => {
                        setTimeout(() => {
                            resolve({
                                json: () => Promise.resolve(dummyData)
                            });
                        }, 300);
                    });
                } else if (url.startsWith("/api/buskerDetails?title=")) {
                    const urlObj = new URL(url, location.origin);
                    const title = urlObj.searchParams.get("title");
                    const dummyData = {
                        title: title + " - ê¸¸ê±°ë¦¬ ë²„ìŠ¤ì»¤ ìƒì„¸",
                        mainImage: "https://via.placeholder.com/600x200?text=" + encodeURIComponent(title),
                        mapUrl: "https://map.kakao.com/",
                        openDate: "2025-07-20",
                        biz: "ë²„ìŠ¤ì»¤ ê³µì—°",
                        phone: "",
                        delivery: false,
                        events: "ë²„ìŠ¤ì»¤ ê³µì—° ì •ë³´",
                        facilities: "ë²„ìŠ¤ì»¤ ê³µì—° ì¥ì†Œ ì •ë³´",
                        additionalInfo: "ê¸¸ê±°ë¦¬ ë²„ìŠ¤ì»¤ ê³µì—°ì— ëŒ€í•œ ìƒì„¸ ì„¤ëª…ì…ë‹ˆë‹¤.",
                        thumbnails: [
                            "https://via.placeholder.com/150x150?text=BuskerThumb1",
                            "https://via.placeholder.com/150x150?text=BuskerThumb2",
                            "https://via.placeholder.com/150x150?text=BuskerThumb3"
                        ]
                    };
                    return new Promise(resolve => {
                        setTimeout(() => {
                            resolve({
                                json: () => Promise.resolve(dummyData)
                            });
                        }, 300);
                    });
                }
                return originalFetch(url, options);
            };
        })();

        /***********************
         * 2. ëª¨ë‹¬ ì—´ê¸°/ë‹«ê¸° í•¨ìˆ˜
         ***********************/
        function openDetailModal(endpoint) {
            fetch(endpoint)
                .then(response => response.json())
                .then(data => {
                    document.getElementById("adModalTitle").textContent = data.title;
                    document.getElementById("adMainImage").src = data.mainImage;
                    document.getElementById("adModalLocation").href = data.mapUrl;
                    document.getElementById("adModalOpenDate").textContent = data.openDate;
                    document.getElementById("adModalBiz").textContent = data.biz;
                    document.getElementById("adModalPhone").textContent = data.phone;
                    document.getElementById("adModalDelivery").textContent = data.delivery ? "ê°€ëŠ¥" : "ë¶ˆê°€";
                    document.getElementById("adModalEvents").textContent = data.events;
                    document.getElementById("adModalFacilities").textContent = data.facilities;
                    document.getElementById("adModalAdditionalInfo").textContent = data.additionalInfo;
                    const thumbs = [document.getElementById("adThumb1"), document.getElementById("adThumb2"), document.getElementById("adThumb3")];
                    data.thumbnails.forEach((src, i) => {
                        if (thumbs[i]) {
                            thumbs[i].src = src;
                            thumbs[i].onclick = () => {
                                document.getElementById("adMainImage").src = src;
                            };
                        }
                    });
                    document.getElementById("adDetailOverlay").classList.remove("hidden");
                    document.getElementById("adDetailModal").classList.remove("hidden");
                })
                .catch(error => {
                    console.error("ì„œë²„ ìš”ì²­ ì—ëŸ¬:", error);
                    document.getElementById("adModalTitle").textContent = "ìƒì„¸ ì •ë³´ ë¶ˆëŸ¬ì˜¤ê¸° ì‹¤íŒ¨";
                    document.getElementById("adMainImage").src = "https://via.placeholder.com/600x200?text=Load+Error";
                    document.getElementById("adDetailOverlay").classList.remove("hidden");
                    document.getElementById("adDetailModal").classList.remove("hidden");
                });
        }

        function closeDetailModal() {
            document.getElementById("adDetailOverlay").classList.add("hidden");
            document.getElementById("adDetailModal").classList.add("hidden");
        }

        // ëª¨ë‹¬ ë‹«ê¸° ì´ë²¤íŠ¸ (ì˜¤ë²„ë ˆì´, ë‹«ê¸° ë²„íŠ¼)
        document.getElementById("adDetailOverlay").addEventListener("click", closeDetailModal);
        document.getElementById("closeAdModalBtn").addEventListener("click", closeDetailModal);

        // "ë”ë³´ê¸°"/"ì´ì „" ë²„íŠ¼ í† ê¸€ ì´ë²¤íŠ¸
        document.getElementById("adDetailToggleBtn").addEventListener("click", () => {
            document.getElementById("adDetailHiddenFields").classList.remove("hidden");
            document.getElementById("adDetailToggleBtn").classList.add("hidden");
            document.getElementById("adDetailToggleBtn2").classList.remove("hidden");
        });
        document.getElementById("adDetailToggleBtn2").addEventListener("click", () => {
            document.getElementById("adDetailHiddenFields").classList.add("hidden");
            document.getElementById("adDetailToggleBtn").classList.remove("hidden");
            document.getElementById("adDetailToggleBtn2").classList.add("hidden");
        });

        /***********************
         * 3. "ì§€ì—­ ê³µì—° ì˜ˆìˆ  ì¶•ì œ" í˜ì´ì§€ ë‚´ ì¹´ë“œ í´ë¦­ ì‹œ ëª¨ë‹¬ í˜¸ì¶œ ì´ë²¤íŠ¸ ì¶”ê°€
         ***********************/
        document.addEventListener("DOMContentLoaded", () => {
            // ì´ë²¤íŠ¸ ì„¹ì…˜
            const eventLinks = document.querySelectorAll("#event-container a");
            eventLinks.forEach(link => {
                link.addEventListener("click", function (e) {
                    e.preventDefault();
                    const href = this.getAttribute("href"); // ì˜ˆ: "event-details.html?title=ë®¤ì§€ì»¬ ê°ˆë¼ì‡¼"
                    let endpoint = "";
                    if (href.startsWith("event-details.html")) {
                        endpoint = "/api/eventDetails" + href.substring("event-details.html".length);
                    }
                    openDetailModal(endpoint);
                });
            });
            // ì˜ˆìˆ  ì„¹ì…˜
            const artLinks = document.querySelectorAll("#art-container a");
            artLinks.forEach(link => {
                link.addEventListener("click", function (e) {
                    e.preventDefault();
                    const href = this.getAttribute("href"); // ì˜ˆ: "art-details.html?title=í˜„ëŒ€ ë¯¸ìˆ  ì „ì‹œ"
                    let endpoint = "";
                    if (href.startsWith("art-details.html")) {
                        endpoint = "/api/artDetails" + href.substring("art-details.html".length);
                    }
                    openDetailModal(endpoint);
                });
            });
            // ë²„ìŠ¤ì»¤ ì„¹ì…˜
            const buskerLinks = document.querySelectorAll("#busker-container a");
            buskerLinks.forEach(link => {
                link.addEventListener("click", function (e) {
                    e.preventDefault();
                    const href = this.getAttribute("href"); // ì˜ˆ: "busker-details.html?title=ë²„ìŠ¤ì»¤ A"
                    let endpoint = "";
                    if (href.startsWith("busker-details.html")) {
                        endpoint = "/api/buskerDetails" + href.substring("busker-details.html".length);
                    }
                    openDetailModal(endpoint);
                });
            });
        });
    </script>
    <!-- â˜…â˜… ëª¨ë‹¬ ê´€ë ¨ ìŠ¤í¬ë¦½íŠ¸ ë â˜…â˜… -->
</body>

</html>
