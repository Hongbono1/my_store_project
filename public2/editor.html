<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ê¸°ë³¸ ì—ë””í„° | MALL HANKOOK</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body {
      font-family: Pretendard, system-ui, sans-serif;
    }

    .editor-toolbar button {
      @apply px-3 py-1 rounded hover:bg-gray-100 transition-colors;
    }

    .editor-toolbar button.active {
      background-color: #2563eb;
      /* Tailwind: bg-blue-600 */
      color: white;
    }

    .editor-area {
      min-height: 250px;
      border: 1px solid #ddd;
      border-radius: 0.5rem;
      padding: 1rem;
      background: white;
      overflow-y: auto;
    }

    .editor-area img {
      max-width: 100%;
      margin: 0.5rem 0;
    }
  </style>
</head>

<body class="bg-slate-50 text-gray-800 p-6">
  <div class="max-w-3xl mx-auto bg-white p-5 rounded-lg shadow">
    <h1 class="text-2xl font-semibold mb-4">ê¸°ë³¸ í…ìŠ¤íŠ¸ ì—ë””í„°</h1>

    <!-- íˆ´ë°” -->
      <!-- ê¸€ì ìŠ¤íƒ€ì¼ -->
      <button type="button" data-cmd="bold" title="êµµê²Œ">B</button>
      <button type="button" data-cmd="underline" title="ë°‘ì¤„"><u>U</u></button>

      <div class="border-l h-6"></div>

      <!-- ê¸€ì í¬ê¸° -->
      <select id="fontSizeSelect" class="border rounded px-2 py-1 text-sm">
        <option value="">ê¸€ì í¬ê¸°</option>
        <option value="14px">ì‘ê²Œ</option>
        <option value="16px">ë³´í†µ</option>
        <option value="20px">í¬ê²Œ</option>
        <option value="26px">ì•„ì£¼ í¬ê²Œ</option>
      </select>

      <!-- ê¸€ì ìƒ‰ìƒ -->
      <input type="color" id="fontColor" class="border rounded w-8 h-8 p-0 cursor-pointer" title="ê¸€ì ìƒ‰ìƒ ì„ íƒ" />

      <div class="border-l h-6"></div>

      <!-- ì´ë¯¸ì§€ ì‚½ì… -->
      <label class="flex items-center gap-1 cursor-pointer bg-gray-100 border px-2 py-1 rounded">
        <input id="imageInput" type="file" accept="image/*" hidden>
        <span>ğŸ–¼ ì´ë¯¸ì§€ ì‚½ì…</span>
      </label>

      <!-- ì´ë¯¸ì§€ ì •ë ¬ -->
      <button type="button" data-align="left" title="ì´ë¯¸ì§€ ì™¼ìª½ ì •ë ¬">â¬…ï¸</button>
      <button type="button" data-align="center" title="ì´ë¯¸ì§€ ì¤‘ì•™ ì •ë ¬">â†”ï¸</button>
      <button type="button" data-align="right" title="ì´ë¯¸ì§€ ì˜¤ë¥¸ìª½ ì •ë ¬">â¡ï¸</button>
    </div>

    <!-- ì—ë””í„° ì˜ì—­ -->
    <div id="editor" class="editor-area" contenteditable="true" spellcheck="true">
      ì—¬ê¸°ì— ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”...
    </div>

    <!-- ì œì¶œ ì˜ˆì‹œ -->
    <button id="saveBtn" class="mt-4 bg-indigo-600 text-white px-4 py-2 rounded">ì €ì¥</button>
    <textarea id="result" class="w-full mt-3 border rounded p-2 text-sm" rows="5"
      placeholder="ì €ì¥ëœ HTML ë¯¸ë¦¬ë³´ê¸°"></textarea>
  </div>

  <script>
    const editor = document.getElementById("editor");

    // Bold & Underline ë²„íŠ¼
    document.querySelectorAll("[data-cmd]").forEach(btn => {
      btn.addEventListener("click", () => {
        document.execCommand(btn.dataset.cmd, false, null);
        editor.focus();
        updateActiveButtons();
      });
    });

    // ì—ë””í„° ë‚´ì—ì„œ ì»¤ì„œ ì´ë™/ì„ íƒ ë³€í™” ì‹œ í™œì„±í™” ìƒíƒœ ê°±ì‹ 
    editor.addEventListener("keyup", updateActiveButtons);
    editor.addEventListener("mouseup", updateActiveButtons);
    editor.addEventListener("focus", updateActiveButtons);

    function updateActiveButtons() {
      document.querySelectorAll("[data-cmd]").forEach(btn => {
        const cmd = btn.dataset.cmd;
        const state = document.queryCommandState(cmd);
        if (state) {
          btn.classList.add("active");
        } else {
          btn.classList.remove("active");
        }
      });
    }

    // Font size
    document.getElementById("fontSizeSelect").addEventListener("change", e => {
      const size = e.target.value;
      if (size) {
        const html = `<span style="font-size:${size}">${getSelectionHtml()}</span>`;
        document.execCommand("insertHTML", false, html);
        e.target.value = "";
        editor.focus();
      }
    });

    // Font color
    document.getElementById("fontColor").addEventListener("input", e => {
      document.execCommand("foreColor", false, e.target.value);
      editor.focus();
    });

    // ì´ë¯¸ì§€ ì‚½ì…
    const imageInput = document.getElementById("imageInput");
    imageInput.addEventListener("change", e => {
      const file = e.target.files[0];
      if (file && file.type.startsWith("image/")) {
        const url = URL.createObjectURL(file);
        const img = `<img src="${url}" alt="${file.name}" style="display:block;margin:auto;">`;
        document.execCommand("insertHTML", false, img);
        e.target.value = "";
      }
    });

    // ì´ë¯¸ì§€ ì •ë ¬ ë²„íŠ¼
    document.querySelectorAll("[data-align]").forEach(btn => {
      btn.addEventListener("click", () => {
        const align = btn.dataset.align;
        const selection = window.getSelection();
        const node = selection.anchorNode;
        const img = node && node.parentElement && node.parentElement.querySelector("img");
        if (img) {
          img.style.display = align === "center" ? "block" : "inline-block";
          img.style.margin = align === "center" ? "auto" : "0";
          img.style.float = align === "left" ? "left" : align === "right" ? "right" : "none";
        }
      });
    });

    // ì €ì¥ ë²„íŠ¼
    document.getElementById("saveBtn").addEventListener("click", () => {
      document.getElementById("result").value = editor.innerHTML;
      alert("ì—ë””í„° ë‚´ìš©ì´ HTML í˜•íƒœë¡œ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.");
    });

    // ì„ íƒëœ í…ìŠ¤íŠ¸ HTML ê°€ì ¸ì˜¤ê¸°
    function getSelectionHtml() {
      let sel = window.getSelection();
      if (sel.rangeCount) {
        let container = document.createElement("div");
        for (let i = 0; i < sel.rangeCount; i++) {
          container.appendChild(sel.getRangeAt(i).cloneContents());
        }
        return container.innerHTML;
      }
      return "";
    }
  </script>
</body>

</html>