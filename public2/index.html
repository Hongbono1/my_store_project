<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MALL HANKOOK ë ˆì´ì•„ì›ƒ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .neo-card {
            background: rgba(255, 255, 255, 0.7);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border-radius: 1rem;
            box-shadow:
                6px 6px 12px rgba(0, 0, 0, 0.15),
                -6px -6px 12px rgba(255, 255, 255, 0.9);
            transition: all 0.3s ease;
        }

        .neo-card:hover {
            transform: translateY(-4px) scale(1.05);
            box-shadow:
                10px 10px 20px rgba(0, 0, 0, 0.2),
                -6px -6px 12px rgba(255, 255, 255, 1);
        }
    </style>


</head>

<body class="bg-white text-gray-800">

    <!-- í—¤ë” -->
    <div id="header-placeholder"></div>

    <!-- ìƒë‹¨ ë ë°°ë„ˆ -->
    <div class="max-w-7xl mx-auto px-4 sm:px-6 mt-16">
        <div class="neo-card h-28 flex flex-col items-center justify-center text-center cursor-pointer">
            <p class="text-lg sm:text-xl md:text-2xl font-bold">ë„¤ì´ë²„ì— ìƒˆì§‘ë§ˆë ¨</p>
            <p class="text-gray-600 text-sm sm:text-base">ë‚´ ì·¨í–¥ì„ ê¸°ë¡í•  ìƒˆë¡œìš´ ê³µê°„</p>
        </div>
    </div>

    <section class="max-w-7xl mx-auto px-4 sm:px-6 py-8 grid grid-cols-1 md:grid-cols-3 gap-6 h-[500px] mt-10">
        <!-- ì¢Œì¸¡ ë©”ì¸ ë°°ë„ˆ -->
        <div class="md:col-span-2 h-full">
            <div class="rounded-lg shadow-md overflow-hidden h-full">
                <img src="/uploads/main-banner.png" alt="ë©”ì¸ ë°°ë„ˆ" class="w-full h-full object-cover">
            </div>
        </div>

        <!-- ìš°ì¸¡ í”„ë¡œëª¨ -->
        <div class="flex flex-col gap-4 h-full">
            <div class="flex-1">
                <div class="bg-gray-200 rounded-lg flex items-center justify-center h-full">
                    Promo 1
                </div>
            </div>
            <div class="flex-1">
                <div class="bg-gray-200 rounded-lg flex items-center justify-center h-full">
                    Promo 2
                </div>
            </div>
            <div class="flex-1">
                <div class="bg-gray-200 rounded-lg flex items-center justify-center h-full">
                    Promo 3
                </div>
            </div>
        </div>
    </section>

    <!-- ì„œë¸Œ ë°°ë„ˆ -->
    <section
        class="max-w-7xl mx-auto px-4 sm:px-6 py-6 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 text-center">
        <div>
            <h3 class="font-bold text-xl sm:text-2xl mb-2">ê²€ìƒ‰ì–´</h3>
            <a href="search.html">
                <div id="box1" class="neo-card min-h-28 p-4"></div>
            </a>
        </div>
        <div>
            <h3 class="font-bold text-xl sm:text-2xl mb-2">ìµœì‹  ì†Œì‹</h3>
            <a href="news.html">
                <div id="box2" class="neo-card min-h-28 p-4"></div>
            </a>
        </div>
        <div>
            <h3 class="font-bold text-xl sm:text-2xl mb-2">ì´ë²¤íŠ¸ ì •ë³´</h3>
            <div id="box3" class="neo-card min-h-28 p-4"></div>
        </div>
        <div>
            <h3 class="font-bold text-xl sm:text-2xl mb-2">ì¶”ì²œ ì œí’ˆ</h3>
            <a href="recommend.html">
                <div id="box4" class="neo-card min-h-28 p-4"></div>
            </a>
        </div>
    </section>

    <!-- Best Pick -->
    <section class="max-w-7xl mx-auto px-4 sm:px-6 py-10">
        <h2 class="text-2xl sm:text-3xl font-bold mb-6 text-center">Best Pick</h2>

        <!-- ë·°í¬íŠ¸ -->
        <div id="bestViewport" class="relative overflow-hidden">
            <!-- íŠ¸ë™ (JSì—ì„œ ì‹¤ì œ ë°ì´í„°ë¡œ êµì²´ë¨) -->
            <div id="bestTrack" class="flex transition-transform duration-500 ease-in-out will-change-transform">

                <!-- âœ… ê¸°ë³¸ placeholder ê·¸ë£¹ (6ê°œ ì¹´ë“œ) -->
                <div class="flex justify-center gap-6 w-full">
                    <!-- ì¹´ë“œ 1 -->
                    <div class="w-32 sm:w-40 text-center">
                        <div class="neo-card w-24 h-24 sm:w-32 sm:h-32 rounded-full overflow-hidden mx-auto">
                        </div>
                        <p class="mt-2 font-bold text-base sm:text-lg text-gray-400">ìƒí˜¸ëª…</p>
                        <p class="text-xs sm:text-sm text-gray-400">ì—…ì¢…</p>
                    </div>
                    <!-- ì¹´ë“œ 2 -->
                    <div class="w-32 sm:w-40 text-center">
                        <div class="neo-card w-24 h-24 sm:w-32 sm:h-32 rounded-full overflow-hidden mx-auto">
                        </div>
                        <p class="mt-2 font-bold text-base sm:text-lg text-gray-400">ìƒí˜¸ëª…</p>
                        <p class="text-xs sm:text-sm text-gray-400">ì—…ì¢…</p>
                    </div>
                    <!-- ì¹´ë“œ 3 -->
                    <div class="w-32 sm:w-40 text-center">
                        <div class="neo-card w-24 h-24 sm:w-32 sm:h-32 rounded-full overflow-hidden mx-auto">
                        </div>
                        <p class="mt-2 font-bold text-base sm:text-lg text-gray-400">ìƒí˜¸ëª…</p>
                        <p class="text-xs sm:text-sm text-gray-400">ì—…ì¢…</p>
                    </div>
                    <!-- ì¹´ë“œ 4 -->
                    <div class="w-32 sm:w-40 text-center">
                        <div class="neo-card w-24 h-24 sm:w-32 sm:h-32 rounded-full overflow-hidden mx-auto">
                        </div>
                        <p class="mt-2 font-bold text-base sm:text-lg text-gray-400">ìƒí˜¸ëª…</p>
                        <p class="text-xs sm:text-sm text-gray-400">ì—…ì¢…</p>
                    </div>
                    <!-- ì¹´ë“œ 5 -->
                    <div class="w-32 sm:w-40 text-center">
                        <div class="neo-card w-24 h-24 sm:w-32 sm:h-32 rounded-full overflow-hidden mx-auto">
                        </div>
                        <p class="mt-2 font-bold text-base sm:text-lg text-gray-400">ìƒí˜¸ëª…</p>
                        <p class="text-xs sm:text-sm text-gray-400">ì—…ì¢…</p>
                    </div>
                    <!-- ì¹´ë“œ 6 -->
                    <div class="w-32 sm:w-40 text-center">
                        <div class="neo-card w-24 h-24 sm:w-32 sm:h-32 rounded-full overflow-hidden mx-auto">
                        </div>
                        <p class="mt-2 font-bold text-base sm:text-lg text-gray-400">ìƒí˜¸ëª…</p>
                        <p class="text-xs sm:text-sm text-gray-400">ì—…ì¢…</p>
                    </div>
                </div>
            </div>

            <!-- ì¢Œ/ìš° ë²„íŠ¼ -->
            <button id="bestPrev"
                class="absolute left-0 top-1/2 -translate-y-1/2 bg-white shadow rounded-full px-3 py-2 z-10">â€¹</button>
            <button id="bestNext"
                class="absolute right-0 top-1/2 -translate-y-1/2 bg-white shadow rounded-full px-3 py-2 z-10">â€º</button>
        </div>
    </section>

    <!-- ìš°ë¦¬ë™ë„¤ í•œë§ˆë”” -->
    <section class="max-w-7xl mx-auto px-4 sm:px-6 py-6">
        <div class="w-[73%] mx-auto">
            <div id="localOnewordPromo" class="neo-card h-28 sm:h-32 rounded-2xl flex flex-col items-center justify-center p-5 shadow-xl border-2 border-blue-400">
                <div class="text-2xl sm:text-3xl font-semibold mb-3 text-blue-600">ğŸ“ ìš°ë¦¬ë™ë„¤ í•œë§ˆë””</div>
                <p class="text-2xl sm:text-3xl md:text-4xl font-bold text-gray-800 text-center leading-tight">ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</p>
            </div>
        </div>
    </section>

    <!-- BEST & ë°°ë„ˆ -->
    <section class="max-w-7xl mx-auto px-4 sm:px-6 py-10 grid grid-cols-1 lg:grid-cols-3 gap-6">
        <div class="grid grid-rows-2 gap-4">
            <a href="foodcategory.html">
                <div class="bg-gray-200 rounded-lg flex items-center justify-center hover:bg-gray-300 h-32 sm:h-full">
                    í™ë³´ì˜ ë°°ë‹¬
                </div>
            </a>
            <a href="ncategory.html">
                <div class="bg-gray-200 rounded-lg flex items-center justify-center hover:bg-gray-300 h-32 sm:h-full">
                    ìš°ë¦¬ë™ë„¤ ëª¨ë“ ê°€ê²Œ
                </div>
            </a>
        </div>
        <div class="lg:col-span-2 grid grid-cols-1 sm:grid-cols-2 gap-4">
            <a href="hot.html">
                <div class="bg-gray-200 aspect-[4/3] rounded-lg flex items-center justify-center">ê°€ì¥ HOTí•œ ìš°ë¦¬ë™ë„¤</div>
            </a>
            <a href="suggest.html" class="static-link">
                <div class="bg-gray-200 aspect-[4/3] rounded-lg flex items-center justify-center">í™ë³´ì˜ ì¶”ì²œ</div>
            </a>
            <a href="detail.html">
                <div class="bg-gray-200 aspect-[4/3] rounded-lg flex items-center justify-center">ì˜¤í”ˆ ì˜ˆì •</div>
            </a>
            <a href="detail.html">
                <div class="bg-gray-200 aspect-[4/3] rounded-lg flex items-center justify-center">ê°€ê²Œìë‘</div>
            </a>
            <a href="detail.html">
                <div class="bg-gray-200 aspect-[4/3] rounded-lg flex items-center justify-center">ì „í†µì‹œì¥</div>
            </a>
            <a href="ad.html">
                <div class="bg-gray-200 aspect-[4/3] rounded-lg flex items-center justify-center font-bold">ê³µì—°/ì˜ˆìˆ , ì¶•ì œ
                </div>
            </a>
        </div>
    </section>

    <!-- ì´ë²¤íŠ¸ -->
    <section class="max-w-7xl mx-auto px-4 sm:px-6 py-10 grid grid-cols-1 sm:grid-cols-2 gap-6">
        <a href="event.html">
            <div class="bg-yellow-100 h-40 sm:h-48 flex items-center justify-center rounded-lg hover:bg-yellow-200">
                ì´ë²¤íŠ¸
            </div>
        </a>
        <a href="localboard.html">
            <div class="bg-blue-100 h-40 sm:h-48 flex items-center justify-center rounded-lg hover:bg-blue-200">
                ì§€ì—­ ê²Œì‹œíŒ
            </div>
        </a>
    </section>

    <!-- í”„ë¡œëª¨ì…˜ -->
    <section class="max-w-7xl mx-auto px-4 sm:px-6 py-10 grid grid-cols-1 sm:grid-cols-2 gap-6">
        <a href="season.html">
            <div class="bg-gray-200 h-32 sm:h-40 rounded-lg flex items-center justify-center hover:bg-gray-300">
                ê³„ì ˆí…Œë§ˆ
            </div>
        </a>
        <a href="join.html">
            <div class="bg-gray-200 h-32 sm:h-40 rounded-lg flex items-center justify-center hover:bg-gray-300">
                ì‹ ê·œ íšŒì› í˜œíƒ
            </div>
        </a>
    </section>

    <!-- ë¸Œëœë“œ í™ë³´ -->
    <section class="bg-gray-50 py-10">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 flex flex-col sm:flex-row items-center justify-between gap-4">
            <div>
                <h3 class="text-base sm:text-lg font-bold">Direct to Consumer</h3>
                <p class="text-xs sm:text-sm text-gray-600">ì‡¼í•‘ëª° ê´‘ê³ ë°°ë„ˆ</p>
            </div>
            <a href="brand.html">
                <div
                    class="bg-gray-200 w-full sm:w-64 h-20 sm:h-24 rounded-lg flex items-center justify-center hover:bg-gray-300">
                    ì‡¼í•‘ëª° ë“¤ì–´ê°€ê¸°
                </div>
            </a>
        </div>
    </section>

    <!-- ê³ ê°ì§€ì› -->
    <section
        class="max-w-7xl mx-auto px-4 sm:px-6 py-10 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 text-center">
        <a href="qna.html">
            <div class="bg-gray-200 rounded-lg p-6 hover:bg-gray-200">
                <h4 class="font-bold">ë¬¸ì˜ê²Œì‹œíŒ (Q&A)</h4>
                <p class="text-sm text-gray-600 mt-2">ê¶ê¸ˆí•œ ì ì„ ë‚¨ê²¨ì£¼ì„¸ìš”</p>
            </div>
        </a>
        <div class="bg-gray-200 rounded-lg p-6">
            <!-- ë¹ˆ ë°•ìŠ¤ -->
        </div>
        <a href="review.html">
            <div class="bg-gray-200 rounded-lg p-6 hover:bg-gray-200">
                <h4 class="font-bold">ë¦¬ë·° ë“±ë¡í•˜ê¸°</h4>
                <p class="text-sm text-gray-600 mt-2">ìƒí’ˆ ë¦¬ë·°ë¥¼ ë‚¨ê²¨ë³´ì„¸ìš”</p>
            </div>
        </a>
    </section>

    <!-- í‘¸í„° -->
    <div id="footer-placeholder"></div>

    <!-- ì˜¤ë¥¸ìª½ í•˜ë‹¨ ë„¤ë¹„ -->
    <div class="fixed bottom-6 right-6 flex flex-col items-center gap-4 z-50">
        <div class="flex flex-col items-center">
            <button onclick="goBack()"
                class="w-14 h-14 flex items-center justify-center rounded-full bg-gradient-to-br from-gray-100 to-gray-200 text-gray-700 shadow">
                â†
            </button>
            <span class="text-xs mt-1">ì´ì „</span>
        </div>
        <div class="flex flex-col items-center">
            <button onclick="goNext()"
                class="w-14 h-14 flex items-center justify-center rounded-full bg-gradient-to-br from-gray-100 to-gray-200 text-gray-700 shadow">
                â†’
            </button>
            <span class="text-xs mt-1">ë‹¤ìŒ</span>
        </div>
        <div class="flex flex-col items-center">
            <a href="/index.html"
                class="w-14 h-14 flex items-center justify-center rounded-full bg-gradient-to-br from-blue-500 to-blue-600 text-white shadow">
                ğŸ 
            </a>
            <span class="text-xs mt-1">í™ˆ</span>
        </div>
    </div>

    <script>
        document.addEventListener("DOMContentLoaded", async () => {
            /* â”€â”€â”€â”€â”€â”€â”€â”€â”€ header/footer ë¶ˆëŸ¬ì˜¤ê¸° â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
            fetch("/components/header.html")
                .then(res => res.text())
                .then(data => document.getElementById("header-placeholder").innerHTML = data);

            fetch("/components/footer.html")
                .then(res => res.text())
                .then(data => document.getElementById("footer-placeholder").innerHTML = data);

            /* â”€â”€â”€â”€â”€â”€â”€â”€â”€ ìš°ë¦¬ë™ë„¤ í•œë§ˆë”” ë¶ˆëŸ¬ì˜¤ê¸° â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
            try {
                // localStorageì—ì„œ ì§€ì—­ ì •ë³´ ê°€ì ¸ì˜¤ê¸° (ì—†ìœ¼ë©´ ê¸°ë³¸ê°’)
                const userRegion = localStorage.getItem("userRegion") || "ì˜ì •ë¶€";
                
                const onewordRes = await fetch(`/api/oneword?region=${encodeURIComponent(userRegion)}`);
                if (onewordRes.ok) {
                    const onewordData = await onewordRes.json();
                    let displayMessage = onewordData.message;
                    
                    // keywordê°€ ìˆìœ¼ë©´ ìƒ‰ìƒ ê°•ì¡°
                    if (onewordData.keyword) {
                        displayMessage = displayMessage.replace(
                            `'${onewordData.keyword}'`,
                            `<span class="text-orange-500">'${onewordData.keyword}'</span>`
                        );
                    }
                    
                    document.getElementById("localOnewordPromo").innerHTML = `
                        <div class="text-2xl sm:text-3xl font-semibold mb-3 text-blue-600">ğŸ“ ìš°ë¦¬ë™ë„¤ í•œë§ˆë””</div>
                        <p class="text-2xl sm:text-3xl md:text-4xl font-bold text-gray-800 text-center leading-tight">${displayMessage}</p>
                    `;
                }
            } catch (error) {
                console.error("ìš°ë¦¬ë™ë„¤ í•œë§ˆë”” ì¡°íšŒ ì‹¤íŒ¨:", error);
                document.getElementById("localOnewordPromo").innerHTML = `
                    <div class="text-2xl sm:text-3xl font-semibold mb-3 text-blue-600">ğŸ“ ìš°ë¦¬ë™ë„¤ í•œë§ˆë””</div>
                    <p class="text-2xl sm:text-3xl md:text-4xl font-bold text-gray-800 text-center leading-tight">ìš°ë¦¬ë™ë„¤ê°€ ì˜¤ëŠ˜ì€ ì°¨ë¶„í•œ í•˜ë£¨ë„¤ìš” ğŸ™‚</p>
                `;
            }

            /* â”€â”€â”€â”€â”€â”€â”€â”€â”€ Best Pick ìŠ¬ë¼ì´ë” â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
            let allStores = [];
            try {
                const res = await fetch("/api/best-pick");
                if (res.ok) {
                    allStores = await res.json(); // [{id, image, name, category}, ...]
                }
            } catch (e) {
                console.error("API ìš”ì²­ ì‹¤íŒ¨", e);
            }

            // ë°ì´í„° ì—†ìœ¼ë©´ ìƒ˜í”Œ ë”ë¯¸
            if (!allStores || allStores.length === 0) {
                allStores = Array.from({ length: 18 }, (_, i) => ({
                    id: i + 1,
                    name: `ìƒ˜í”Œ ${i + 1}`,
                    category: "ì—…ì¢…",
                    image: "/uploads/no-image.png"
                }));
            }

            const track = document.getElementById("bestTrack");
            let index = 0;
            let groups = [];

            // ë°°ì—´ ì…”í”Œ
            function shuffle(array) {
                return array.sort(() => 0.5 - Math.random());
            }

            // 18ê°œ â†’ 6ê°œì”© ê·¸ë£¹í™”
            function makeGroups() {
                const shuffled = shuffle([...allStores]);
                const result = [];
                for (let i = 0; i < shuffled.length; i += 6) {
                    result.push(shuffled.slice(i, i + 6));
                }
                return result;
            }

            // ê·¸ë£¹ HTML ìƒì„±
            function createGroup(stores) {
                const group = document.createElement("div");
                group.className = "flex justify-center gap-6 basis-full shrink-0";
                stores.forEach(store => {
                    const card = document.createElement("a");
                    // store.link ê°’ì´ ìˆìœ¼ë©´ ê·¸ê±¸ ì“°ê³ , ì—†ìœ¼ë©´ detail.htmlë¡œ ê¸°ë³¸ ì´ë™
                    card.href = store.link || `detail.html?id=${store.id}`;
                    card.className = "block text-center w-28 sm:w-40";
                    card.innerHTML = `
        <div class="neo-card w-28 h-28 sm:w-40 sm:h-40 rounded-full overflow-hidden mx-auto">
          <img src="${store.image}" alt="${store.name}" class="w-full h-full object-cover">
        </div>
        <p class="mt-2 font-bold text-base sm:text-lg">${store.name}</p>
        <p class="text-xs sm:text-sm text-gray-600">${store.category}</p>
      `;
                    group.appendChild(card);
                });
                return group;
            }


            // ê·¸ë£¹ ë Œë”ë§
            function renderGroup() {
                if (index >= groups.length) {
                    groups = makeGroups();
                    index = 0;
                }
                track.innerHTML = "";
                track.appendChild(createGroup(groups[index]));
            }

            // ë‹¤ìŒ ìŠ¬ë¼ì´ë“œ
            function nextSlide() {
                index++;
                renderGroup();
            }

            // ë²„íŠ¼ ì´ë²¤íŠ¸
            document.getElementById("bestNext").addEventListener("click", nextSlide);
            document.getElementById("bestPrev").addEventListener("click", () => {
                index = index > 0 ? index - 1 : 0;
                renderGroup();
            });

            // ìë™ 4ì´ˆë§ˆë‹¤ ì‹¤í–‰
            setInterval(nextSlide, 4000);

            // ì´ˆê¸° ê·¸ë£¹ ë Œë”ë§
            groups = makeGroups();
            renderGroup();

            /* â”€â”€â”€â”€â”€â”€â”€â”€â”€ ë°•ìŠ¤ ë°ì´í„° ë Œë”ë§ (ê²€ìƒ‰ì–´/ë‰´ìŠ¤/ì´ë²¤íŠ¸/ì¶”ì²œ) â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
            const data = {
                keywords: ["ê²€ìƒ‰ì–´1", "ê²€ìƒ‰ì–´2", "ê²€ìƒ‰ì–´3", "ê²€ìƒ‰ì–´4", "ê²€ìƒ‰ì–´5"],
                news: ["ì‹ ì œí’ˆ ì¶œì‹œ", "ì—…ë°ì´íŠ¸ ì†Œì‹", "ê³µì§€ì‚¬í•­", "ì ê²€ ì•ˆë‚´", "ì„œë¹„ìŠ¤ ê°œì„ "],
                events: ["ë´„ë§ì´ ì„¸ì¼", "íšŒì› ì „ìš© ì¿ í°", "í¬ì¸íŠ¸ 2ë°° ì ë¦½", "ì‹ ê·œ ê°€ì… ì´ë²¤íŠ¸", "ë¦¬ë·° ì‘ì„± ì´ë²¤íŠ¸"],
                recommends: ["ì¶”ì²œ ìƒí’ˆ A", "ì¶”ì²œ ìƒí’ˆ B", "ì¶”ì²œ ìƒí’ˆ C", "ì¶”ì²œ ìƒí’ˆ D", "ì¶”ì²œ ìƒí’ˆ E"]
            };

            function renderList(targetId, items) {
                const box = document.getElementById(targetId);
                if (!box) return;
                items.slice(0, 5).forEach(text => {
                    const p = document.createElement("p");
                    p.textContent = text;
                    p.className = "text-xl leading-relaxed tracking-wide";
                    box.appendChild(p);
                });
            }

            renderList("box1", data.keywords);
            renderList("box2", data.news);
            renderList("box3", data.events);
            renderList("box4", data.recommends);
        });

        /* â”€â”€â”€â”€â”€â”€â”€â”€â”€ ë„¤ë¹„ê²Œì´ì…˜ ë²„íŠ¼ â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        function goBack() {
            // ì¸ë±ìŠ¤ í˜ì´ì§€ì—ì„œëŠ” ì´ì „ ë²„íŠ¼ ì‘ë™ ì•ˆí•¨
            return false;
        }

        function goNext() {
            window.history.forward();
        }
    </script>

</body>

</html>