<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MALL HANKOOK 레이아웃</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .neo-card {
            background: rgba(255, 255, 255, 0.7);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border-radius: 1rem;
            box-shadow:
                6px 6px 12px rgba(0, 0, 0, 0.15),
                -6px -6px 12px rgba(255, 255, 255, 0.9);
            transition: all 0.3s ease;
        }

        .neo-card:hover {
            transform: translateY(-4px) scale(1.05);
            box-shadow:
                10px 10px 20px rgba(0, 0, 0, 0.2),
                -6px -6px 12px rgba(255, 255, 255, 1);
        }
    </style>

    
</head>

<body class="bg-gray-100 text-gray-800">

    <!-- 헤더 -->
    <div id="header-placeholder"></div>

    <!-- 상단 띠배너 -->
    <div class="max-w-7xl mx-auto px-4 sm:px-6 mt-16">
        <div class="neo-card h-28 flex flex-col items-center justify-center text-center cursor-pointer">
            <p class="text-lg sm:text-xl md:text-2xl font-bold">네이버에 새집마련</p>
            <p class="text-gray-600 text-sm sm:text-base">내 취향을 기록할 새로운 공간</p>
        </div>
    </div>

    <!-- 메인 배너 + 프로모션 -->
    <section class="max-w-7xl mx-auto px-4 sm:px-6 py-8 grid grid-cols-1 md:grid-cols-3 gap-6">
        <!-- 좌측 큰 배너 -->
        <a href="detail.html" class="md:col-span-2">
            <div class="rounded-lg shadow-md aspect-[16/9] overflow-hidden">
                <img src="/uploads/d2192947-842a-49db-9022-4884ee9320c9.png" alt="메인 배너 이미지"
                    class="w-full h-full object-cover">
            </div>
        </a>

        <!-- 우측 프로모션 -->
        <div class="grid grid-rows-3 gap-4">
            <a href="event.html">
                <div
                    class="bg-gray-200 h-28 sm:h-32 md:h-36 rounded-lg flex items-center justify-center hover:bg-gray-300">
                    Promo 1
                </div>
            </a>
            <a href="event.html">
                <div
                    class="bg-gray-200 h-28 sm:h-32 md:h-36 rounded-lg flex items-center justify-center hover:bg-gray-300">
                    Promo 2
                </div>
            </a>
            <a href="event.html">
                <div
                    class="bg-gray-200 h-28 sm:h-32 md:h-36 rounded-lg flex items-center justify-center hover:bg-gray-300">
                    Promo 3
                </div>
            </a>
        </div>
    </section>

    <!-- 서브 배너 -->
    <section
        class="max-w-7xl mx-auto px-4 sm:px-6 py-6 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 text-center">
        <div>
            <h3 class="font-bold text-xl sm:text-2xl mb-2">검색어</h3>
            <a href="search.html">
                <div id="box1" class="neo-card min-h-28 p-4"></div>
            </a>
        </div>
        <div>
            <h3 class="font-bold text-xl sm:text-2xl mb-2">최신 소식</h3>
            <a href="news.html">
                <div id="box2" class="neo-card min-h-28 p-4"></div>
            </a>
        </div>
        <div>
            <h3 class="font-bold text-xl sm:text-2xl mb-2">이벤트 정보</h3>
            <a href="event.html">
                <div id="box3" class="neo-card min-h-28 p-4"></div>
            </a>
        </div>
        <div>
            <h3 class="font-bold text-xl sm:text-2xl mb-2">추천 제품</h3>
            <a href="recommend.html">
                <div id="box4" class="neo-card min-h-28 p-4"></div>
            </a>
        </div>
    </section>

    <!-- Best Pick -->
    <section class="max-w-7xl mx-auto px-4 sm:px-6 py-10">
        <h2 class="text-2xl sm:text-3xl font-bold mb-6 text-center">Best Pick</h2>

        <!-- 뷰포트 -->
        <div id="bestViewport" class="relative overflow-hidden">
            <!-- 트랙 (JS에서 실제 데이터로 교체됨) -->
            <div id="bestTrack" class="flex transition-transform duration-500 ease-in-out will-change-transform">

                <!-- ✅ 기본 placeholder 그룹 (6개 카드) -->
                <div class="flex justify-center gap-6 w-full">
                    <!-- 카드 1 -->
                    <div class="w-32 sm:w-40 text-center">
                        <div class="neo-card w-24 h-24 sm:w-32 sm:h-32 rounded-full overflow-hidden mx-auto">
                        </div>
                        <p class="mt-2 font-bold text-base sm:text-lg text-gray-400">상호명</p>
                        <p class="text-xs sm:text-sm text-gray-400">업종</p>
                    </div>
                    <!-- 카드 2 -->
                    <div class="w-32 sm:w-40 text-center">
                        <div class="neo-card w-24 h-24 sm:w-32 sm:h-32 rounded-full overflow-hidden mx-auto">
                        </div>
                        <p class="mt-2 font-bold text-base sm:text-lg text-gray-400">상호명</p>
                        <p class="text-xs sm:text-sm text-gray-400">업종</p>
                    </div>
                    <!-- 카드 3 -->
                    <div class="w-32 sm:w-40 text-center">
                        <div class="neo-card w-24 h-24 sm:w-32 sm:h-32 rounded-full overflow-hidden mx-auto">
                        </div>
                        <p class="mt-2 font-bold text-base sm:text-lg text-gray-400">상호명</p>
                        <p class="text-xs sm:text-sm text-gray-400">업종</p>
                    </div>
                    <!-- 카드 4 -->
                    <div class="w-32 sm:w-40 text-center">
                        <div class="neo-card w-24 h-24 sm:w-32 sm:h-32 rounded-full overflow-hidden mx-auto">
                        </div>
                        <p class="mt-2 font-bold text-base sm:text-lg text-gray-400">상호명</p>
                        <p class="text-xs sm:text-sm text-gray-400">업종</p>
                    </div>
                    <!-- 카드 5 -->
                    <div class="w-32 sm:w-40 text-center">
                        <div class="neo-card w-24 h-24 sm:w-32 sm:h-32 rounded-full overflow-hidden mx-auto">
                        </div>
                        <p class="mt-2 font-bold text-base sm:text-lg text-gray-400">상호명</p>
                        <p class="text-xs sm:text-sm text-gray-400">업종</p>
                    </div>
                    <!-- 카드 6 -->
                    <div class="w-32 sm:w-40 text-center">
                        <div class="neo-card w-24 h-24 sm:w-32 sm:h-32 rounded-full overflow-hidden mx-auto">
                        </div>
                        <p class="mt-2 font-bold text-base sm:text-lg text-gray-400">상호명</p>
                        <p class="text-xs sm:text-sm text-gray-400">업종</p>
                    </div>
                </div>
            </div>

            <!-- 좌/우 버튼 -->
            <button id="bestPrev"
                class="absolute left-0 top-1/2 -translate-y-1/2 bg-white shadow rounded-full px-3 py-2 z-10">‹</button>
            <button id="bestNext"
                class="absolute right-0 top-1/2 -translate-y-1/2 bg-white shadow rounded-full px-3 py-2 z-10">›</button>
        </div>
    </section>

    <!-- BEST & 배너 -->
    <section class="max-w-7xl mx-auto px-4 sm:px-6 py-10 grid grid-cols-1 lg:grid-cols-3 gap-6">
        <div class="grid grid-rows-2 gap-4">
            <a href="/public2/ncategory.html">
                <div class="bg-gray-200 rounded-lg flex items-center justify-center hover:bg-gray-300 h-32 sm:h-full">
                    홍보의 배달
                </div>
            </a>
            <a href="/public2/ncategory2.html">
                <div class="bg-gray-200 rounded-lg flex items-center justify-center hover:bg-gray-300 h-32 sm:h-full">
                    우리동네 모든가게
                </div>
            </a>
        </div>
        <div class="lg:col-span-2 grid grid-cols-1 sm:grid-cols-2 gap-4">
            <a href="detail.html">
                <div class="bg-gray-200 aspect-[4/3] rounded-lg flex items-center justify-center">가장 HOT한 우리동네</div>
            </a>
            <a href="detail.html">
                <div class="bg-gray-200 aspect-[4/3] rounded-lg flex items-center justify-center">홍보의 추천</div>
            </a>
            <a href="detail.html">
                <div class="bg-gray-200 aspect-[4/3] rounded-lg flex items-center justify-center">오픈 예정</div>
            </a>
            <a href="detail.html">
                <div class="bg-gray-200 aspect-[4/3] rounded-lg flex items-center justify-center">가게자랑</div>
            </a>
            <a href="detail.html">
                <div class="bg-gray-200 aspect-[4/3] rounded-lg flex items-center justify-center">전통시장</div>
            </a>
            <a href="ad.html">
                <div class="bg-gray-200 aspect-[4/3] rounded-lg flex items-center justify-center font-bold">공연/예술, 축제
                </div>
            </a>
        </div>
    </section>

    <!-- 이벤트 -->
    <section class="max-w-7xl mx-auto px-4 sm:px-6 py-10 grid grid-cols-1 sm:grid-cols-2 gap-6">
        <a href="point.html">
            <div class="bg-orange-100 h-40 sm:h-48 flex items-center justify-center rounded-lg hover:bg-orange-200">
                이벤트
            </div>
        </a>
        <a href="brand.html">
            <div class="bg-blue-100 h-40 sm:h-48 flex items-center justify-center rounded-lg hover:bg-blue-200">
                지역 게시판
            </div>
        </a>
    </section>

    <!-- 프로모션 -->
    <section class="max-w-7xl mx-auto px-4 sm:px-6 py-10 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
        <a href="promo.html">
            <div class="bg-gray-200 h-32 sm:h-40 rounded-lg flex items-center justify-center hover:bg-gray-300">
                계절테마
            </div>
        </a>
        <a href="promo.html">
            <div class="bg-gray-200 h-32 sm:h-40 rounded-lg flex items-center justify-center hover:bg-gray-300">
                우리동네 맛집
            </div>
        </a>
        <a href="promo.html">
            <div class="bg-gray-200 h-32 sm:h-40 rounded-lg flex items-center justify-center hover:bg-gray-300">
                쇼핑업체 광고
            </div>
        </a>
    </section>

    <!-- 브랜드 홍보 -->
    <section class="bg-gray-50 py-10">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 flex flex-col sm:flex-row items-center justify-between gap-4">
            <div>
                <h3 class="text-base sm:text-lg font-bold">Direct to Consumer</h3>
                <p class="text-xs sm:text-sm text-gray-600">쇼핑몰 광고배너</p>
            </div>
            <a href="brand.html">
                <div
                    class="bg-gray-200 w-full sm:w-64 h-20 sm:h-24 rounded-lg flex items-center justify-center hover:bg-gray-300">
                    쇼핑몰 들어가기
                </div>
            </a>
        </div>
    </section>

    <!-- 고객지원 -->
    <section
        class="max-w-7xl mx-auto px-4 sm:px-6 py-10 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 text-center">
        <a href="qna.html">
            <div class="bg-gray-200 rounded-lg p-6 hover:bg-gray-200">
                <h4 class="font-bold">문의게시판 (Q&A)</h4>
                <p class="text-sm text-gray-600 mt-2">궁금한 점을 남겨주세요</p>
            </div>
        </a>
        <a href="review.html">
            <div class="bg-gray-200 rounded-lg p-6 hover:bg-gray-200">
                <h4 class="font-bold">리뷰 등록하기</h4>
                <p class="text-sm text-gray-600 mt-2">상품 리뷰를 남겨보세요</p>
            </div>
        </a>
        <a href="join.html">
            <div class="bg-gray-200 rounded-lg p-6 hover:bg-gray-200">
                <h4 class="font-bold">신규 회원 혜택</h4>
                <p class="text-sm text-gray-600 mt-2">가입 즉시 할인 쿠폰 지급</p>
            </div>
        </a>
    </section>

    <!-- 푸터 -->
    <div id="footer-placeholder"></div>

    <!-- 오른쪽 하단 네비 -->
    <div class="fixed bottom-6 right-6 flex flex-col items-center gap-4 z-50">
        <div class="flex flex-col items-center">
            <button onclick="goBack()"
                class="w-14 h-14 flex items-center justify-center rounded-full bg-gradient-to-br from-gray-100 to-gray-200 text-gray-700 shadow">
                ←
            </button>
            <span class="text-xs mt-1">이전</span>
        </div>
        <div class="flex flex-col items-center">
            <button onclick="goNext()"
                class="w-14 h-14 flex items-center justify-center rounded-full bg-gradient-to-br from-gray-100 to-gray-200 text-gray-700 shadow">
                →
            </button>
            <span class="text-xs mt-1">다음</span>
        </div>
        <div class="flex flex-col items-center">
            <a href="/index.html"
                class="w-14 h-14 flex items-center justify-center rounded-full bg-gradient-to-br from-blue-500 to-blue-600 text-white shadow">
                🏠
            </a>
            <span class="text-xs mt-1">홈</span>
        </div>
    </div>

    <script>
        document.addEventListener("DOMContentLoaded", async () => {
            /* ───────── header/footer 불러오기 ───────── */
            fetch("/components/header.html")
                .then(res => res.text())
                .then(data => document.getElementById("header-placeholder").innerHTML = data);

            fetch("/components/footer.html")
                .then(res => res.text())
                .then(data => document.getElementById("footer-placeholder").innerHTML = data);

            /* ───────── Best Pick 슬라이더 ───────── */
            let allStores = [];
            try {
                const res = await fetch("/api/best-pick");
                if (res.ok) {
                    allStores = await res.json(); // [{id, image, name, category}, ...]
                }
            } catch (e) {
                console.error("API 요청 실패", e);
            }

            // 데이터 없으면 샘플 더미
            if (!allStores || allStores.length === 0) {
                allStores = Array.from({ length: 18 }, (_, i) => ({
                    id: i + 1,
                    name: `샘플 ${i + 1}`,
                    category: "업종",
                    image: "/uploads/no-image.png"
                }));
            }

            const track = document.getElementById("bestTrack");
            let index = 0;
            let groups = [];

            // 배열 셔플
            function shuffle(array) {
                return array.sort(() => 0.5 - Math.random());
            }

            // 18개 → 6개씩 그룹화
            function makeGroups() {
                const shuffled = shuffle([...allStores]);
                const result = [];
                for (let i = 0; i < shuffled.length; i += 6) {
                    result.push(shuffled.slice(i, i + 6));
                }
                return result;
            }

            // 그룹 HTML 생성
            function createGroup(stores) {
                const group = document.createElement("div");
                group.className = "flex justify-center gap-6 basis-full shrink-0";
                stores.forEach(store => {
                    const card = document.createElement("a");
                    card.href = `detail.html?id=${store.id}`;
                    card.className = "block text-center w-28 sm:w-40";
                    card.innerHTML = `
        <div class="neo-card w-28 h-28 sm:w-40 sm:h-40 rounded-full overflow-hidden mx-auto">
          <img src="${store.image}" alt="${store.name}" class="w-full h-full object-cover">
        </div>
        <p class="mt-2 font-bold text-base sm:text-lg">${store.name}</p>
        <p class="text-xs sm:text-sm text-gray-600">${store.category}</p>
      `;
                    group.appendChild(card);
                });
                return group;
            }

            // 그룹 렌더링
            function renderGroup() {
                if (index >= groups.length) {
                    groups = makeGroups();
                    index = 0;
                }
                track.innerHTML = "";
                track.appendChild(createGroup(groups[index]));
            }

            // 다음 슬라이드
            function nextSlide() {
                index++;
                renderGroup();
            }

            // 버튼 이벤트
            document.getElementById("bestNext").addEventListener("click", nextSlide);
            document.getElementById("bestPrev").addEventListener("click", () => {
                index = index > 0 ? index - 1 : 0;
                renderGroup();
            });

            // 자동 4초마다 실행
            setInterval(nextSlide, 4000);

            // 초기 그룹 렌더링
            groups = makeGroups();
            renderGroup();

            /* ───────── 박스 데이터 렌더링 (검색어/뉴스/이벤트/추천) ───────── */
            const data = {
                keywords: ["검색어1", "검색어2", "검색어3", "검색어4", "검색어5"],
                news: ["신제품 출시", "업데이트 소식", "공지사항", "점검 안내", "서비스 개선"],
                events: ["봄맞이 세일", "회원 전용 쿠폰", "포인트 2배 적립", "신규 가입 이벤트", "리뷰 작성 이벤트"],
                recommends: ["추천 상품 A", "추천 상품 B", "추천 상품 C", "추천 상품 D", "추천 상품 E"]
            };

            function renderList(targetId, items) {
                const box = document.getElementById(targetId);
                if (!box) return;
                items.slice(0, 5).forEach(text => {
                    const p = document.createElement("p");
                    p.textContent = text;
                    p.className = "text-xl leading-relaxed tracking-wide";
                    box.appendChild(p);
                });
            }

            renderList("box1", data.keywords);
            renderList("box2", data.news);
            renderList("box3", data.events);
            renderList("box4", data.recommends);
        });

        /* ───────── 네비게이션 버튼 ───────── */
        function goBack() {
            if (document.referrer && document.referrer !== location.href) {
                window.history.back();
            } else {
                window.location.href = "/category.html";
            }
        }

        function goNext() {
            window.history.forward();
        }
    </script>

</body>

</html>