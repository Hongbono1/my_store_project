<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ê´‘ê³  í˜ì´ì§€</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- ìŠ¤íƒ€ì¼ (ë„¤ì˜¤ëª¨í”¼ì¦˜+ê¸€ë˜ìŠ¤+3D) -->
    <style>
        .btn-3d {
            box-shadow:
                6px 6px 12px rgba(0, 0, 0, 0.15),
                -6px -6px 12px rgba(255, 255, 255, 0.7);
            transition: all 0.25s ease;
            border-radius: 9999px;
            /* pill ëª¨ì–‘ */
        }

        .btn-3d:active {
            box-shadow:
                inset 4px 4px 8px rgba(0, 0, 0, 0.2),
                inset -4px -4px 8px rgba(255, 255, 255, 0.7);
            transform: translateY(2px);
        }

        .btn-white {
            background: rgba(255, 255, 255, 0.6);
            backdrop-filter: blur(8px);
            color: #111827;
        }

        .mood-btn {
            font-weight: 600;
            padding-left: 2rem;
            padding-right: 2rem;
            padding-top: 0.75rem;
            padding-bottom: 0.75rem;
        }

        .mood-btn:hover {
            background: rgba(255, 255, 255, 0.9);
            box-shadow:
                8px 8px 16px rgba(0, 0, 0, 0.15),
                -8px -8px 16px rgba(255, 255, 255, 0.9);
        }
    </style>
</head>

<body class="bg-white text-gray-900">

    <!-- Header ì˜ì—­ -->
    <div id="header"></div>

    <!-- âœ… ìš°ë¦¬ë™ë„¤ ëŒ€í‘œ Hot Place -->
    <div class="text-center mb-12 mt-10">
        <h2
            class="text-4xl font-extrabold bg-gradient-to-r from-yellow-400 to-black bg-clip-text text-transparent drop-shadow-lg">
            í™ë³´ì˜ ì¶”ì²œ
        </h2>
        <p class="text-gray-600 mt-3 leading-relaxed">
            í™ë³´ê°€ ì¶”ì²œí•˜ëŠ” ìš°ë¦¬ë™ë„¤ë¥¼ ì†Œê°œí•©ë‹ˆë‹¤.<br />

        </p>
    </div>

    <!-- âœ… í™ë³´ì˜ Top 4 -->
    <section class="relative bg-white/30 backdrop-blur-xl rounded-3xl border border-white/40 
    shadow-[8px_8px_20px_rgba(0,0,0,0.15),-8px_-8px_20px_rgba(255,255,255,0.6)] 
    max-w-screen-xl mx-auto px-6 py-10 mb-16">

        <!-- ì œëª© ê°€ìš´ë° ì •ë ¬ -->
        <div class="mb-8 text-center">
            <h3 class="text-3xl font-extrabold bg-gradient-to-r from-yellow-400 to-pink-400 
                   bg-clip-text text-transparent drop-shadow-md text-center">
                ğŸ† í™ë³´ì˜ Top 4
            </h3>
        </div>

        <!-- ì¹´ë“œ 4ê°œ -->
        <div id="suggest-top4" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-8">
            <!-- JSì—ì„œ ì¹´ë“œ ì‚½ì… -->
        </div>
    </section>

    <!-- 2ë‹¨ê³„: ê¸°ë¶„/ìƒí™©ë³„ ì¶”ì²œ -->
    <section class="max-w-6xl mx-auto px-6 py-12 mb-16
        bg-white/70 backdrop-blur-xl rounded-3xl border border-gray-200
        shadow-[8px_8px_20px_rgba(0,0,0,0.08),-8px_-8px_20px_rgba(255,255,255,0.9)]">

        <h2 class="text-3xl font-bold text-center mb-10 text-gray-800 drop-shadow-sm">
            ğŸ˜‹ ì˜¤ëŠ˜ ê¸°ë¶„/ìƒí™©ì— ë”°ë¼ ì¶”ì²œ
        </h2>

        <!-- ë²„íŠ¼ ê·¸ë£¹ -->
        <div class="flex flex-wrap justify-center gap-3 mb-10">
            <button class="mood-btn btn-3d btn-white px-8 py-3 text-sm font-medium" data-mood="hangover">í•´ì¥ í•„ìš”</button>
            <button class="mood-btn btn-3d btn-white px-8 py-3 text-sm font-medium" data-mood="happy">ê¸°ë¶„ ì¢‹ìŒ</button>
            <button class="mood-btn btn-3d btn-white px-8 py-3 text-sm font-medium" data-mood="tired">í”¼ê³¤í•¨</button>
            <button class="mood-btn btn-3d btn-white px-8 py-3 text-sm font-medium" data-mood="date">ë°ì´íŠ¸</button>
            <button class="mood-btn btn-3d btn-white px-8 py-3 text-sm font-medium" data-mood="family">ê°€ì¡± ëª¨ì„</button>
            <button class="mood-btn btn-3d btn-white px-8 py-3 text-sm font-medium" data-mood="sad">ìš°ìš¸í•  ë•Œ</button>
            <button class="mood-btn btn-3d btn-white px-8 py-3 text-sm font-medium" data-mood="company">íšŒì‹ ìë¦¬</button>
            <button class="mood-btn btn-3d btn-white px-8 py-3 text-sm font-medium" data-mood="stress">ìŠ¤íŠ¸ë ˆìŠ¤ ë°›ì„
                ë•Œ</button>
            <button class="mood-btn btn-3d btn-white px-8 py-3 text-sm font-medium" data-mood="party">ì¶•í•˜/íŒŒí‹°</button>
            <button class="mood-btn btn-3d btn-white px-8 py-3 text-sm font-medium" data-mood="workout">ìš´ë™ í›„</button>
            <button class="mood-btn btn-3d btn-white px-8 py-3 text-sm font-medium" data-mood="rain">ë¹„ ì˜¤ëŠ” ë‚ </button>
            <button class="mood-btn btn-3d btn-white px-8 py-3 text-sm font-medium" data-mood="alone">í˜¼ë°¥í•  ë•Œ</button>
        </div>
        <!-- ê´‘ê³  ì¹´ë“œ 8ê°œ -->
        <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-8">

            <!-- ê´‘ê³  1 -->
            <div class="relative bg-white/70 backdrop-blur-xl rounded-3xl border border-gray-200 
                shadow-[8px_8px_20px_rgba(0,0,0,0.08),-8px_-8px_20px_rgba(255,255,255,0.9)] 
                flex flex-col overflow-hidden p-4">
                <div class="w-full h-40 bg-gray-100 rounded-xl mb-4 overflow-hidden">
                    <img src="https://via.placeholder.com/300x200?text=ê´‘ê³ 1" alt="ê´‘ê³ 1"
                        class="w-full h-full object-cover">
                </div>
                <h4 class="font-extrabold text-lg text-gray-800 mb-2 text-center">ê´‘ê³  1</h4>
                <p class="text-gray-500 text-sm text-center mb-4">ì¹´í…Œê³ ë¦¬</p>
                <a href="#" class="mt-auto inline-block text-center bg-gradient-to-r from-yellow-400 to-pink-400 
                      text-white font-semibold px-4 py-2 rounded-full shadow hover:opacity-90 transition">
                    ë”ë³´ê¸°
                </a>
            </div>

            <!-- ê´‘ê³  2 -->
            <div
                class="relative bg-white/70 backdrop-blur-xl rounded-3xl border border-gray-200 shadow-[8px_8px_20px_rgba(0,0,0,0.08),-8px_-8px_20px_rgba(255,255,255,0.9)] flex flex-col overflow-hidden p-4">
                <div class="w-full h-40 bg-gray-100 rounded-xl mb-4 overflow-hidden">
                    <img src="https://via.placeholder.com/300x200?text=ê´‘ê³ 2" alt="ê´‘ê³ 2"
                        class="w-full h-full object-cover">
                </div>
                <h4 class="font-extrabold text-lg text-gray-800 mb-2 text-center">ê´‘ê³  2</h4>
                <p class="text-gray-500 text-sm text-center mb-4">ì¹´í…Œê³ ë¦¬</p>
                <a href="#"
                    class="mt-auto inline-block text-center bg-gradient-to-r from-yellow-400 to-pink-400 text-white font-semibold px-4 py-2 rounded-full shadow hover:opacity-90 transition">ë”ë³´ê¸°</a>
            </div>

            <!-- ê´‘ê³  3 -->
            <div
                class="relative bg-white/70 backdrop-blur-xl rounded-3xl border border-gray-200 shadow-[8px_8px_20px_rgba(0,0,0,0.08),-8px_-8px_20px_rgba(255,255,255,0.9)] flex flex-col overflow-hidden p-4">
                <div class="w-full h-40 bg-gray-100 rounded-xl mb-4 overflow-hidden">
                    <img src="https://via.placeholder.com/300x200?text=ê´‘ê³ 3" alt="ê´‘ê³ 3"
                        class="w-full h-full object-cover">
                </div>
                <h4 class="font-extrabold text-lg text-gray-800 mb-2 text-center">ê´‘ê³  3</h4>
                <p class="text-gray-500 text-sm text-center mb-4">ì¹´í…Œê³ ë¦¬</p>
                <a href="#"
                    class="mt-auto inline-block text-center bg-gradient-to-r from-yellow-400 to-pink-400 text-white font-semibold px-4 py-2 rounded-full shadow hover:opacity-90 transition">ë”ë³´ê¸°</a>
            </div>

            <!-- ê´‘ê³  4 -->
            <div
                class="relative bg-white/70 backdrop-blur-xl rounded-3xl border border-gray-200 shadow-[8px_8px_20px_rgba(0,0,0,0.08),-8px_-8px_20px_rgba(255,255,255,0.9)] flex flex-col overflow-hidden p-4">
                <div class="w-full h-40 bg-gray-100 rounded-xl mb-4 overflow-hidden">
                    <img src="https://via.placeholder.com/300x200?text=ê´‘ê³ 4" alt="ê´‘ê³ 4"
                        class="w-full h-full object-cover">
                </div>
                <h4 class="font-extrabold text-lg text-gray-800 mb-2 text-center">ê´‘ê³  4</h4>
                <p class="text-gray-500 text-sm text-center mb-4">ì¹´í…Œê³ ë¦¬</p>
                <a href="#"
                    class="mt-auto inline-block text-center bg-gradient-to-r from-yellow-400 to-pink-400 text-white font-semibold px-4 py-2 rounded-full shadow hover:opacity-90 transition">ë”ë³´ê¸°</a>
            </div>

            <!-- ê´‘ê³  5 -->
            <div
                class="relative bg-white/70 backdrop-blur-xl rounded-3xl border border-gray-200 shadow-[8px_8px_20px_rgba(0,0,0,0.08),-8px_-8px_20px_rgba(255,255,255,0.9)] flex flex-col overflow-hidden p-4">
                <div class="w-full h-40 bg-gray-100 rounded-xl mb-4 overflow-hidden">
                    <img src="https://via.placeholder.com/300x200?text=ê´‘ê³ 5" alt="ê´‘ê³ 5"
                        class="w-full h-full object-cover">
                </div>
                <h4 class="font-extrabold text-lg text-gray-800 mb-2 text-center">ê´‘ê³  5</h4>
                <p class="text-gray-500 text-sm text-center mb-4">ì¹´í…Œê³ ë¦¬</p>
                <a href="#"
                    class="mt-auto inline-block text-center bg-gradient-to-r from-yellow-400 to-pink-400 text-white font-semibold px-4 py-2 rounded-full shadow hover:opacity-90 transition">ë”ë³´ê¸°</a>
            </div>

            <!-- ê´‘ê³  6 -->
            <div
                class="relative bg-white/70 backdrop-blur-xl rounded-3xl border border-gray-200 shadow-[8px_8px_20px_rgba(0,0,0,0.08),-8px_-8px_20px_rgba(255,255,255,0.9)] flex flex-col overflow-hidden p-4">
                <div class="w-full h-40 bg-gray-100 rounded-xl mb-4 overflow-hidden">
                    <img src="https://via.placeholder.com/300x200?text=ê´‘ê³ 6" alt="ê´‘ê³ 6"
                        class="w-full h-full object-cover">
                </div>
                <h4 class="font-extrabold text-lg text-gray-800 mb-2 text-center">ê´‘ê³  6</h4>
                <p class="text-gray-500 text-sm text-center mb-4">ì¹´í…Œê³ ë¦¬</p>
                <a href="#"
                    class="mt-auto inline-block text-center bg-gradient-to-r from-yellow-400 to-pink-400 text-white font-semibold px-4 py-2 rounded-full shadow hover:opacity-90 transition">ë”ë³´ê¸°</a>
            </div>

            <!-- ê´‘ê³  7 -->
            <div
                class="relative bg-white/70 backdrop-blur-xl rounded-3xl border border-gray-200 shadow-[8px_8px_20px_rgba(0,0,0,0.08),-8px_-8px_20px_rgba(255,255,255,0.9)] flex flex-col overflow-hidden p-4">
                <div class="w-full h-40 bg-gray-100 rounded-xl mb-4 overflow-hidden">
                    <img src="https://via.placeholder.com/300x200?text=ê´‘ê³ 7" alt="ê´‘ê³ 7"
                        class="w-full h-full object-cover">
                </div>
                <h4 class="font-extrabold text-lg text-gray-800 mb-2 text-center">ê´‘ê³  7</h4>
                <p class="text-gray-500 text-sm text-center mb-4">ì¹´í…Œê³ ë¦¬</p>
                <a href="#"
                    class="mt-auto inline-block text-center bg-gradient-to-r from-yellow-400 to-pink-400 text-white font-semibold px-4 py-2 rounded-full shadow hover:opacity-90 transition">ë”ë³´ê¸°</a>
            </div>

            <!-- ê´‘ê³  8 -->
            <div
                class="relative bg-white/70 backdrop-blur-xl rounded-3xl border border-gray-200 shadow-[8px_8px_20px_rgba(0,0,0,0.08),-8px_-8px_20px_rgba(255,255,255,0.9)] flex flex-col overflow-hidden p-4">
                <div class="w-full h-40 bg-gray-100 rounded-xl mb-4 overflow-hidden">
                    <img src="https://via.placeholder.com/300x200?text=ê´‘ê³ 8" alt="ê´‘ê³ 8"
                        class="w-full h-full object-cover">
                </div>
                <h4 class="font-extrabold text-lg text-gray-800 mb-2 text-center">ê´‘ê³  8</h4>
                <p class="text-gray-500 text-sm text-center mb-4">ì¹´í…Œê³ ë¦¬</p>
                <a href="#"
                    class="mt-auto inline-block text-center bg-gradient-to-r from-yellow-400 to-pink-400 text-white font-semibold px-4 py-2 rounded-full shadow hover:opacity-90 transition">ë”ë³´ê¸°</a>
            </div>

        </div>
    </section>

    <!-- ìŠ¬ë¼ì´ë“œ ì˜ì—­ -->
    <!-- âœ… ìˆ˜ì •ëœ ìŠ¬ë¼ì´ë“œ ì˜ì—­ -->
    <div class="relative w-full max-w-screen-lg mx-auto mb-16">
        <!-- ì¢Œì¸¡ ë²„íŠ¼ -->
        <button id="prevBtn"
            class="absolute -left-12 top-1/2 -translate-y-1/2 bg-gray-800/70 text-white p-3 rounded-full shadow-lg hover:bg-gray-900/90 transition">
            &lt;
        </button>

        <!-- ìŠ¬ë¼ì´ë“œ ë°•ìŠ¤ -->
        <section
            class="overflow-hidden bg-white/70 backdrop-blur-xl rounded-3xl border border-gray-200 shadow-[8px_8px_20px_rgba(0,0,0,0.08),-8px_-8px_20px_rgba(255,255,255,0.9)] px-6 py-8">
            <div id="suggest-slider" class="flex transition-transform duration-500 h-56 items-center">
                <!-- JSì—ì„œ ì¹´ë“œ ì‚½ì… -->
            </div>
        </section>

        <!-- ìš°ì¸¡ ë²„íŠ¼ -->
        <button id="nextBtn"
            class="absolute -right-12 top-1/2 -translate-y-1/2 bg-gray-800/70 text-white p-3 rounded-full shadow-lg hover:bg-gray-900/90 transition">
            &gt;
        </button>
    </div>



    <!-- ğŸ”¥ í™ë³´ì˜ ì¶”ì²œ ì„¹ì…˜ -->
    <div class="max-w-screen-xl mx-auto px-4 sm:px-8 mt-10">
        <section
            class="bg-white/70 backdrop-blur-xl rounded-3xl border border-gray-200 shadow-[8px_8px_20px_rgba(0,0,0,0.08),-8px_-8px_20px_rgba(255,255,255,0.9)] p-8 mb-16">
            <h2 class="text-3xl font-extrabold text-center text-gray-800 drop-shadow-sm mb-10">
                í™ë³´ì˜ ì¶”ì²œ
            </h2>
            <div id="suggest-boxes" class="grid grid-cols-1 sm:grid-cols-2 gap-8">
                <!-- JSì—ì„œ ê´‘ê³  ë°•ìŠ¤ ìƒì„± -->
            </div>
        </section>
    </div>




    <!-- ìš°ì¸¡ ë²„íŠ¼ -->
    <button id="nextBtn"
        class="absolute -right-12 top-1/2 -translate-y-1/2 bg-gray-800/70 text-white p-3 rounded-full shadow-lg hover:bg-gray-900/90 transition">
        &gt;
    </button>
    </div>

    <!-- âœ… í˜ì´ì§€ë„¤ì´ì…˜ ë²„íŠ¼ -->
    <div class="flex justify-center gap-4 mt-6">
        <button id="prevPage" onclick="changePage(-1)" class="px-4 py-2 bg-gray-200 rounded">ì´ì „</button>
        <button id="nextPage" onclick="changePage(1)" class="px-4 py-2 bg-gray-200 rounded">ë‹¤ìŒ</button>
    </div>

    <!-- âœ… ìš°ì¸¡ í•˜ë‹¨ ê³ ì • ë„¤ë¹„ê²Œì´ì…˜ -->
    <div class="fixed bottom-6 right-6 flex flex-col items-center gap-4 z-50">

        <!-- ì´ì „ -->
        <div class="flex flex-col items-center">
            <button onclick="goBack()"
                class="w-14 h-14 flex items-center justify-center rounded-full bg-gradient-to-br from-gray-100 to-gray-200 text-gray-700 shadow hover:from-gray-200 hover:to-gray-300 transition">
                â†
            </button>
            <span class="text-xs mt-1 text-gray-600 font-semibold">ì´ì „</span>
        </div>

        <!-- ë‹¤ìŒ -->
        <div class="flex flex-col items-center">
            <button onclick="goNext()"
                class="w-14 h-14 flex items-center justify-center rounded-full bg-gradient-to-br from-gray-100 to-gray-200 text-gray-700 shadow hover:from-gray-200 hover:to-gray-300 transition">
                â†’
            </button>
            <span class="text-xs mt-1 text-gray-600 font-semibold">ë‹¤ìŒ</span>
        </div>

        <!-- í™ˆ -->
        <div class="flex flex-col items-center">
            <a href="/index.html"
                class="w-14 h-14 flex items-center justify-center rounded-full bg-gradient-to-br from-blue-500 to-blue-600 text-white shadow hover:from-blue-600 hover:to-blue-700 transition">
                ğŸ 
            </a>
            <span class="text-xs mt-1 text-gray-600 font-semibold">í™ˆ</span>
        </div>
    </div>


    <!-- Footer -->
    <div id="footer"></div>

    <!-- ê¸°ì¡´ ìŠ¤í¬ë¦½íŠ¸ -->
    <script>
        // í—¤ë”/í‘¸í„° ë¶ˆëŸ¬ì˜¤ê¸°
        fetch('components/header.html')
            .then(r => r.text()).then(d => { document.getElementById('header').innerHTML = d; });
        fetch('components/footer.html')
            .then(r => r.text()).then(d => { document.getElementById('footer').innerHTML = d; });


        // âœ… í™ë³´ì˜ ì¶”ì²œ ì¹´ë“œ

        function createHotPlaceCard(place) {
            if (!place) return createEmptyAdCard();

            const a = document.createElement("a");
            a.href = `/ndetail.html?id=${place?.id || ''}`;
            a.className = `
        block relative bg-white/70 backdrop-blur-xl rounded-3xl border border-white/40
        shadow-[8px_8px_20px_rgba(0,0,0,0.15),-8px_-8px_20px_rgba(255,255,255,0.6)]
        p-6 flex flex-col transition duration-300
        hover:-translate-y-2 hover:shadow-2xl
    `;

            a.innerHTML = `
        <img src="${place?.image || '/uploads/no-image.png'}" 
             alt="${place?.business_name || 'ì •ë³´ ì—†ìŒ'}" 
             class="h-40 w-full object-cover rounded-xl mb-4">
        <h2 class="text-2xl font-bold text-center mb-2">${place?.business_name || 'ì •ë³´ ì—†ìŒ'}</h2>
        <h3 class="text-xl font-semibold text-center text-gray-700">#${place?.business_category || ''}</h3>
        <p class="text-lg text-gray-500 text-center">${place?.phone || ''}</p>
    `;
            return a;
        }

        // âœ… ë¹ˆ ì¹´ë“œ (placeholder)
        function createEmptyHotPlaceCard() {
            const div = document.createElement("div");
            div.className = "bg-white shadow-lg rounded-lg overflow-hidden border opacity-50";
            div.innerHTML = `
      <div class="h-40 w-full bg-gray-100 animate-pulse"></div>
      <div class="p-4 text-center">
        <h3 class="text-lg font-bold text-gray-400">ì •ë³´ ì—†ìŒ</h3>
        <p class="text-gray-300">ì¹´í…Œê³ ë¦¬</p>
      </div>
    `;
            return div;
        }

        // âœ… Top4 í•­ìƒ 4ê°œ í‘œì‹œ
        function renderTop4(places = []) {
            const container = document.getElementById("suggest-top4");
            container.innerHTML = "";
            const data = places.slice(0, 4);
            while (data.length < 4) data.push(null); // ë¶€ì¡±í•˜ë©´ placeholder
            data.forEach(p => container.appendChild(createHotPlaceCard(p)));
        }



        // ê´‘ê³ ì¹´ë“œ ìƒì„± (ì •ë³´ ì—†ìœ¼ë©´ placeholder)
        function createAdCard(ad) {
            if (!ad) return createEmptyAdCard();

            const a = document.createElement("a");
            a.href = `/ndetail.html?id=${ad.pride_id}`;
            a.className =
                "block bg-white shadow-lg rounded-lg p-6 border-2 border-gray-300 transition transform hover:-translate-y-2 hover:shadow-2xl";

            a.innerHTML = `
    <img src="${ad.main_image || '/assets/images/no-thumb.png'}" 
         alt="${ad.store_name || 'ì •ë³´ ì—†ìŒ'}" class="h-40 w-full object-cover rounded mb-4">
    <h2 class="text-2xl font-bold text-center mb-2">${ad.store_name || 'ì •ë³´ ì—†ìŒ'}</h2>
    <h3 class="text-xl font-semibold text-center text-gray-700">#${ad.category || ''}</h3>
    <p class="text-lg text-gray-500 text-center">${ad.phone || ''}</p>
  `;
            return a;
        }

        // "ì •ë³´ ì—†ìŒ" ì¹´ë“œ
        function createEmptyAdCard() {
            const adBox = document.createElement("div");
            adBox.className =
                "bg-white shadow-lg rounded-lg p-6 flex flex-col border-2 border-gray-300 opacity-50 flex-1";
            adBox.innerHTML = `
      <div class="h-40 w-full bg-gray-100 rounded mb-4 animate-pulse"></div>
      <h2 class="text-2xl font-bold text-center mb-2 text-gray-400">ì •ë³´ ì—†ìŒ</h2>
      <h3 class="text-xl font-semibold text-center text-gray-300">ì¹´í…Œê³ ë¦¬</h3>
      <p class="text-lg text-gray-300 text-center">-</p>
      <a class="mt-4 bg-gray-300 text-white py-2 px-4 rounded text-center shadow-lg cursor-not-allowed">ëŒ€ê¸° ì¤‘</a>
    `;
            return adBox;
        }

        // íŠ¸ìœˆí…Œì¼ 2ê°œì”© ë¬¶ê¸°
        function renderAdBoxes(containerId, ads, itemsPerBox = 2, totalCards = 8) {
            const container = document.getElementById(containerId);
            container.innerHTML = "";
            const data = ads.slice(0, totalCards);
            while (data.length < totalCards) data.push(null); // ë¶€ì¡±í•œ ì¹´ë“œ "ì •ë³´ ì—†ìŒ"ìœ¼ë¡œ ì±„ì›€
            for (let i = 0; i < totalCards; i += itemsPerBox) {
                const box = document.createElement("div");
                box.className = "bg-gray-50 border-2 border-gray-300 rounded-lg p-4 flex flex-col md:flex-row gap-4";
                for (let j = 0; j < itemsPerBox; j++) {
                    const cardData = data[i + j];
                    box.appendChild(createAdCard(cardData));
                }
                container.appendChild(box);
            }
        }

        // ì¶”ì²œê°€ê²Œ 1ê°œì”© ìŒ“ê¸°
        function renderAds(containerId, ads, totalCards = 8) {
            const container = document.getElementById(containerId);
            container.innerHTML = "";
            const data = ads.slice(0, totalCards); // ìµœëŒ€ 8ê°œê¹Œì§€ë§Œ ì˜ë¼ì˜¤ê¸°
            while (data.length < totalCards) data.push(null);
            data.forEach(ad => container.appendChild(createAdCard(ad)));
        }

        // ì•ˆì „ fetch (ì—ëŸ¬ì‹œ ë¹ˆë°°ì—´)
        async function safeFetch(url) {
            try { const r = await fetch(url); if (r.ok) return await r.json(); }
            catch (e) { console.error(url, e); }
            return [];
        }

        // (1) ê´‘ê³ ë°•ìŠ¤ ë ˆì´ì•„ì›ƒ: ì´ë¯¸ì§€+ìƒí˜¸ëª…, í´ë¦­ì‹œ ìƒì„¸ ì´ë™
        function createSimpleSlideAdCard(ad) {
            const a = document.createElement("a");
            a.href = `/ndetail.html?id=${ad.pride_id || ''}`;
            a.className =
                "flex-shrink-0 w-64 mx-2 group transition transform hover:-translate-y-2 hover:shadow-2xl";

            a.innerHTML = `
    <div class="bg-white border border-gray-200 rounded-lg shadow p-3 flex flex-col items-center transition">
      <img src="${ad.main_image || '/assets/images/no-thumb.png'}" 
           alt="${ad.store_name || 'ì •ë³´ ì—†ìŒ'}" class="w-full h-36 object-cover rounded-md mb-2">
      <h3 class="text-lg font-bold text-center truncate">${ad.store_name || 'ì •ë³´ ì—†ìŒ'}</h3>
    </div>
  `;
            return a;
        }

        // (2) ìŠ¬ë¼ì´ë“œ fetch + ë Œë” + ìºëŸ¬ì…€ ê¸°ëŠ¥
        async function renderSliderAds() {
            const sliderContainer = document.getElementById("suggest-slider");
            let ads = [];
            try {
                const res = await fetch("/slide/api");
                if (res.ok) ads = await res.json();
            } catch (e) {
                ads = [];
            }
            if (!ads.length) ads = Array(6).fill(null);

            sliderContainer.innerHTML = "";

            // âœ… í˜ì´ì§€ ìˆ˜ (3ê°œì”© í‘œì‹œ)
            const pageSize = 3;
            const totalPages = Math.ceil(ads.length / pageSize);

            for (let i = 0; i < ads.length; i += pageSize) {
                // í˜ì´ì§€ ì»¨í…Œì´ë„ˆ
                const page = document.createElement("div");
                page.className = "flex-shrink-0 w-full flex justify-center gap-4";

                // ì¹´ë“œ 3ê°œ ë„£ê¸°
                ads.slice(i, i + pageSize).forEach(ad => {
                    const card = ad ? createSimpleSlideAdCard(ad) : createSimpleSlideAdCard({});
                    page.appendChild(card);
                });

                sliderContainer.appendChild(page);
            }

            let idx = 0;

            function update() {
                sliderContainer.style.transform = `translateX(-${idx * 100}%)`;
                sliderContainer.style.transition = "transform 0.6s ease-in-out";
            }

            document.getElementById("prevBtn").onclick = () => {
                idx = (idx - 1 + totalPages) % totalPages;
                update();
            };
            document.getElementById("nextBtn").onclick = () => {
                idx = (idx + 1) % totalPages;
                update();
            };

            // âœ… ìë™ ìŠ¬ë¼ì´ë“œ (7ì´ˆë§ˆë‹¤)
            setInterval(() => {
                idx = (idx + 1) % totalPages;
                update();
            }, 7000);

            update();
        }

        // âœ… ë„¤ë¹„ê²Œì´ì…˜ ë²„íŠ¼
        function goBack() { window.history.back(); }
        function goNext() { window.history.forward(); }

        // ì „ì—­ ë³€ìˆ˜ ì¶”ê°€ (renderMixedAds ìœ„ìª½ì— ë‘¡ë‹ˆë‹¤)
        let currentPage = 1;
        const pageSize = 8;
        const maxPages = 5;

        async function renderMixedAds() {
            const container = document.getElementById("suggest-random-list");
            container.innerHTML = "";

            let data = await safeFetch("/storepride/mix");
            if (!data.length) {
                data = Array(pageSize).fill(null);
            }

            // âœ… í˜„ì¬ í˜ì´ì§€ ë°ì´í„°ë§Œ ìë¥´ê¸°
            const start = (currentPage - 1) * pageSize;
            const end = start + pageSize;
            const pageData = data.slice(start, end);

            pageData.forEach(ad => container.appendChild(createAdCard(ad)));

            // âœ… ë²„íŠ¼ ìƒíƒœ ì—…ë°ì´íŠ¸
            document.getElementById("prevPage").disabled = currentPage === 1;
            document.getElementById("nextPage").disabled = currentPage === maxPages || end >= data.length;
        }

        // ğŸš€ DOMContentLoadedëŠ” ì œì¼ í•˜ë‹¨ì— ë”± í•œ ë²ˆë§Œ ë‘ì„¸ìš”!
        document.addEventListener("DOMContentLoaded", async () => {
            // Top4 placeholder
            renderTop4([]);

            // ë°ì´í„° ë¶ˆëŸ¬ì˜¤ê¸°
            const prideList = await safeFetch("/storepride/list");

            // í™•ì • ê´‘ê³  ë°•ìŠ¤
            renderAdBoxes("suggest-boxes", prideList);

            // ëœë¤+í™•ì • ê´‘ê³ 
            renderMixedAds();

            // ìŠ¬ë¼ì´ë“œ ê´‘ê³ 
            renderSliderAds(prideList);
        });

    </script>

</body>

</html>