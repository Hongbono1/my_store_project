<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ê´‘ê³  í˜ì´ì§€ | í™ë³´ì˜ ì¶”ì²œ</title>
    <meta name="color-scheme" content="light" />
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        :root {
            --card-r: 22px;
            --shadow-soft: 0 10px 30px rgba(0, 0, 0, .06);
            --border: rgba(0, 0, 0, .06);
        }

        .card {
            background: rgba(255, 255, 255, .8);
            border: 1px solid var(--border);
            border-radius: var(--card-r);
            box-shadow: var(--shadow-soft);
            backdrop-filter: blur(10px);
            transition: transform .25s ease, box-shadow .25s ease, border-color .25s ease;
        }

        .card:hover {
            transform: translateY(-4px);
            box-shadow: 0 14px 42px rgba(0, 0, 0, .10);
            border-color: rgba(0, 0, 0, .08);
        }

        .btn-3d {
            box-shadow: 0 8px 20px rgba(0, 0, 0, .08);
            transition: transform .15s ease, box-shadow .2s ease;
            border-radius: 9999px;
        }

        .btn-3d:hover {
            box-shadow: 0 12px 26px rgba(0, 0, 0, .12);
            transform: translateY(-1px);
        }

        .btn-3d:active {
            transform: translateY(0);
            box-shadow: 0 6px 16px rgba(0, 0, 0, .08);
        }

        .btn-white {
            background: #fff;
            color: #111827;
            border: 1px solid var(--border);
        }

        .mood-btn {
            font-weight: 600;
            padding: .75rem 1.25rem;
        }

        .mood-btn.active {
            background: #111827;
            color: #fff;
            border-color: #111827;
        }

        .title-gradient {
            background: linear-gradient(90deg, #111, #6b7280 70%);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }

        .slider-item {
            min-width: 240px;
            max-width: 240px;
        }

        @media (min-width:1024px) {
            .masonry {
                column-count: 2;
                column-gap: 2rem;
            }

            .masonry>.card {
                display: inline-block;
                width: 100%;
                margin: 0 0 2rem;
            }
        }
    </style>
</head>

<body class="bg-white text-gray-900 antialiased">
    <!-- Header -->
    <div id="header"></div>

    <!-- Hero -->
    <section class="max-w-6xl mx-auto px-5 sm:px-8 pt-10 pb-4 text-center">
        <h1 class="text-4xl sm:text-5xl font-extrabold title-gradient tracking-tight">í™ë³´ì˜ ì¶”ì²œ</h1>
        <p class="text-gray-600 mt-3 sm:mt-4 leading-relaxed">
            í™ë³´ê°€ íë ˆì´ì…˜í•œ ìš°ë¦¬ ë™ë„¤ Hot Placeë¥¼ ë‹´ë°±í•˜ê³  ì‚°ëœ»í•˜ê²Œ.
        </p>
    </section>

    <!-- ğŸ† ì˜¤ëŠ˜ì˜ Top 4 -->
    <section class="relative max-w-6xl mx-auto px-5 sm:px-8 py-10">
        <div
            class="relative overflow-hidden rounded-3xl border border-indigo-100 bg-gradient-to-br from-indigo-50/90 via-white to-sky-50/90 shadow-[0_20px_60px_rgba(15,23,42,0.16)] px-4 sm:px-8 py-8 sm:py-10">

            <!-- ë°°ê²½ ë¼ì´íŠ¸ íš¨ê³¼ -->
            <div
                class="pointer-events-none absolute -top-24 -right-10 h-40 w-40 rounded-full bg-indigo-400/20 blur-3xl">
            </div>
            <div class="pointer-events-none absolute -bottom-32 -left-10 h-56 w-56 rounded-full bg-sky-400/25 blur-3xl">
            </div>

            <!-- íƒ€ì´í‹€ ì˜ì—­ -->
            <div class="relative flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-6">
                <div>
                    <div
                        class="inline-flex items-center gap-2 rounded-full bg-black/80 px-4 py-1 text-xs font-semibold text-white tracking-wide shadow-lg">
                        <span class="text-yellow-300">â˜…</span>
                        <span>ì˜¤ëŠ˜ ê°€ì¥ ë§ì´ ì„ íƒëœ ë©”ë‰´</span>
                    </div>
                    <h3 class="mt-3 text-2xl sm:text-3xl font-extrabold text-gray-900 tracking-tight">
                        ğŸ† ì˜¤ëŠ˜ì˜ <span class="text-indigo-600">TOP 4</span>
                    </h3>
                    <p class="mt-1 text-sm sm:text-base text-gray-600">
                        í´ë¦­ ìˆ˜ ê¸°ì¤€ìœ¼ë¡œ ë½‘íŒ ì˜¤ëŠ˜ì˜ ë² ìŠ¤íŠ¸ ë©”ë‰´ì…ë‹ˆë‹¤.
                    </p>
                </div>

                <div class="text-sm text-gray-500 sm:text-right">
                    <p>â€» ê°€ê²Œ ìƒì„¸í˜ì´ì§€ì—ì„œ ì‹¤ì œ ë©”ë‰´ì™€ ì •ë³´ë¥¼ í™•ì¸í•  ìˆ˜ ìˆì–´ìš”.</p>
                </div>
            </div>

            <!-- ì¹´ë“œ ê·¸ë¦¬ë“œ -->
            <div id="suggest-top4" class="relative grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-5 sm:gap-6">
                <!-- JSì—ì„œ ì¹´ë“œ ì‚½ì… -->
            </div>
        </div>
    </section>

    <!-- â° ìë™ìœ¼ë¡œ ë„˜ì–´ê°€ëŠ” ë¡¤ë§ ê´‘ê³  ë°•ìŠ¤ (Top4 ë°”ë¡œ ì•„ë˜) -->
    <section class="max-w-6xl mx-auto mb-16 px-5 sm:px-8">
        <div
            class="relative bg-white/70 backdrop-blur-xl rounded-3xl border border-gray-200 shadow-[8px_8px_20px_rgba(0,0,0,0.08),-8px_-8px_20px_rgba(255,255,255,0.9)] p-6 sm:p-8 flex flex-col sm:flex-row items-center gap-6">
            <!-- ê´‘ê³  ì´ë¯¸ì§€ / ì¸ë„¤ì¼ -->
            <div
                class="w-full sm:w-1/3 rounded-2xl overflow-hidden border border-gray-200 shadow-[4px_4px_12px_rgba(0,0,0,0.08)]">
                <img id="rollingAdImage" src="https://placehold.co/600x400?text=AD" alt="ê´‘ê³  ì´ë¯¸ì§€"
                    class="w-full h-48 sm:h-56 object-cover" />
            </div>

            <!-- í…ìŠ¤íŠ¸/ì •ë³´ ì˜ì—­ -->
            <div class="w-full sm:w-2/3 text-center sm:text-center">
                <p class="text-xs font-semibold text-indigo-500 mb-2" id="rollingAdTag">
                    HOT PLACE
                </p>
                <h3 id="rollingAdTitle" class="text-2xl sm:text-3xl font-extrabold text-gray-900 mb-2">
                    ë¡¤ë§ ê´‘ê³  ì œëª©
                </h3>
                <p id="rollingAdDesc" class="text-sm sm:text-base text-gray-600 leading-relaxed mb-4">
                    ì´ ì˜ì—­ì—ëŠ” ê°€ê²Œ ì„¤ëª…, ì´ë²¤íŠ¸ ë‚´ìš©, ì˜¤ëŠ˜ì˜ ì¶”ì²œ ë¬¸êµ¬ ë“±ì„ ì§§ê²Œ ë³´ì—¬ì¤ë‹ˆë‹¤.
                </p>

                <div class="flex flex-wrap items-center justify-center gap-3">
                    <span id="rollingAdBadge"
                        class="inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold bg-indigo-50 text-indigo-600 border border-indigo-100">
                        ì˜¤ëŠ˜ì˜ ì¶”ì²œ
                    </span>

                    <a id="rollingAdLink" href="#"
                        class="inline-flex items-center px-4 py-2 rounded-full text-sm font-semibold bg-gradient-to-r from-blue-500 to-indigo-500 text-white shadow hover:from-blue-600 hover:to-indigo-600 transition">
                        ìì„¸íˆ ë³´ëŸ¬ê°€ê¸° â†’
                    </a>
                </div>

                <!-- ì‘ì€ ì  ë„¤ë¹„ê²Œì´ì…˜ -->
                <div class="flex items-center justify-center gap-2 mt-5">
                    <button id="rollingPrev"
                        class="w-7 h-7 flex items-center justify-center rounded-full border border-gray-300 text-gray-600 text-xs hover:bg-gray-100">
                        â€¹
                    </button>
                    <div class="flex gap-2" id="rollingDots"></div>
                    <button id="rollingNext"
                        class="w-7 h-7 flex items-center justify-center rounded-full border border-gray-300 text-gray-600 text-xs hover:bg-gray-100">
                        â€º
                    </button>
                </div>
            </div>
        </div>
    </section>

    <!-- ğŸ˜‹ ê¸°ë¶„/ìƒí™©ë³„ ì¶”ì²œ -->
    <section class="max-w-6xl mx-auto px-5 sm:px-8 py-10">
        <h2 class="text-2xl sm:text-3xl font-bold text-center mb-8 text-gray-900">
            ğŸ˜‹ ì˜¤ëŠ˜ ê¸°ë¶„/ìƒí™©ì— ë”°ë¼ ì¶”ì²œ
        </h2>
        <div class="flex flex-wrap justify-center gap-2 sm:gap-3 mb-8">
            <button class="mood-btn btn-3d btn-white" data-mood="ì „ì²´">ì „ì²´</button>
            <button class="mood-btn btn-3d btn-white" data-mood="í•´ì¥ í•„ìš”">í•´ì¥ í•„ìš”</button>
            <button class="mood-btn btn-3d btn-white" data-mood="ê¸°ë¶„ ì¢‹ìŒ">ê¸°ë¶„ ì¢‹ìŒ</button>
            <button class="mood-btn btn-3d btn-white" data-mood="í”¼ê³¤í•¨">í”¼ê³¤í•¨</button>
            <button class="mood-btn btn-3d btn-white" data-mood="ë°ì´íŠ¸">ë°ì´íŠ¸</button>
            <button class="mood-btn btn-3d btn-white" data-mood="ê°€ì¡± ëª¨ì„">ê°€ì¡± ëª¨ì„</button>
            <button class="mood-btn btn-3d btn-white" data-mood="ìš°ìš¸í•  ë•Œ">ìš°ìš¸í•  ë•Œ</button>
            <button class="mood-btn btn-3d btn-white" data-mood="íšŒì‹ ìë¦¬">íšŒì‹ ìë¦¬</button>
            <button class="mood-btn btn-3d btn-white" data-mood="ìŠ¤íŠ¸ë ˆìŠ¤ ë°›ì„ ë•Œ">ìŠ¤íŠ¸ë ˆìŠ¤ ë°›ì„ ë•Œ</button>
            <button class="mood-btn btn-3d btn-white" data-mood="ì¶•í•˜/íŒŒí‹°">ì¶•í•˜/íŒŒí‹°</button>
            <button class="mood-btn btn-3d btn-white" data-mood="ìš´ë™ í›„">ìš´ë™ í›„</button>
            <button class="mood-btn btn-3d btn-white" data-mood="ë¹„ ì˜¤ëŠ” ë‚ ">ë¹„ ì˜¤ëŠ” ë‚ </button>
            <button class="mood-btn btn-3d btn-white" data-mood="í˜¼ë°¥í•  ë•Œ">í˜¼ë°¥í•  ë•Œ</button>
        </div>

        <!-- ê´‘ê³  ì¹´ë“œ ê·¸ë¦¬ë“œ -->
        <div id="mood-grid"
            class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-6 sm:gap-8 max-w-screen-xl mx-auto px-5 sm:px-8">
        </div>

        <!-- í˜ì´ì§€ë„¤ì´ì…˜ ë²„íŠ¼ -->
        <div class="flex justify-center gap-3 sm:gap-4 mt-8">
            <button id="prevPage"
                class="px-4 py-2 rounded-full border border-gray-200 hover:bg-gray-50 transition disabled:opacity-50 disabled:cursor-not-allowed">ì´ì „</button>
            <span id="pageInfo" class="px-4 py-2 text-gray-600"></span>
            <button id="nextPage"
                class="px-4 py-2 rounded-full border border-gray-200 hover:bg-gray-50 transition disabled:opacity-50 disabled:cursor-not-allowed">ë‹¤ìŒ</button>
        </div>
    </section>

    <!-- ìš°ì¸¡ í•˜ë‹¨ ê³ ì • ë„¤ë¹„ -->
    <div class="fixed bottom-6 right-6 flex flex-col items-center gap-4 z-50">
        <div class="flex flex-col items-center">
            <button onclick="goBack()"
                class="w-14 h-14 flex items-center justify-center rounded-full bg-gray-100 text-gray-800 border border-gray-200 shadow hover:bg-gray-50 transition">â†</button>
            <span class="text-xs mt-1 text-gray-600 font-semibold">ì´ì „</span>
        </div>
        <div class="flex flex-col items-center">
            <button onclick="goNext()"
                class="w-14 h-14 flex items-center justify-center rounded-full bg-gray-100 text-gray-800 border border-gray-200 shadow hover:bg-gray-50 transition">â†’</button>
            <span class="text-xs mt-1 text-gray-600 font-semibold">ë‹¤ìŒ</span>
        </div>
        <div class="flex flex-col items-center">
            <a href="/index.html"
                class="w-14 h-14 flex items-center justify-center rounded-full bg-blue-600 text-white shadow hover:bg-blue-700 transition">ğŸ </a>
            <span class="text-xs mt-1 text-gray-600 font-semibold">í™ˆ</span>
        </div>
    </div>

    <!-- Footer -->
    <div id="footer"></div>

    <!-- ìŠ¤í¬ë¦½íŠ¸ -->
    <script>
        // í—¤ë”/í‘¸í„° ë¶ˆëŸ¬ì˜¤ê¸°
        fetch('/components/header.html')
            .then(r => r.text()).then(d => document.getElementById('header').innerHTML = d);
        fetch('/components/footer.html')
            .then(r => r.text()).then(d => document.getElementById('footer').innerHTML = d);

        // ==========================
        // ğŸ† ì˜¤ëŠ˜ì˜ Top 4 (í´ë¦­ ìˆ˜ ê¸°ì¤€)
        // ==========================
        async function loadTop4() {
            const top4Container = document.getElementById("suggest-top4");
            if (!top4Container) return;

            try {
                const res = await fetch("/api/suggest/top4");
                const json = await res.json();

                console.log("ğŸ† Top4 ì‘ë‹µ:", json);

                top4Container.innerHTML = "";

                if (!json.ok || !Array.isArray(json.data) || json.data.length === 0) {
                    top4Container.innerHTML = `
        <p class="text-gray-400 text-center col-span-4 py-10">
          ì•„ì§ Top 4 ë©”ë‰´ê°€ ì—†ìŠµë‹ˆë‹¤.
        </p>
      `;
                    return;
                }

                json.data.forEach((item, idx) => {
                    const menuName = item.name || "ë©”ë‰´ëª… ì—†ìŒ";
                    const storeName = item.store_name || "ê°€ê²Œ ì •ë³´ ì—†ìŒ";
                    const img = item.image_url || "/uploads/default.jpg";
                    const detailUrl = `/ndetail.html?id=${item.store_id}&type=food`;
                    const rank = idx + 1;

                    const medal =
                        rank === 1 ? "ğŸ¥‡"
                            : rank === 2 ? "ğŸ¥ˆ"
                                : rank === 3 ? "ğŸ¥‰"
                                    : "ğŸ…";

                    const card = document.createElement("a");
                    card.href = detailUrl;
                    card.className =
                        "group relative block rounded-2xl bg-white/95 backdrop-blur border border-indigo-100/70 " +
                        "shadow-[0_14px_38px_rgba(15,23,42,0.18)] hover:shadow-[0_22px_60px_rgba(15,23,42,0.30)] " +
                        "transition-transform duration-200 hover:-translate-y-1.5 overflow-hidden";

                    card.innerHTML = `
        <div class="relative">
          <img src="${img}" alt="${menuName}"
               class="w-full h-40 sm:h-44 object-cover transition-transform duration-300 group-hover:scale-105">
          
          <!-- ìˆœìœ„ ë±ƒì§€ -->
          <div
            class="absolute left-3 top-3 inline-flex items-center gap-1 rounded-full bg-black/80 px-3 py-1 text-xs font-semibold text-white shadow-lg">
            <span>${medal}</span>
            <span>${rank}ìœ„</span>
          </div>

          <!-- "ì˜¤ëŠ˜ì˜ PICK" íƒœê·¸ -->
          <div
            class="absolute right-3 bottom-3 rounded-full bg-white/90 px-3 py-1 text-[11px] font-semibold text-indigo-600 shadow">
            ì˜¤ëŠ˜ì˜ PICK
          </div>
        </div>

        <div class="p-4 sm:p-5 text-center">
          <h3 class="text-base sm:text-lg font-bold text-gray-900 mb-1 line-clamp-1">
            ${menuName}
          </h3>
          <p class="text-xs sm:text-sm text-gray-600 mb-2 line-clamp-1">
            ${storeName}
          </p>
          <span
            class="inline-flex items-center justify-center rounded-full bg-indigo-50 text-[11px] sm:text-xs font-semibold text-indigo-600 px-3 py-1 group-hover:bg-indigo-600 group-hover:text-white transition-colors">
            ìƒì„¸ë³´ê¸°&nbsp;â†’
          </span>
        </div>
      `;
                    top4Container.appendChild(card);
                });
            } catch (err) {
                console.error("âŒ Top4 ë¡œë“œ ì˜¤ë¥˜:", err);
                const top4Container = document.getElementById("suggest-top4");
                if (top4Container) {
                    top4Container.innerHTML = `
        <p class="text-gray-400 text-center col-span-4 py-10">
          Top 4 ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.
        </p>
      `;
                }
            }
        }


        // ==========================
        // ğŸ˜‹ ì˜¤ëŠ˜ ê¸°ë¶„/ìƒí™©ë³„ ì¶”ì²œ + í˜ì´ì§€ë„¤ì´ì…˜
        // ==========================
        const buttons = document.querySelectorAll(".mood-btn");
        const container = document.getElementById("mood-grid");
        const prevPageBtn = document.getElementById("prevPage");
        const nextPageBtn = document.getElementById("nextPage");
        const pageInfoEl = document.getElementById("pageInfo");

        const PAGE_SIZE = 12;
        let currentPage = 1;
        let currentData = [];

        function renderPage() {
            container.innerHTML = "";

            if (!currentData || currentData.length === 0) {
                container.innerHTML = `
                    <p class="text-gray-400 text-center py-10 col-span-full">ì¶”ì²œ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.</p>
                `;
                if (prevPageBtn) prevPageBtn.disabled = true;
                if (nextPageBtn) nextPageBtn.disabled = true;
                if (pageInfoEl) pageInfoEl.textContent = "";
                return;
            }

            const totalPages = Math.max(1, Math.ceil(currentData.length / PAGE_SIZE));
            if (currentPage > totalPages) currentPage = totalPages;

            const start = (currentPage - 1) * PAGE_SIZE;
            const end = start + PAGE_SIZE;
            const slice = currentData.slice(start, end);

            slice.forEach(item => {
                const storeName = item.store_name || "ê°€ê²Œ ì •ë³´ ì—†ìŒ";
                const menuName = item.name || "ë©”ë‰´ëª… ì—†ìŒ";
                const img = item.image_url || "/uploads/default.jpg";
                const detailUrl = `/ndetail.html?id=${item.store_id}&type=food`;

                const card = document.createElement("a");
                card.href = detailUrl;
                card.className =
                    "block bg-white rounded-xl shadow-md overflow-hidden hover:scale-105 transition cursor-pointer";

                card.innerHTML = `
                    <img src="${img}" alt="${menuName}" class="w-full h-48 object-cover">
                    <div class="p-4 flex flex-col items-center text-center">
                        <h3 class="text-lg font-semibold mb-2">${menuName}</h3>
                        <p class="text-gray-700 text-base font-medium mb-2">${storeName}</p>
                        <span
                            class="inline-block text-center bg-blue-500 text-white text-sm font-semibold px-4 py-1 rounded-lg mt-1">
                            ìì„¸íˆ ë³´ê¸° â†’
                        </span>
                    </div>
                `;
                container.appendChild(card);
            });

            if (pageInfoEl) pageInfoEl.textContent = `${currentPage} / ${totalPages}`;
            if (prevPageBtn) prevPageBtn.disabled = (currentPage <= 1);
            if (nextPageBtn) nextPageBtn.disabled = (currentPage >= totalPages);
        }

        async function loadMood(moodText) {
            buttons.forEach(b => b.classList.remove("active"));
            const clicked = Array.from(buttons).find(b => b.dataset.mood === moodText);
            if (clicked) clicked.classList.add("active");

            let url = "/api/suggest";
            if (moodText && moodText !== "ì „ì²´") {
                url += `?mood=${encodeURIComponent(moodText)}`;
            }

            try {
                const res = await fetch(url);
                const data = await res.json();

                console.log("ğŸ¯ mood ê²°ê³¼:", data);
                if (data.ok && Array.isArray(data.data)) {
                    currentData = data.data;
                    currentPage = 1;
                    renderPage();
                } else {
                    currentData = [];
                    currentPage = 1;
                    renderPage();
                }
            } catch (err) {
                console.error("âŒ mood fetch ì˜¤ë¥˜:", err);
                currentData = [];
                currentPage = 1;
                renderPage();
            }
        }

        buttons.forEach(btn => {
            btn.addEventListener("click", () => {
                const mood = btn.dataset.mood;
                loadMood(mood);
            });
        });

        if (prevPageBtn) {
            prevPageBtn.addEventListener("click", () => {
                if (currentPage > 1) {
                    currentPage -= 1;
                    renderPage();
                    window.scrollTo({ top: 0, behavior: 'smooth' });
                }
            });
        }

        if (nextPageBtn) {
            nextPageBtn.addEventListener("click", () => {
                const totalPages = Math.max(1, Math.ceil((currentData?.length || 0) / PAGE_SIZE));
                if (currentPage < totalPages) {
                    currentPage += 1;
                    renderPage();
                    window.scrollTo({ top: 0, behavior: 'smooth' });
                }
            });
        }

        /* =========================
           â° ë¡¤ë§ ê´‘ê³  ë°ì´í„° ì •ì˜
           ========================= */
        const rollingAds = [
            {
                tag: "ğŸ”¥ ë§ì´ ì°¾ì•„ë³¸ ê°€ê²Œ",
                title: "ìš”ì¦˜ ê°€ì¥ ë§ì´ ì¡°íšŒëœ ë™ë„¤ í•«í”Œ",
                desc: "ìµœê·¼ ì¼ì£¼ì¼ ë™ì•ˆ ìš°ë¦¬ë™ë„¤ì—ì„œ ê°€ì¥ ë§ì´ ì°¾ì•„ë³¸ ê°€ê²Œì…ë‹ˆë‹¤. í˜¸ê¸°ì‹¬ í­ë°œ, ê´€ì‹¬ ì§‘ì¤‘!",
                badge: "ë§ì´ ì°¾ì•„ë³¸ ê°€ê²Œ",
                image: "https://placehold.co/600x400?text=Hot+Search",
                link: "/ndetail.html?id=1&type=food",
            },
            {
                tag: "â­ ë§ì´ ì°œí•œ ê°€ê²Œ",
                title: "ì°œì´ í­ë°œí•˜ëŠ” ì¸ê¸° ë§›ì§‘",
                desc: "ë¶ë§ˆí¬ê°€ ê°€ì¥ ë§ì´ ìŒ“ì¸ ìš°ë¦¬ë™ë„¤ ëŒ€í‘œ ë§›ì§‘ì´ì—ìš”. ë‹¨ê³¨ë“¤ì´ ì¸ì •í•œ ë°”ë¡œ ê·¸ ì§‘!",
                badge: "ë§ì´ ì°œí•œ ê°€ê²Œ",
                image: "https://placehold.co/600x400?text=Hot+Bookmark",
                link: "/ndetail.html?id=2&type=food",
            },
            {
                tag: "ğŸŒŸ ì˜¤ëŠ˜ì˜ ì¶”ì²œ ê°€ê²Œ",
                title: "ì˜¤ëŠ˜ë§Œ ì´ëŸ° ë¶„ìœ„ê¸°, ì˜¤ëŠ˜ì˜ ì¶”ì²œ",
                desc: "ë°ì´íŠ¸, í˜¼ë°¥, ê°€ì¡±ëª¨ì„ê¹Œì§€ ì˜¤ëŠ˜ ê°™ì€ ë‚  ë”± ì–´ìš¸ë¦¬ëŠ” ê°€ê²Œë¥¼ ê³¨ë¼ì„œ ì¶”ì²œí•©ë‹ˆë‹¤.",
                badge: "ì˜¤ëŠ˜ì˜ ì¶”ì²œ",
                image: "https://placehold.co/600x400?text=Today+Pick",
                link: "/ndetail.html?id=3&type=food",
            },
            {
                tag: "ğŸ“ˆ ì£¼ëª©ë°›ëŠ” ê°€ê²Œ",
                title: "ìš”ì¦˜ ê°‘ìê¸° ëœ¨ëŠ” ê¸‰ìƒìŠ¹ í•«í”Œ",
                desc: "ìµœê·¼ í´ë¦­ê³¼ ê²€ìƒ‰ì´ í™• ëŠ˜ì–´ë‚œ ê°€ê²Œì…ë‹ˆë‹¤. ì‚¬ëŒë“¤ì´ ìš”ì¦˜ ìì£¼ ì´ì•¼ê¸°í•˜ëŠ” ë°”ë¡œ ê·¸ ê³³!",
                badge: "ì£¼ëª©ë°›ëŠ” ê°€ê²Œ",
                image: "https://placehold.co/600x400?text=Rising+Star",
                link: "/ndetail.html?id=4&type=food",
            },
            {
                tag: "ğŸ½ï¸ ë§›ì§‘ ë² ìŠ¤íŠ¸",
                title: "ìš°ë¦¬ë™ë„¤ ë§›ì§‘ TOP",
                desc: "ë¦¬ë·°ì™€ í‰ì ì´ ê°€ì¥ ë†’ì€ ë™ë„¤ ë§›ì§‘! ë§›ìœ¼ë¡œ ì¦ëª…ëœ ê³³ë§Œ ëª¨ì•˜ìŠµë‹ˆë‹¤.",
                badge: "ë§›ì§‘ ë² ìŠ¤íŠ¸",
                image: "https://placehold.co/600x400?text=Best+Restaurant",
                link: "/ndetail.html?id=5&type=food",
            },
            {
                tag: "â˜• ì¹´í˜ í•«í”Œ",
                title: "ë¶„ìœ„ê¸° ëë‚´ì£¼ëŠ” ë™ë„¤ ì¹´í˜",
                desc: "ì¸ìŠ¤íƒ€ ê°ì„± ê°€ë“! ì‚¬ì§„ ì°ê¸° ì¢‹ì€ ìš°ë¦¬ë™ë„¤ ì¹´í˜ë¥¼ ì†Œê°œí•©ë‹ˆë‹¤.",
                badge: "ì¹´í˜ í•«í”Œ",
                image: "https://placehold.co/600x400?text=Cafe+Hotplace",
                link: "/ndetail.html?id=6&type=food",
            },
            {
                tag: "ğŸ›ï¸ ì‡¼í•‘ ëª…ì†Œ",
                title: "ìˆ¨ì€ ì‡¼í•‘ ëª…ì†Œ ë°œê²¬",
                desc: "ì•Œëœ°í•˜ê²Œ ì‡¼í•‘í•˜ê³  ì‹¶ë‹¤ë©´? ìš°ë¦¬ë™ë„¤ ìˆ¨ì€ ì‡¼í•‘ ëª…ì†Œë¥¼ í™•ì¸í•˜ì„¸ìš”!",
                badge: "ì‡¼í•‘ ëª…ì†Œ",
                image: "https://placehold.co/600x400?text=Shopping+Spot",
                link: "/ndetail.html?id=7&type=food",
            },
            {
                tag: "ğŸ‰ ì´ë²¤íŠ¸ ì§„í–‰ì¤‘",
                title: "ì§€ê¸ˆ ì´ë²¤íŠ¸ í•˜ëŠ” ê°€ê²Œ",
                desc: "í• ì¸, 1+1, ì‚¬ì€í’ˆ ì¦ì •! ì§€ê¸ˆ ì´ë²¤íŠ¸ ì¤‘ì¸ ê°€ê²Œë¥¼ ë†“ì¹˜ì§€ ë§ˆì„¸ìš”.",
                badge: "ì´ë²¤íŠ¸ ì§„í–‰ì¤‘",
                image: "https://placehold.co/600x400?text=Event+Now",
                link: "/ndetail.html?id=8&type=food",
            },
            {
                tag: "ğŸ†• ì‹ ê·œ ì˜¤í”ˆ",
                title: "ìƒˆë¡œ ì˜¤í”ˆí•œ ë”°ëˆë”°ëˆ ì‹ ìƒ",
                desc: "ìš°ë¦¬ë™ë„¤ì— ìƒˆë¡œ ì˜¤í”ˆí•œ ê°€ê²Œ! ë‚¨ë“¤ë³´ë‹¤ ë¨¼ì € ë°©ë¬¸í•´ë³´ì„¸ìš”.",
                badge: "ì‹ ê·œ ì˜¤í”ˆ",
                image: "https://placehold.co/600x400?text=New+Open",
                link: "/ndetail.html?id=9&type=food",
            },
            {
                tag: "ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ ê°€ì¡± ì¶”ì²œ",
                title: "ì˜¨ ê°€ì¡±ì´ í•¨ê»˜í•˜ê¸° ì¢‹ì€ ê³³",
                desc: "ì•„ì´ë“¤ê³¼ í•¨ê»˜, ë¶€ëª¨ë‹˜ê³¼ í•¨ê»˜! ê°€ì¡± ëª¨ì„ì— ë”± ë§ëŠ” ì¥ì†Œì…ë‹ˆë‹¤.",
                badge: "ê°€ì¡± ì¶”ì²œ",
                image: "https://placehold.co/600x400?text=Family+Pick",
                link: "/ndetail.html?id=10&type=food",
            },
            {
                tag: "ğŸ’‘ ë°ì´íŠ¸ ì½”ìŠ¤",
                title: "ì—°ì¸ê³¼ í•¨ê»˜í•˜ëŠ” ë°ì´íŠ¸ ëª…ì†Œ",
                desc: "ë¡œë§¨í‹±í•œ ë¶„ìœ„ê¸°, ë§›ìˆëŠ” ìŒì‹! ë°ì´íŠ¸í•˜ê¸° ì¢‹ì€ ê³³ì„ ì¶”ì²œí•©ë‹ˆë‹¤.",
                badge: "ë°ì´íŠ¸ ì½”ìŠ¤",
                image: "https://placehold.co/600x400?text=Date+Course",
                link: "/ndetail.html?id=11&type=food",
            },
            {
                tag: "ğŸŒ™ ì•¼ê°„ í•«í”Œ",
                title: "ë°¤ì— ë” ë¹›ë‚˜ëŠ” ì•¼ê°„ ëª…ì†Œ",
                desc: "ì €ë… ì´í›„ì— ê°€ê¸° ì¢‹ì€ ê³³! ì•¼ê²½ê³¼ í•¨ê»˜ ì¦ê¸°ëŠ” ìš°ë¦¬ë™ë„¤ ì•¼ê°„ í•«í”Œ.",
                badge: "ì•¼ê°„ í•«í”Œ",
                image: "https://placehold.co/600x400?text=Night+Spot",
                link: "/ndetail.html?id=12&type=food",
            },
        ];

        function setupRollingAds() {
            const imgEl = document.getElementById("rollingAdImage");
            const tagEl = document.getElementById("rollingAdTag");
            const titleEl = document.getElementById("rollingAdTitle");
            const descEl = document.getElementById("rollingAdDesc");
            const badgeEl = document.getElementById("rollingAdBadge");
            const linkEl = document.getElementById("rollingAdLink");
            const dotsContainer = document.getElementById("rollingDots");
            const prevBtn = document.getElementById("rollingPrev");
            const nextBtn = document.getElementById("rollingNext");

            if (!imgEl || !tagEl || !titleEl || !descEl || !badgeEl || !linkEl || !dotsContainer) {
                console.warn("Rolling ad elements not found. Skipping setup.");
                return;
            }

            let current = 0;
            let timer = null;

            // ì  ë Œë”ë§
            dotsContainer.innerHTML = "";
            rollingAds.forEach((_, idx) => {
                const dot = document.createElement("button");
                dot.className = "w-2.5 h-2.5 rounded-full border border-gray-300 transition-all";
                dot.dataset.index = idx;
                dot.addEventListener("click", () => {
                    current = idx;
                    render();
                    restartTimer();
                });
                dotsContainer.appendChild(dot);
            });

            function render() {
                const ad = rollingAds[current];
                imgEl.src = ad.image;
                imgEl.alt = ad.title;
                tagEl.textContent = ad.tag;
                titleEl.textContent = ad.title;
                descEl.textContent = ad.desc;
                badgeEl.textContent = ad.badge;
                linkEl.href = ad.link || "#";

                // ì  ìƒíƒœ ì—…ë°ì´íŠ¸
                const dots = dotsContainer.querySelectorAll("button");
                dots.forEach((dot, idx) => {
                    if (idx === current) {
                        dot.classList.add("bg-gray-800");
                        dot.classList.remove("bg-gray-200");
                    } else {
                        dot.classList.add("bg-gray-200");
                        dot.classList.remove("bg-gray-800");
                    }
                });
            }

            function next() {
                current = (current + 1) % rollingAds.length;
                render();
            }

            function prev() {
                current = (current - 1 + rollingAds.length) % rollingAds.length;
                render();
            }

            function restartTimer() {
                if (timer) clearInterval(timer);
                timer = setInterval(next, 8000); // 8ì´ˆë§ˆë‹¤ ìë™ ë³€ê²½
            }

            // ë²„íŠ¼ ì´ë²¤íŠ¸
            if (prevBtn) prevBtn.addEventListener("click", () => { prev(); restartTimer(); });
            if (nextBtn) nextBtn.addEventListener("click", () => { next(); restartTimer(); });

            // ì´ˆê¸° ë Œë” + íƒ€ì´ë¨¸ ì‹œì‘
            render();
            restartTimer();
        }

        // í˜ì´ì§€ ë¡œë“œì‹œ: Top4 ë¡œë“œ + ë¡¤ë§ ê´‘ê³  + "ì „ì²´" ìë™ í´ë¦­
        document.addEventListener("DOMContentLoaded", () => {
            loadTop4();

            const allBtn = document.querySelector('.mood-btn[data-mood="ì „ì²´"]');
            if (allBtn) allBtn.click();

            setupRollingAds();
        });

        // âœ… ë„¤ë¹„ê²Œì´ì…˜ ë²„íŠ¼
        function goBack() { window.history.back(); }
        function goNext() { window.history.forward(); }

        function renderResults(results) {
            const container = document.getElementById("suggest-results");
            container.innerHTML = "";

            if (!results || results.length === 0) {
                container.innerHTML = `
              <div class="text-center py-10 text-gray-500">
                ì¶”ì²œ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.
              </div>
            `;
                return;
            }

            results.forEach(item => {
                // âœ… ndetail.htmlë¡œ í†µì¼ (type=food)
                const detailUrl = `/ndetail.html?id=${item.store_id}&type=food`;

                const card = document.createElement("div");
                card.className = "bg-white rounded-lg shadow-md overflow-hidden hover:shadow-xl transition-shadow";

                card.innerHTML = `
              <a href="${detailUrl}" class="block">
                <img src="${item.image_url || '/uploads/no-image.png'}" 
                     alt="${item.business_name}" 
                     class="w-full h-48 object-cover">
                <div class="p-4">
                  <h3 class="text-lg font-bold mb-2">${item.business_name}</h3>
                  <p class="text-sm text-gray-600 mb-2">${item.category || 'ê¸°íƒ€'}</p>
                  <p class="text-xs text-gray-500">${item.address || 'ì£¼ì†Œ ì •ë³´ ì—†ìŒ'}</p>
                </div>
              </a>
            `;

                container.appendChild(card);
            });
        }
    </script>

</body>

</html>