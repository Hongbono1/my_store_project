<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ê´‘ê³  í˜ì´ì§€ | í™ë³´ì˜ ì¶”ì²œ</title>
    <meta name="color-scheme" content="light" />
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Apple / Pinterest ê°ì„±: ì—¬ë°± ë„“ê²Œ, ë¼ìš´ë”© ë¶€ë“œëŸ½ê²Œ, ì„€ë„ìš°ëŠ” ì•„ì£¼ ì€ì€í•˜ê²Œ */
        :root {
            --card-r: 22px;
            --shadow-soft: 0 10px 30px rgba(0, 0, 0, .06);
            --border: rgba(0, 0, 0, .06);
        }

        .card {
            background: rgba(255, 255, 255, .8);
            border: 1px solid var(--border);
            border-radius: var(--card-r);
            box-shadow: var(--shadow-soft);
            backdrop-filter: blur(10px);
            transition: transform .25s ease, box-shadow .25s ease, border-color .25s ease;
        }

        .card:hover {
            transform: translateY(-4px);
            box-shadow: 0 14px 42px rgba(0, 0, 0, .10);
            border-color: rgba(0, 0, 0, .08);
        }

        .btn-3d {
            box-shadow: 0 8px 20px rgba(0, 0, 0, .08);
            transition: transform .15s ease, box-shadow .2s ease;
            border-radius: 9999px;
        }

        .btn-3d:hover {
            box-shadow: 0 12px 26px rgba(0, 0, 0, .12);
            transform: translateY(-1px);
        }

        .btn-3d:active {
            transform: translateY(0);
            box-shadow: 0 6px 16px rgba(0, 0, 0, .08);
        }

        .btn-white {
            background: #fff;
            color: #111827;
            border: 1px solid var(--border);
        }

        .mood-btn {
            font-weight: 600;
            padding: .75rem 1.25rem;
        }

        .mood-btn.active {
            background: #111827;
            color: #fff;
            border-color: #111827;
        }

        .title-gradient {
            background: linear-gradient(90deg, #111, #6b7280 70%);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }

        /* ìŠ¬ë¼ì´ë” ì•„ì´í…œ í­ ê³ ì • + ë¶€ë“œëŸ¬ìš´ ì´ë™ */
        .slider-item {
            min-width: 240px;
            max-width: 240px;
        }

        /* Pinterest ëŠë‚Œì˜ masonry (ì˜µì…˜): í° ë ˆì´ì•„ì›ƒì—” grid ìœ ì§€ */
        @media (min-width:1024px) {
            .masonry {
                column-count: 2;
                column-gap: 2rem;
            }

            .masonry>.card {
                display: inline-block;
                width: 100%;
                margin: 0 0 2rem;
            }
        }
    </style>
</head>

<body class="bg-white text-gray-900 antialiased">
    <!-- Header -->
    <div id="header"></div>

    <!-- Hero -->
    <section class="max-w-6xl mx-auto px-5 sm:px-8 pt-10 pb-4 text-center">
        <h1 class="text-4xl sm:text-5xl font-extrabold title-gradient tracking-tight">í™ë³´ì˜ ì¶”ì²œ</h1>
        <p class="text-gray-600 mt-3 sm:mt-4 leading-relaxed">
            í™ë³´ê°€ íë ˆì´ì…˜í•œ ìš°ë¦¬ ë™ë„¤ Hot Placeë¥¼ ë‹´ë°±í•˜ê³  ì‚°ëœ»í•˜ê²Œ.
        </p>
    </section>

    <!-- ğŸ† Top 4 -->
    <section class="relative max-w-screen-xl mx-auto px-5 sm:px-8 py-10">
        <div class="mb-8 text-center">
            <h3 class="text-2xl sm:text-3xl font-extrabold text-gray-900">ğŸ† ì˜¤ëŠ˜ì˜ Top 4</h3>
        </div>
        <div id="suggest-top4" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-6 sm:gap-8">
            <!-- JSì—ì„œ ì¹´ë“œ ì‚½ì… -->
        </div>
    </section>

    <!-- ğŸ˜‹ ê¸°ë¶„/ìƒí™©ë³„ ì¶”ì²œ -->
    <section class="max-w-6xl mx-auto px-5 sm:px-8 py-10">
        <h2 class="text-2xl sm:text-3xl font-bold text-center mb-8 text-gray-900">ğŸ˜‹ ì˜¤ëŠ˜ ê¸°ë¶„/ìƒí™©ì— ë”°ë¼ ì¶”ì²œ</h2>
        <div class="flex flex-wrap justify-center gap-2 sm:gap-3 mb-8">
            <button class="mood-btn btn-3d btn-white" data-mood="all">ì „ì²´</button>
            <button class="mood-btn btn-3d btn-white" data-mood="hangover">í•´ì¥ í•„ìš”</button>
            <button class="mood-btn btn-3d btn-white" data-mood="happy">ê¸°ë¶„ ì¢‹ìŒ</button>
            <button class="mood-btn btn-3d btn-white" data-mood="tired">í”¼ê³¤í•¨</button>
            <button class="mood-btn btn-3d btn-white" data-mood="date">ë°ì´íŠ¸</button>
            <button class="mood-btn btn-3d btn-white" data-mood="family">ê°€ì¡± ëª¨ì„</button>
            <button class="mood-btn btn-3d btn-white" data-mood="sad">ìš°ìš¸í•  ë•Œ</button>
            <button class="mood-btn btn-3d btn-white" data-mood="company">íšŒì‹ ìë¦¬</button>
            <button class="mood-btn btn-3d btn-white" data-mood="stress">ìŠ¤íŠ¸ë ˆìŠ¤ ë°›ì„ ë•Œ</button>
            <button class="mood-btn btn-3d btn-white" data-mood="party">ì¶•í•˜/íŒŒí‹°</button>
            <button class="mood-btn btn-3d btn-white" data-mood="workout">ìš´ë™ í›„</button>
            <button class="mood-btn btn-3d btn-white" data-mood="rain">ë¹„ ì˜¤ëŠ” ë‚ </button>
            <button class="mood-btn btn-3d btn-white" data-mood="alone">í˜¼ë°¥í•  ë•Œ</button>
        </div>

        <!-- ê´‘ê³  ì¹´ë“œ 8ê°œ (ìƒ˜í”Œ) -->
        <div id="mood-grid" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-6 sm:gap-8">
            <!-- ê¸°ì¡´ ì •ì  ì¹´ë“œ 8ê°œëŠ” ìœ ì§€ + ë™ì  ë Œë”ë§ìœ¼ë¡œ ëŒ€ì²´ í‘œì‹œ -->
            <!-- ìš”ì²­: â€œì½”ë“œ ë¹¼ì§€ ë§ê³ â€ ì´ë¯€ë¡œ, ì•„ë˜ ì •ì  8ê°œëŠ” ì£¼ì„ì²˜ë¦¬ ëŒ€ì‹  JS ë Œë”ë¡œ ë™ì¼í•œ í˜•íƒœ ìƒì„± -->
        </div>
    </section>

    <!-- ìŠ¬ë¼ì´ë“œ ì˜ì—­ -->
    <div class="relative w-full max-w-screen-lg mx-auto mb-16 px-5 sm:px-0">
        <button id="prevBtn"
            class="absolute -left-6 sm:-left-12 top-1/2 -translate-y-1/2 bg-gray-900/80 text-white p-3 rounded-full shadow-lg hover:bg-black transition"
            aria-label="ì´ì „">&lt;</button>
        <section class="overflow-hidden card px-5 sm:px-6 py-6 sm:py-8">
            <div id="suggest-slider" class="flex gap-4 sm:gap-6 transition-transform duration-500 h-56 items-center">
                <!-- JSì—ì„œ ìŠ¬ë¼ì´ë“œ ì¹´ë“œ ì‚½ì… -->
            </div>
        </section>
        <button id="nextBtn"
            class="absolute -right-6 sm:-right-12 top-1/2 -translate-y-1/2 bg-gray-900/80 text-white p-3 rounded-full shadow-lg hover:bg-black transition"
            aria-label="ë‹¤ìŒ">&gt;</button>
    </div>

    <!-- ğŸ”¥ í™ë³´ì˜ ì¶”ì²œ ë°•ìŠ¤ -->
    <div class="max-w-screen-xl mx-auto px-5 sm:px-8">
        <section class="card p-6 sm:p-8 mb-16">
            <h2 class="text-2xl sm:text-3xl font-extrabold text-center text-gray-900 mb-8">í™ë³´ì˜ ì¶”ì²œ</h2>
            <div id="suggest-boxes" class="grid grid-cols-1 sm:grid-cols-2 gap-6 sm:gap-8">
                <!-- JSì—ì„œ ê´‘ê³  ë°•ìŠ¤ ìƒì„± -->
            </div>
        </section>
    </div>

    <!-- (ì›ë³¸ì— ìˆì—ˆë˜) ìš°ì¸¡ ë²„íŠ¼ â€” ID ì¤‘ë³µì„ í”¼í•˜ê¸° ìœ„í•´ nextBtn2ë¡œ ë³€ê²½ë§Œ í•¨ -->
    <button id="nextBtn2"
        class="hidden absolute -right-12 top-1/2 -translate-y-1/2 bg-gray-800/70 text-white p-3 rounded-full shadow-lg hover:bg-gray-900/90 transition">
        &gt;
    </button>

    <!-- í˜ì´ì§€ë„¤ì´ì…˜ ë²„íŠ¼ -->
    <div class="flex justify-center gap-3 sm:gap-4 mt-6">
        <button id="prevPage"
            class="px-4 py-2 rounded-full border border-gray-200 hover:bg-gray-50 transition">ì´ì „</button>
        <button id="nextPage"
            class="px-4 py-2 rounded-full border border-gray-200 hover:bg-gray-50 transition">ë‹¤ìŒ</button>
    </div>

    <!-- ìš°ì¸¡ í•˜ë‹¨ ê³ ì • ë„¤ë¹„ -->
    <div class="fixed bottom-6 right-6 flex flex-col items-center gap-4 z-50">
        <div class="flex flex-col items-center">
            <button onclick="goBack()"
                class="w-14 h-14 flex items-center justify-center rounded-full bg-gray-100 text-gray-800 border border-gray-200 shadow hover:bg-gray-50 transition">â†</button>
            <span class="text-xs mt-1 text-gray-600 font-semibold">ì´ì „</span>
        </div>
        <div class="flex flex-col items-center">
            <button onclick="goNext()"
                class="w-14 h-14 flex items-center justify-center rounded-full bg-gray-100 text-gray-800 border border-gray-200 shadow hover:bg-gray-50 transition">â†’</button>
            <span class="text-xs mt-1 text-gray-600 font-semibold">ë‹¤ìŒ</span>
        </div>
        <div class="flex flex-col items-center">
            <a href="/index.html"
                class="w-14 h-14 flex items-center justify-center rounded-full bg-blue-600 text-white shadow hover:bg-blue-700 transition">ğŸ </a>
            <span class="text-xs mt-1 text-gray-600 font-semibold">í™ˆ</span>
        </div>
    </div>

    <!-- Footer -->
    <div id="footer"></div>

    <!-- ìŠ¤í¬ë¦½íŠ¸ -->
    <!-- ìŠ¤í¬ë¦½íŠ¸ -->
    <script>
        async function loadStores() {
            try {
                const res = await fetch("/api/suggest");
                const json = await res.json();
                console.log("ğŸ”¥ ì„œë²„ ì‘ë‹µ:", json);

                if (json.ok && json.data.length > 0) {
                    renderStores(json.data);
                } else {
                    renderStores(); // ê¸°ë³¸ ë°•ìŠ¤ í‘œì‹œ
                }
            } catch (err) {
                console.error("âŒ [loadStores ì˜¤ë¥˜]:", err);
                renderStores(); // ì„œë²„ ì˜¤ë¥˜ â†’ ê¸°ë³¸ ë°•ìŠ¤ë§Œ í‘œì‹œ
            }
        }

        loadStores();

        /* (ì¤‘ëµ: ìœ„ìª½ DATA, header/footer, renderTop4 ë“± ë™ì¼) */

        const buttons = document.querySelectorAll(".mood-btn");
        const container = document.getElementById("mood-grid");

        buttons.forEach(btn => {
            btn.addEventListener("click", async () => {
                const mood = btn.dataset.mood;
                const res = await fetch(`/api/suggest?mood=${mood}`);
                const data = await res.json();

                container.innerHTML = ""; // ì´ˆê¸°í™”

                if (data.ok && data.data.length > 0) {
                    data.data.forEach(item => {
                        const card = document.createElement("div");
                        card.className = "bg-white rounded-xl shadow-md overflow-hidden hover:scale-105 transition";
                        card.innerHTML = `
            <img src="${item.menu_image}" alt="${item.menu_name}" class="w-full h-48 object-cover">
            <div class="p-4">
              <h3 class="text-lg font-semibold mb-1">${item.menu_name}</h3>
              <p class="text-gray-500 mb-3">${item.store_name}</p>
              <a href="/detail.html?id=${item.store_id}" 
                 class="inline-block bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition">
                ë°”ë¡œê°€ê¸°
              </a>
            </div>
          `;
                        container.appendChild(card);
                    });
                } else {
                    container.innerHTML = `<p class="text-gray-400 text-center py-10">ì¶”ì²œ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.</p>`;
                }
            });
        });

        /* ì´ë²¤íŠ¸ */
        document.getElementById('prevBtn').addEventListener('click', () => slide(-1));
        document.getElementById('nextBtn').addEventListener('click', () => slide(1));
        document.getElementById('prevPage').addEventListener('click', () => changePage(-1));
        document.getElementById('nextPage').addEventListener('click', () => changePage(1));

        // Mood ë²„íŠ¼ í•„í„°ë§
        document.querySelectorAll('.mood-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                document.querySelector('.mood-btn.active')?.classList.remove('active');
                btn.classList.add('active');
                const mood = btn.dataset.mood;
                const grid = document.getElementById('mood-grid');
                const list = mood === 'all' ? DATA.moods : DATA.moods.filter(v => v.mood === mood);
                grid.innerHTML = list.slice(0, 8).map(v => `
        <div class="card p-4 flex flex-col overflow-hidden">
          <div class="w-full h-40 rounded-xl overflow-hidden">
            <img src="${v.img}" alt="${v.title}" class="w-full h-full object-cover"/>
          </div>
          <h4 class="font-bold text-base sm:text-lg text-gray-900 mt-3 text-center">${v.title}</h4>
          <p class="text-gray-500 text-sm text-center mb-4">${moodLabel(v.mood)}</p>
          <a href="#" class="mt-auto inline-block text-center bg-gray-900 text-white font-medium px-4 py-2 rounded-full hover:bg-black transition">ë”ë³´ê¸°</a>
        </div>
      `).join('');
            });
        });

        /* ì´ˆê¸° ì‹¤í–‰ */
        renderTop4();
        renderSlider();
        renderBoxes();
        renderMood('all');
        changePage(0);
    </script>

</body>

</html>