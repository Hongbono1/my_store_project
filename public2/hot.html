<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>가장 핫한 우리동네</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-gray-50 text-gray-800">

  <!-- 상단 제목 -->
  <section class="text-center py-10">
    <h1 class="text-3xl font-bold mb-2">가장 핫(HOT)한 우리동네</h1>
    <p class="text-gray-600">우리동네 핫(HOT)한 가게를 소개합니다</p>
  </section>

  <!-- 메인 히어로 카드 -->
  <section class="max-w-5xl mx-auto px-4 mb-16">
    <div class="bg-white rounded-lg shadow-md overflow-hidden grid md:grid-cols-2">
      <!-- 이미지 -->
      <div>
        <img src="/uploads/main-banner.jpg" alt="메인 이미지" class="w-full h-full object-cover">
      </div>
      <!-- 텍스트 -->
      <div class="p-6 flex flex-col justify-center items-center text-center">
        <h2 class="text-2xl font-bold mb-4">우리동네 대표 Hot Place</h2>
        <p class="text-gray-600 mb-6 leading-relaxed">
          지금 가장 인기 있는 우리동네를 소개합니다.<br>
          이벤트, 리뷰, 사진으로 생생하게 즐겨보세요.
        </p>
        <a href="/hotplace.html"
          class="inline-block bg-blue-600 text-white text-sm w-24 text-center py-2 rounded hover:bg-blue-700 transition">
          더보기
        </a>
      </div>

    </div>
    </div>
  </section>

  <!-- 본문 카드 그룹 -->
  <section class="max-w-5xl mx-auto px-4 grid grid-cols-1 md:grid-cols-3 gap-8 mb-16">
    <!-- 좌측 큰 카드 -->
    <div class="md:col-span-2 bg-white rounded-lg shadow-md p-6 grid md:grid-cols-2 gap-6 items-center">
      <!-- 이미지 (왼쪽) -->
      <div>
        <img src="/uploads/hot-place.jpg" alt="추천" class="w-full h-full object-cover rounded-lg">
      </div>

      <!-- 텍스트 (오른쪽, 가운데 정렬) -->
      <div class="flex flex-col justify-center items-center text-center p-4">
        <h3 class="text-xl font-bold mb-3">금주의 추천 장소</h3>
        <p class="text-gray-600 mb-4">
          신규 오픈, 이벤트, 랜덤 Pick까지 매일 새롭게 만나보세요.
        </p>
        <a href="/hotplace.html#weekly-recommend"
          class="inline-block bg-blue-600 text-white text-sm w-24 text-center py-2 rounded hover:bg-blue-700 transition">
          더보기
        </a>
      </div>
    </div>

    <!-- 우측 작은 카드들 -->
    <div class="grid grid-rows-2 gap-6 h-full">
      <a href="detail.html?id=301" class="block bg-white rounded-lg shadow-md p-4 hover:shadow-lg transition">
        <h4 class="font-bold mb-2">추천 소식 1</h4>
        <p class="text-sm text-gray-600">할인 정보</p>
      </a>
      <a href="detail.html?id=302" class="block bg-white rounded-lg shadow-md p-4 hover:shadow-lg transition">
        <h4 class="font-bold mb-2">추천 소식 2</h4>
        <p class="text-sm text-gray-600">이벤트 정보</p>
      </a>
    </div>
  </section>

  <!-- 🔥 랭킹 + 추천 섹션 -->
  <section class="max-w-6xl mx-auto px-4 grid grid-cols-1 md:grid-cols-4 gap-8 mb-16">

    <!-- 많이 찾아본 가게 -->
    <div class="bg-white rounded-lg shadow-md p-6 h-56">
      <h3 class="text-xl font-bold mb-4 text-center">🔥 많이 찾아본 가게</h3>
      <ul id="popular-list" class="space-y-3 text-gray-700 text-sm text-left">
        <!-- JS에서 데이터로 채워짐 -->
      </ul>
    </div>

    <!-- 많이 찜한 가게 -->
    <div class="bg-white rounded-lg shadow-md p-6 h-56">
      <h3 class="text-xl font-bold mb-4 text-center">⭐ 많이 찜한 가게</h3>
      <ul id="bookmark-list" class="space-y-3 text-gray-700 text-sm text-left">
        <!-- JS에서 데이터로 채워짐 -->
      </ul>
    </div>

    <!-- 오늘의 추천 가게 -->
    <div class="bg-white rounded-lg shadow-md p-6 h-56">
      <h3 class="text-xl font-bold mb-4 text-center">🌟 오늘의 추천 가게</h3>
      <ul id="recommend-list" class="space-y-3 text-gray-700 text-sm text-left">
        <!-- JS에서 데이터로 채워짐 -->
      </ul>
    </div>

    <!-- 이번 주 주목받는 가게 -->
    <div class="bg-white rounded-lg shadow-md p-6 h-56">
      <h3 class="text-xl font-bold mb-4 text-center">📈 주목받는 가게</h3>
      <ul id="trend-list" class="space-y-3 text-gray-700 text-sm text-left">
        <!-- JS에서 데이터로 채워짐 -->
      </ul>
    </div>

  </section>

  <!-- ⚡ 파워 광고 -->
  <section class="max-w-6xl mx-auto px-4 mb-20">
    <div class="bg-yellow-50 border-l-4 border-yellow-400 rounded-lg shadow-md p-6 relative">
      <h3 class="text-2xl font-bold mb-4 text-yellow-700">⚡ 파워 광고</h3>

      <!-- 광고 슬라이더 컨테이너 -->
      <div class="overflow-hidden relative">
        <div id="ad-slider" class="flex transition-transform duration-700">

          <!-- 세트1 (1~4) -->
          <div class="grid grid-cols-1 md:grid-cols-4 gap-6 flex-shrink-0 w-full">
            <div class="bg-white rounded-lg shadow p-4 text-center h-64 flex items-center justify-center">광고1</div>
            <div class="bg-white rounded-lg shadow p-4 text-center h-64 flex items-center justify-center">광고2</div>
            <div class="bg-white rounded-lg shadow p-4 text-center h-64 flex items-center justify-center">광고3</div>
            <div class="bg-white rounded-lg shadow p-4 text-center h-64 flex items-center justify-center">광고4</div>
          </div>

          <!-- 세트2 (5~8) -->
          <div class="grid grid-cols-1 md:grid-cols-4 gap-6 flex-shrink-0 w-full">
            <div class="bg-white rounded-lg shadow p-4 text-center h-64 flex items-center justify-center">광고5</div>
            <div class="bg-white rounded-lg shadow p-4 text-center h-64 flex items-center justify-center">광고6</div>
            <div class="bg-white rounded-lg shadow p-4 text-center h-64 flex items-center justify-center">광고7</div>
            <div class="bg-white rounded-lg shadow p-4 text-center h-64 flex items-center justify-center">광고8</div>
          </div>

          <!-- 세트3 (9~12) -->
          <div class="grid grid-cols-1 md:grid-cols-4 gap-6 flex-shrink-0 w-full">
            <div class="bg-white rounded-lg shadow p-4 text-center h-64 flex items-center justify-center">광고9</div>
            <div class="bg-white rounded-lg shadow p-4 text-center h-64 flex items-center justify-center">광고10</div>
            <div class="bg-white rounded-lg shadow p-4 text-center h-64 flex items-center justify-center">광고11</div>
            <div class="bg-white rounded-lg shadow p-4 text-center h-64 flex items-center justify-center">광고12</div>
          </div>

          <!-- 세트4 (13~16) -->
          <div class="grid grid-cols-1 md:grid-cols-4 gap-6 flex-shrink-0 w-full">
            <div class="bg-white rounded-lg shadow p-4 text-center h-64 flex items-center justify-center">광고13</div>
            <div class="bg-white rounded-lg shadow p-4 text-center h-64 flex items-center justify-center">광고14</div>
            <div class="bg-white rounded-lg shadow p-4 text-center h-64 flex items-center justify-center">광고15</div>
            <div class="bg-white rounded-lg shadow p-4 text-center h-64 flex items-center justify-center">광고16</div>
          </div>

        </div>

        <!-- 좌우 버튼 -->
        <button id="prev-btn"
          class="absolute left-2 top-1/2 -translate-y-1/2 bg-yellow-500 text-white px-3 py-2 rounded-full shadow hover:bg-yellow-600">
          ◀
        </button>
        <button id="next-btn"
          class="absolute right-2 top-1/2 -translate-y-1/2 bg-yellow-500 text-white px-3 py-2 rounded-full shadow hover:bg-yellow-600">
          ▶
        </button>
      </div>
    </div>
  </section>

  <!-- 오늘도 우리동네에서 특별한 순간을! -->
  <section class="text-center my-12">
    <h2 class="text-2xl font-bold text-gray-800 mb-6">
      오늘도 우리동네에서 특별한 순간을!
    </h2>

    <!-- 하단 박스 2개 -->
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 max-w-6xl mx-auto px-4">

      <!-- 오늘의 테마 추천 (관리자 페이지에서 랜덤+승인 형식)-->
      <div class="bg-white rounded-lg shadow-md p-6">
        <h3 class="text-xl font-bold mb-4">🌦️ 오늘의 테마 추천</h3>
        <p class="text-gray-600 mb-4">
          {{theme_text}} <!-- DB에서 가져온 문구 -->
        </p>
        <a href="detail.html?id={{store_id}}"
          class="inline-block bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition">
          자세히 보기
        </a>
      </div>

      <!-- 오늘의 랜덤 추천 -->
      <div class="bg-white rounded-lg shadow-md p-6 h-64">
        <h3 class="text-xl font-bold mb-4">🎲 오늘의 랜덤 추천</h3>
        <p class="text-gray-600 mb-4">
          오늘은 어떤 가게가 선택되었을까요?
        </p>
        <a href="blogdetail.html?id=37"
          class="inline-block bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700 transition">
          블로그에서 보기
        </a>
      </div>
    </div>
  </section>

  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const slider = document.getElementById("ad-slider");
      const totalSets = slider.children.length; // 4세트
      let index = 0;
      let interval;

      function showSlide(i) {
        index = (i + totalSets) % totalSets; // 음수 방지
        slider.style.transform = `translateX(-${index * 100}%)`;
      }

      // 자동 넘김 (3초마다, 총 12초 루프)
      function startAutoSlide() {
        interval = setInterval(() => {
          showSlide(index + 1);
        }, 3000);
      }

      function stopAutoSlide() {
        clearInterval(interval);
      }

      // 버튼 이벤트
      document.getElementById("prev-btn").addEventListener("click", () => {
        stopAutoSlide();
        showSlide(index - 1);
        startAutoSlide();
      });

      document.getElementById("next-btn").addEventListener("click", () => {
        stopAutoSlide();
        showSlide(index + 1);
        startAutoSlide();
      });

      startAutoSlide();
    });

    async function loadRecommendations() {
      try {
        const res = await fetch("/api/recommend"); // 서버 API 호출
        const data = await res.json();

        const list = document.getElementById("recommend-list");
        list.innerHTML = ""; // 초기화

        data.recommendations.slice(0, 5).forEach((store, index) => {
          const li = document.createElement("li");
          li.innerHTML = `
          ${index + 1}. 
          <a href="detail.html?id=${store.id}" 
             class="text-blue-600 hover:underline font-medium">
            ${store.name}
          </a> – ${store.category}
        `;
          list.appendChild(li);
        });
      } catch (err) {
        console.error("추천 가게 불러오기 실패:", err);
      }
    }

    // 페이지 로딩 시 실행
    document.addEventListener("DOMContentLoaded", loadRecommendations);
  </script>

</body>

</html>