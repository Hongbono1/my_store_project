<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ê°€ì¥ í•«í•œ ìš°ë¦¬ë™ë„¤</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-gray-50 text-gray-800">

  <div id="header"></div>
  <style>
    /* ë„¤ì˜¤ëª¨í”¼ì¦˜ + ê¸€ë˜ìŠ¤ ê³µí†µ */
    .neo-glass {
      background: rgba(255, 255, 255, 0.2);
      border: 1px solid rgba(255, 255, 255, 0.25);
      backdrop-filter: blur(20px);
      box-shadow: 8px 8px 16px rgba(163, 177, 198, 0.6),
        -8px -8px 16px rgba(255, 255, 255, 0.9);
    }

    /* ë²„íŠ¼ 3D íš¨ê³¼ */
    .btn-3d {
      background: linear-gradient(145deg, #4f8cff, #1e40af);
      box-shadow: 4px 4px 10px rgba(0, 0, 0, 0.3),
        -2px -2px 6px rgba(255, 255, 255, 0.8);
    }

    .btn-3d:hover {
      transform: translateY(-2px);
      box-shadow: 6px 6px 14px rgba(0, 0, 0, 0.4),
        -3px -3px 8px rgba(255, 255, 255, 0.9);
    }

    .btn-3d:active {
      transform: translateY(2px);
      box-shadow: inset 2px 2px 6px rgba(0, 0, 0, 0.3),
        inset -2px -2px 6px rgba(255, 255, 255, 0.8);
    }
  </style>

  <!-- âœ… Main -->
  <main class="flex-grow">

    <!-- ìƒë‹¨ ì œëª© -->
    <section class="text-center py-10">
      <h1 class="text-3xl font-bold mb-2">ê°€ì¥ í•«(HOT)í•œ ìš°ë¦¬ë™ë„¤</h1>
      <p class="text-gray-600">ìš°ë¦¬ë™ë„¤ í•«(HOT)í•œ ê°€ê²Œë¥¼ ì†Œê°œí•©ë‹ˆë‹¤</p>
    </section>

    <!-- ë©”ì¸ íˆì–´ë¡œ ì¹´ë“œ -->
    <section class="max-w-5xl mx-auto px-4 mb-16">
      <div class="neo-glass grid md:grid-cols-2 overflow-hidden rounded-2xl p-6">

        <!-- ì´ë¯¸ì§€ -->
        <div class="rounded-2xl overflow-hidden">
          <img src="/uploads/main-banner.jpg" alt="ë©”ì¸ ì´ë¯¸ì§€"
            class="w-full h-full object-cover hover:scale-105 transition duration-500">
        </div>

        <!-- í…ìŠ¤íŠ¸ -->
        <div class="p-6 flex flex-col justify-center items-center text-center">
          <h2 class="text-3xl font-extrabold mb-4 drop-shadow">
            ìš°ë¦¬ë™ë„¤ ëŒ€í‘œ Hot Place
          </h2>
          <p class="text-gray-700 mb-6 leading-relaxed">
            ì§€ê¸ˆ ê°€ì¥ ì¸ê¸° ìˆëŠ” ìš°ë¦¬ë™ë„¤ë¥¼ ì†Œê°œí•©ë‹ˆë‹¤.<br>
            ì´ë²¤íŠ¸, ë¦¬ë·°, ì‚¬ì§„ìœ¼ë¡œ ìƒìƒí•˜ê²Œ ì¦ê²¨ë³´ì„¸ìš”.
          </p>
          <a href="/hotplace.html" class="btn-3d px-6 py-2 text-white rounded-full text-sm font-semibold transition">
            ë”ë³´ê¸°
          </a>
        </div>
      </div>
    </section>

    <!-- ë³¸ë¬¸ ì¹´ë“œ ê·¸ë£¹ -->
    <section class="max-w-5xl mx-auto px-4 grid grid-cols-1 md:grid-cols-3 gap-8 mb-16">
      <!-- ì¢Œì¸¡ í° ì¹´ë“œ -->
      <div class="md:col-span-2 bg-white rounded-lg shadow-md p-6 grid md:grid-cols-2 gap-6 items-center">
        <!-- ì´ë¯¸ì§€ (ì™¼ìª½) -->
        <div>
          <img src="/uploads/hot-place.jpg" alt="ì¶”ì²œ" class="w-full h-full object-cover rounded-lg">
        </div>

        <!-- í…ìŠ¤íŠ¸ (ì˜¤ë¥¸ìª½, ê°€ìš´ë° ì •ë ¬) -->
        <div class="flex flex-col justify-center items-center text-center p-4">
          <h3 class="text-xl font-bold mb-3">ê¸ˆì£¼ì˜ ì¶”ì²œ ì¥ì†Œ</h3>
          <p class="text-gray-600 mb-4">
            ì‹ ê·œ ì˜¤í”ˆ, ì´ë²¤íŠ¸, ëœë¤ Pickê¹Œì§€ ë§¤ì¼ ìƒˆë¡­ê²Œ ë§Œë‚˜ë³´ì„¸ìš”.
          </p>
          <a href="/hotplace.html#weekly-recommend"
            class="inline-block bg-blue-600 text-white text-sm w-24 text-center py-2 rounded hover:bg-blue-700 transition">
            ë”ë³´ê¸°
          </a>
        </div>
      </div>

      <!-- ìš°ì¸¡ ì‘ì€ ì¹´ë“œ (í•˜ë‚˜ë¡œ í•©ì¹¨) -->
      <div class="grid grid-rows-1 gap-6 h-full text-center">
        <!-- í• ì¸ & ì´ë²¤íŠ¸ ì†Œì‹ìœ¼ë¡œ ì—°ê²° -->
        <a href="event.html#news" class="block bg-white rounded-lg shadow-md p-4 hover:shadow-lg transition">
          <h4 class="text-xl font-bold mb-3">ì¶”ì²œ ì†Œì‹</h4>
          <p class="text-gray-600 mb-4">í• ì¸ & ì´ë²¤íŠ¸ ì •ë³´</p>
        </a>
      </div>
    </section>

    <!-- ğŸ”¥ ë­í‚¹ + ì¶”ì²œ ì„¹ì…˜ -->
    <section class="max-w-6xl mx-auto px-4 grid grid-cols-1 md:grid-cols-4 gap-8 mb-16">

      <!-- ë§ì´ ì°¾ì•„ë³¸ ê°€ê²Œ -->
      <div class="bg-white rounded-lg shadow-md p-6 h-56">
        <h3 class="text-xl font-bold mb-4 text-center">ğŸ”¥ ë§ì´ ì°¾ì•„ë³¸ ê°€ê²Œ</h3>
        <ul id="popular-list" class="space-y-3 text-gray-700 text-sm text-left">
          <!-- JSì—ì„œ ë°ì´í„°ë¡œ ì±„ì›Œì§ -->
        </ul>
      </div>

      <!-- ë§ì´ ì°œí•œ ê°€ê²Œ -->
      <div class="bg-white rounded-lg shadow-md p-6 h-56">
        <h3 class="text-xl font-bold mb-4 text-center">â­ ë§ì´ ì°œí•œ ê°€ê²Œ</h3>
        <ul id="bookmark-list" class="space-y-3 text-gray-700 text-sm text-left">
          <!-- JSì—ì„œ ë°ì´í„°ë¡œ ì±„ì›Œì§ -->
        </ul>
      </div>

      <!-- ì˜¤ëŠ˜ì˜ ì¶”ì²œ ê°€ê²Œ -->
      <div class="bg-white rounded-lg shadow-md p-6 h-56">
        <h3 class="text-xl font-bold mb-4 text-center">ğŸŒŸ ì˜¤ëŠ˜ì˜ ì¶”ì²œ ê°€ê²Œ</h3>
        <ul id="recommend-list" class="space-y-3 text-gray-700 text-sm text-left">
          <!-- JSì—ì„œ ë°ì´í„°ë¡œ ì±„ì›Œì§ -->
        </ul>
      </div>

      <!-- ì´ë²ˆ ì£¼ ì£¼ëª©ë°›ëŠ” ê°€ê²Œ -->
      <div class="bg-white rounded-lg shadow-md p-6 h-56">
        <h3 class="text-xl font-bold mb-4 text-center">ğŸ“ˆ ì£¼ëª©ë°›ëŠ” ê°€ê²Œ</h3>
        <ul id="trend-list" class="space-y-3 text-gray-700 text-sm text-left">
          <!-- JSì—ì„œ ë°ì´í„°ë¡œ ì±„ì›Œì§ -->
        </ul>
      </div>

    </section>

    <!-- âš¡ íŒŒì›Œ ê´‘ê³  -->
    <section class="max-w-6xl mx-auto px-4 mb-20">
      <div class="bg-yellow-50 border-l-4 border-yellow-400 rounded-lg shadow-md p-6 relative">
        <h3 class="text-2xl font-bold mb-4 text-yellow-700">âš¡ íŒŒì›Œ ê´‘ê³ </h3>

        <!-- ê´‘ê³  ìŠ¬ë¼ì´ë” ì»¨í…Œì´ë„ˆ -->
        <div class="overflow-hidden relative">
          <div id="ad-slider" class="flex transition-transform duration-700 ease-in-out">

            <!-- ì„¸íŠ¸1 -->
            <div class="grid grid-cols-1 md:grid-cols-4 gap-6 flex-shrink-0 w-full">
              <a href="https://example.com/ad1" target="_blank"
                class="bg-white rounded-lg shadow p-4 text-center h-64 flex items-center justify-center hover:shadow-lg transition">
                ê´‘ê³ 1
              </a>
              <a href="https://example.com/ad2" target="_blank"
                class="bg-white rounded-lg shadow p-4 text-center h-64 flex items-center justify-center hover:shadow-lg transition">
                ê´‘ê³ 2
              </a>
              <a href="https://example.com/ad3" target="_blank"
                class="bg-white rounded-lg shadow p-4 text-center h-64 flex items-center justify-center hover:shadow-lg transition">
                ê´‘ê³ 3
              </a>
              <a href="https://example.com/ad4" target="_blank"
                class="bg-white rounded-lg shadow p-4 text-center h-64 flex items-center justify-center hover:shadow-lg transition">
                ê´‘ê³ 4
              </a>
            </div>

            <!-- ì„¸íŠ¸2 -->
            <div class="grid grid-cols-1 md:grid-cols-4 gap-6 flex-shrink-0 w-full">
              <a href="https://example.com/ad5" target="_blank"
                class="bg-white rounded-lg shadow p-4 text-center h-64 flex items-center justify-center hover:shadow-lg transition">
                ê´‘ê³ 5
              </a>
              <a href="https://example.com/ad6" target="_blank"
                class="bg-white rounded-lg shadow p-4 text-center h-64 flex items-center justify-center hover:shadow-lg transition">
                ê´‘ê³ 6
              </a>
              <a href="https://example.com/ad7" target="_blank"
                class="bg-white rounded-lg shadow p-4 text-center h-64 flex items-center justify-center hover:shadow-lg transition">
                ê´‘ê³ 7
              </a>
              <a href="https://example.com/ad8" target="_blank"
                class="bg-white rounded-lg shadow p-4 text-center h-64 flex items-center justify-center hover:shadow-lg transition">
                ê´‘ê³ 8
              </a>
            </div>

            <!-- ì„¸íŠ¸3 -->
            <div class="grid grid-cols-1 md:grid-cols-4 gap-6 flex-shrink-0 w-full">
              <a href="https://example.com/ad9" target="_blank"
                class="bg-white rounded-lg shadow p-4 text-center h-64 flex items-center justify-center hover:shadow-lg transition">
                ê´‘ê³ 9
              </a>
              <a href="https://example.com/ad10" target="_blank"
                class="bg-white rounded-lg shadow p-4 text-center h-64 flex items-center justify-center hover:shadow-lg transition">
                ê´‘ê³ 10
              </a>
              <a href="https://example.com/ad11" target="_blank"
                class="bg-white rounded-lg shadow p-4 text-center h-64 flex items-center justify-center hover:shadow-lg transition">
                ê´‘ê³ 11
              </a>
              <a href="https://example.com/ad12" target="_blank"
                class="bg-white rounded-lg shadow p-4 text-center h-64 flex items-center justify-center hover:shadow-lg transition">
                ê´‘ê³ 12
              </a>
            </div>

          </div>
        </div>

        <!-- âœ… í•˜ë‹¨ ê³ ì • ë²„íŠ¼ -->
        <div class="flex justify-center gap-6 mt-6">
          <button id="prev-btn"
            class="bg-white text-black px-6 py-2 rounded-full shadow hover:bg-yellow-600 transition">
            &lt;
          </button>
          <button id="next-btn"
            class="bg-white text-black px-6 py-2 rounded-full shadow hover:bg-yellow-600 transition">
            &gt;
          </button>
        </div>
    </section>
    </div>

    <!-- ì˜¤ëŠ˜ë„ ìš°ë¦¬ë™ë„¤ì—ì„œ íŠ¹ë³„í•œ ìˆœê°„ì„! -->
    <section class="text-center my-12">
      <h2 class="text-2xl font-bold text-gray-800 mb-6">
        ì˜¤ëŠ˜ë„ ìš°ë¦¬ë™ë„¤ì—ì„œ íŠ¹ë³„í•œ ìˆœê°„ì„!
      </h2>

      <!-- í•˜ë‹¨ ë°•ìŠ¤ 2ê°œ -->
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6 max-w-6xl mx-auto px-4">

        <!-- ì˜¤ëŠ˜ì˜ í…Œë§ˆ ì¶”ì²œ (ê´€ë¦¬ì í˜ì´ì§€ì—ì„œ ëœë¤+ìŠ¹ì¸ í˜•ì‹)-->
        <div class="bg-white rounded-lg shadow-md p-6">
          <h3 class="text-xl font-bold mb-4">ğŸŒ¦ï¸ ì˜¤ëŠ˜ì˜ í…Œë§ˆ ì¶”ì²œ</h3>
          <p class="text-gray-600 mb-4">
            {{theme_text}} <!-- DBì—ì„œ ê°€ì ¸ì˜¨ ë¬¸êµ¬ -->
          </p>
          <!-- ì˜¤ëŠ˜ì˜ í…Œë§ˆ ë²„íŠ¼: í•­ìƒ hotsubcategoryë¡œ ì´ë™í•˜ë„ë¡ id ë¶€ì—¬(íŒŒì¼ ë‚´ ì´ë¯¸ ìˆìœ¼ë©´ ê·¸ëŒ€ë¡œ ì‚¬ìš©) -->
          <a id="today-theme-btn" href="/hotsubcategory.html?category=theme" class="inline-block px-3 py-1 bg-yellow-400 text-sm rounded" role="button" aria-label="ì˜¤ëŠ˜ì˜ í…Œë§ˆ">
            ì˜¤ëŠ˜ì˜ í…Œë§ˆ
          </a>
        </div>

        <!-- ì˜¤ëŠ˜ì˜ ëœë¤ ì¶”ì²œ -->
        <div class="bg-white rounded-lg shadow-md p-6 h-64">
          <h3 class="text-xl font-bold mb-4">ğŸ² ì˜¤ëŠ˜ì˜ ê³„ì ˆë©”ë‰´ ì¶”ì²œ</h3>
          <p class="text-gray-600 mb-4">
            ì–´ë–¤ ê³„ì ˆë©”ë‰´ê°€ ì„ íƒë˜ì—ˆì„ê¹Œìš”?
          </p>
          <a href="randomselection.html"
            class="inline-block bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700 transition">
            ìì„¸íˆ ë³´ê¸°
          </a>
        </div>

        <!-- âœ… ìš°ì¸¡ í•˜ë‹¨ ê³ ì • ë„¤ë¹„ê²Œì´ì…˜ -->
        <div class="fixed bottom-6 right-6 flex flex-col items-center gap-4 z-50">

          <!-- ì´ì „ -->
          <div class="flex flex-col items-center">
            <button onclick="goBack()"
              class="w-14 h-14 flex items-center justify-center rounded-full bg-gradient-to-br from-gray-100 to-gray-200 text-gray-700 shadow hover:from-gray-200 hover:to-gray-300 transition">
              â†
            </button>
            <span class="text-xs mt-1 text-gray-600 font-semibold">ì´ì „</span>
          </div>

          <!-- ë‹¤ìŒ -->
          <div class="flex flex-col items-center">
            <button onclick="goNext()"
              class="w-14 h-14 flex items-center justify-center rounded-full bg-gradient-to-br from-gray-100 to-gray-200 text-gray-700 shadow hover:from-gray-200 hover:to-gray-300 transition">
              â†’
            </button>
            <span class="text-xs mt-1 text-gray-600 font-semibold">ë‹¤ìŒ</span>
          </div>

          <!-- í™ˆ -->
          <div class="flex flex-col items-center">
            <a href="/index.html"
              class="w-14 h-14 flex items-center justify-center rounded-full bg-gradient-to-br from-blue-500 to-blue-600 text-white shadow hover:from-blue-600 hover:to-blue-700 transition">
              ğŸ 
            </a>
            <span class="text-xs mt-1 text-gray-600 font-semibold">í™ˆ</span>
          </div>
        </div>
  </main>

  <div id="footer"></div>

  <script>
    fetch('components/header.html')
      .then(r => r.text())
      .then(d => { document.getElementById('header').innerHTML = d; });

    fetch('components/footer.html')
      .then(r => r.text())
      .then(d => { document.getElementById('footer').innerHTML = d; });

    document.addEventListener("DOMContentLoaded", async () => {
      let index = 0;
      let interval;

      const slider = document.getElementById("ad-slider");

      function showSlide(i) {
        const totalSets = slider.children.length;
        if (totalSets === 0) return;
        index = (i + totalSets) % totalSets;
        slider.style.transform = `translateX(-${index * 100}%)`;
      }

      function startAutoSlide() {
        interval = setInterval(() => {
          showSlide(index + 1);
        }, 5000);
      }

      function stopAutoSlide() {
        clearInterval(interval);
      }

      // âœ… ê´‘ê³  ë¶ˆëŸ¬ì˜¤ê¸°
      async function loadPowerAds() {
        try {
          const res = await fetch("/api/ads/power");
          const ads = await res.json();

          slider.innerHTML = ads.map(ad => `
        <a href="${ad.link}" class="flex-shrink-0 w-full h-64">
          <img src="${ad.image_url}" 
               alt="${ad.title}" 
               class="w-full h-full object-cover cursor-pointer hover:scale-105 transition">
        </a>
      `).join("");

          showSlide(0);
          startAutoSlide();
        } catch (e) {
          console.error("íŒŒì›Œ ê´‘ê³  ë¶ˆëŸ¬ì˜¤ê¸° ì‹¤íŒ¨:", e);
        }
      }

      // âœ… ì¶”ì²œ ê°€ê²Œ ë¶ˆëŸ¬ì˜¤ê¸°
      async function loadRecommendations() {
        try {
          const res = await fetch("/api/recommend");
          const data = await res.json();
          const list = document.getElementById("recommend-list");
          list.innerHTML = "";

          data.recommendations.slice(0, 5).forEach((store, idx) => {
            const li = document.createElement("li");
            li.innerHTML = `
          ${idx + 1}.
          <a href="detail.html?id=${store.id}" 
             class="text-blue-600 hover:underline font-medium">
            ${store.name}
          </a> â€“ ${store.category}
        `;
            list.appendChild(li);
          });
        } catch (err) {
          console.error("ì¶”ì²œ ê°€ê²Œ ë¶ˆëŸ¬ì˜¤ê¸° ì‹¤íŒ¨:", err);
        }
      }

      // âœ… ëœë¤ ë¸”ë¡œê·¸ ë¶ˆëŸ¬ì˜¤ê¸°
      async function loadRandomBlog() {
        try {
          const res = await fetch("/api/random-hotblog");
          const data = await res.json();
          const linkEl = document.getElementById("randomBlogLink");
          if (data.ok && data.blog) {
            linkEl.href = `hotblogdetail.html?id=${data.blog.id}`;
            linkEl.innerText = data.blog.title || "ë¸”ë¡œê·¸ì—ì„œ ë³´ê¸°";
          } else {
            linkEl.innerText = "ì¶”ì²œ ê¸€ ì—†ìŒ";
          }
        } catch (e) {
          console.error("ëœë¤ ì¶”ì²œ ë¡œë“œ ì‹¤íŒ¨:", e);
          document.getElementById("randomBlogLink").innerText = "ë¶ˆëŸ¬ì˜¤ê¸° ì‹¤íŒ¨";
        }
      }

      // ë²„íŠ¼ ì´ë²¤íŠ¸
      document.getElementById("prev-btn").addEventListener("click", () => {
        stopAutoSlide();
        showSlide(index - 1);
        startAutoSlide();
      });
      document.getElementById("next-btn").addEventListener("click", () => {
        stopAutoSlide();
        showSlide(index + 1);
        startAutoSlide();
      });

      // ì´ˆê¸° ì‹¤í–‰
      await loadPowerAds();
      await loadRecommendations();
      await loadRandomBlog();
    });

    // âœ… ë„¤ë¹„ê²Œì´ì…˜ ë²„íŠ¼
    function goBack() { window.history.back(); }
    function goNext() { window.history.forward(); }

  </script>

</body>

</html>

<!-- ì•„ë˜ ìŠ¤í¬ë¦½íŠ¸ëŠ” í˜ì´ì§€ ë¡œë“œ ì‹œ data-store-idë¥¼ ê²€ì‚¬í•˜ì—¬ ì•ˆì „í•˜ê²Œ hrefë¥¼ ì„¤ì •í•©ë‹ˆë‹¤ -->
<script>
  (function(){
    document.querySelectorAll('a.hotblog-link[data-store-id]').forEach(a => {
      const raw = a.getAttribute('data-store-id') || "";
      // í”Œë ˆì´ìŠ¤í™€ë”ê°€ ë‚¨ì•„ìˆìœ¼ë©´ ë§í¬ ë¹„í™œì„±í™”
      if (!raw || /\{\{.+\}\}/.test(raw)) {
        a.removeAttribute('href');
        a.classList.add('opacity-50','pointer-events-none');
        return;
      }
      // ì •ìƒ idì´ë©´ href ì„¤ì •
      const id = raw;
      a.href = `hotblogdetail.html?id=${encodeURIComponent(id)}`;
    });
  })();
</script>
<script>
  // í˜ì´ì§€ì— ë‚¨ì€ "{{store_id}}" í”Œë ˆì´ìŠ¤í™€ë”ë¥¼ ì•ˆì „ ì²˜ë¦¬
  (function fixPlaceholderLinks(){
    document.querySelectorAll('a[href*="{{store_id}}"]').forEach(a=>{
      // ìš°ì„  data-store-id ë˜ëŠ” data-idê°€ ìˆìœ¼ë©´ ê·¸ê²ƒìœ¼ë¡œ ì¹˜í™˜
      const storeId = a.dataset.storeId || a.dataset.id || null;
      if (storeId && !/^\{\{.+\}\}$/.test(storeId)) {
        a.href = a.href.replace(/\{\{store_id\}\}/g, encodeURIComponent(storeId));
        return;
      }

      // ì£¼ë³€ ìš”ì†Œì— data-store-id ì†ì„±(ì¹´ë“œ ë“±)ì´ ìˆìœ¼ë©´ ì‚¬ìš©
      let parent = a.closest('[data-store-id], [data-id]');
      if (parent) {
        const pid = parent.dataset.storeId || parent.dataset.id;
        if (pid && !/^\{\{.+\}$/.test(pid)) {
          a.href = a.href.replace(/\{\{store_id\}\}/g, encodeURIComponent(pid));
          return;
        }
      }

      // ì¹˜í™˜í•  ê°’ì´ ì—†ìœ¼ë©´ ë§í¬ ë¹„í™œì„±í™”(í´ë¦­ ë¬´ì‹œ) â€” ì˜ëª»ëœ ë„¤ë¹„ê²Œì´ì…˜ ë°©ì§€
      a.dataset._origHref = a.getAttribute('href');
      a.removeAttribute('href');
      a.style.opacity = "0.6";
      a.title = "ë§í¬ ë°ì´í„°ê°€ ì—†ì–´ ì´ë™í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.";
    });

    // URL ìì²´ì— í”Œë ˆì´ìŠ¤í™€ë”ê°€ ë‚¨ì•„ìˆìœ¼ë©´ ì œê±° (ì˜ˆ: ?id={{store_id}})
    try {
      if (location.search && location.search.includes("{{store_id}}")) {
        const cleaned = location.search.replace(/\{\{store_id\}\}/g, "");
        history.replaceState(null, "", location.pathname + cleaned);
        console.warn("Removed template placeholder from URL");
      }
    } catch (e) { /* ignore */ }
  })();
</script>
<script>
  // ì˜¤ëŠ˜ì˜ í…Œë§ˆ ë²„íŠ¼ hrefë¥¼ ì•ˆì „í•˜ê²Œ ì„¤ì •
  (function(){
    const el = document.querySelector('a[href*="hotsubcategory.html?category=theme"]');
    if (!el) return;
    // ë°±ì—”ë“œ(ë¡œì»¬ ê°œë°œ)ëŠ” ë³´í†µ í¬íŠ¸ 3000ì—ì„œ ë™ì‘
    const backendOrigin = "http://localhost:3000";

    // ë°±ì—”ë“œ í—¬ìŠ¤ì²´í¬ ì‹œë„ (ë¹ ë¥´ê²Œ)
    fetch(`${backendOrigin}/__ping`, { method: "GET", mode: "cors", cache: "no-store" })
      .then(r => {
        if (r.ok) {
          // ë°±ì—”ë“œê°€ ìˆìœ¼ë©´ ë°±ì—”ë“œì—ì„œ ì œê³µí•˜ëŠ” ê²½ë¡œë¡œ ì—°ê²°
          el.href = `${backendOrigin}/hotsubcategory.html?category=theme`;
        } else {
          // ì‘ë‹µì´ ì •ìƒì´ ì•„ë‹ˆë©´ ìƒëŒ€ê²½ë¡œ ì‚¬ìš©
          el.href = "/hotsubcategory.html?category=theme";
        }
      })
      .catch(() => {
        // ë°±ì—”ë“œì— ì ‘ê·¼ ë¶ˆê°€í•˜ë©´ í˜„ì¬ í˜¸ìŠ¤íŠ¸ ê¸°ì¤€(relative)ë¡œ ì—°ê²°
        el.href = "/hotsubcategory.html?category=theme";
      });
  })();
</script>
<script>
  // ì˜¤ëŠ˜ì˜ í…Œë§ˆ ë²„íŠ¼: í•­ìƒ hotsubcategoryë¡œ ì´ë™í•˜ë„ë¡ id ë¶€ì—¬(íŒŒì¼ ë‚´ ì´ë¯¸ ìˆìœ¼ë©´ ê·¸ëŒ€ë¡œ ì‚¬ìš©)
  (function(){
    const btn = document.getElementById('today-theme-btn');
    if (!btn) return;
    // ìš°ì„  hrefë¥¼ ëª…ì‹œì ìœ¼ë¡œ ì„¤ì •
    btn.href = "/hotsubcategory.html?category=theme";
    // í´ë¦­ ì‹œ ê°•ì œ ì´ë™ (ë‹¤ë¥¸ ìŠ¤í¬ë¦½íŠ¸ê°€ preventDefault í•´ë„ ì´ í•¸ë“¤ëŸ¬ê°€ ìš°ì„  ì‹¤í–‰ë˜ë„ë¡)
    btn.addEventListener('click', function(e){
      e.preventDefault();
      location.href = "/hotsubcategory.html?category=theme";
    }, { passive: false });
  })();
</script>
<!-- ì•„ë˜ ê¸°ì¡´ ì—¬ëŸ¬ ìŠ¤í¬ë¦½íŠ¸(í”Œë ˆì´ìŠ¤í™€ë” ì¹˜í™˜ / í—¬ìŠ¤ì²´í¬ / ì¤‘ë³µ í•¸ë“¤ëŸ¬ ë“±)ë¥¼ í•˜ë‚˜ë¡œ ì •ë¦¬ -->
<script>
  (function(){
    const TARGET = "/hotsubcategory.html?category=theme";
    // ê°•ì œ: ë²„íŠ¼ì´ ë°˜ë“œì‹œ ì„œë¸Œì¹´í…Œê³ ë¦¬ë¡œ ì´ë™
    const btn = document.getElementById('today-theme-btn');
    if (btn) {
      btn.setAttribute('href', TARGET);
      btn.removeAttribute('onclick');
      btn.addEventListener('click', function(e){
        e.preventDefault();
        location.href = TARGET;
      }, { passive: false });
    }

    // í”Œë ˆì´ìŠ¤í™€ë”ê°€ ë‚¨ì€ ë§í¬ë“¤ ë¹„í™œì„±í™”(ë°©ì–´)
    document.querySelectorAll('a[href*="{{"]').forEach(a=>{
      a.dataset._origHref = a.getAttribute('href');
      a.removeAttribute('href');
      a.classList.add('opacity-60', 'pointer-events-none');
      a.title = "ì˜ëª»ëœ ë§í¬(ë°ì´í„° ëˆ„ë½)";
    });

    // URLì— í”Œë ˆì´ìŠ¤í™€ë”ê°€ ë‚¨ì•„ìˆìœ¼ë©´ ì œê±°
    try {
      if (location.search && location.search.includes("{{")) {
        const cleaned = location.search.replace(/\{\{.*?\}\}/g, "");
        history.replaceState(null, "", location.pathname + cleaned);
        console.warn("Removed template placeholder from URL");
      }
    } catch(e){}
  })();
</script>
<script>
(function(){
  const TARGET = `${location.origin}/hotsubcategory.html?category=theme`;
  const btn = document.getElementById('today-theme-btn');
  if (!btn) return;

  // í•­ìƒ ì ˆëŒ€ê²½ë¡œë¡œ ì„¤ì •
  btn.setAttribute('href', TARGET);

  // í´ë¦­ì„ ê°•ì œ ì²˜ë¦¬(ë‹¤ë¥¸ í•¸ë“¤ëŸ¬ë³´ë‹¤ ìš°ì„ )
  btn.addEventListener('click', function(e){
    e.preventDefault();
    e.stopImmediatePropagation();
    console.log('[hot] today-theme ->', TARGET);
    location.assign(TARGET);
  }, { capture: true, passive: false });

  // ë‹¤ë¥¸ ìŠ¤í¬ë¦½íŠ¸ê°€ ë®ì–´ì“°ë©´ ë³µì›
  const iv = setInterval(()=> {
    if (btn.href !== TARGET) btn.href = TARGET;
  }, 300);

  window.addEventListener('beforeunload', ()=> clearInterval(iv));
})();
</script>