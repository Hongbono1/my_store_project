<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ê°€ì¥ í•«í•œ ìš°ë¦¬ë™ë„¤</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-gray-50 text-gray-800">

  <div id="header"></div>
  <style>
    /* ë„¤ì˜¤ëª¨í”¼ì¦˜ + ê¸€ë˜ìŠ¤ ê³µí†µ */
    .neo-glass {
      background: rgba(255, 255, 255, 0.2);
      border: 1px solid rgba(255, 255, 255, 0.25);
      backdrop-filter: blur(20px);
      box-shadow: 8px 8px 16px rgba(163, 177, 198, 0.6),
        -8px -8px 16px rgba(255, 255, 255, 0.9);
    }

    /* ë²„íŠ¼ 3D íš¨ê³¼ */
    .btn-3d {
      background: linear-gradient(145deg, #4f8cff, #1e40af);
      box-shadow: 4px 4px 10px rgba(0, 0, 0, 0.3),
        -2px -2px 6px rgba(255, 255, 255, 0.8);
    }

    .btn-3d:hover {
      transform: translateY(-2px);
      box-shadow: 6px 6px 14px rgba(0, 0, 0, 0.4),
        -3px -3px 8px rgba(255, 255, 255, 0.9);
    }

    .btn-3d:active {
      transform: translateY(2px);
      box-shadow: inset 2px 2px 6px rgba(0, 0, 0, 0.3),
        inset -2px -2px 6px rgba(255, 255, 255, 0.8);
    }
  </style>

  <!-- âœ… Main -->
  <main class="flex-grow">

    <!-- ìƒë‹¨ ì œëª© -->
    <section class="text-center py-10">
      <h1 class="text-3xl font-bold mb-2">ê°€ì¥ í•«(HOT)í•œ ìš°ë¦¬ë™ë„¤</h1>
      <p class="text-gray-600">ìš°ë¦¬ë™ë„¤ í•«(HOT)í•œ ê°€ê²Œë¥¼ ì†Œê°œí•©ë‹ˆë‹¤</p>
    </section>

    <!-- ë©”ì¸ íˆì–´ë¡œ ì¹´ë“œ -->
    <section class="max-w-5xl mx-auto px-4 mb-16">
      <div class="neo-glass grid md:grid-cols-2 overflow-hidden rounded-2xl p-6">

        <!-- ì´ë¯¸ì§€ -->
        <div class="rounded-2xl overflow-hidden">
          <img src="/uploads/main-banner.jpg" alt="ë©”ì¸ ì´ë¯¸ì§€"
            class="w-full h-full object-cover hover:scale-105 transition duration-500">
        </div>

        <!-- í…ìŠ¤íŠ¸ -->
        <div class="p-6 flex flex-col justify-center items-center text-center">
          <h2 class="text-3xl font-extrabold mb-4 drop-shadow">
            ìš°ë¦¬ë™ë„¤ ëŒ€í‘œ Hot Place
          </h2>
          <p class="text-gray-700 mb-6 leading-relaxed">
            ì§€ê¸ˆ ê°€ì¥ ì¸ê¸° ìˆëŠ” ìš°ë¦¬ë™ë„¤ë¥¼ ì†Œê°œí•©ë‹ˆë‹¤.<br>
            ì´ë²¤íŠ¸, ë¦¬ë·°, ì‚¬ì§„ìœ¼ë¡œ ìƒìƒí•˜ê²Œ ì¦ê²¨ë³´ì„¸ìš”.
          </p>
          <a href="/hotplace.html" class="btn-3d px-6 py-2 text-white rounded-full text-sm font-semibold transition">
            ë”ë³´ê¸°
          </a>
        </div>
      </div>
    </section>

    <!-- ë³¸ë¬¸ ì¹´ë“œ ê·¸ë£¹ -->
    <section class="max-w-5xl mx-auto px-4 grid grid-cols-1 md:grid-cols-3 gap-8 mb-16">
      <!-- ì¢Œì¸¡ í° ì¹´ë“œ -->
      <div class="md:col-span-2 bg-white rounded-lg shadow-md p-6 grid md:grid-cols-2 gap-6 items-center">
        <!-- ì´ë¯¸ì§€ (ì™¼ìª½) -->
        <div>
          <img src="/uploads/hot-place.jpg" alt="ì¶”ì²œ" class="w-full h-full object-cover rounded-lg">
        </div>

        <!-- í…ìŠ¤íŠ¸ (ì˜¤ë¥¸ìª½, ê°€ìš´ë° ì •ë ¬) -->
        <div class="flex flex-col justify-center items-center text-center p-4">
          <h3 class="text-xl font-bold mb-3">ê¸ˆì£¼ì˜ ì¶”ì²œ ì¥ì†Œ</h3>
          <p class="text-gray-600 mb-4">
            ì‹ ê·œ ì˜¤í”ˆ, ì´ë²¤íŠ¸, ëœë¤ Pickê¹Œì§€ ë§¤ì¼ ìƒˆë¡­ê²Œ ë§Œë‚˜ë³´ì„¸ìš”.
          </p>
          <a href="/hotplace.html#weekly-recommend"
            class="inline-block bg-blue-600 text-white text-sm w-24 text-center py-2 rounded hover:bg-blue-700 transition">
            ë”ë³´ê¸°
          </a>
        </div>
      </div>

      <!-- ìš°ì¸¡ ì‘ì€ ì¹´ë“œ (í•˜ë‚˜ë¡œ í•©ì¹¨) -->
      <div class="grid grid-rows-1 gap-6 h-full text-center">
        <!-- í• ì¸ & ì´ë²¤íŠ¸ ì†Œì‹ìœ¼ë¡œ ì—°ê²° -->
        <a href="event.html#news" class="block bg-white rounded-lg shadow-md p-4 hover:shadow-lg transition">
          <h4 class="text-xl font-bold mb-3">ì¶”ì²œ ì†Œì‹</h4>
          <p class="text-gray-600 mb-4">í• ì¸ & ì´ë²¤íŠ¸ ì •ë³´</p>
        </a>
      </div>
    </section>

    <!-- ğŸ”¥ ë­í‚¹ + ì¶”ì²œ ì„¹ì…˜ -->
    <section class="max-w-6xl mx-auto px-4 grid grid-cols-1 md:grid-cols-4 gap-8 mb-16">

      <!-- ë§ì´ ì°¾ì•„ë³¸ ê°€ê²Œ -->
      <div class="bg-white rounded-lg shadow-md p-6 h-56">
        <h3 class="text-xl font-bold mb-4 text-center">ğŸ”¥ ë§ì´ ì°¾ì•„ë³¸ ê°€ê²Œ</h3>
        <ul id="popular-list" class="space-y-3 text-gray-700 text-base text-left">
          <!-- JSì—ì„œ ë°ì´í„°ë¡œ ì±„ì›Œì§ -->
        </ul>
      </div>

      <!-- ë§ì´ ì°œí•œ ê°€ê²Œ -->
      <div class="bg-white rounded-lg shadow-md p-6 h-56">
        <h3 class="text-xl font-bold mb-4 text-center">â­ ë§ì´ ì°œí•œ ê°€ê²Œ</h3>
        <ul id="bookmark-list" class="space-y-3 text-gray-700 text-base text-left">
          <!-- JSì—ì„œ ë°ì´í„°ë¡œ ì±„ì›Œì§ -->
        </ul>
      </div>

      <!-- ì˜¤ëŠ˜ì˜ ì¶”ì²œ ê°€ê²Œ -->
      <div class="bg-white rounded-lg shadow-md p-6 h-56">
        <h3 class="text-xl font-bold mb-4 text-center">ğŸŒŸ ì˜¤ëŠ˜ì˜ ì¶”ì²œ ê°€ê²Œ</h3>
        <ul id="recommend-list" class="space-y-3 text-gray-700 text-base text-left">
          <!-- JSì—ì„œ ë°ì´í„°ë¡œ ì±„ì›Œì§ -->
        </ul>
      </div>

      <!-- ì´ë²ˆ ì£¼ ì£¼ëª©ë°›ëŠ” ê°€ê²Œ -->
      <div class="bg-white rounded-lg shadow-md p-6 h-56">
        <h3 class="text-xl font-bold mb-4 text-center">ğŸ“ˆ ì£¼ëª©ë°›ëŠ” ê°€ê²Œ</h3>
        <ul id="trend-list" class="space-y-3 text-gray-700 text-base text-left">
          <!-- JSì—ì„œ ë°ì´í„°ë¡œ ì±„ì›Œì§ -->
        </ul>
      </div>

    </section>

    <!-- âš¡ íŒŒì›Œ ê´‘ê³  -->
    <section class="max-w-6xl mx-auto px-4 mb-20">
      <div class="bg-yellow-50 border-l-4 border-yellow-400 rounded-lg shadow-md p-6 relative">
        <h3 class="text-2xl font-bold mb-4 text-yellow-700">âš¡ íŒŒì›Œ ê´‘ê³ </h3>

        <!-- ê´‘ê³  ìŠ¬ë¼ì´ë” ì»¨í…Œì´ë„ˆ -->
        <div class="overflow-hidden relative">
          <div id="ad-slider" class="flex transition-transform duration-700 ease-in-out">

            <!-- ì„¸íŠ¸1 -->
            <div class="grid grid-cols-1 md:grid-cols-4 gap-6 flex-shrink-0 w-full">
              <a href="https://example.com/ad1" target="_blank"
                class="bg-white rounded-lg shadow p-4 text-center h-64 flex items-center justify-center hover:shadow-lg transition">
                ê´‘ê³ 1
              </a>
              <a href="https://example.com/ad2" target="_blank"
                class="bg-white rounded-lg shadow p-4 text-center h-64 flex items-center justify-center hover:shadow-lg transition">
                ê´‘ê³ 2
              </a>
              <a href="https://example.com/ad3" target="_blank"
                class="bg-white rounded-lg shadow p-4 text-center h-64 flex items-center justify-center hover:shadow-lg transition">
                ê´‘ê³ 3
              </a>
              <a href="https://example.com/ad4" target="_blank"
                class="bg-white rounded-lg shadow p-4 text-center h-64 flex items-center justify-center hover:shadow-lg transition">
                ê´‘ê³ 4
              </a>
            </div>

            <!-- ì„¸íŠ¸2 -->
            <div class="grid grid-cols-1 md:grid-cols-4 gap-6 flex-shrink-0 w-full">
              <a href="https://example.com/ad5" target="_blank"
                class="bg-white rounded-lg shadow p-4 text-center h-64 flex items-center justify-center hover:shadow-lg transition">
                ê´‘ê³ 5
              </a>
              <a href="https://example.com/ad6" target="_blank"
                class="bg-white rounded-lg shadow p-4 text-center h-64 flex items-center justify-center hover:shadow-lg transition">
                ê´‘ê³ 6
              </a>
              <a href="https://example.com/ad7" target="_blank"
                class="bg-white rounded-lg shadow p-4 text-center h-64 flex items-center justify-center hover:shadow-lg transition">
                ê´‘ê³ 7
              </a>
              <a href="https://example.com/ad8" target="_blank"
                class="bg-white rounded-lg shadow p-4 text-center h-64 flex items-center justify-center hover:shadow-lg transition">
                ê´‘ê³ 8
              </a>
            </div>

            <!-- ì„¸íŠ¸3 -->
            <div class="grid grid-cols-1 md:grid-cols-4 gap-6 flex-shrink-0 w-full">
              <a href="https://example.com/ad9" target="_blank"
                class="bg-white rounded-lg shadow p-4 text-center h-64 flex items-center justify-center hover:shadow-lg transition">
                ê´‘ê³ 9
              </a>
              <a href="https://example.com/ad10" target="_blank"
                class="bg-white rounded-lg shadow p-4 text-center h-64 flex items-center justify-center hover:shadow-lg transition">
                ê´‘ê³ 10
              </a>
              <a href="https://example.com/ad11" target="_blank"
                class="bg-white rounded-lg shadow p-4 text-center h-64 flex items-center justify-center hover:shadow-lg transition">
                ê´‘ê³ 11
              </a>
              <a href="https://example.com/ad12" target="_blank"
                class="bg-white rounded-lg shadow p-4 text-center h-64 flex items-center justify-center hover:shadow-lg transition">
                ê´‘ê³ 12
              </a>
            </div>

          </div>
        </div>

        <!-- âœ… í•˜ë‹¨ ê³ ì • ë²„íŠ¼ -->
        <div class="flex justify-center gap-6 mt-6">
          <button id="prev-btn"
            class="bg-white text-black px-6 py-2 rounded-full shadow hover:bg-yellow-600 transition">
            &lt;
          </button>
          <button id="next-btn"
            class="bg-white text-black px-6 py-2 rounded-full shadow hover:bg-yellow-600 transition">
            &gt;
          </button>
        </div>
    </section>
    </div>

    <!-- ì˜¤ëŠ˜ë„ ìš°ë¦¬ë™ë„¤ì—ì„œ íŠ¹ë³„í•œ ìˆœê°„ì„! -->
    <section class="text-center my-12">
      <h2 class="text-2xl font-bold text-gray-800 mb-6">
        ì˜¤ëŠ˜ë„ ìš°ë¦¬ë™ë„¤ì—ì„œ íŠ¹ë³„í•œ ìˆœê°„ì„!
      </h2>

      <!-- í•˜ë‹¨ ë°•ìŠ¤ 2ê°œ -->
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6 max-w-6xl mx-auto px-4">

        <!-- ì˜¤ëŠ˜ì˜ í…Œë§ˆ ì¶”ì²œ (ê´€ë¦¬ì í˜ì´ì§€ì—ì„œ ëœë¤+ìŠ¹ì¸ í˜•ì‹)-->
        <div class="bg-white rounded-lg shadow-md p-6">
          <h3 class="text-xl font-bold mb-4">ğŸŒ¦ï¸ ì˜¤ëŠ˜ì˜ í…Œë§ˆ ì¶”ì²œ</h3>
          <p class="text-gray-600 mb-4">
            {{theme_text}} <!-- DBì—ì„œ ê°€ì ¸ì˜¨ ë¬¸êµ¬ -->
          </p>
          <a href="hotblogdetail.html?id={{store_id}}"
            class="inline-block bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition">
            ìì„¸íˆ ë³´ê¸°
          </a>
        </div>

        <!-- ì˜¤ëŠ˜ì˜ ëœë¤ ì¶”ì²œ -->
        <div class="bg-white rounded-lg shadow-md p-6 h-64">
          <h3 class="text-xl font-bold mb-4">ğŸ² ì˜¤ëŠ˜ì˜ ê³„ì ˆë©”ë‰´ ì¶”ì²œ</h3>
          <p class="text-gray-600 mb-4">
            ì–´ë–¤ ê³„ì ˆë©”ë‰´ê°€ ì„ íƒë˜ì—ˆì„ê¹Œìš”?
          </p>
          <a href="randomselection.html"
            class="inline-block bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700 transition">
            ìì„¸íˆ ë³´ê¸°
          </a>
        </div>

        <!-- âœ… ìš°ì¸¡ í•˜ë‹¨ ê³ ì • ë„¤ë¹„ê²Œì´ì…˜ -->
        <div class="fixed bottom-6 right-6 flex flex-col items-center gap-4 z-50">

          <!-- ì´ì „ -->
          <div class="flex flex-col items-center">
            <button onclick="goBack()"
              class="w-14 h-14 flex items-center justify-center rounded-full bg-gradient-to-br from-gray-100 to-gray-200 text-gray-700 shadow hover:from-gray-200 hover:to-gray-300 transition">
              â†
            </button>
            <span class="text-xs mt-1 text-gray-600 font-semibold">ì´ì „</span>
          </div>

          <!-- ë‹¤ìŒ -->
          <div class="flex flex-col items-center">
            <button onclick="goNext()"
              class="w-14 h-14 flex items-center justify-center rounded-full bg-gradient-to-br from-gray-100 to-gray-200 text-gray-700 shadow hover:from-gray-200 hover:to-gray-300 transition">
              â†’
            </button>
            <span class="text-xs mt-1 text-gray-600 font-semibold">ë‹¤ìŒ</span>
          </div>

          <!-- í™ˆ -->
          <div class="flex flex-col items-center">
            <a href="/index.html"
              class="w-14 h-14 flex items-center justify-center rounded-full bg-gradient-to-br from-blue-500 to-blue-600 text-white shadow hover:from-blue-600 hover:to-blue-700 transition">
              ğŸ 
            </a>
            <span class="text-xs mt-1 text-gray-600 font-semibold">í™ˆ</span>
          </div>
        </div>
  </main>

  <div id="footer"></div>

  <script>
    // í—¤ë”/í‘¸í„° ë¶ˆëŸ¬ì˜¤ê¸°
    fetch('components/header.html')
      .then(r => r.text())
      .then(d => { document.getElementById('header').innerHTML = d; });

    fetch('components/footer.html')
      .then(r => r.text())
      .then(d => { document.getElementById('footer').innerHTML = d; });

    // ğŸ”¥ í•« ë­í‚¹ìš© ê³µí†µ ë Œë” í•¨ìˆ˜
    function renderHotList(containerId, list = []) {
      const el = document.getElementById(containerId);
      if (!el) return;

      el.innerHTML = "";

      if (!list.length) {
        el.innerHTML = `<li class="text-xs text-gray-400">ë°ì´í„° ì—†ìŒ</li>`;
        return;
      }

      list.forEach((item, idx) => {
        const li = document.createElement("li");
        li.className = "flex items-center justify-between gap-2 text-base";

        li.innerHTML = `
  <span class="text-xs text-gray-400 w-5">${idx + 1}.</span>
  <span class="flex-1 truncate">${item.business_name}</span>
  <span class="text-[12px] text-gray-500 whitespace-nowrap">#${item.business_category || ""}</span>
`;
        el.appendChild(li);
      });
    }

    // ğŸ”¥ /api/hot/summary â†’ 4ê°œ ë°•ìŠ¤ ì±„ìš°ê¸°
    async function loadHotSummary() {
      try {
        const res = await fetch("/api/hot/summary");
        if (!res.ok) throw new Error("summary fetch failed");

        const data = await res.json();
        if (!data.ok) throw new Error(data.error || "invalid response");

        // â¬‡ï¸ hotControllerì—ì„œ ë‚´ë ¤ì£¼ëŠ” ì´ë¦„ê³¼ ë§¤í•‘
        renderHotList("popular-list", data.mostViewed);        // í´ë¦­ 1~5ìœ„
        renderHotList("bookmark-list", data.mostBookmarked);   // ë¶ë§ˆí¬ 1~5ìœ„
        renderHotList("recommend-list", data.todayPick);       // í´ë¦­ 6~10ìœ„
        renderHotList("trend-list", data.rising);              // í´ë¦­ 11~15ìœ„
      } catch (err) {
        console.error("HOT SUMMARY LOAD ERROR:", err);
      }
    }

    document.addEventListener("DOMContentLoaded", async () => {
      let index = 0;
      let interval;

      const slider = document.getElementById("ad-slider");

      function showSlide(i) {
        const totalSets = slider.children.length;
        if (totalSets === 0) return;
        index = (i + totalSets) % totalSets;
        slider.style.transform = `translateX(-${index * 100}%)`;
      }

      function startAutoSlide() {
        interval = setInterval(() => {
          showSlide(index + 1);
        }, 5000);
      }

      function stopAutoSlide() {
        clearInterval(interval);
      }

      // âœ… íŒŒì›Œ ê´‘ê³  ë¶ˆëŸ¬ì˜¤ê¸°
      async function loadPowerAds() {
        try {
          const res = await fetch("/api/ads/power");
          const ads = await res.json();

          slider.innerHTML = ads.map(ad => `
          <a href="${ad.link}" class="flex-shrink-0 w-full h-64">
            <img src="${ad.image_url}" 
                 alt="${ad.title}" 
                 class="w-full h-full object-cover cursor-pointer hover:scale-105 transition">
          </a>
        `).join("");

          showSlide(0);
          startAutoSlide();
        } catch (e) {
          console.error("íŒŒì›Œ ê´‘ê³  ë¶ˆëŸ¬ì˜¤ê¸° ì‹¤íŒ¨:", e);
        }
      }

      // âœ… ì¶”ì²œ ê°€ê²Œ ë¶ˆëŸ¬ì˜¤ê¸° (ê¸°ì¡´ ì½”ë“œ ìœ ì§€)
      async function loadRecommendations() {
        try {
          const res = await fetch("/api/recommend");
          const data = await res.json();
          const list = document.getElementById("recommend-list");
          if (!list) return;

          // /api/hot/summaryë¡œ ì˜¤ëŠ˜ì˜ ì¶”ì²œ ê°€ê²Œê°€ ì´ë¯¸ ì±„ì›Œì§€ëŠ” êµ¬ì¡°ë©´,
          // ì´ ë¶€ë¶„ì€ ë‚˜ì¤‘ì— ë¶„ë¦¬í•˜ê±°ë‚˜ ë‹¤ë¥¸ ì„¹ì…˜ìœ¼ë¡œ ì˜®ê²¨ë„ ë¨.
          console.log("ê¸°ì¡´ /api/recommend ì‘ë‹µ:", data);
        } catch (err) {
          console.error("ì¶”ì²œ ê°€ê²Œ ë¶ˆëŸ¬ì˜¤ê¸° ì‹¤íŒ¨:", err);
        }
      }

      // âœ… ëœë¤ ë¸”ë¡œê·¸ ë¶ˆëŸ¬ì˜¤ê¸° (í˜„ì¬ hot.html êµ¬ì¡°ì—ì„œëŠ” ì‚¬ìš© ì•ˆ í•  ìˆ˜ë„ ìˆìŒ)
      async function loadRandomBlog() {
        try {
          const res = await fetch("/api/random-hotblog");
          const data = await res.json();
          console.log("ëœë¤ í•«ë¸”ë¡œê·¸ ì‘ë‹µ:", data);
          // í•„ìš”í•˜ë©´ ë‚˜ì¤‘ì— id="randomBlogLink" ê°™ì€ ì—˜ë¦¬ë¨¼íŠ¸ë¥¼ ì¶”ê°€í•´ì„œ ì—°ê²°
        } catch (e) {
          console.error("ëœë¤ ì¶”ì²œ ë¡œë“œ ì‹¤íŒ¨:", e);
        }
      }

      // ë²„íŠ¼ ì´ë²¤íŠ¸
      document.getElementById("prev-btn").addEventListener("click", () => {
        stopAutoSlide();
        showSlide(index - 1);
        startAutoSlide();
      });
      document.getElementById("next-btn").addEventListener("click", () => {
        stopAutoSlide();
        showSlide(index + 1);
        startAutoSlide();
      });

      // ğŸ”½ ì‹¤í–‰ ìˆœì„œ
      await loadHotSummary();      // 1) í•« ë­í‚¹ 4ë°•ìŠ¤ ì±„ìš°ê¸°
      await loadPowerAds();        // 2) íŒŒì›Œ ê´‘ê³ 
      await loadRecommendations(); // 3) ê¸°ì¡´ ì¶”ì²œ API (í•„ìš”ì‹œ)
      await loadRandomBlog();      // 4) ëœë¤ í•«ë¸”ë¡œê·¸ (ë‚˜ì¤‘ í™•ì¥ìš©)
    });

    // âœ… ë„¤ë¹„ê²Œì´ì…˜ ë²„íŠ¼
    function goBack() { window.history.back(); }
    function goNext() { window.history.forward(); }
  </script>


</body>

</html>