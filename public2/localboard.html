<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>지역 게시판</title>
<script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-gray-100">

<div id="header"></div>

<div class="max-w-3xl mx-auto bg-white mt-10 p-6 rounded-2xl shadow-lg">

  <h1 class="text-3xl font-bold mb-6">📌 지역 게시판</h1>

  <button onclick="location.href='localboardWrite.html'"
    class="mb-4 px-4 py-2 bg-indigo-600 text-white rounded-lg">글쓰기</button>

  <div id="list" class="divide-y"></div>

</div>

<div id="footer"></div>

<script>
fetch('components/header.html').then(r => r.text()).then(h => header.innerHTML = h);
fetch('components/footer.html').then(r => r.text()).then(f => footer.innerHTML = f);

async function loadPosts() {
  const res = await fetch("/api/localboard");
  const data = await res.json();

  list.innerHTML = data.map(p => `
    <a href="localboardDetail.html?id=${p.id}" class="block py-4 hover:bg-gray-100">
      <div class="font-semibold">${p.is_notice ? "📢 [공지] " : ""}${p.title}</div>
      <div class="text-sm text-gray-500">${p.region} · 조회 ${p.views}</div>
    </a>
  `).join("");
}
loadPosts();
</script>

</body>
</html>
