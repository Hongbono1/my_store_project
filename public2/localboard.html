<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>ì§€ì—­ ê²Œì‹œíŒ</title>
<script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-gray-100">

<div id="header"></div>

<div class="max-w-4xl mx-auto bg-white mt-10 p-6 rounded-2xl shadow-lg">

  <div class="flex justify-between items-center mb-6">
    <h1 class="text-3xl font-bold">ğŸ“Œ ì§€ì—­ ê²Œì‹œíŒ</h1>
    <button onclick="location.href='localboardWrite.html'"
      class="px-5 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 font-medium">
      âœï¸ ê¸€ì“°ê¸°
    </button>
  </div>

  <div id="list" class="space-y-3"></div>

</div>

<div id="footer"></div>

<!-- ì´ì „/í™ˆ/ë‹¤ìŒ ë²„íŠ¼ -->
<div class="fixed bottom-6 right-6 flex flex-col gap-3 z-50">
  <button onclick="goBack()" class="w-12 h-12 bg-white border-2 border-indigo-600 text-indigo-600 rounded-full hover:bg-indigo-600 hover:text-white shadow-lg flex items-center justify-center font-bold">
    â†
  </button>
  <button onclick="goHome()" class="w-12 h-12 bg-white border-2 border-indigo-600 text-indigo-600 rounded-full hover:bg-indigo-600 hover:text-white shadow-lg flex items-center justify-center text-xl">
    ğŸ 
  </button>
  <button onclick="goForward()" class="w-12 h-12 bg-white border-2 border-indigo-600 text-indigo-600 rounded-full hover:bg-indigo-600 hover:text-white shadow-lg flex items-center justify-center font-bold">
    â†’
  </button>
</div>

<script>
fetch('components/header.html').then(r => r.text()).then(h => header.innerHTML = h);
fetch('components/footer.html').then(r => r.text()).then(f => footer.innerHTML = f);

// ë„¤ë¹„ê²Œì´ì…˜ í•¨ìˆ˜
function goBack() {
  window.history.back();
}

function goHome() {
  window.location.href = '/index.html';
}

function goForward() {
  window.history.forward();
}

async function loadPosts() {
  const res = await fetch("/api/localboard");
  const data = await res.json();

  list.innerHTML = data.map(p => {
    const date = new Date(p.created_at);
    const dateStr = date.toLocaleDateString('ko-KR', { 
      month: '2-digit', 
      day: '2-digit', 
      hour: '2-digit', 
      minute: '2-digit' 
    });

    return `
    <a href="localboardDetail.html?id=${p.id}" 
       class="block p-4 border border-gray-200 rounded-lg hover:bg-gray-50 hover:border-indigo-300 transition">
      
      ${p.is_notice ? '<span class="inline-block px-2 py-0.5 bg-red-500 text-white text-xs font-bold rounded mb-2">ê³µì§€</span>' : ''}
      
      <div class="flex justify-between items-start mb-2">
        <h3 class="text-lg font-semibold text-gray-800 flex-1">${p.title}</h3>
        <span class="text-xs text-gray-400 ml-4 whitespace-nowrap">${dateStr}</span>
      </div>
      
      <div class="flex items-center gap-4 text-sm text-gray-600">
        <span class="font-medium text-indigo-600">${p.writer}</span>
        <span>ğŸ“ ${p.region}</span>
        <span>ğŸ‘ï¸ ${p.views}</span>
        <span>ğŸ‘ ${p.likes || 0}</span>
      </div>
    </a>
    `;
  }).join("");
}
loadPosts();
</script>

</body>
</html>
