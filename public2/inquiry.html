<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <title>문의 목록 | MALL HANKOOK</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-gray-50">
    <div id="header"></div>

    <main class="max-w-4xl mx-auto py-20 px-4">
        <h1 class="text-3xl font-bold mb-8">문의 목록</h1>

        <div id="inquiryList" class="space-y-4"></div>

        <div class="text-right mt-10">
            <a href="/inquiryregister.html"
                class="px-5 py-3 bg-indigo-600 text-white rounded-xl shadow hover:bg-indigo-700">
                문의 등록
            </a>
        </div>
    </main>

    <div id="footer"></div>

    <script>
        // Header/Footer 로드
        fetch("/components/header.html")
            .then(res => res.text())
            .then(html => header.innerHTML = html);

        fetch("/components/footer.html")
            .then(res => res.text())
            .then(html => footer.innerHTML = html);

        // 리스트 불러오기
        async function loadList() {
            const res = await fetch("/inquiry/list");
            const data = await res.json();

            if (!data.success) return;

            const box = document.getElementById("inquiryList");
            box.innerHTML = "";

            data.list.forEach(item => {
                const el = document.createElement("div");
                el.className = "p-5 bg-white shadow rounded-xl border hover:bg-gray-100 transition";
                el.innerHTML = `
                    <a href="/inquirydetail.html?id=${item.id}">
                        <div class="text-lg font-semibold text-gray-800">${item.title}</div>
                        <div class="text-gray-600 mt-1">${item.primary_category}</div>
                        <div class="text-gray-400 text-sm mt-1">${item.created_at}</div>
                    </a>
                `;
                box.appendChild(el);
            });
        }

        loadList();
    </script>
</body>

</html>