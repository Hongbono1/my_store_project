<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì˜¤ëŠ˜ì˜ ëœë¤ ì¶”ì²œ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* âœ… ë„¤ì˜¤ëª¨í”¼ì¦˜+ê¸€ë˜ìŠ¤ */
        .neo-glass {
            background: rgba(255, 255, 255, 0.7);
            backdrop-filter: blur(12px);
            border-radius: 1.5rem;
            border: 1px solid rgba(200, 200, 200, 0.6);
            box-shadow: 8px 8px 20px rgba(0, 0, 0, 0.08),
                -8px -8px 20px rgba(255, 255, 255, 0.9);
        }

        /* âœ… ê³µí†µ 3D ë²„íŠ¼ */
        .btn-3d {
            border-radius: 9999px;
            box-shadow: 4px 4px 10px rgba(0, 0, 0, 0.25),
                -2px -2px 6px rgba(255, 255, 255, 0.6);
            transition: all 0.2s ease;
            display: inline-block;
        }

        .btn-3d:hover {
            transform: translateY(-2px);
            box-shadow: 6px 6px 14px rgba(0, 0, 0, 0.35),
                -3px -3px 8px rgba(255, 255, 255, 0.8);
        }

        .btn-3d:active {
            transform: translateY(2px);
            box-shadow: inset 2px 2px 6px rgba(0, 0, 0, 0.3),
                inset -2px -2px 6px rgba(255, 255, 255, 0.7);
        }

        /* âœ… íŒŒë€ìƒ‰ ë²„íŠ¼ (ìì„¸íˆ ë³´ê¸° ì „ìš©) */
        .btn-blue {
            background: linear-gradient(145deg, #3b82f6, #1e40af);
            color: #fff;
        }

        /* âœ… í°ìƒ‰ ë²„íŠ¼ (ê¸°ë¶„/ìƒí™© ë²„íŠ¼) */
        .btn-white {
            background: #fff !important;
            color: #111827 !important;
            /* ê²€ì • ê¸€ì”¨ */
            border: 1px solid #d1d5db;
        }
    </style>
</head>

<body class="bg-gray-100 text-gray-800">

    <!-- 1ë‹¨ê³„: ì œì²  ìŒì‹ -->
    <section class="max-w-4xl mx-auto px-4 py-10">
        <h1 class="text-3xl font-extrabold text-center mb-6">ğŸ¥— ì´ë‹¬ì˜ ì œì²  ìŒì‹</h1>
        <div class="neo-glass grid md:grid-cols-2 gap-6 overflow-hidden min-h-[250px] p-4">
            <div>
                <img src="https://via.placeholder.com/600x400?text=ì œì² ìŒì‹" alt="ì œì²  ìŒì‹"
                    class="w-full h-64 object-cover md:h-full rounded-2xl">
            </div>
            <div class="p-6 flex flex-col justify-center text-center md:text-left">
                <h3 class="text-2xl font-bold mb-3">ê°€ì„ ì „ì–´êµ¬ì´</h3>
                <p class="text-lg text-gray-700 mb-4">
                    ê°€ì„ì² ì—” ê³ ì†Œí•œ ì „ì–´êµ¬ì´ê°€ ì œë§›!<br>ê°€ì¡±ê³¼ í•¨ê»˜ ì¦ê²¨ë³´ì„¸ìš” ğŸ‚
                </p>
                <a href="season.html"
                    class="btn-3d btn-blue text-white text-sm font-semibold rounded-full px-6 py-2 self-center md:self-start">
                    ìì„¸íˆ ë³´ê¸°
                </a>
            </div>
        </div>
    </section>

    <!-- 3ë‹¨ê³„: ëœë¤ ê´‘ê³  8ê°œ -->
    <section class="max-w-6xl mx-auto px-4 py-10">
        <h2 class="text-2xl font-extrabold text-center mb-6">ğŸ“¢ ì˜¤ëŠ˜ì˜ ëœë¤ ê´‘ê³  ì¶”ì²œ</h2>
        <div id="ad-grid" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-8">

            <!-- ê´‘ê³  ì¹´ë“œ 1 -->
            <div class="neo-glass flex flex-col overflow-hidden p-4">
                <div class="w-full h-40 bg-gray-100 rounded-xl mb-4 overflow-hidden">
                    <img src="https://via.placeholder.com/300x200?text=ê´‘ê³ 1" alt="ê´‘ê³ 1"
                        class="w-full h-full object-cover">
                </div>
                <h4 class="font-extrabold text-lg text-gray-800 mb-2 text-center">ê´‘ê³  1</h4>
                <p class="text-gray-500 text-sm text-center mb-4">ì¹´í…Œê³ ë¦¬</p>
                <a href="#"
                    class="btn-3d bg-gradient-to-r from-yellow-400 to-pink-400 text-white font-semibold px-4 py-2 rounded-full shadow hover:opacity-90 transition  flex justify-center items-center text-center">
                    ë”ë³´ê¸°
                </a>
            </div>

            <!-- ê´‘ê³  ì¹´ë“œ 2 -->
            <div class="neo-glass flex flex-col overflow-hidden p-4">
                <div class="w-full h-40 bg-gray-100 rounded-xl mb-4 overflow-hidden">
                    <img src="https://via.placeholder.com/300x200?text=ê´‘ê³ 2" alt="ê´‘ê³ 2"
                        class="w-full h-full object-cover">
                </div>
                <h4 class="font-extrabold text-lg text-gray-800 mb-2 text-center">ê´‘ê³  2</h4>
                <p class="text-gray-500 text-sm text-center mb-4">ì¹´í…Œê³ ë¦¬</p>
                <a href="#"
                    class="btn-3d bg-gradient-to-r from-yellow-400 to-pink-400 text-white font-semibold px-4 py-2 rounded-full shadow hover:opacity-90 transition  flex justify-center items-center text-center">
                    ë”ë³´ê¸°
                </a>
            </div>

            <!-- ê´‘ê³  ì¹´ë“œ 3 -->
            <div class="neo-glass flex flex-col overflow-hidden p-4">
                <div class="w-full h-40 bg-gray-100 rounded-xl mb-4 overflow-hidden">
                    <img src="https://via.placeholder.com/300x200?text=ê´‘ê³ 3" alt="ê´‘ê³ 3"
                        class="w-full h-full object-cover">
                </div>
                <h4 class="font-extrabold text-lg text-gray-800 mb-2 text-center">ê´‘ê³  3</h4>
                <p class="text-gray-500 text-sm text-center mb-4">ì¹´í…Œê³ ë¦¬</p>
                <a href="#"
                    class="btn-3d bg-gradient-to-r from-yellow-400 to-pink-400 text-white font-semibold px-4 py-2 rounded-full shadow hover:opacity-90 transition  flex justify-center items-center text-center">
                    ë”ë³´ê¸°
                </a>
            </div>

            <!-- ê´‘ê³  ì¹´ë“œ 4 -->
            <div class="neo-glass flex flex-col overflow-hidden p-4">
                <div class="w-full h-40 bg-gray-100 rounded-xl mb-4 overflow-hidden">
                    <img src="https://via.placeholder.com/300x200?text=ê´‘ê³ 4" alt="ê´‘ê³ 4"
                        class="w-full h-full object-cover">
                </div>
                <h4 class="font-extrabold text-lg text-gray-800 mb-2 text-center">ê´‘ê³  4</h4>
                <p class="text-gray-500 text-sm text-center mb-4">ì¹´í…Œê³ ë¦¬</p>
                <a href="#"
                    class="btn-3d bg-gradient-to-r from-yellow-400 to-pink-400 text-white font-semibold px-4 py-2 rounded-full shadow hover:opacity-90 transition  flex justify-center items-center text-center">
                    ë”ë³´ê¸°
                </a>
            </div>

            <!-- ê´‘ê³  ì¹´ë“œ 5 -->
            <div class="neo-glass flex flex-col overflow-hidden p-4">
                <div class="w-full h-40 bg-gray-100 rounded-xl mb-4 overflow-hidden">
                    <img src="https://via.placeholder.com/300x200?text=ê´‘ê³ 5" alt="ê´‘ê³ 5"
                        class="w-full h-full object-cover">
                </div>
                <h4 class="font-extrabold text-lg text-gray-800 mb-2 text-center">ê´‘ê³  5</h4>
                <p class="text-gray-500 text-sm text-center mb-4">ì¹´í…Œê³ ë¦¬</p>
                <a href="#"
                    class="btn-3d bg-gradient-to-r from-yellow-400 to-pink-400 text-white font-semibold px-4 py-2 rounded-full shadow hover:opacity-90 transition  flex justify-center items-center text-center">
                    ë”ë³´ê¸°
                </a>
            </div>

            <!-- ê´‘ê³  ì¹´ë“œ 6 -->
            <div class="neo-glass flex flex-col overflow-hidden p-4">
                <div class="w-full h-40 bg-gray-100 rounded-xl mb-4 overflow-hidden">
                    <img src="https://via.placeholder.com/300x200?text=ê´‘ê³ 6" alt="ê´‘ê³ 6"
                        class="w-full h-full object-cover">
                </div>
                <h4 class="font-extrabold text-lg text-gray-800 mb-2 text-center">ê´‘ê³  6</h4>
                <p class="text-gray-500 text-sm text-center mb-4">ì¹´í…Œê³ ë¦¬</p>
                <a href="#"
                    class="btn-3d bg-gradient-to-r from-yellow-400 to-pink-400 text-white font-semibold px-4 py-2 rounded-full shadow hover:opacity-90 transition  flex justify-center items-center text-center">
                    ë”ë³´ê¸°
                </a>
            </div>

            <!-- ê´‘ê³  ì¹´ë“œ 7 -->
            <div class="neo-glass flex flex-col overflow-hidden p-4">
                <div class="w-full h-40 bg-gray-100 rounded-xl mb-4 overflow-hidden">
                    <img src="https://via.placeholder.com/300x200?text=ê´‘ê³ 7" alt="ê´‘ê³ 7"
                        class="w-full h-full object-cover">
                </div>
                <h4 class="font-extrabold text-lg text-gray-800 mb-2 text-center">ê´‘ê³  7</h4>
                <p class="text-gray-500 text-sm text-center mb-4">ì¹´í…Œê³ ë¦¬</p>
                <a href="#"
                    class="btn-3d bg-gradient-to-r from-yellow-400 to-pink-400 text-white font-semibold px-4 py-2 rounded-full shadow hover:opacity-90 transition  flex justify-center items-center text-center">
                    ë”ë³´ê¸°
                </a>
            </div>

            <!-- ê´‘ê³  ì¹´ë“œ 8 -->
            <div class="neo-glass flex flex-col overflow-hidden p-4">
                <div class="w-full h-40 bg-gray-100 rounded-xl mb-4 overflow-hidden">
                    <img src="https://via.placeholder.com/300x200?text=ê´‘ê³ 8" alt="ê´‘ê³ 8"
                        class="w-full h-full object-cover">
                </div>
                <h4 class="font-extrabold text-lg text-gray-800 mb-2 text-center">ê´‘ê³  8</h4>
                <p class="text-gray-500 text-sm text-center mb-4">ì¹´í…Œê³ ë¦¬</p>
                <a href="#"
                    class="btn-3d bg-gradient-to-r from-yellow-400 to-pink-400 text-white font-semibold px-4 py-2 rounded-full shadow hover:opacity-90 transition  flex justify-center items-center text-center">
                    ë”ë³´ê¸°
                </a>
            </div>

        </div>
    </section>

</body>

</html>

<script>
    // ì œì²  ìŒì‹ ë¶ˆëŸ¬ì˜¤ê¸° (í° ê´‘ê³ ë°•ìŠ¤)
    async function loadSeasonFood() {
        try {
            const res = await fetch("/api/season-foods");
            const data = await res.json();
            const el = document.getElementById("season-food");
            el.innerHTML = `
              <div>
                <img src="${data.image_url}" alt="${data.name}" class="w-full h-64 object-cover md:h-full">
              </div>
              <div class="p-6 flex flex-col justify-center text-center md:text-left">
                <h3 class="text-2xl font-bold mb-3">${data.name}</h3>
                <p class="text-gray-600 mb-4">${data.description}</p>
              </div>
            `;
        } catch (e) {
            console.error(e);
        }
    }

    // ìƒí™©ë³„ ë¬¸êµ¬ ë§¤í•‘
    const moodTexts = {
        hangover: "ì†ì„ ì‹œì›í•˜ê²Œ í’€ì–´ë“œë¦¬ëŠ” ìµœê³ ì˜ í•´ì¥ ìŒì‹",
        date: "ì‚¬ë‘í•˜ëŠ” ì—°ì¸ê³¼ í•¨ê»˜ ì¦ê¸°ëŠ” ë¶„ìœ„ê¸° ìˆëŠ” ìŒì‹",
        family: "ë”°ëœ»í•œ ë§ˆìŒì´ ëª¨ì´ëŠ” ê°€ì¡± ë‹¨ìœ„ ì¶”ì²œ ìŒì‹",
        company: "ë™ë£Œë“¤ê³¼ í•¨ê»˜ ë‚˜ëˆ„ê¸° ì¢‹ì€ í‘¸ì§í•œ ìŒì‹",
        rain: "ë¹—ì†Œë¦¬ì™€ í•¨ê»˜ ì¦ê¸°ë©´ ë” ë§›ìˆëŠ” ìŒì‹",
        workout: "ì—ë„ˆì§€ë¥¼ ë¹ ë¥´ê²Œ ì±„ì›Œì£¼ëŠ” ë“ ë“ í•œ ìŒì‹",
        sad: "ë§ˆìŒì„ ë‹¬ë˜ì£¼ëŠ” ìœ„ë¡œì˜ í•œ ë¼",
        stress: "ë‹µë‹µí•œ ê¸°ë¶„ì„ í’€ì–´ì£¼ëŠ” ì‹œì›í•œ ìŒì‹",
        party: "ì¦ê±°ìš´ ìˆœê°„ì„ ë”ìš± íŠ¹ë³„í•˜ê²Œ ë§Œë“œëŠ” íŒŒí‹° ìŒì‹",
        tired: "ì§€ì¹œ ëª¸ì— í™œë ¥ì„ ì£¼ëŠ” ë“ ë“ í•œ ë³´ì–‘ ìŒì‹",
        happy: "í–‰ë³µí•œ ìˆœê°„ì„ ë” ì¦ê²ê²Œ ë§Œë“¤ì–´ì£¼ëŠ” íŠ¹ë³„í•œ ìŒì‹",
        alone: "í˜¼ìì—¬ë„ ë“ ë“ í•˜ê³  ë§Œì¡±ìŠ¤ëŸ¬ìš´ í•œ ë¼"
    };

    // ê¸°ë¶„ë³„ ìŒì‹ ì¶”ì²œ (í° ê´‘ê³ ë°•ìŠ¤)
    async function loadMoodFood(mood) {
        const moodBox = document.getElementById("mood-food");
        const text = moodTexts[mood] || "ì¶”ì²œ ìŒì‹ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ì…ë‹ˆë‹¤";

        // ë²„íŠ¼ í´ë¦­ ì‹œ ìš°ì„  ë¬¸êµ¬ ë°˜ì˜
        moodBox.innerHTML = `
      <div>
        <img src="https://via.placeholder.com/600x400?text=${mood}" 
             alt="${mood}" 
             class="w-full h-64 object-cover md:h-full">
      </div>
      <div class="p-6 flex flex-col justify-center text-center md:text-left">
        <h3 class="text-2xl font-bold mb-3 break-keep">${text}</h3>
        <a href="mood-detail.html?mood=${mood}" 
           class="inline-block bg-blue-600 text-white text-sm px-4 py-2 rounded 
                  hover:bg-blue-700 transition self-center md:self-start">
           ìì„¸íˆ ë³´ê¸°
        </a>
      </div>
    `;

        // ê·¸ ë‹¤ìŒ ì„œë²„ ë°ì´í„° ìˆìœ¼ë©´ ì—…ë°ì´íŠ¸
        try {
            const res = await fetch(`/api/mood-foods?mood=${mood}`);
            const data = await res.json();

            if (data && (data.name || data.description)) {
                moodBox.innerHTML = `
              <div>
                <img src="${data.image_url || 'https://via.placeholder.com/600x400?text=' + mood}" 
                     alt="${data.name || text}" 
                     class="w-full h-64 object-cover md:h-full">
              </div>
              <div class="p-6 flex flex-col justify-center text-center md:text-left">
                <h3 class="text-2xl font-bold mb-3 break-keep">${data.name || text}</h3>
                <p class="text-gray-600 mb-4 break-keep">${data.description || text}</p>
                <a href="mood-detail.html?mood=${mood}" 
                   class="inline-block bg-blue-600 text-white text-sm px-4 py-2 rounded 
                          hover:bg-blue-700 transition self-center md:self-start">
                   ìì„¸íˆ ë³´ê¸°
                </a>
              </div>
            `;
            }
        } catch (e) {
            console.error("[loadMoodFood] ì„œë²„ ìš”ì²­ ì‹¤íŒ¨:", e);
        }

        // ê´€ë ¨ ê´‘ê³ ë„ í•¨ê»˜ ë¶ˆëŸ¬ì˜¤ê¸°
        loadAds([mood]);
    }

    // ê´‘ê³  ë¶ˆëŸ¬ì˜¤ê¸° (ì‘ì€ ë°•ìŠ¤, ìµœëŒ€ 8ê°œ)
    async function loadAds(tags = []) {
        try {
            const query = tags.length ? `?tags=${tags.join(",")}` : "";
            const res = await fetch(`/api/ads${query}`);
            const data = await res.json();
            const grid = document.getElementById("ad-grid");

            if (data.length === 0) {
                grid.innerHTML = `<p class="col-span-4 text-center text-gray-500">í˜„ì¬ ë…¸ì¶œí•  ê´‘ê³ ê°€ ì—†ìŠµë‹ˆë‹¤.</p>`;
                return;
            }

            grid.innerHTML = data.slice(0, 8).map(ad => `
              <a href="${ad.link || '#'}" target="_blank"
                 class="bg-white rounded-lg shadow-md p-4 flex flex-col items-center hover:shadow-lg transition">
                <img src="${ad.image_url}" alt="${ad.title}" class="w-full h-32 object-cover rounded mb-3">
                <h4 class="font-bold text-gray-800">${ad.title}</h4>
              </a>
            `).join("");
        } catch (e) {
            console.error(e);
        }
    }

    // ì´ˆê¸° ì‹¤í–‰
    document.addEventListener("DOMContentLoaded", () => {
        loadSeasonFood();
        loadAds();

        // ë²„íŠ¼ ì´ë²¤íŠ¸
        document.querySelectorAll(".mood-btn").forEach(btn => {
            btn.addEventListener("click", () => {
                loadMoodFood(btn.dataset.mood);
            });
        });
    });
</script>

</body>

</html>