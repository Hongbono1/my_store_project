<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>쇼핑몰 홍보 등록 | MALL HANKOOK</title>
    <script src="https://cdn.tailwindcss.com"></script>

    <style>
        .neo-card {
            background: rgba(255, 255, 255, 0.7);
            border-radius: 1rem;
            backdrop-filter: blur(12px);
            box-shadow:
                8px 8px 20px rgba(0, 0, 0, 0.15),
                -8px -8px 20px rgba(255, 255, 255, 0.8);
        }
    </style>
</head>

<body class="bg-gray-100">

    <div id="header"></div>

    <div class="max-w-3xl mx-auto mt-20 mb-20 p-8 neo-card">
        <h1 class="text-3xl font-bold mb-8 text-center">쇼핑몰 홍보 등록</h1>

        <form id="shopForm" enctype="multipart/form-data" class="flex flex-col gap-6">

            <!-- 쇼핑몰 이름 -->
            <div>
                <label class="font-semibold">쇼핑몰 이름 *</label>
                <input type="text" name="shop_name" required
                    class="w-full mt-1 p-3 border rounded-lg" placeholder="예) 홍보샵 / 스타일하우스">
            </div>

            <!-- 한 줄 소개 -->
            <div>
                <label class="font-semibold">한 줄 소개 *</label>
                <input type="text" name="short_desc" required
                    class="w-full mt-1 p-3 border rounded-lg" placeholder="예) 감성 의류 전문 쇼핑몰">
            </div>

            <!-- 상세 설명 -->
            <div>
                <label class="font-semibold">상세 설명</label>
                <textarea name="full_desc" rows="5"
                    class="w-full mt-1 p-3 border rounded-lg" placeholder="쇼핑몰의 특징과 장점을 소개하세요."></textarea>
            </div>

            <!-- 카테고리 -->
            <div>
                <label class="font-semibold">카테고리 *</label>
                <select name="category" class="w-full mt-1 p-3 border rounded-lg">
                    <option>의류</option>
                    <option>주방/생활</option>
                    <option>디지털</option>
                    <option>뷰티/미용</option>
                    <option>식품</option>
                    <option>펫용품</option>
                    <option>기타</option>
                </select>
            </div>

            <!-- 쇼핑몰 URL -->
            <div>
                <label class="font-semibold">쇼핑몰 URL *</label>
                <input type="text" name="website" required
                    class="w-full mt-1 p-3 border rounded-lg" placeholder="https://example.com">
            </div>

            <!-- SNS -->
            <div class="grid grid-cols-1 sm:grid-cols-3 gap-4">
                <div>
                    <label class="font-semibold">Instagram</label>
                    <input type="text" name="sns_instagram" class="w-full mt-1 p-3 border rounded-lg"
                        placeholder="인스타 링크">
                </div>
                <div>
                    <label class="font-semibold">YouTube</label>
                    <input type="text" name="sns_youtube" class="w-full mt-1 p-3 border rounded-lg"
                        placeholder="유튜브 링크">
                </div>
                <div>
                    <label class="font-semibold">Blog</label>
                    <input type="text" name="sns_blog" class="w-full mt-1 p-3 border rounded-lg"
                        placeholder="블로그 링크">
                </div>
            </div>

            <!-- 기타 SNS -->
            <div>
                <label class="font-semibold">기타 SNS / 기타 링크</label>
                <input type="text" name="sns_other" 
                    class="w-full mt-1 p-3 border rounded-lg"
                    placeholder="예) 틱톡 / 카카오채널 / X(트위터) / 네이버포스트 등">
            </div>

            <!-- 대표 이미지 -->
            <div>
                <label class="font-semibold">대표 이미지 *</label>
                <input type="file" name="image_main" accept="image/*" required class="w-full mt-2">
            </div>

            <!-- 배너 이미지 -->
            <div>
                <label class="font-semibold">배너 이미지 (최대 3장)</label>
                <input type="file" name="image_banner" accept="image/*" multiple class="w-full mt-2">
            </div>

            <!-- BEST 상품 이미지 -->
            <div>
                <label class="font-semibold">BEST 상품 이미지 (최대 4장)</label>
                <input type="file" name="image_best" accept="image/*" multiple class="w-full mt-2">
            </div>

            <button type="submit"
                class="w-full mt-10 bg-indigo-600 text-white p-3 rounded-xl text-lg font-bold hover:bg-indigo-700">
                등록하기
            </button>

        </form>
    </div>

    <div id="footer"></div>

    <script>
        document.addEventListener("DOMContentLoaded", () => {
            fetch("/components/header.html")
                .then(res => res.text())
                .then(html => document.getElementById("header").innerHTML = html);

            fetch("/components/footer.html")
                .then(res => res.text())
                .then(html => document.getElementById("footer").innerHTML = html);

            const form = document.getElementById("shopForm");
            form.addEventListener("submit", async (e) => {
                e.preventDefault();

                const formData = new FormData(form);

                const res = await fetch("/shopping/register", {
                    method: "POST",
                    body: formData
                });

                const data = await res.json();
                if (data.success) {
                    alert("등록 완료되었습니다!");
                    window.location.href = `/shoppingdetail.html?id=${data.id}`;
                } else {
                    alert("오류 발생: " + data.message);
                }
            });
        });
    </script>

</body>

</html>
