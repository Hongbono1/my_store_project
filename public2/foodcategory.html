<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>카테고리 페이지</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    /* 네오모피즘 카드 */
    .neo-card {
      background: rgba(255, 255, 255, 0.8);
      border-radius: 1.2rem;
      box-shadow:
        6px 6px 16px #d9e0ec,
        -6px -6px 16px #ffffff;
      backdrop-filter: blur(16px) saturate(120%);
      transition: all .25s ease;
    }

    .neo-card:hover {
      transform: translateY(-4px);
      box-shadow:
        4px 4px 12px #cfd8e6,
        -4px -4px 12px #ffffff,
        0 8px 24px rgba(80, 130, 255, 0.15);
    }

    /* 3D 버튼 */
    .btn-3d {
      background: linear-gradient(90deg, #6dd5fa, #2980b9);
      border-radius: 1.3rem;
      padding: .5rem 1.5rem;
      font-weight: bold;
      color: white;
      box-shadow: 0 4px 0 #2393b3, 0 8px 16px rgba(0, 64, 128, 0.14);
      transition: all .15s;
    }

    .btn-3d:active {
      transform: translateY(2px);
      box-shadow: 0 2px 0 #2393b3, 0 4px 10px rgba(0, 64, 128, 0.16);
    }

    /* 가로 스크롤 영역 */
    .scroll-x {
      display: flex;
      gap: 1rem;
      overflow-x: auto;
      scrollbar-width: thin;
    }

    .scroll-x::-webkit-scrollbar {
      height: 6px;
    }

    .scroll-x::-webkit-scrollbar-thumb {
      background: #a3bffa;
      border-radius: 9999px;
    }
  </style>
</head>


<body class="bg-gradient-to-br from-blue-50 via-white to-blue-100 min-h-screen text-gray-800">
  <!-- ✅ header.html 불러오기 -->
  <div id="header-placeholder"></div>

  <header class="py-6 text-center">
    <h1 class="text-3xl font-bold text-blue-700">카테고리 페이지</h1>
    <p class="text-gray-600 mt-1">원하는 카테고리를 선택하세요</p>
  </header>

  <!-- ✅ 좌측 사이드 바 -->
  <div class="max-w-7xl mx-auto grid grid-cols-12 gap-6 py-6 px-4">

    <aside class="col-span-3 neo-card p-5">
      <h2 class="font-bold text-lg mb-4 text-center">FOOD CATEGORY</h2>
      <ul class="space-y-2 text-base">

        <!-- ✅ 한식 (서브카테고리 있음) -->
        <li>
          <button class="w-full text-left px-3 py-2 neo-card flex justify-between items-center"
            onclick="toggleSub(this)">
            한식 <span>▼</span>
          </button>
          <ul class="ml-4 mt-1 space-y-1 hidden">
            <!-- 전부 한식 리스트로 보내되, sub 파라미터로 구분 -->
            <li>
              <a href="/subcategory.html?type=food&category=한식&sub=밥" class="block px-3 py-2 neo-card">
                밥 (비빔밥/덮밥/백반)
              </a>
            </li>
            <li>
              <a href="/subcategory.html?type=food&category=한식&sub=찌개탕" class="block px-3 py-2 neo-card">
                찌개/탕
              </a>
            </li>
            <li>
              <a href="/subcategory.html?type=food&category=한식&sub=고기구이" class="block px-3 py-2 neo-card">
                고기/구이
              </a>
            </li>
            <li>
              <a href="/subcategory.html?type=food&category=한식&sub=생선" class="block px-3 py-2 neo-card">
                생선
              </a>
            </li>
            <li>
              <a href="/subcategory.html?type=food&category=한식&sub=족발보쌈" class="block px-3 py-2 neo-card">
                족발/보쌈
              </a>
            </li>
            <li>
              <a href="/subcategory.html?type=food&category=한식&sub=국밥" class="block px-3 py-2 neo-card">
                국밥
              </a>
            </li>
            <li>
              <a href="/subcategory.html?type=food&category=한식&sub=반찬" class="block px-3 py-2 neo-card">
                반찬
              </a>
            </li>
            <li>
              <a href="/subcategory.html?type=food&category=한식&sub=기타한식" class="block px-3 py-2 neo-card">
                기타
              </a>
            </li>
          </ul>
        </li>

        <!-- ✅ 중식 -->
        <li><a href="/subcategory.html?type=food&category=중식" class="block px-3 py-2 neo-card">중식</a></li>

        <!-- ✅ 양식 -->
        <li><a href="/subcategory.html?type=food&category=양식" class="block px-3 py-2 neo-card">양식</a></li>

        <!-- ✅ 분식 -->
        <li><a href="/subcategory.html?type=food&category=분식" class="block px-3 py-2 neo-card">분식</a></li>

        <!-- ✅ 치킨 -->
        <li><a href="/subcategory.html?type=food&category=치킨" class="block px-3 py-2 neo-card">치킨</a></li>

        <!-- ✅ 카페 -->
        <li><a href="/subcategory.html?type=food&category=카페" class="block px-3 py-2 neo-card">카페</a></li>

        <!-- ✅ 패스트푸드 -->
        <li><a href="/subcategory.html?type=food&category=패스트푸드" class="block px-3 py-2 neo-card">패스트푸드</a></li>

        <!-- ✅ 기타 -->
        <li><a href="/subcategory.html?type=food&category=기타" class="block px-3 py-2 neo-card">기타</a></li>

      </ul>

      <!-- 광고박스 1 -->
      <div class="neo-card mt-6 p-0 overflow-hidden relative" data-slot data-position="food_sidebar_ad">
        <img src="/uploads/no-image.png" alt="광고 이미지" class="slot-img w-full h-60 object-cover">
        <div class="slot-info absolute bottom-0 left-0 right-0 bg-white/90 backdrop-blur-sm px-4 py-3 text-center">
          <div class="slot-name font-bold text-lg text-gray-800"></div>
          <div class="slot-category text-sm text-gray-600"></div>
        </div>
      </div>

      <!-- 광고박스 2 -->
      <div class="neo-card mt-6 p-0 overflow-hidden relative" data-slot data-position="food_sidebar_ad_2">
        <img src="/uploads/no-image.png" alt="광고 이미지" class="slot-img w-full h-60 object-cover">
        <div class="slot-info absolute bottom-0 left-0 right-0 bg-white/90 backdrop-blur-sm px-4 py-3 text-center">
          <div class="slot-name font-bold text-lg text-gray-800"></div>
          <div class="slot-category text-sm text-gray-600"></div>
        </div>
      </div>

      <!-- 광고박스 3 -->
      <div class="neo-card mt-6 p-0 overflow-hidden relative" data-slot data-position="food_sidebar_ad_3">
        <img src="/uploads/no-image.png" alt="광고 이미지" class="slot-img w-full h-60 object-cover">
        <div class="slot-info absolute bottom-0 left-0 right-0 bg-white/90 backdrop-blur-sm px-4 py-3 text-center">
          <div class="slot-name font-bold text-lg text-gray-800"></div>
          <div class="slot-category text-sm text-gray-600"></div>
        </div>
      </div>
    </aside>


    <!-- 중앙 메인 -->
    <main class="col-span-9 space-y-8">

      <!-- 메인 배너 -->
      <section class="relative h-60 neo-card flex items-center justify-center overflow-hidden" data-slot
        data-position="food_main_banner">
        <img src="/uploads/no-image.png" alt="Premium 카테고리 배너"
          class="slot-img absolute inset-0 w-full h-full object-cover">
        <div class="slot-info relative z-10 text-center bg-white/70 backdrop-blur-sm rounded-xl px-6 py-4">
          <h1 class="slot-name text-3xl font-bold mb-2">Premium 카테고리</h1>
          <p class="slot-category text-gray-600 text-sm">카테고리 설명 문구를 여기에 넣습니다.</p>
        </div>
      </section>

      <!-- 파워 광고 -->
      <section class="mt-10">
        <h2 class="font-bold text-2xl text-purple-600 text-center mb-4">파워 광고</h2>

        <!-- 뷰포트: 보이는 영역 -->
        <div id="powerViewport" class="relative overflow-hidden">
          <div id="powerAdTrack" class="flex transition-transform duration-[1100ms] ease-in-out will-change-transform">
            <!-- 그룹 1 (1~3) -->
            <div class="power-group flex basis-full shrink-0">
              <!-- POWER 1 -->
              <div class="w-1/3 px-2">
                <div id="slot_food_power_1"
                  class="slot neo-card p-0 overflow-hidden relative rounded-2xl border-4 border-yellow-200 h-60 md:h-64"
                  data-slot data-page="foodcategory" data-position="food_power_1" data-label="파워 광고 1" data-size="파워 1">
                  <img class="slot-img w-full h-full md:h-64 object-cover" alt="파워1">
                  <div class="slot-text-layer">
                    <div class="slot-text-body"></div>
                    <div class="slot-hint">텍스트 전용</div>
                  </div>
                  <div class="slot-empty absolute inset-0 flex items-center justify-center whitespace-nowrap z-20">클릭해서 설정</div>
                  <span class="slot-badge">Banner</span>
                  <span class="slot-store-badge"></span>

                  <div
                    class="slot-info absolute left-3 right-3 bottom-3 bg-white/70 backdrop-blur-md rounded-xl shadow px-4 py-2 text-center hidden">
                    <div class="slot-title text-lg"></div>
                    <div class="slot-sub text-sm text-slate-600"></div>
                  </div>
                </div>
              </div>

              <!-- POWER 2 -->
              <div class="w-1/3 px-2">
                <div id="slot_food_power_2"
                  class="slot neo-card p-0 overflow-hidden relative rounded-2xl border-4 border-yellow-200 h-60 md:h-64"
                  data-slot data-page="foodcategory" data-position="food_power_2" data-label="파워 광고 2" data-size="파워 2">
                  <img class="slot-img w-full md:h-64 object-cover" alt="파워2">
                  <div class="slot-text-layer">
                    <div class="slot-text-body"></div>
                    <div class="slot-hint">텍스트 전용</div>
                  </div>
                  <div class="slot-empty absolute inset-0 flex items-center justify-center whitespace-nowrap z-20">클릭해서
                    설정</div>
                  <span class="slot-badge">Banner</span>
                  <span class="slot-store-badge"></span>

                  <div
                    class="slot-info absolute left-3 right-3 bottom-3 bg-white/70 backdrop-blur-md rounded-xl shadow px-4 py-2 text-center hidden">
                    <div class="slot-title text-lg"></div>
                    <div class="slot-sub text-sm text-slate-600"></div>
                  </div>
                </div>
              </div>

              <!-- POWER 3 -->
              <div class="w-1/3 px-2">
                <div id="slot_food_power_3"
                  class="slot neo-card p-0 overflow-hidden relative rounded-2xl border-4 border-yellow-200 h-60 md:h-64"
                  data-slot data-page="foodcategory" data-position="food_power_3" data-label="파워 광고 3" data-size="파워 3">
                  <img class="slot-img w-full h-full md:h-64 object-cover" alt="파워3">
                  <div class="slot-text-layer">
                    <div class="slot-text-body"></div>
                    <div class="slot-hint">텍스트 전용</div>
                  </div>
                  <div class="slot-empty absolute inset-0 flex items-center justify-center whitespace-nowrap z-20">클릭해서
                    설정</div>
                  <span class="slot-badge">Banner</span>
                  <span class="slot-store-badge"></span>

                  <div
                    class="slot-info absolute left-3 right-3 bottom-3 bg-white/70 backdrop-blur-md rounded-xl shadow px-4 py-2 text-center hidden">
                    <div class="slot-title text-lg"></div>
                    <div class="slot-sub text-sm text-slate-600"></div>
                  </div>
                </div>
              </div>
            </div>

            <!-- 그룹 2 (4~6) -->
            <div class="power-group flex basis-full shrink-0">
              <!-- POWER 4 -->
              <div class="w-1/3 px-2">
                <div id="slot_food_power_4"
                  class="slot neo-card p-0 overflow-hidden relative rounded-2xl border-4 border-yellow-200 h-60 md:h-64"
                  data-slot data-page="foodcategory" data-position="food_power_4" data-label="파워 광고 4" data-size="파워 4">
                  <img class="slot-img w-full h-full md:h-64 object-cover" alt="파워4">
                  <div class="slot-text-layer">
                    <div class="slot-text-body"></div>
                    <div class="slot-hint">텍스트 전용</div>
                  </div>
                  <div class="slot-empty absolute inset-0 flex items-center justify-center whitespace-nowrap z-20">클릭해서
                    설정</div>
                  <span class="slot-badge">Banner</span>
                  <span class="slot-store-badge"></span>

                  <div
                    class="slot-info absolute left-3 right-3 bottom-3 bg-white/70 backdrop-blur-md rounded-xl shadow px-4 py-2 text-center hidden">
                    <div class="slot-title text-lg"></div>
                    <div class="slot-sub text-sm text-slate-600"></div>
                  </div>
                </div>
              </div>

              <!-- POWER 5 -->
              <div class="w-1/3 px-2">
                <div id="slot_food_power_5"
                  class="slot neo-card p-0 overflow-hidden relative rounded-2xl border-4 border-yellow-200 h-60 md:h-64"
                  data-slot data-page="foodcategory" data-position="food_power_5" data-label="파워 광고 5" data-size="파워 5">
                  <img class="slot-img w-full h-full md:h-64 object-cover" alt="파워5">
                  <div class="slot-text-layer">
                    <div class="slot-text-body"></div>
                    <div class="slot-hint">텍스트 전용</div>
                  </div>
                  <div class="slot-empty absolute inset-0 flex items-center justify-center whitespace-nowrap z-20">클릭해서
                    설정</div>
                  <span class="slot-badge">Banner</span>
                  <span class="slot-store-badge"></span>

                  <div
                    class="slot-info absolute left-3 right-3 bottom-3 bg-white/70 backdrop-blur-md rounded-xl shadow px-4 py-2 text-center hidden">
                    <div class="slot-title text-lg"></div>
                    <div class="slot-sub text-sm text-slate-600"></div>
                  </div>
                </div>
              </div>

              <!-- POWER 6 -->
              <div class="w-1/3 px-2">
                <div id="slot_food_power_6"
                  class="slot neo-card p-0 overflow-hidden relative rounded-2xl border-4 border-yellow-200 h-60 md:h-64"
                  data-slot data-page="foodcategory" data-position="food_power_6" data-label="파워 광고 6" data-size="파워 6">
                  <img class="slot-img w-full h-full md:h-64 object-cover" alt="파워6">
                  <div class="slot-text-layer">
                    <div class="slot-text-body"></div>
                    <div class="slot-hint">텍스트 전용</div>
                  </div>
                  <div class="slot-empty absolute inset-0 flex items-center justify-center whitespace-nowrap z-20">클릭해서
                    설정</div>
                  <span class="slot-badge">Banner</span>
                  <span class="slot-store-badge"></span>

                  <div
                    class="slot-info absolute left-3 right-3 bottom-3 bg-white/70 backdrop-blur-md rounded-xl shadow px-4 py-2 text-center hidden">
                    <div class="slot-title text-lg"></div>
                    <div class="slot-sub text-sm text-slate-600"></div>
                  </div>
                </div>
              </div>
            </div>

            <!-- 그룹 3 (7~9) -->
            <div class="power-group flex basis-full shrink-0">
              <!-- POWER 7 -->
              <div class="w-1/3 px-2">
                <div id="slot_food_power_7"
                  class="slot neo-card p-0 overflow-hidden relative rounded-2xl border-4 border-yellow-200 h-60 md:h-64"
                  data-slot data-page="foodcategory" data-position="food_power_7" data-label="파워 광고 7" data-size="파워 7">
                  <img class="slot-img w-full h-full md:h-64 object-cover" alt="파워7">
                  <div class="slot-text-layer">
                    <div class="slot-text-body"></div>
                    <div class="slot-hint">텍스트 전용</div>
                  </div>
                  <div class="slot-empty absolute inset-0 flex items-center justify-center whitespace-nowrap z-20">클릭해서
                    설정</div>
                  <span class="slot-badge">Banner</span>
                  <span class="slot-store-badge"></span>

                  <div
                    class="slot-info absolute left-3 right-3 bottom-3 bg-white/70 backdrop-blur-md rounded-xl shadow px-4 py-2 text-center hidden">
                    <div class="slot-title text-lg"></div>
                    <div class="slot-sub text-sm text-slate-600"></div>
                  </div>
                </div>
              </div>

              <!-- POWER 8 -->
              <div class="w-1/3 px-2">
                <div id="slot_food_power_8"
                  class="slot neo-card p-0 overflow-hidden relative rounded-2xl border-4 border-yellow-200 h-60 md:h-64"
                  data-slot data-page="foodcategory" data-position="food_power_8" data-label="파워 광고 8" data-size="파워 8">
                  <img class="slot-img w-full h-full md:h-64 object-cover" alt="파워8">
                  <div class="slot-text-layer">
                    <div class="slot-text-body"></div>
                    <div class="slot-hint">텍스트 전용</div>
                  </div>
                  <div class="slot-empty absolute inset-0 flex items-center justify-center whitespace-nowrap z-20">클릭해서
                    설정</div>
                  <span class="slot-badge">Banner</span>
                  <span class="slot-store-badge"></span>

                  <div
                    class="slot-info absolute left-3 right-3 bottom-3 bg-white/70 backdrop-blur-md rounded-xl shadow px-4 py-2 text-center hidden">
                    <div class="slot-title text-lg"></div>
                    <div class="slot-sub text-sm text-slate-600"></div>
                  </div>
                </div>
              </div>

              <!-- POWER 9 -->
              <div class="w-1/3 px-2">
                <div id="slot_food_power_9"
                  class="slot neo-card p-0 overflow-hidden relative rounded-2xl border-4 border-yellow-200 h-60 md:h-64"
                  data-slot data-page="foodcategory" data-position="food_power_9" data-label="파워 광고 9" data-size="파워 9">
                  <img class="slot-img w-full h-full md:h-64 object-cover" alt="파워9">
                  <div class="slot-text-layer">
                    <div class="slot-text-body"></div>
                    <div class="slot-hint">텍스트 전용</div>
                  </div>
                  <div class="slot-empty absolute inset-0 flex items-center justify-center whitespace-nowrap z-20">클릭해서
                    설정</div>
                  <span class="slot-badge">Banner</span>
                  <span class="slot-store-badge"></span>

                  <div
                    class="slot-info absolute left-3 right-3 bottom-3 bg-white/70 backdrop-blur-md rounded-xl shadow px-4 py-2 text-center hidden">
                    <div class="slot-title text-lg"></div>
                    <div class="slot-sub text-sm text-slate-600"></div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- 좌/우 버튼 -->
          <button id="prevBtn"
            class="absolute left-0 top-1/2 -translate-y-1/2 bg-white shadow rounded-full px-3 py-2">‹</button>
          <button id="nextBtn"
            class="absolute right-0 top-1/2 -translate-y-1/2 bg-white shadow rounded-full px-3 py-2">›</button>
        </div>
      </section>

      <!-- 최고의 가게 -->
      <section class="grid grid-cols-12 gap-6 items-stretch">
        <!-- 좌측: MVP + HIGHLIGHT -->
        <div class="col-span-3 h-full">
          <div class="neo-card p-4 w-full h-full flex flex-col gap-4">

            <!-- MVP -->
            <div class="flex-1 flex flex-col" data-slot data-position="food_mvp">
              <h2 class="font-bold text-2xl text-blue-600 text-center mb-3">MVP</h2>
              <div class="neo-card p-0 overflow-hidden relative rounded-2xl h-full border-2 border-blue-500">
                <img src="/uploads/no-image.png" class="slot-img w-full h-full object-cover" alt="">
                <div class="slot-info absolute left-3 right-3 bottom-3 bg-white/70 backdrop-blur-md 
                    rounded-xl shadow px-4 py-2 text-center hidden">
                  <div class="slot-name font-bold text-lg leading-tight"></div>
                  <div class="slot-category text-sm text-slate-600 hidden"></div>
                </div>
              </div>
            </div>

            <!-- HIGHLIGHT -->
            <div class="flex-1 flex flex-col" data-slot data-position="food_highlight">
              <h2 class="font-bold text-2xl text-yellow-600 text-center mb-3">HIGHLIGHT</h2>
              <div class="neo-card p-0 overflow-hidden relative rounded-2xl h-full border-2 border-yellow-500">
                <img src="/uploads/no-image.png" class="slot-img w-full h-full object-cover" alt="">
                <div class="slot-info absolute left-3 right-3 bottom-3 bg-white/70 backdrop-blur-md 
                    rounded-xl shadow px-4 py-2 text-center hidden">
                  <div class="slot-name font-bold text-lg leading-tight"></div>
                  <div class="slot-category text-sm text-slate-600 hidden"></div>
                </div>
              </div>
            </div>

          </div>
        </div>

        <!-- 우측: 최고의 가게 -->
        <div class="col-span-9 neo-card p-5 h-full">
          <h2 class="font-bold mb-3 text-2xl text-center">최고의 가게</h2>
          <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
            <!-- 카드 반복 -->
            <a href="#" class="block group" data-slot data-position="food_best_1">
              <div class="neo-card p-0 overflow-hidden relative rounded-2xl transition-transform">
                <div class="w-full h-60">
                  <img src="/uploads/no-image.png" alt="상호명" class="slot-img w-full h-full object-cover">
                </div>
                <div
                  class="slot-info absolute left-3 right-3 bottom-3 bg-white/70 backdrop-blur-md rounded-xl shadow px-4 py-3">
                  <div class="slot-name font-bold text-lg leading-tight">상호명 A</div>
                  <div class="slot-category text-sm text-slate-600"></div>
                </div>
              </div>
            </a>

            <!-- 카드 3 -->
            <a href="#" class="block group" data-slot data-position="food_best_2">
              <div class="neo-card p-0 overflow-hidden relative rounded-2xl">
                <div class="w-full h-60">
                  <img src="/uploads/no-image.png" alt="상호명" class="slot-img w-full h-full object-cover">
                </div>
                <div
                  class="slot-info absolute left-3 right-3 bottom-3 bg-white/70 backdrop-blur-md rounded-xl shadow px-4 py-3">
                  <div class="slot-name font-bold text-lg leading-tight">상호명 C</div>
                  <div class="slot-category text-sm text-slate-600">업종: 일식</div>
                </div>
              </div>
            </a>

            <!-- 카드 4 -->
            <a href="#" class="block group" data-slot data-position="food_best_3">
              <div class="neo-card p-0 overflow-hidden relative rounded-2xl">
                <div class="w-full h-60">
                  <img src="/uploads/no-image.png" alt="상호명" class="slot-img w-full h-full object-cover">
                </div>
                <div
                  class="slot-info absolute left-3 right-3 bottom-3 bg-white/70 backdrop-blur-md rounded-xl shadow px-4 py-3">
                  <div class="slot-name font-bold text-lg leading-tight">상호명 D</div>
                  <div class="slot-category text-sm text-slate-600">업종: 중식</div>
                </div>
              </div>
            </a>
            <!-- 카드 5 -->
            <a href="#" class="block group" data-slot data-position="food_best_4">
              <div class="neo-card p-0 overflow-hidden relative rounded-2xl">
                <div class="w-full h-60">
                  <img src="/uploads/no-image.png" alt="상호명" class="slot-img w-full h-full object-cover">
                </div>
                <div
                  class="slot-info absolute left-3 right-3 bottom-3 bg-white/70 backdrop-blur-md rounded-xl shadow px-4 py-3">
                  <div class="slot-name font-bold text-lg leading-tight">상호명 D</div>
                  <div class="slot-category text-sm text-slate-600">업종: 중식</div>
                </div>
              </div>
            </a>

            <!-- 카드 6 -->
            <a href="#" class="block group" data-slot data-position="food_best_5">
              <div class="neo-card p-0 overflow-hidden relative rounded-2xl">
                <div class="w-full h-60">
                  <img src="/uploads/no-image.png" alt="상호명" class="slot-img w-full h-full object-cover">
                </div>
                <div
                  class="slot-info absolute left-3 right-3 bottom-3 bg-white/70 backdrop-blur-md rounded-xl shadow px-4 py-3">
                  <div class="slot-name font-bold text-lg leading-tight">상호명 E</div>
                  <div class="slot-category text-sm text-slate-600">업종: 양식</div>
                </div>
              </div>
            </a>

            <!-- 카드 6 -->
            <a href="#" class="block group" data-slot data-position="food_best_6">
              <div class="neo-card p-0 overflow-hidden relative rounded-2xl">
                <div class="w-full h-60">
                  <img src="/uploads/no-image.png" alt="상호명" class="slot-img w-full h-full object-cover">
                </div>
                <div
                  class="slot-info absolute left-3 right-3 bottom-3 bg-white/70 backdrop-blur-md rounded-xl shadow px-4 py-3">
                  <div class="slot-name font-bold text-lg leading-tight">상호명 F</div>
                  <div class="slot-category text-sm text-slate-600">업종: 분식</div>
                </div>
              </div>
            </a>
          </div>
      </section>
    </main>
  </div>

  <!-- 오른쪽 하단 세로 네비게이션 -->
  <div class="fixed bottom-6 right-6 flex flex-col items-center gap-4 z-50">

    <!-- 이전 -->
    <div class="flex flex-col items-center">
      <button onclick="goBack()"
        class="w-14 h-14 flex items-center justify-center rounded-full bg-gradient-to-br from-gray-100 to-gray-200 text-gray-700 shadow hover:from-gray-200 hover:to-gray-300 transition">
        ←
      </button>
      <span class="text-xs mt-1 text-gray-600 font-semibold">이전</span>
    </div>

    <!-- 다음 -->
    <div class="flex flex-col items-center">
      <button onclick="goNext()"
        class="w-14 h-14 flex items-center justify-center rounded-full bg-gradient-to-br from-gray-100 to-gray-200 text-gray-700 shadow hover:from-gray-200 hover:to-gray-300 transition">
        →
      </button>
      <span class="text-xs mt-1 text-gray-600 font-semibold">다음</span>
    </div>

    <!-- 홈 -->
    <div class="flex flex-col items-center">
      <a href="/index.html"
        class="w-14 h-14 flex items-center justify-center rounded-full bg-gradient-to-br from-blue-500 to-blue-600 text-white shadow hover:from-blue-600 hover:to-blue-700 transition">
        🏠
      </a>
      <span class="text-xs mt-1 text-gray-600 font-semibold">홈</span>
    </div>
  </div>


  <!-- ✅ footer.html 불러오기 -->
  <div id="footer-placeholder"></div>

  <script>
    // ✅ header/footer 동적 포함
    fetch("/components/header.html")
      .then(r => r.text())
      .then(d => (document.getElementById("header-placeholder").innerHTML = d));

    fetch("/components/footer.html")
      .then(r => r.text())
      .then(d => (document.getElementById("footer-placeholder").innerHTML = d));

    // ✅ "상호 (업종)" 같은 줄로 렌더 (업종은 한 단계 작은 글씨)
    function renderNameWithCategory(nameEl, categoryEl, storeName, storeCategory) {
      if (!nameEl) return;

      // 기존 내용 제거
      nameEl.innerHTML = "";

      // 상호
      nameEl.appendChild(document.createTextNode(storeName));

      // 업종은 상호 있을 때만 (괄호 + 작은 글씨)
      if (storeCategory) {
        const span = document.createElement("span");
        span.className = "text-sm text-slate-600 font-normal ml-1";
        span.textContent = `(${storeCategory})`;
        nameEl.appendChild(span);
      }

      // ✅ slot-category 칸은 아예 안 쓰고 숨김(혹시 기본값 남는 것 방지)
      if (categoryEl) {
        categoryEl.textContent = "";
        categoryEl.classList.add("hidden");
      }
    }

    // ✅ 파워 광고(1~9) 카드 DOM 자체를 섞어서 3개씩 그룹에 다시 배치
    function shufflePowerAdsDom() {
      const track = document.getElementById("powerAdTrack");
      if (!track) return;

      const groups = Array.from(track.querySelectorAll(".power-group"));
      if (groups.length === 0) return;

      // 각 그룹 안의 "카드 컨테이너" (w-1/3 px-2) 들을 모두 모음
      const cards = groups.flatMap(g => Array.from(g.children)).filter(Boolean);
      if (cards.length < 2) return;

      // Fisher-Yates shuffle
      for (let i = cards.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [cards[i], cards[j]] = [cards[j], cards[i]];
      }

      // 그룹 비우고, 3개씩 다시 채움
      groups.forEach(g => (g.innerHTML = ""));
      let idx = 0;
      groups.forEach(g => {
        for (let k = 0; k < 3 && idx < cards.length; k++) {
          g.appendChild(cards[idx++]);
        }
      });
    }

    // ✅ 광고 슬롯 로딩 (foodcategorymanager에서 설정한 내용 표시)
    // ✅ 파워 광고(food_power_1~9)는 랜덤 순서로 화면에 매핑
    async function loadAdSlots() {
      // ✅ 1) 먼저 파워광고 카드 DOM 순서를 섞는다 (새로고침/첫 진입 때 랜덤)
      shufflePowerAdsDom();
      const allSlots = Array.from(document.querySelectorAll("[data-slot][data-position]"));

      const isPower = (pos) => /^food_power_\d+$/.test(pos || "");
      const powerSlots = allSlots.filter((s) => isPower(s.dataset.position)).slice(0, 9);
      const otherSlots = allSlots.filter((s) => !isPower(s.dataset.position));

      // ---------- 공통 유틸 ----------
      const shuffle = (arr) => {
        for (let i = arr.length - 1; i > 0; i--) {
          const j = Math.floor(Math.random() * (i + 1));
          [arr[i], arr[j]] = [arr[j], arr[i]];
        }
        return arr;
      };

      async function fetchSlot(position) {
        const res = await fetch(
          `/foodcategorymanager/ad/slot?page=foodcategory&position=${encodeURIComponent(position)}&t=${Date.now()}`,
          { cache: "no-store" }
        );
        if (!res.ok) return null;
        const data = await res.json();
        return data.slot || data.data || null;
      }

      function resetSlotUI(slot) {
        const img = slot.querySelector(".slot-img");
        const info = slot.querySelector(".slot-info");
        const nameEl = slot.querySelector(".slot-name");
        const categoryEl = slot.querySelector(".slot-category");

        if (nameEl) nameEl.textContent = "";
        if (categoryEl) {
          categoryEl.textContent = "";
          categoryEl.classList.add("hidden");
        }
        if (info) info.classList.add("hidden");

        if (img) {
          img.src = "/uploads/no-image.png";
          img.alt = "광고 이미지";
          img.style.display = "block";
        }

        slot.onclick = null;
        slot.style.cursor = "default";
      }

      // ✅ "상호 (업종)" 같은 줄로 렌더 (업종은 한 단계 작은 글씨)
      function renderNameWithCategory(nameEl, categoryEl, storeName, storeCategory) {
        if (!nameEl) return;
        nameEl.innerHTML = "";
        nameEl.appendChild(document.createTextNode(storeName));

        if (storeCategory) {
          const span = document.createElement("span");
          span.className = "text-sm text-slate-600 font-normal ml-1";
          span.textContent = `(${storeCategory})`;
          nameEl.appendChild(span);
        }

        if (categoryEl) {
          categoryEl.textContent = "";
          categoryEl.classList.add("hidden");
        }
      }

      async function applySlotData(slot, slotData) {
        if (!slot || !slotData) return;

        const img = slot.querySelector(".slot-img");
        const info = slot.querySelector(".slot-info");
        const nameEl = slot.querySelector(".slot-name") || slot.querySelector(".slot-title");
        const categoryEl = slot.querySelector(".slot-category") || slot.querySelector(".slot-sub");
        const slotEmpty = slot.querySelector(".slot-empty");

        // ✅ store_id 추출 (slotData.id는 슬롯 ID일 수 있으므로 제외)
        const storeId =
          slotData.store_id ||
          slotData.storeId ||
          (slotData.store && (slotData.store.id || slotData.store.store_id)) ||
          null;

        // ✅ store_type 추출 (table_source를 store_type으로 매핑)
        const tableSource = slotData.table_source || slotData.tableSource || 'combined_store_info';
        const storeType =
          slotData.store_type ||
          slotData.storeType ||
          slotData.detail_type ||
          (slotData.store && (slotData.store.store_type || slotData.store.detail_type)) ||
          (tableSource === 'store_info' ? 'store_info' : 'combined');

        console.log(`[${slot.dataset.position}] storeId=${storeId}, tableSource=${tableSource}, storeType=${storeType}`);

        // ✅ 슬롯에 저장된 데이터만 사용 (보강 없음)
        let storeName = (slotData.business_name || slotData.businessName || "").toString().trim();
        let storeCategory = (
          slotData.category || 
          slotData.business_category || 
          slotData.businessCategory ||
          slotData.business_type ||
          slotData.businessType ||
          ""
        ).toString().trim();
        let imageUrl = (slotData.image_url || slotData.imageUrl || "").toString().trim();

        // ✅ 이미지
        if (img) {
          img.src = imageUrl || "/uploads/no-image.png";
          img.alt = storeName || "광고 이미지";
          img.style.display = "block";
        }

        // ✅ slot-empty 숨김 (데이터가 있을 때)
        if (slotEmpty && (storeName || imageUrl)) {
          slotEmpty.style.display = "none";
        }

        // ✅ 이름/업종 표시
        if (storeName) {
          if (info) info.classList.remove("hidden");
          renderNameWithCategory(nameEl, categoryEl, storeName, storeCategory);
        }

        // ✅ 클릭 이벤트 (link_url 우선, 없으면 store_id로 이동)
        const position = slot.dataset.position;
        
        // slotData에 링크가 있으면 그걸 1순위로 사용
        const link = (slotData.link_url || slotData.linkUrl || slotData.link || "").toString().trim();
        
        if (link) {
          slot.style.cursor = "pointer";
          slot.onclick = (e) => {
            e.preventDefault();
            window.location.href = link;
          };
          return;
        }
        
        // 링크가 없으면 store_id로 이동 (메인 배너는 제외)
        if (storeId && position !== 'food_main_banner') {
          slot.style.cursor = "pointer";
          slot.onclick = (e) => {
            e.preventDefault();
            // table_source에 따라 type 파라미터 추가
            const typeParam = tableSource === 'store_info' ? 'store_info' : 'combined';
            window.location.href = `/ndetail.html?id=${storeId}&type=${typeParam}`;
          };
        }
      }

      // ---------- 1) 모든 슬롯 로딩 (파워 광고는 이미 DOM 셔플됨) ----------
      for (const slot of allSlots) {
        const position = slot.dataset.position;
        if (!position) continue;

        resetSlotUI(slot);

        try {
          const slotData = await fetchSlot(position);
          console.log(`[${position}] 슬롯 데이터:`, slotData);
          if (!slotData) {
            console.warn(`[${position}] 슬롯 데이터 없음`);
            continue;
          }
          await applySlotData(slot, slotData);
        } catch (err) {
          console.error(`[foodcategory] 슬롯 로딩 실패 (${position}):`, err);
        }
      }
    }

    document.addEventListener("DOMContentLoaded", loadAdSlots);

    // ✅ 서브카테고리 토글
    function toggleSub(btn) {
      const ul = btn.nextElementSibling;
      if (!ul) return;
      ul.classList.toggle("hidden");
    }

    // ✅ 파워 광고 슬라이더
    document.addEventListener("DOMContentLoaded", () => {
      // 파워 광고 슬라이더 (2개씩 + 느리게 + 핑퐁)
      const viewport = document.getElementById("powerViewport");
      const track = document.getElementById("powerAdTrack");
      if (!viewport || !track) return;

      let groups = track.querySelectorAll(".power-group").length;
      // ✅ 랜덤 시작 위치 (0 ~ groups-1)
      let index = Math.floor(Math.random() * groups);
      console.log(`🎲 파워 슬라이더 랜덤 시작: ${index + 1}번째 그룹`);

      // ✅ 끝에서 “뒤로” 돌아오게 하는 방향 값
      let dir = 1; // 1: 앞으로, -1: 뒤로

      function updateSlider() {
        const slideWidth = viewport.clientWidth;
        track.style.transform = `translateX(${-index * slideWidth}px)`;
      }

      function stepAuto() {
        if (groups <= 1) return;

        // 끝에 도달하면 방향 반전
        if (index >= groups - 1) dir = -1;
        else if (index <= 0) dir = 1;

        index = index + dir;
        updateSlider();
      }

      // 버튼은 “명확히” 앞/뒤로 이동
      function nextManual() {
        if (groups <= 1) return;
        if (index < groups - 1) index++;
        else { dir = -1; index = groups - 2; } // 끝에서 누르면 바로 뒤로
        updateSlider();
      }
      function prevManual() {
        if (groups <= 1) return;
        if (index > 0) index--;
        else { dir = 1; index = 1; } // 처음에서 누르면 바로 앞으로
        updateSlider();
      }

      const nextBtn = document.getElementById("nextBtn");
      const prevBtn = document.getElementById("prevBtn");

      if (nextBtn && prevBtn) {
        nextBtn.addEventListener("click", () => { stopAuto(); nextManual(); startAuto(); });
        prevBtn.addEventListener("click", () => { stopAuto(); prevManual(); startAuto(); });
      }

      window.addEventListener("resize", updateSlider);

      // ✅ 자동 넘어가는 속도(느리게): 9~12초 추천
      const INTERVAL = 10000;
      let timer = null;
      function startAuto() { if (!timer) timer = setInterval(stepAuto, INTERVAL); }
      function stopAuto() { if (timer) { clearInterval(timer); timer = null; } }

      document.addEventListener("visibilitychange", () => {
        document.hidden ? stopAuto() : startAuto();
      });

      viewport.addEventListener("mouseenter", stopAuto);
      viewport.addEventListener("mouseleave", startAuto);

      // 초기
      updateSlider();
      startAuto();
    });

    // ✅ 우측 하단 네비
    function goBack() {
      if (document.referrer && document.referrer !== location.href) {
        window.history.back();
      } else {
        window.location.href = "/index.html";
      }
    }
    function goNext() {
      window.history.forward();
    }
  </script>

</body>

</html>