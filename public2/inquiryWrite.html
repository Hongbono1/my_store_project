<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë¬¸ì˜ ë“±ë¡ | MALL HANKOOK</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: Pretendard, system-ui, -apple-system, BlinkMacSystemFont,
                "Segoe UI", Roboto, "Noto Sans KR", sans-serif;
        }

        .neo-card {
            background: radial-gradient(circle at 0 0,
                    rgba(255, 255, 255, 0.98),
                    rgba(241, 245, 249, 0.96));
            backdrop-filter: blur(14px);
            border-radius: 1.75rem;
            box-shadow:
                16px 16px 40px rgba(15, 23, 42, 0.18),
                -10px -10px 26px rgba(255, 255, 255, 0.95);
            border: 1px solid rgba(148, 163, 184, 0.2);
        }

        .neo-input {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 0.9rem;
            box-shadow:
                inset 3px 3px 7px rgba(15, 23, 42, 0.08),
                inset -3px -3px 7px rgba(255, 255, 255, 0.9);
            border: 1px solid rgba(226, 232, 240, 0.9);
            transition: all 0.18s ease;
        }

        .neo-input:focus {
            outline: none;
            box-shadow:
                inset 4px 4px 10px rgba(15, 23, 42, 0.16),
                inset -4px -4px 10px rgba(255, 255, 255, 1);
            border-color: rgba(129, 140, 248, 0.7);
            background: #ffffff;
        }

        .badge-pill {
            backdrop-filter: blur(12px);
            background: linear-gradient(135deg,
                    rgba(129, 140, 248, 0.16),
                    rgba(56, 189, 248, 0.14));
            border-radius: 999px;
            border: 1px solid rgba(191, 219, 254, 0.9);
        }
    </style>
</head>

<body class="bg-gradient-to-br from-slate-50 via-sky-50 to-indigo-100 min-h-screen">
    <div id="header"></div>

    <main class="max-w-3xl mx-auto py-16 px-4 sm:px-6 lg:px-8">
        <!-- ìƒë‹¨ ì„¤ëª… -->
        <header class="mb-8">
            <div
                class="inline-flex items-center gap-2 badge-pill px-3 py-1 text-[11px] sm:text-xs text-indigo-700 font-semibold">
                <span class="w-1.5 h-1.5 rounded-full bg-indigo-500"></span>
                ê³ ê° ë¬¸ì˜ ë“±ë¡
            </div>
            <h1 class="mt-3 text-2xl sm:text-3xl font-extrabold text-slate-900 tracking-tight">
                ê¶ê¸ˆí•œ ì ì„ ë‚¨ê²¨ì£¼ì„¸ìš”
            </h1>
            <p class="mt-1 text-sm sm:text-base text-slate-500">
                ì„œë¹„ìŠ¤ ì´ìš©, ê°€ê²Œ ë“±ë¡, ì œíœ´ ë¬¸ì˜ ë“± ë¬´ì—‡ì´ë“  í¸í•˜ê²Œ ì‘ì„±í•´ì£¼ì‹œë©´ í™•ì¸ í›„ ì—°ë½ë“œë¦´ê²Œìš”.
            </p>
        </header>

        <!-- ë©”ì¸ ì¹´ë“œ -->
        <section class="neo-card p-6 sm:p-8">
            <form id="inquiryForm" class="space-y-6">
                <!-- ê¸°ë³¸ ì •ë³´ -->
                <div class="grid grid-cols-1 sm:grid-cols-2 gap-5">
                    <div class="sm:col-span-2">
                        <label class="block text-sm font-semibold text-slate-700 mb-2">
                            ì œëª© <span class="text-red-500">*</span>
                        </label>
                        <input type="text" name="title" required
                            class="neo-input w-full px-4 py-3 text-sm sm:text-base text-slate-900 placeholder-slate-400"
                            placeholder="ë¬¸ì˜ ì œëª©ì„ ì…ë ¥í•˜ì„¸ìš”" />
                    </div>

                    <div>
                        <label class="block text-sm font-semibold text-slate-700 mb-2">
                            ì´ë¦„ <span class="text-red-500">*</span>
                        </label>
                        <input type="text" name="user_name" required
                            class="neo-input w-full px-4 py-3 text-sm sm:text-base text-slate-900 placeholder-slate-400"
                            placeholder="ì„±í•¨ì„ ì…ë ¥í•˜ì„¸ìš”" />
                    </div>

                    <div>
                        <label class="block text-sm font-semibold text-slate-700 mb-2">
                            ì—°ë½ì²˜
                        </label>
                        <input type="tel" name="user_phone"
                            class="neo-input w-full px-4 py-3 text-sm sm:text-base text-slate-900 placeholder-slate-400"
                            placeholder="ì—°ë½ ê°€ëŠ¥í•œ ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”" />
                    </div>
                </div>

                <!-- ë¬¸ì˜ ë‚´ìš© -->
                <div>
                    <div class="flex items-center justify-between mb-2">
                        <label class="block text-sm font-semibold text-slate-700">
                            ë¬¸ì˜ ë‚´ìš© <span class="text-red-500">*</span>
                        </label>
                        <span class="text-[11px] sm:text-xs text-slate-400">
                            ê°€ëŠ¥í•œ í•œ ìì„¸í•˜ê²Œ ì ì–´ì£¼ì‹œë©´ ë¹ ë¥¸ ì•ˆë‚´ì— ë„ì›€ì´ ë©ë‹ˆë‹¤.
                        </span>
                    </div>
                    <textarea name="content" required rows="8"
                        class="neo-input w-full px-4 py-3 text-sm sm:text-base text-slate-900 placeholder-slate-400 resize-none"
                        placeholder="ë¬¸ì˜í•˜ì‹¤ ë‚´ìš©ì„ ìì„¸íˆ ì‘ì„±í•´ì£¼ì„¸ìš”. (ì„œë¹„ìŠ¤ ê´€ë ¨, ê°€ê²Œ ë“±ë¡, ì œíœ´/ê´‘ê³  ë¬¸ì˜ ë“±)">
          </textarea>
                </div>

                <!-- ë²„íŠ¼ ì˜ì—­ -->
                <div class="flex flex-col sm:flex-row gap-3 sm:gap-4 pt-2">
                    <button type="button" onclick="history.back()"
                        class="w-full sm:flex-1 py-3 px-6 border border-slate-200 text-sm sm:text-base text-slate-600 rounded-xl font-semibold bg-white/80 hover:bg-slate-50 hover:border-slate-300 transition">
                        ì·¨ì†Œ
                    </button>
                    <button type="submit"
                        class="w-full sm:flex-1 py-3 px-6 rounded-xl font-semibold text-sm sm:text-base text-white bg-gradient-to-r from-indigo-500 via-sky-500 to-cyan-400 shadow-md shadow-indigo-500/30 hover:from-indigo-600 hover:via-sky-600 hover:to-cyan-500 transition">
                        ë¬¸ì˜ ë“±ë¡
                    </button>
                </div>
            </form>

            <!-- ê²°ê³¼ ë©”ì‹œì§€ -->
            <div id="result" class="mt-6 hidden text-sm"></div>
        </section>
    </main>

    <div id="footer"></div>

    <script>
        // Header/Footer ë¡œë“œ
        fetch("/components/header.html")
            .then(res => res.text())
            .then(html => document.getElementById("header").innerHTML = html)
            .catch(err => console.warn("Header ë¡œë“œ ì‹¤íŒ¨:", err));

        fetch("/components/footer.html")
            .then(res => res.text())
            .then(html => document.getElementById("footer").innerHTML = html)
            .catch(err => console.warn("Footer ë¡œë“œ ì‹¤íŒ¨:", err));

        // ë¬¸ì˜ ë“±ë¡ ì²˜ë¦¬ (Mall Hankook API íŒ¨í„´)
        document.getElementById("inquiryForm").addEventListener("submit", async (e) => {
            e.preventDefault();

            const form = e.target;
            const formData = new FormData(form);
            const resultDiv = document.getElementById("result");

            // ë²„íŠ¼ ë¹„í™œì„±í™”
            const submitBtn = form.querySelector('button[type="submit"]');
            const originalText = submitBtn.textContent;
            submitBtn.disabled = true;
            submitBtn.textContent = "ë“±ë¡ ì¤‘...";

            try {
                console.log("ğŸ“¤ ë¬¸ì˜ ë“±ë¡ API í˜¸ì¶œ: /api/inquiry");

                // FormDataë¥¼ JSONìœ¼ë¡œ ë³€í™˜
                const data = {
                    title: formData.get('title').trim(),
                    content: formData.get('content').trim(),
                    user_name: formData.get('user_name').trim(),
                    user_phone: formData.get('user_phone')?.trim() || null
                };

                console.log("ğŸ“¤ ì „ì†¡ ë°ì´í„°:", data);

                const response = await fetch("/api/inquiry", {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json"
                    },
                    body: JSON.stringify(data)
                });

                const result = await response.json();
                console.log("ğŸ“¥ ì‘ë‹µ ë°ì´í„°:", result);

                if (result.success) {
                    // ì„±ê³µ ë©”ì‹œì§€
                    resultDiv.innerHTML = `
            <div class="p-4 rounded-2xl bg-emerald-50 border border-emerald-200 text-emerald-700 shadow-sm">
              <p class="font-semibold text-sm sm:text-base">âœ… ë¬¸ì˜ê°€ ì„±ê³µì ìœ¼ë¡œ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤.</p>
              <p class="text-xs sm:text-sm mt-1">ë¬¸ì˜ ë²ˆí˜¸: <span class="font-mono">${result.data.id}</span></p>
              <p class="text-xs sm:text-[13px] mt-2 text-emerald-600">
                ë‹´ë‹¹ìê°€ ë‚´ìš©ì„ í™•ì¸í•œ í›„ ìˆœì°¨ì ìœ¼ë¡œ ë‹µë³€ë“œë¦´ ì˜ˆì •ì…ë‹ˆë‹¤.
              </p>
            </div>
          `;
                    resultDiv.classList.remove("hidden");

                    // í¼ ì´ˆê¸°í™”
                    form.reset();

                    // 3ì´ˆ í›„ ëª©ë¡ìœ¼ë¡œ ì´ë™
                    setTimeout(() => {
                        location.href = "/inquiry.html";
                    }, 3000);

                } else {
                    throw new Error(result.error || "ë“±ë¡ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.");
                }

            } catch (error) {
                console.error("âŒ ë¬¸ì˜ ë“±ë¡ ì˜¤ë¥˜:", error);

                resultDiv.innerHTML = `
          <div class="p-4 rounded-2xl bg-rose-50 border border-rose-200 text-rose-700 shadow-sm">
            <p class="font-semibold text-sm sm:text-base">âŒ ë¬¸ì˜ ë“±ë¡ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.</p>
            <p class="text-xs sm:text-[13px] mt-1">${error.message}</p>
            <p class="text-[11px] mt-2 text-rose-500">
              ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ ì£¼ì„¸ìš”. ë¬¸ì œê°€ ê³„ì†ë˜ë©´ ê´€ë¦¬ìì—ê²Œ ë¬¸ì˜í•´ ì£¼ì„¸ìš”.
            </p>
          </div>
        `;
                resultDiv.classList.remove("hidden");

            } finally {
                // ë²„íŠ¼ ë³µì›
                submitBtn.disabled = false;
                submitBtn.textContent = originalText;
            }
        });
    </script>
</body>

</html>