<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>문의 등록 | MALL HANKOOK</title>
    <script src="https://cdn.tailwindcss.com"></script>

    <style>
        .neo-card {
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(12px);
            border-radius: 1.5rem;
            box-shadow:
                8px 8px 16px rgba(0, 0, 0, 0.15),
                -8px -8px 16px rgba(255, 255, 255, 0.9);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .neo-input {
            background: rgba(255, 255, 255, 0.6);
            border-radius: 1rem;
            border: none;
            padding: 14px 18px;
            box-shadow:
                inset 4px 4px 10px rgba(0, 0, 0, 0.1),
                inset -4px -4px 10px rgba(255, 255, 255, 0.8);
            transition: all .25s;
        }

        .neo-input:focus {
            outline: none;
            box-shadow:
                inset 2px 2px 6px rgba(0, 0, 0, 0.15),
                inset -3px -3px 8px rgba(255, 255, 255, 0.9),
                0 0 0 3px rgba(79, 70, 229, 0.25);
        }

        .neo-btn {
            background: linear-gradient(145deg, #6366f1, #4f46e5);
            color: white;
            padding: 16px;
            border-radius: 1rem;
            box-shadow:
                4px 4px 12px rgba(0, 0, 0, 0.15),
                -2px -2px 8px rgba(255, 255, 255, 0.2);
            font-size: 1.15rem;
            transition: .25s;
        }

        .neo-btn:hover {
            transform: translateY(-2px);
            box-shadow:
                2px 4px 12px rgba(0, 0, 0, 0.2),
                -3px -3px 6px rgba(255, 255, 255, 0.25);
        }
    </style>
</head>

<body class="bg-gradient-to-br from-gray-100 to-gray-200 min-h-screen">

    <!-- Header -->
    <div id="header"></div>

    <main class="max-w-3xl mx-auto px-6 pt-28 pb-24">

        <div class="neo-card p-10">
            <h1 class="text-4xl font-bold text-gray-800 text-center mb-10">문의 등록</h1>

            <form id="inquiryForm" class="space-y-8">

                <!-- 제목 -->
                <div>
                    <label class="block text-lg font-semibold text-gray-700 mb-3">
                        제목 <span class="text-red-500">*</span>
                    </label>
                    <input type="text" id="title" class="neo-input w-full text-lg"
                        placeholder="문의 제목을 입력해주세요" required>
                </div>

                <!-- 이름 -->
                <div>
                    <label class="block text-lg font-semibold text-gray-700 mb-3">
                        이름 <span class="text-red-500">*</span>
                    </label>
                    <input type="text" id="user_name" class="neo-input w-full text-lg"
                        placeholder="성함을 입력해주세요" required>
                </div>

                <!-- 전화번호 -->
                <div>
                    <label class="block text-lg font-semibold text-gray-700 mb-3">
                        휴대폰 번호 (선택)
                    </label>
                    <input type="text" id="user_phone" class="neo-input w-full text-lg"
                        placeholder="010-0000-0000">
                </div>

                <!-- 내용 -->
                <div>
                    <label class="block text-lg font-semibold text-gray-700 mb-3">
                        문의 내용 <span class="text-red-500">*</span>
                    </label>
                    <textarea id="content" rows="8" class="neo-input w-full text-lg resize-none"
                        placeholder="문의 내용을 자세히 입력해주세요" required></textarea>
                </div>

                <!-- 버튼 -->
                <div class="flex gap-4">
                    <button type="button" onclick="history.back()"
                        class="w-1/2 bg-gray-400 text-white py-4 rounded-xl text-lg font-semibold hover:bg-gray-500 transition">
                        취소
                    </button>

                    <button type="submit"
                        class="w-1/2 neo-btn">
                        문의 등록하기
                    </button>
                </div>

            </form>
        </div>

    </main>

    <!-- Footer -->
    <div id="footer"></div>

    <script>
        // Header, Footer 로드
        document.addEventListener("DOMContentLoaded", () => {
            fetch("/components/header.html")
                .then(res => res.text())
                .then(html => (document.getElementById("header").innerHTML = html));

            fetch("/components/footer.html")
                .then(res => res.text())
                .then(html => (document.getElementById("footer").innerHTML = html));
        });

        // 문의 등록 처리
        document.getElementById("inquiryForm").addEventListener("submit", async (e) => {
            e.preventDefault();

            const data = {
                title: document.getElementById("title").value.trim(),
                user_name: document.getElementById("user_name").value.trim(),
                user_phone: document.getElementById("user_phone").value.trim(),
                content: document.getElementById("content").value.trim(),
            };

            if (!data.title || !data.user_name || !data.content) {
                alert("필수 항목을 모두 입력해주세요.");
                return;
            }

            try {
                const res = await fetch("/api/inquiry", {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify(data),
                });

                const result = await res.json();

                if (res.ok && result.success) {
                    alert("문의가 등록되었습니다.");
                    location.href = "/inquiry.html";
                } else {
                    throw new Error(result.error || "등록 중 오류 발생");
                }
            } catch (err) {
                console.error(err);
                alert("문의 등록에 실패했습니다.");
            }
        });
    </script>

</body>
</html>
