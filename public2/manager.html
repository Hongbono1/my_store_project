<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MALL HANKOOK | ê´‘ê³  ë ˆì´ì•„ì›ƒ ê´€ë¦¬ì</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: 'Noto Sans KR', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
        }

        .neo-card {
            background: rgba(255, 255, 255, 0.75);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border-radius: 1rem;
            box-shadow:
                6px 6px 16px rgba(0, 0, 0, 0.12),
                -6px -6px 16px rgba(255, 255, 255, 0.9);
            transition: all 0.25s ease;
        }

        .neo-card:hover {
            transform: translateY(-3px);
            box-shadow:
                10px 10px 22px rgba(0, 0, 0, 0.18),
                -8px -8px 18px rgba(255, 255, 255, 1);
        }

        .slot-card {
            transition: transform .2s ease, box-shadow .2s ease, border-color .2s ease;
        }

        .slot-card:hover {
            transform: translateY(-2px);
            box-shadow:
                0 12px 20px rgba(15, 23, 42, 0.15);
            border-color: rgba(59, 130, 246, 0.7);
        }

        .layout-grid {
            background: radial-gradient(circle at top left, #e0f2fe 0, transparent 40%),
                radial-gradient(circle at bottom right, #fef3c7 0, transparent 45%);
        }

        .badge-ad {
            background: rgba(59, 130, 246, 0.1);
            color: #1d4ed8;
        }

        .badge-img {
            background: rgba(34, 197, 94, 0.08);
            color: #15803d;
        }

        .badge-info {
            background: rgba(148, 163, 184, 0.16);
            color: #475569;
        }

        .modal-bg {
            backdrop-filter: blur(6px);
        }
    </style>
</head>

<body class="bg-slate-50 text-slate-900">

    <!-- ì „ì²´ ë ˆì´ì•„ì›ƒ -->
    <div class="flex min-h-screen">

        <!-- ğŸ”µ ì‚¬ì´ë“œë°” -->
        <aside class="w-64 bg-white/80 backdrop-blur-xl border-r border-slate-200 px-5 py-6 flex flex-col gap-6">
            <div>
                <h1
                    class="text-2xl font-extrabold bg-gradient-to-r from-blue-500 via-indigo-500 to-purple-500 bg-clip-text text-transparent">
                    MALL HANKOOK
                </h1>
                <p class="mt-1 text-xs text-slate-500">ê´‘ê³  / ë°°ë„ˆ ë ˆì´ì•„ì›ƒ ê´€ë¦¬ì</p>
            </div>

            <!-- í˜ì´ì§€ ì„ íƒ -->
            <div>
                <p class="text-xs font-semibold text-slate-500 uppercase tracking-wide mb-2">í˜ì´ì§€ ì„ íƒ</p>
                <nav id="pageList" class="space-y-1 text-sm">
                    <!-- JSì—ì„œ ì±„ì›€ -->
                </nav>
            </div>

            <div class="mt-auto text-[11px] text-slate-400 leading-relaxed">
                ì¢Œì¸¡ì—ì„œ <span class="font-semibold">í˜ì´ì§€</span>ë¥¼ ì„ íƒí•˜ê³ ,<br>
                ìš°ì¸¡ ë ˆì´ì•„ì›ƒì—ì„œ <span class="font-semibold">ë°°ë„ˆ/ì´ë¯¸ì§€/ê´‘ê³  ìŠ¬ë¡¯</span>ì„ í´ë¦­í•˜ë©´<br>
                <span class="font-semibold">ì…ë ¥ì°½(ì´ë¯¸ì§€ + ë§í¬)</span>ì´ ë‚˜íƒ€ë‚©ë‹ˆë‹¤.
            </div>
        </aside>

        <!-- ë©”ì¸ ì»¨í…ì¸  -->
        <main class="flex-1 p-8 space-y-6">

            <!-- ìƒë‹¨ íƒ€ì´í‹€ -->
            <header class="flex items-center justify-between gap-3">
                <div>
                    <h2 id="pageTitle" class="text-2xl font-bold flex items-center gap-2">
                        ë©”ì¸ í˜ì´ì§€ ë ˆì´ì•„ì›ƒ
                    </h2>
                    <p id="pageDesc" class="text-sm text-slate-500 mt-1">
                        ìƒë‹¨ ë°°ë„ˆ, ë©”ì¸ ë¹„ì£¼ì–¼, í”„ë¡œëª¨ì…˜ ë°•ìŠ¤, Best Pick ì˜ì—­ì˜ ê´‘ê³ /ì´ë¯¸ì§€ ìŠ¬ë¡¯ì„ ì„¤ì •í•©ë‹ˆë‹¤.
                    </p>
                </div>
            </header>

            <!-- ë ˆì´ì•„ì›ƒ ë¯¸ë¦¬ë³´ê¸° -->
            <section
                class="neo-card layout-grid p-6 md:p-8 border border-slate-200/70 shadow-lg max-w-5xl mx-auto space-y-5">
                <h3 class="text-lg font-semibold flex items-center justify-between">
                    <span>ğŸ  index.html ë ˆì´ì•„ì›ƒ ë¯¸ë¦¬ë³´ê¸°</span>
                    <span class="flex items-center gap-2 text-[11px]">
                        <span
                            class="inline-flex items-center gap-1 rounded-full px-2 py-0.5 badge-ad border border-blue-200 text-[10px]">
                            â— ê´‘ê³  ìŠ¬ë¡¯
                        </span>
                        <span
                            class="inline-flex items-center gap-1 rounded-full px-2 py-0.5 badge-img border border-emerald-200 text-[10px]">
                            â— ì´ë¯¸ì§€ ìŠ¬ë¡¯
                        </span>
                        <span
                            class="inline-flex items-center gap-1 rounded-full px-2 py-0.5 badge-info border border-slate-200 text-[10px]">
                            â— ì •ë³´/ê°€ê²Œ ì¶”ì²œ
                        </span>
                    </span>
                </h3>

                <!-- ì‹¤ì œ index.htmlì„ ì¶•ì†Œí•œ ëŠë‚Œìœ¼ë¡œ ë°°ì¹˜ -->
                <div class="space-y-4 text-xs md:text-sm">

                    <!-- ìƒë‹¨ ë ë°°ë„ˆ -->
                    <div class="slot-card cursor-pointer border border-dashed border-blue-200 rounded-xl p-3 bg-white/80 js-slot"
                        data-page="index" data-position="index_main_top" data-label="ìƒë‹¨ ë ë°°ë„ˆ (ë„¤ì´ë²„ ìƒˆì§‘ë§ˆë ¨ ìë¦¬)">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="font-semibold">ìƒë‹¨ ë ë°°ë„ˆ</p>
                                <p class="text-[11px] text-slate-500">í˜ì´ì§€ ê°€ì¥ ìœ„ì— ë…¸ì¶œë˜ëŠ” ë©”ì¸ ê´‘ê³  ë°°ë„ˆ</p>
                            </div>
                            <span
                                class="inline-flex items-center gap-1 rounded-full px-2 py-0.5 text-[10px] badge-ad border border-blue-200">
                                ê´‘ê³  ìŠ¬ë¡¯
                            </span>
                        </div>
                    </div>

                    <!-- ë©”ì¸ ë°°ë„ˆ + í”„ë¡œëª¨ 1/2/3 -->
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-3">
                        <!-- ë©”ì¸ ë¹„ì£¼ì–¼ ë°°ë„ˆ (ì™¼ìª½ 2ì¹¸) -->
                        <div class="md:col-span-2">
                            <div
                                class="slot-card border border-dashed border-emerald-200 rounded-xl p-3 bg-white/70 flex flex-col justify-between">
                                <div class="flex items-center justify-between">
                                    <div>
                                        <p class="font-semibold">ë©”ì¸ ë¹„ì£¼ì–¼ ë°°ë„ˆ</p>
                                        <p class="text-[11px] text-slate-500">ì¤‘ì•™ í° ì´ë¯¸ì§€ ì˜ì—­ (ì‚¬ì´íŠ¸ ëŒ€í‘œ ì´ë¯¸ì§€)</p>
                                    </div>
                                    <span
                                        class="inline-flex items-center gap-1 rounded-full px-2 py-0.5 text-[10px] badge-img border border-emerald-200">
                                        ì´ë¯¸ì§€ ìŠ¬ë¡¯
                                    </span>
                                </div>
                                <div
                                    class="mt-2 h-20 bg-gradient-to-r from-slate-100 to-slate-200 rounded-lg flex items-center justify-center text-[11px] text-slate-400">
                                    (index.html ì˜ ë©”ì¸ ë°°ë„ˆ ì˜ì—­)
                                </div>
                            </div>
                        </div>

                        <!-- ìš°ì¸¡ í”„ë¡œëª¨ 1/2/3 -->
                        <div class="space-y-2">
                            <div class="slot-card cursor-pointer border border-dashed border-blue-200 rounded-xl p-2 bg-white/80 js-slot"
                                data-page="index" data-position="index_promo_1" data-label="ìš°ì¸¡ í”„ë¡œëª¨ì…˜ 1">
                                <div class="flex items-center justify-between">
                                    <span class="font-medium text-[12px]">í”„ë¡œëª¨ì…˜ 1</span>
                                    <span
                                        class="badge-ad text-[10px] border border-blue-200 px-2 py-0.5 rounded-full">ê´‘ê³ /ì´ë¯¸ì§€</span>
                                </div>
                                <p class="mt-1 text-[11px] text-slate-500">ë©”ì¸ ìš°ì¸¡ ìƒë‹¨ ì‘ì€ ë°°ë„ˆ</p>
                            </div>

                            <div class="slot-card cursor-pointer border border-dashed border-blue-200 rounded-xl p-2 bg-white/80 js-slot"
                                data-page="index" data-position="index_promo_2" data-label="ìš°ì¸¡ í”„ë¡œëª¨ì…˜ 2">
                                <div class="flex items-center justify-between">
                                    <span class="font-medium text-[12px]">í”„ë¡œëª¨ì…˜ 2</span>
                                    <span
                                        class="badge-ad text-[10px] border border-blue-200 px-2 py-0.5 rounded-full">ê´‘ê³ /ì´ë¯¸ì§€</span>
                                </div>
                                <p class="mt-1 text-[11px] text-slate-500">ë©”ì¸ ìš°ì¸¡ ì¤‘ê°„ ë°°ë„ˆ</p>
                            </div>

                            <div class="slot-card cursor-pointer border border-dashed border-blue-200 rounded-xl p-2 bg-white/80 js-slot"
                                data-page="index" data-position="index_promo_3" data-label="ìš°ì¸¡ í”„ë¡œëª¨ì…˜ 3">
                                <div class="flex items-center justify-between">
                                    <span class="font-medium text-[12px]">í”„ë¡œëª¨ì…˜ 3</span>
                                    <span
                                        class="badge-ad text-[10px] border border-blue-200 px-2 py-0.5 rounded-full">ê´‘ê³ /ì´ë¯¸ì§€</span>
                                </div>
                                <p class="mt-1 text-[11px] text-slate-500">ë©”ì¸ ìš°ì¸¡ í•˜ë‹¨ ë°°ë„ˆ</p>
                            </div>
                        </div>
                    </div>

                    <!-- Best Pick ì˜ì—­ ì„¤ëª… (ê°€ê²Œ ê´‘ê³  ìŠ¬ë¼ì´ë”) -->
                    <div class="slot-card border border-slate-200 rounded-xl p-3 bg-white/70">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="font-semibold">Best Pick ìŠ¬ë¼ì´ë”</p>
                                <p class="text-[11px] text-slate-500">
                                    ë™ê·¸ë¼ë¯¸ ì•ˆì— ê°€ê²Œë“¤ì´ ëŒì•„ê°€ë©° ë…¸ì¶œë˜ëŠ” <span class="font-semibold">ê°€ê²Œ ê´‘ê³  ì˜ì—­</span>ì…ë‹ˆë‹¤.
                                    í˜„ì¬ëŠ” DBì˜ Best Pick ë°ì´í„°(/api/best-pick) ê¸°ì¤€ìœ¼ë¡œ ìë™ ë…¸ì¶œë©ë‹ˆë‹¤.
                                </p>
                            </div>
                            <span
                                class="inline-flex items-center gap-1 rounded-full px-2 py-0.5 text-[10px] badge-info border border-slate-200">
                                ê°€ê²Œ ì¶”ì²œ / ê´‘ê³  ìŠ¬ë¡¯
                            </span>
                        </div>
                    </div>

                    <!-- ê¸°íƒ€ ì„¹ì…˜ ì•ˆë‚´ -->
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-3 text-[11px]">
                        <div class="border border-slate-200 rounded-xl p-3 bg-white/70">
                            <p class="font-semibold mb-1">ì„œë¸Œ ë°°ë„ˆ / ê²€ìƒ‰ì–´ / ìµœì‹ ì†Œì‹ ë“±</p>
                            <p class="text-slate-500">
                                ê²€ìƒ‰ì–´ / ìµœì‹  ì†Œì‹ / ì´ë²¤íŠ¸ / ì¶”ì²œ ì œí’ˆ ë“±ì˜ ë°•ìŠ¤ë“¤ì€
                                <span class="font-semibold">ê¸°ëŠ¥í˜• ì •ë³´ ì˜ì—­</span>ì´ë©°,
                                ì¶”í›„ í•„ìš” ì‹œ ë³„ë„ ê´€ë¦¬ì í™”ë©´ì—ì„œ ê´€ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
                            </p>
                        </div>
                        <div class="border border-slate-200 rounded-xl p-3 bg-white/70">
                            <p class="font-semibold mb-1">í™ë³´ì˜ ë°°ë‹¬ / ì „í†µì‹œì¥ / ê³µì—°ì˜ˆìˆ  ë“±</p>
                            <p class="text-slate-500">
                                ë©”ì¸ ì•„ë˜ì˜ í° ë²„íŠ¼ë“¤ì€ ê° ê¸°ëŠ¥ í˜ì´ì§€ë¡œ ì´ë™í•˜ëŠ”
                                <span class="font-semibold">ê³ ì • ë„¤ë¹„ê²Œì´ì…˜ ì¹´ë“œ</span>ì…ë‹ˆë‹¤.
                                ì´ í™”ë©´ì—ì„œëŠ” ê´‘ê³ /ë°°ë„ˆ ìŠ¬ë¡¯ë§Œ ì„¤ì •í•©ë‹ˆë‹¤.
                            </p>
                        </div>
                    </div>

                </div>
            </section>

        </main>
    </div>

    <!-- ======================== -->
    <!-- ê´‘ê³  ë“±ë¡ ëª¨ë‹¬ -->
    <!-- ======================== -->
    <div id="adModal" class="fixed inset-0 bg-black/40 modal-bg hidden justify-center items-center p-4 z-50">
        <div class="bg-white rounded-2xl shadow-2xl p-6 md:p-7 max-w-lg w-full border border-slate-200">

            <h2 id="modalTitle" class="text-lg font-bold mb-4">
                ê´‘ê³  / ì´ë¯¸ì§€ ì„¤ì •
            </h2>

            <form id="adForm" class="space-y-4">
                <!-- slot ì„¤ëª… -->
                <div class="text-xs text-slate-500 bg-slate-50 border border-slate-100 rounded-lg p-3" id="slotInfo">
                    ì„ íƒëœ ìŠ¬ë¡¯ ì •ë³´ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤.
                </div>

                <!-- ì´ë¯¸ì§€ ì—…ë¡œë“œ -->
                <div>
                    <label class="block font-semibold mb-1 text-sm">ì´ë¯¸ì§€ íŒŒì¼</label>
                    <input id="imageInput" type="file" class="w-full border border-slate-300 p-2 rounded-lg text-sm">
                </div>

                <!-- ë§í¬ ì…ë ¥ -->
                <div>
                    <label class="block font-semibold mb-1 text-sm">í´ë¦­ ì‹œ ì´ë™ ë§í¬ (ì„ íƒ)</label>
                    <input id="linkInput" type="text" placeholder="https://www.hongbono1.com/detail.html?id=1"
                        class="w-full border border-slate-300 p-2 rounded-lg text-sm">
                    <p class="text-[11px] text-slate-400 mt-1">
                        ë¹„ì›Œë‘ë©´ í´ë¦­í•´ë„ ì´ë™í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ìƒì„¸ í˜ì´ì§€, ì´ë²¤íŠ¸, ì™¸ë¶€ ë§í¬ ë“± ììœ ë¡­ê²Œ ì…ë ¥ ê°€ëŠ¥í•©ë‹ˆë‹¤.
                    </p>
                </div>

                <input type="hidden" id="selectedPage">
                <input type="hidden" id="selectedPosition">

                <div class="flex justify-end gap-3 pt-3">
                    <button type="button" id="closeModal"
                        class="px-4 py-2 border border-slate-300 rounded-lg text-sm text-slate-600 hover:bg-slate-50">
                        ì·¨ì†Œ
                    </button>
                    <button type="button" id="saveAdBtn"
                        class="px-4 py-2 bg-blue-600 text-white rounded-lg shadow text-sm hover:bg-blue-700">
                        ì €ì¥
                    </button>
                </div>
            </form>
        </div>
    </div>

    <script>
        // ============================
        // í˜ì´ì§€ ë¦¬ìŠ¤íŠ¸ êµ¬ì„± (ì‚¬ì´ë“œë°”)
        // ============================
        const PAGES = [
            {
                key: "index",
                label: "ë©”ì¸ í˜ì´ì§€ (index.html)",
                desc: "ìƒë‹¨ ë ë°°ë„ˆ, ë©”ì¸ ë¹„ì£¼ì–¼, í”„ë¡œëª¨ 1Â·2Â·3, Best Pick ì˜ì—­ ë“±ì˜ ê´‘ê³  ìŠ¬ë¡¯ì„ ê´€ë¦¬í•©ë‹ˆë‹¤.",
                active: true
            },
            {
                key: "storepride",
                label: "ê°€ê²Œ ìë‘ (storepride.html)",
                desc: "ê°€ê²Œ ìë‘ ìƒë‹¨/ì¤‘ê°„ ë°°ë„ˆ ë“±ì€ ì¶”í›„ ë³„ë„ ë ˆì´ì•„ì›ƒìœ¼ë¡œ êµ¬ì„±í•  ì˜ˆì •ì…ë‹ˆë‹¤.",
                active: false
            },
            {
                key: "performingart",
                label: "ê³µì—°/ì˜ˆìˆ  (performingart.html)",
                desc: "ê³µì—°/ì˜ˆìˆ  í˜ì´ì§€ ê´‘ê³  ìŠ¬ë¡¯ì€ í–¥í›„ ì§€ì› ì˜ˆì •ì…ë‹ˆë‹¤.",
                active: false
            }
        ];

        function renderPageList() {
            const container = document.getElementById("pageList");
            container.innerHTML = "";

            PAGES.forEach(page => {
                const btn = document.createElement("button");
                btn.type = "button";
                btn.className =
                    "w-full text-left px-3 py-2 rounded-lg text-sm flex flex-col border " +
                    (page.active
                        ? "bg-blue-50 text-blue-700 border-blue-200"
                        : "bg-slate-50 text-slate-500 border-slate-100 cursor-not-allowed opacity-60");
                btn.textContent = page.label;
                btn.dataset.key = page.key;

                if (page.active) {
                    btn.addEventListener("click", () => {
                        document.getElementById("pageTitle").textContent = page.label + " ë ˆì´ì•„ì›ƒ";
                        document.getElementById("pageDesc").textContent = page.desc;
                        // í˜„ì¬ëŠ” indexë§Œ ì‹¤ì œ ë ˆì´ì•„ì›ƒ / ë‚˜ë¨¸ì§€ëŠ” ì¶”í›„ í™•ì¥
                    });
                }

                container.appendChild(btn);
            });
        }

        // ============================
        // ìŠ¬ë¡¯ í´ë¦­ â†’ ëª¨ë‹¬ ì—´ê¸°
        // ============================
        function setupSlotClick() {
            document.addEventListener("click", (e) => {
                const slotEl = e.target.closest(".js-slot");
                if (!slotEl) return;

                const page = slotEl.dataset.page || "index";
                const position = slotEl.dataset.position || "";
                const label = slotEl.dataset.label || "ì„ íƒëœ ìŠ¬ë¡¯";

                document.getElementById("selectedPage").value = page;
                document.getElementById("selectedPosition").value = position;

                document.getElementById("modalTitle").textContent = `ìŠ¬ë¡¯ ì„¤ì •: ${label}`;
                document.getElementById("slotInfo").innerHTML = `
          <div class="font-semibold text-slate-700 mb-1">${label}</div>
          <div class="text-[11px] text-slate-500">
            Â· page: <code class="font-mono text-[11px] bg-slate-100 px-1 rounded">${page}</code><br>
            Â· position: <code class="font-mono text-[11px] bg-slate-100 px-1 rounded">${position}</code><br>
            ì´ ìŠ¬ë¡¯ì— í‘œì‹œë  ì´ë¯¸ì§€ì™€ í´ë¦­ ì‹œ ì´ë™í•  ë§í¬ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤.
          </div>
        `;

                document.getElementById("adModal").classList.remove("hidden");
                document.getElementById("adModal").classList.add("flex");
            });
        }

        // ============================
        // ëª¨ë‹¬ ë‹«ê¸°
        // ============================
        function setupModalClose() {
            document.getElementById("closeModal").addEventListener("click", () => {
                document.getElementById("adModal").classList.add("hidden");
                document.getElementById("adModal").classList.remove("flex");
            });

            // ë°”ê¹¥ í´ë¦­ìœ¼ë¡œ ë‹«ê¸°
            document.getElementById("adModal").addEventListener("click", (e) => {
                if (e.target === e.currentTarget) {
                    document.getElementById("adModal").classList.add("hidden");
                    document.getElementById("adModal").classList.remove("flex");
                }
            });
        }

        // ============================
        // ì €ì¥ ë²„íŠ¼ â†’ /manager/ad/upload í˜¸ì¶œ
        // ============================
        function setupSave() {
            document.getElementById("saveAdBtn").addEventListener("click", async () => {
                const page = document.getElementById("selectedPage").value;
                const position = document.getElementById("selectedPosition").value;
                const imageFile = document.getElementById("imageInput").files[0];
                const link = document.getElementById("linkInput").value;

                if (!page || !position) {
                    alert("ìŠ¬ë¡¯ ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì„ íƒí•´ì£¼ì„¸ìš”.");
                    return;
                }
                if (!imageFile) {
                    alert("ì´ë¯¸ì§€ íŒŒì¼ì„ ì„ íƒí•´ì£¼ì„¸ìš”.");
                    return;
                }

                const formData = new FormData();
                formData.append("page", page);
                formData.append("position", position);
                formData.append("link_url", link);
                formData.append("image", imageFile);

                try {
                    const res = await fetch("/manager/ad/upload", {
                        method: "POST",
                        body: formData
                    });

                    const data = await res.json();
                    if (data.ok) {
                        alert("ì €ì¥ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.");
                        document.getElementById("adModal").classList.add("hidden");
                        document.getElementById("adModal").classList.remove("flex");
                        document.getElementById("imageInput").value = "";
                        document.getElementById("linkInput").value = "";
                    } else {
                        alert("ì˜¤ë¥˜: " + (data.message || "ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤."));
                    }
                } catch (err) {
                    console.error(err);
                    alert("ì €ì¥ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
                }
            });
        }

        document.addEventListener("DOMContentLoaded", () => {
            renderPageList();
            setupSlotClick();
            setupModalClose();
            setupSave();
        });
    </script>
</body>

</html>