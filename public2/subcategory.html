<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ì„œë¸Œ ì¹´í…Œê³ ë¦¬ í˜ì´ì§€</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-white text-gray-800 min-h-screen flex flex-col">
    <div id="header-placeholder"></div>

    <section class="relative h-[70vh] max-h-[400px] flex items-center justify-between px-8 bg-gray-50">
        <div class="flex-1 flex justify-center">
            <img id="heroImage" src="/uploads/sample-banner-product.png" alt="ë°°ë„ˆ" class="h-[280px] object-contain">
        </div>
        <div class="flex-1 text-left">
            <h1 id="heroTitle" class="text-3xl md:text-4xl font-bold mb-4">ì¹´í…Œê³ ë¦¬ ì œëª©</h1>
            <p id="heroSubtitle" class="text-gray-600 mb-6">ì¹´í…Œê³ ë¦¬ ì„¤ëª…</p>
            <button id="btnMore" class="px-5 py-2.5 bg-black text-white font-semibold rounded-lg">MORE VIEW</button>
        </div>
    </section>

    <section id="aboutSection" class="max-w-6xl mx-auto py-12 px-4 w-full">
        <h2 class="text-xl md:text-2xl font-bold text-center mb-6">All of the items</h2>
        <div id="filterContainer" class="flex justify-center flex-wrap gap-3 mb-8"></div>
        <div id="lineGrid" class="grid grid-cols-1 sm:grid-cols-3 gap-4"></div>
    </section>

    <section class="max-w-6xl mx-auto py-12 px-4">
        <h2 class="text-xl md:text-2xl font-bold text-center mb-8">Best Seller</h2>
        <div id="bestGrid" class="grid grid-cols-2 md:grid-cols-4 gap-4"></div>
    </section>

    <section class="max-w-6xl mx-auto py-12 px-4">
        <h2 class="text-xl md:text-2xl font-bold text-center mb-8">New registration</h2>
        <div id="newGrid" class="grid grid-cols-2 md:grid-cols-4 gap-4"></div>
    </section>

    <div id="footer-placeholder"></div>

    <div class="fixed bottom-6 right-6 flex flex-col items-center gap-4 z-50">
        <div class="flex flex-col items-center">
            <button onclick="goBack()"
                class="w-14 h-14 flex items-center justify-center rounded-full bg-gradient-to-br from-gray-100 to-gray-200 text-gray-700 shadow hover:from-gray-200 hover:to-gray-300 transition">â†</button>
            <span class="text-xs mt-1 text-gray-600 font-semibold">ì´ì „</span>
        </div>

        <div class="flex flex-col items-center">
            <button onclick="goNext()"
                class="w-14 h-14 flex items-center justify-center rounded-full bg-gradient-to-br from-gray-100 to-gray-200 text-gray-700 shadow hover:from-gray-200 hover:to-gray-300 transition">â†’</button>
            <span class="text-xs mt-1 text-gray-600 font-semibold">ë‹¤ìŒ</span>
        </div>

        <div class="flex flex-col items-center">
            <a href="/index.html"
                class="w-14 h-14 flex items-center justify-center rounded-full bg-gradient-to-br from-blue-500 to-blue-600 text-white shadow hover:from-blue-600 hover:to-blue-700 transition">ğŸ </a>
            <span class="text-xs mt-1 text-gray-600 font-semibold">í™ˆ</span>
        </div>
    </div>

    <script>
        // header/footer
        fetch("/components/header.html").then(r => r.text()).then(d => (document.getElementById("header-placeholder").innerHTML = d));
        fetch("/components/footer.html").then(r => r.text()).then(d => (document.getElementById("footer-placeholder").innerHTML = d));

        // URL params
        const params = new URLSearchParams(window.location.search);
        const TYPE = (params.get("type") || "food").toLowerCase();

        // âœ… ì›ë³¸ category/sub
        const RAW_CATEGORY = (params.get("category") || "").trim();
        const RAW_SUB = (params.get("sub") || "").trim();

        // âœ… â€œë¯¸ìš©/ì´ë°œâ€ì„ êµ¬ë¶„ ìœ ì§€: ë“¤ì–´ì˜¤ëŠ” URLì´ category=ë¯¸ìš© or ì´ë°œì´ì–´ë„
        //    ì„œë²„ ì¡°íšŒëŠ” category=ë¯¸ìš©/ì´ë°œë¡œ í•˜ê³ , í™”ë©´ í•„í„°ëŠ” sub=ë¯¸ìš©/ì´ë°œë¡œ ì²˜ë¦¬
        const BEAUTY_SPLIT_SET = new Set(["ë¯¸ìš©", "ì´ë°œ", "ë„¤ì¼", "í”¼ë¶€ê´€ë¦¬", "ì™ì‹±"]);
        let CATEGORY = RAW_CATEGORY;
        let SUB = RAW_SUB;

        if ((TYPE === "beauty" || TYPE === "combined") && BEAUTY_SPLIT_SET.has(CATEGORY)) {
            // âœ… ë§í¬ê°€ /subcategory.html?type=beauty&category=ë¯¸ìš© ê°™ì€ í˜•íƒœì—¬ë„ ë™ì‘í•˜ë„ë¡
            SUB = SUB || CATEGORY;
            CATEGORY = "ë¯¸ìš©/ì´ë°œ";
        }

        // í•œì‹ ì†Œì œëª©(ê³ ì •)
        const HANSIK_SUBS = ["ë°¥", "ì°Œê°œíƒ•", "ê³ ê¸°êµ¬ì´", "ìƒì„ ", "ì¡±ë°œë³´ìŒˆ", "êµ­ë°¥", "ë°˜ì°¬", "ê¸°íƒ€í•œì‹"];

        // âœ… ë¯¸ìš©/ì´ë°œ ì†Œì œëª©(í•„í„°)
        const BEAUTY_SUBS = ["ë¯¸ìš©", "ì´ë°œ", "ê¸°íƒ€"];

        // ì „ì²´ ë°ì´í„°ë¥¼ 1ë²ˆë§Œ ë°›ì•„ë‘ê³ , í™”ë©´ì€ ì—¬ê¸°ì„œ í•„í„°ë§
        let ALL_STORES = [];
        let CURRENT_SUB = SUB;

        const DEFAULT_DATA = {
            hero: { title: "ìƒ˜í”Œ ì¹´í…Œê³ ë¦¬", subtitle: "ê¸°ë³¸ ì„¤ëª… í…ìŠ¤íŠ¸", image: "/uploads/sample-banner-product.png" },
            filters: [],
            stores: [],
            best: [],
            new: []
        };
        let DATA = { ...DEFAULT_DATA };

        function escapeHtml(input) {
            const s = input == null ? "" : String(input);
            return s.replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;")
                .replace(/"/g, "&quot;").replace(/'/g, "&#39;");
        }

        function normalizeSrc(src) {
            if (!src) return "/uploads/no-image.png";
            if (/^https?:\/\//i.test(src)) return src;
            return src.startsWith("/") ? src : "/" + src;
        }

        function getDetailCategory(store) {
            // âœ… detail_categoryê°€ ë¹„ì–´ìˆìœ¼ë©´ ê¸°íƒ€í•œì‹ìœ¼ë¡œ ë³´ë‚´ê¸°
            const raw = (store.detail_category ?? store.detailCategory ?? "").toString().trim();
            return raw ? raw : "ê¸°íƒ€í•œì‹";
        }

        function setHansikHero(subVal) {
            const titleBase = "í•œì‹";
            const subLabel = subVal ? ` Â· ${subVal}` : "";

            DATA.hero = {
                title: `${titleBase}${subLabel}`,
                subtitle:
                    subVal === "ë°¥" ? "ë¹„ë¹”ë°¥ Â· ë®ë°¥ Â· ë°±ë°˜ ë“± ë“ ë“ í•œ í•œ ë¼ ëª¨ìŒ"
                        : subVal === "ì°Œê°œíƒ•" ? "ë”°ëˆí•œ ì°Œê°œì™€ ì–¼í°í•œ íƒ• ìš”ë¦¬ë¥¼ ëª¨ì•˜ì–´ìš”"
                            : subVal === "ê³ ê¸°êµ¬ì´" ? "ì‚¼ê²¹ì‚´, ê°ˆë¹„, ìˆ¯ë¶ˆêµ¬ì´ ë“± ê³ ê¸° ì¢‹ì•„í•˜ëŠ” ë‚ ì— ë”±!"
                                : subVal === "ìƒì„ " ? "êµ¬ì´ Â· ì¡°ë¦¼ Â· íšŒ ë“± ë‹¤ì–‘í•œ ìƒì„  ìš”ë¦¬"
                                    : subVal === "ì¡±ë°œë³´ìŒˆ" ? "ì¡±ë°œ Â· ë³´ìŒˆ Â· ìˆ˜ìœ¡ê¹Œì§€ í‘¸ì§í•˜ê²Œ"
                                        : subVal === "êµ­ë°¥" ? "ëœ¨ëˆí•œ êµ­ë°¥ í•œ ê·¸ë¦‡ìœ¼ë¡œ ë“ ë“ í•˜ê²Œ"
                                            : subVal === "ë°˜ì°¬" ? "ì§‘ë°¥ ëŠë‚Œ ë‚˜ëŠ” ë°˜ì°¬/ë„ì‹œë½ ê°€ê²Œ ëª¨ìŒ"
                                                : subVal === "ê¸°íƒ€í•œì‹" ? "í•œì‹ ë¶„ë¥˜ì— ë“¤ì–´ê°€ì§€ ì•ŠëŠ” ë‹¤ì–‘í•œ ë©”ë‰´ ëª¨ìŒ"
                                                    : "ìš°ë¦¬ë™ë„¤ í•œì‹ ë§›ì§‘ë“¤ì„ ëª¨ì•˜ìŠµë‹ˆë‹¤.",
                image: "/uploads/sample-banner-product.png"
            };
        }

        function setBeautyHero(subVal) {
            const titleBase = "ë¯¸ìš©/ì´ë°œ";
            const subLabel = subVal ? ` Â· ${subVal}` : "";
            DATA.hero = {
                title: `${titleBase}${subLabel}`,
                subtitle:
                    subVal === "ë¯¸ìš©" ? "í—¤ì–´/ë¯¸ìš© ì„œë¹„ìŠ¤ë¥¼ ì œê³µí•˜ëŠ” ê°€ê²Œë¥¼ ëª¨ì•˜ì–´ìš”."
                        : subVal === "ì´ë°œ" ? "ì´ë°œ/ë°”ë²„ ì„œë¹„ìŠ¤ë¥¼ ì œê³µí•˜ëŠ” ê°€ê²Œë¥¼ ëª¨ì•˜ì–´ìš”."
                            : subVal === "ê¸°íƒ€" ? "ë¯¸ìš©/ì´ë°œ ë¶„ë¥˜ê°€ ë¹„ì–´ìˆëŠ” ê°€ê²Œë¥¼ ëª¨ì•˜ì–´ìš”."
                                : "ë¯¸ìš©/ì´ë°œ ì¹´í…Œê³ ë¦¬ ê°€ê²Œë¥¼ í™•ì¸í•˜ì„¸ìš”.",
                image: "/uploads/sample-banner-product.png"
            };
        }

        async function fetchJson(url) {
            const res = await fetch(url);
            return await res.json();
        }

        // âœ… ë¯¸ìš©/ì´ë°œ êµ¬ë¶„ì€ â€œbusiness_typeâ€ ìš°ì„  ì‚¬ìš© (combined_store_info ì‘ë‹µ êµ¬ì¡° ê¸°ì¤€)
        function getBeautyType(store) {
            const bt = (store.business_type ?? store.businessType ?? "").toString().trim();
            const name = (store.business_name ?? store.businessName ?? store.name ?? "").toString().trim();
            const cat = (store.category ?? store.business_category ?? store.businessCategory ?? "").toString().trim();

            const raw = (bt || cat || name).trim();

            // âœ… btê°€ â€œë¯¸ìš©â€, â€œì´ë°œâ€ë¡œ ë“¤ì–´ì˜¤ëŠ” ì¼€ì´ìŠ¤ ëŒ€ì‘
            if (raw.includes("ì´ë°œ") || raw.toLowerCase().includes("barber") || raw.includes("ë°”ë²„")) return "ì´ë°œ";
            if (raw.includes("ë¯¸ìš©") || raw.includes("í—¤ì–´") || raw.includes("ë¯¸ìš©ì‹¤")) return "ë¯¸ìš©";

            // (ì¶”í›„ ë„¤ì¼/í”¼ë¶€/ì™ì‹±ì´ business_typeì— ë“¤ì–´ì˜¤ë©´ ì—¬ê¸°ì„œ í™•ì¥ ê°€ëŠ¥)
            if (raw.includes("ë„¤ì¼")) return "ë„¤ì¼";
            if (raw.includes("í”¼ë¶€") || raw.includes("ì—ìŠ¤í…Œ")) return "í”¼ë¶€ê´€ë¦¬";
            if (raw.includes("ì™ì‹±") || raw.includes("ì œëª¨")) return "ì™ì‹±";

            return "ê¸°íƒ€";
        }

        // âœ… ê°€ê²Œê°€ íŠ¹ì • ì¹´í…Œê³ ë¦¬ì— ì†í•˜ëŠ”ì§€ í™•ì¸ (business_category ê¸°ì¤€)
        function isInCategory(store, targetCategory) {
            const cat = (store.business_category ?? "").toString().trim();
            return cat === targetCategory;
        }

        async function loadData() {
            try {
                DATA = { ...DEFAULT_DATA };
                ALL_STORES = [];

                // âœ… stores
                if (TYPE === "food") {
                    const q = new URLSearchParams();
                    q.set("category", CATEGORY);
                    const json = await fetchJson(`/api/subcategory/food?${q.toString()}`);
                    ALL_STORES = json.stores || [];

                    if (CATEGORY === "í•œì‹") {
                        DATA.filters = HANSIK_SUBS.slice();
                        setHansikHero(CURRENT_SUB);
                    } else {
                        DATA.filters = [];
                        DATA.hero = {
                            title: CATEGORY || "ì¹´í…Œê³ ë¦¬",
                            subtitle: "ì¹´í…Œê³ ë¦¬ë³„ ê°€ê²Œë¥¼ í™•ì¸í•˜ì„¸ìš”.",
                            image: "/uploads/sample-banner-product.png"
                        };
                    }

                    applySubFilter(CURRENT_SUB, false);

                    try {
                        const best = await fetchJson(`/api/subcategory/food/best`);
                        DATA.best = best.stores || [];
                    } catch (_) { }
                    try {
                        const nw = await fetchJson(`/api/subcategory/food/new`);
                        DATA.new = nw.stores || [];
                    } catch (_) { }

                } else if (TYPE === "beauty" || TYPE === "combined") {

                    const json = await fetchJson(`/api/subcategory/beauty?category=${encodeURIComponent(CATEGORY)}`);

                    let stores = json.stores || [];

                    // âœ… (ê·¼ë³¸) ì–´ë–¤ ì¹´í…Œê³ ë¦¬ë“  "ìš”ì²­ ì¹´í…Œê³ ë¦¬ë§Œ" ë‚¨ê¸´ë‹¤
                    stores = stores.filter(s => isInCategory(s, CATEGORY));

                    ALL_STORES = stores;

                    if (CATEGORY === "ë¯¸ìš©/ì´ë°œ") {
                        DATA.filters = BEAUTY_SUBS.slice();
                        setBeautyHero(CURRENT_SUB);
                        applySubFilter(CURRENT_SUB, false);  // ì—¬ê¸°ì„œ 2ì°¨(ë¯¸ìš©/ì´ë°œ) ë¶„ë¦¬
                    } else {
                        // ë‹¤ë¥¸ ë·°í‹° ì¹´í…Œê³ ë¦¬ë©´ ê·¸ëƒ¥ í•´ë‹¹ ì¹´í…Œê³ ë¦¬ë§Œ ë³´ì—¬ì¤Œ(ì´ë¯¸ 1ì°¨ í•„í„° ë)
                        DATA.filters = [];
                        DATA.stores = ALL_STORES.slice();
                        DATA.hero = {
                            title: CATEGORY || "ì¹´í…Œê³ ë¦¬",
                            subtitle: "ì¹´í…Œê³ ë¦¬ë³„ ê°€ê²Œë¥¼ í™•ì¸í•˜ì„¸ìš”.",
                            image: "/uploads/sample-banner-product.png"
                        };
                    }

                    // best/new (ìˆìœ¼ë©´ ê°€ì ¸ì˜¤ê¸°)
                    try {
                        const best = await fetchJson(`/api/subcategory/beauty/best`);
                        DATA.best = best.stores || [];
                    } catch (_) { }
                    try {
                        const nw = await fetchJson(`/api/subcategory/beauty/new`);
                        DATA.new = nw.stores || [];
                    } catch (_) { }

                } else {
                    ALL_STORES = [];
                    DATA = { ...DEFAULT_DATA };
                }

            } catch (e) {
                console.error("ë°ì´í„° ë¶ˆëŸ¬ì˜¤ê¸° ì‹¤íŒ¨:", e);
                ALL_STORES = [];
                DATA = { ...DEFAULT_DATA };
            }

            init();
        }

        function applySubFilter(subVal, updateHistory = true) {
            const sub = (subVal || "").trim();
            CURRENT_SUB = sub;

            // âœ… í•œì‹ì—ì„œë§Œ detail_categoryë¡œ ë¶„ë¦¬
            if (TYPE === "food" && CATEGORY === "í•œì‹") {
                if (!sub) {
                    DATA.stores = ALL_STORES.slice();
                    setHansikHero("");
                    if (updateHistory) {
                        const q = new URLSearchParams(location.search);
                        q.delete("sub");
                        history.replaceState(null, "", `${location.pathname}?${q.toString()}`);
                    }
                    return;
                }

                DATA.stores = ALL_STORES.filter(s => getDetailCategory(s) === sub);
                setHansikHero(sub);

                if (updateHistory) {
                    const q = new URLSearchParams(location.search);
                    q.set("sub", sub);
                    history.replaceState(null, "", `${location.pathname}?${q.toString()}`);
                }
                return;
            }

            // âœ… ë¯¸ìš©/ì´ë°œì€ business_type ê¸°ì¤€ìœ¼ë¡œ ë¶„ë¦¬
            if ((TYPE === "beauty" || TYPE === "combined") && CATEGORY === "ë¯¸ìš©/ì´ë°œ") {
                if (!sub) {
                    DATA.stores = ALL_STORES.slice();
                    setBeautyHero("");
                    if (updateHistory) {
                        const q = new URLSearchParams(location.search);
                        q.delete("sub");
                        // ì›ë˜ categoryê°€ ë¯¸ìš©/ì´ë°œë¡œ ë“¤ì–´ì˜¤ëŠ” ê²½ìš°ë„ ìˆìœ¼ë‹ˆ ìœ ì§€
                        history.replaceState(null, "", `${location.pathname}?${q.toString()}`);
                    }
                    return;
                }

                DATA.stores = ALL_STORES.filter(s => getBeautyType(s) === sub);
                setBeautyHero(sub);

                if (updateHistory) {
                    const q = new URLSearchParams(location.search);
                    q.set("sub", sub);
                    // âœ… categoryê°€ ì›ë˜ 'ë¯¸ìš©'ìœ¼ë¡œ ë“¤ì–´ì™”ë˜ ê²½ìš°ë„ historyëŠ” ë¯¸ìš©/ì´ë°œ ìœ ì§€(ì¡°íšŒí‚¤ ì•ˆì •)
                    q.set("category", "ë¯¸ìš©/ì´ë°œ");
                    history.replaceState(null, "", `${location.pathname}?${q.toString()}`);
                }
                return;
            }

            // ê·¸ ì™¸ëŠ” í•„í„° ì—†ìŒ
            DATA.stores = ALL_STORES.slice();
        }

        function renderPagedAdStores(stores) {
            const grid = document.getElementById("lineGrid");
            grid.innerHTML = "";

            if (!stores || !stores.length) {
                grid.innerHTML = `
          <div class="col-span-full flex justify-center items-center py-16">
            <div class="p-8 text-center max-w-md">
              <h3 class="text-lg font-semibold text-gray-700 mb-2">ë“±ë¡ëœ ê°€ê²Œê°€ ì—†ìŠµë‹ˆë‹¤</h3>
              <p class="text-sm text-gray-500">ë¹ ë¥¸ ì‹œì¼ ë‚´ì— ìƒˆë¡œìš´ ê°€ê²Œê°€ ì¶”ê°€ë  ì˜ˆì •ì…ë‹ˆë‹¤.</p>
            </div>
          </div>`;
                return;
            }

            const wrapper = document.createElement("div");
            wrapper.className = "col-span-full grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6";

            stores.forEach(store => {
                const card = document.createElement("div");
                card.className = "rounded-2xl cursor-pointer hover:shadow-lg transition overflow-hidden flex flex-col h-auto bg-white";

                const dispName = store.name ?? store.business_name ?? store.businessName ?? store.title ?? "-";
                const dispCategory = store.category ?? store.business_category ?? store.businessCategory ?? "";
                const imgSrc = store.image ?? store.image_url ?? store.url ?? "/uploads/no-image.png";
                const imgNorm = normalizeSrc(imgSrc);

                card.innerHTML = `
          <div class="relative h-[260px]">
            <img src="${imgNorm}" alt="${escapeHtml(dispName)}" class="w-full h-full object-cover rounded-t-2xl">
            <div class="absolute left-0 right-0 bottom-0 bg-white/90 backdrop-blur px-4 py-2 text-center rounded-b-2xl">
              <div class="font-bold text-lg text-gray-800 leading-tight truncate">${escapeHtml(dispName)}</div>
              <div class="text-sm text-gray-600">${escapeHtml(dispCategory)}</div>
            </div>
          </div>`;

                card.addEventListener("click", () => {
                    const bt = store.business_type ?? store.businessType ?? "";
                    const type = (bt === "ìŒì‹ì " || bt === "ìŒì‹") ? "food" : "combined";
                    window.location.href = `/ndetail.html?id=${store.id}&type=${type}`;
                });

                wrapper.appendChild(card);
            });

            grid.appendChild(wrapper);
        }

        function renderSmallGrid(gridId, items) {
            const grid = document.getElementById(gridId);
            grid.innerHTML = "";

            if (!items || !items.length) {
                grid.innerHTML = `<div class="col-span-full text-center text-gray-500">ë“±ë¡ëœ ê°€ê²Œê°€ ì—†ìŠµë‹ˆë‹¤.</div>`;
                return;
            }

            items.forEach(item => {
                const name = item.name ?? item.business_name ?? "-";
                const img = normalizeSrc(item.image ?? item.image_url ?? "/uploads/no-image.png");
                const card = document.createElement("a");
                card.href = "#";
                card.className = "block rounded-2xl overflow-hidden bg-white hover:shadow-lg transition";
                card.innerHTML = `
          <div class="h-40">
            <img src="${img}" alt="${escapeHtml(name)}" class="w-full h-full object-cover">
          </div>
          <div class="p-3 text-sm font-semibold truncate">${escapeHtml(name)}</div>
        `;
                grid.appendChild(card);
            });
        }

        function bindHero() {
            document.getElementById("heroTitle").innerHTML = (DATA.hero?.title || "").replace(/\n/g, "<br>");
            document.getElementById("heroSubtitle").textContent = DATA.hero?.subtitle || "";
            document.getElementById("heroImage").src = DATA.hero?.image || "/uploads/sample-banner-product.png";
        }

        function makeFilterBtn(label, tagVal) {
            const btn = document.createElement("button");
            btn.type = "button";

            const isActive = (CURRENT_SUB || "") === (tagVal || "");
            btn.className = isActive
                ? "px-3 py-1.5 rounded-full bg-black text-white text-sm"
                : "px-3 py-1.5 rounded-full bg-gray-200 hover:bg-gray-300 text-sm";

            btn.textContent = label;

            btn.onclick = () => {
                applySubFilter(tagVal || "", true);
                bindHero();
                renderFilters(); // âœ… active ìŠ¤íƒ€ì¼ ê°±ì‹ 
                renderPagedAdStores(DATA.stores || []);
            };
            return btn;
        }

        function renderFilters() {
            const wrap = document.getElementById("filterContainer");
            wrap.innerHTML = "";

            // âœ… í•œì‹ì´ë©´ í•­ìƒ ì†Œì œëª© ë²„íŠ¼
            if (TYPE === "food" && CATEGORY === "í•œì‹") {
                wrap.appendChild(makeFilterBtn("All", ""));
                HANSIK_SUBS.forEach(tag => wrap.appendChild(makeFilterBtn(tag, tag)));
                return;
            }

            // âœ… ë¯¸ìš©/ì´ë°œì´ë©´ business_type í•„í„° ë²„íŠ¼
            if ((TYPE === "beauty" || TYPE === "combined") && CATEGORY === "ë¯¸ìš©/ì´ë°œ") {
                wrap.appendChild(makeFilterBtn("All", ""));
                BEAUTY_SUBS.forEach(tag => wrap.appendChild(makeFilterBtn(tag, tag)));
                return;
            }

            // ê·¸ ì™¸ëŠ” í•„í„° ì—†ìŒ
        }

        function init() {
            bindHero();
            renderFilters();
            renderPagedAdStores(DATA.stores || []);
            renderSmallGrid("bestGrid", DATA.best || []);
            renderSmallGrid("newGrid", DATA.new || []);
        }

        document.addEventListener("DOMContentLoaded", loadData);

        function goBack() {
            if (document.referrer && document.referrer !== location.href) window.history.back();
            else window.location.href = "/category.html";
        }
        function goNext() { window.history.forward(); }
    </script>
</body>

</html>