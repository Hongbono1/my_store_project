<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0" />
    <title>ì •ë³´ ì…ë ¥ (Neo/Glass/3D)</title>

    <script>
        window.tailwind = window.tailwind || {};
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: { primary: "#1e3a8a", accent: "#22c55e" },
                    fontFamily: {
                        sans: ["Inter", "Noto Sans KR", "Apple SD Gothic Neo", "ui-sans-serif", "system-ui"]
                    }
                }
            }
        };
    </script>

    <!-- Tailwind (ë°°í¬ìš©: /assets/css/tailwind.css ì‚¬ìš© ìœ ì§€) -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Daum ìš°í¸ë²ˆí˜¸ / Kakao ì§€ë„ -->
    <script src="https://t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>
    <script
        src="https://dapi.kakao.com/v2/maps/sdk.js?appkey=6286d4d9bc1d503495b03f46622b5dc8&autoload=false&libraries=services"></script>

    <style>
        /* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
       Neumorphism + Glass + subtle 3D
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        body {
            background: radial-gradient(1200px 800px at 10% 10%, #eef3ff 0%, #f7f9ff 35%, #f9fbff 55%, #ffffff 100%);
        }

        .neo-shell {
            background: rgba(255, 255, 255, .65);
            backdrop-filter: blur(8px);
            border-radius: 2rem;
            border: 1px solid rgba(255, 255, 255, .7);
            box-shadow: 16px 16px 40px rgba(32, 58, 102, .08), -8px -8px 32px rgba(255, 255, 255, .9), inset 0 1px 0 rgba(255, 255, 255, .65);
        }

        .neo-section {
            background: rgba(255, 255, 255, .92);
            border-radius: 1.25rem;
            border: 1px solid rgba(255, 255, 255, .75);
            box-shadow: 8px 8px 24px rgba(0, 0, 0, .06), -6px -6px 18px rgba(255, 255, 255, .9), inset 0 1px 0 rgba(255, 255, 255, .65);
            transition: transform .15s ease, box-shadow .2s ease, background .2s ease;
        }

        .neo-section:hover {
            transform: translateY(-1px);
            box-shadow: 12px 12px 28px rgba(0, 0, 0, .08), -8px -8px 20px rgba(255, 255, 255, .95), inset 0 1px 0 rgba(255, 255, 255, .7);
        }

        .neo-input {
            background: linear-gradient(180deg, #fff, #f6f8ff);
            border: 1px solid rgba(131, 151, 255, .35);
            border-radius: .875rem;
            box-shadow: 4px 4px 14px rgba(0, 61, 255, .06), -3px -3px 10px rgba(255, 255, 255, .95), inset 0 1px 0 rgba(255, 255, 255, .85);
            transition: box-shadow .15s ease, background .15s ease;
        }

        .neo-input:focus {
            outline: none;
            box-shadow: 0 0 0 3px rgba(80, 129, 255, .15), 4px 4px 14px rgba(0, 61, 255, .08), inset 0 1px 0 rgba(255, 255, 255, .9);
            background: linear-gradient(180deg, #fff, #eef3ff);
        }

        .neo-btn {
            background: linear-gradient(180deg, #fff, #eef2ff);
            border: 1px solid rgba(96, 122, 255, .35);
            border-radius: .875rem;
            box-shadow: 6px 6px 18px rgba(0, 61, 255, .08), -4px -4px 14px rgba(255, 255, 255, .9), inset 0 1px 0 rgba(255, 255, 255, .85);
            color: #1e3a8a;
            font-weight: 700;
            transition: transform .12s ease, box-shadow .12s ease;
        }

        .neo-btn:hover {
            transform: translateY(-1px);
            box-shadow: 8px 8px 22px rgba(0, 61, 255, .12), -5px -5px 16px rgba(255, 255, 255, .95), inset 0 1px 0 rgba(255, 255, 255, .9);
        }

        .neo-danger {
            border: 1px solid rgba(255, 59, 59, .35);
            color: #991b1b;
        }

        .hint {
            color: #5b6b8c;
        }

        /* ì‚¬ì—…ìë²ˆí˜¸ ì…ë ¥ 3ì¹¸ */
        #bizRow {
            overflow-x: visible !important;
            flex-wrap: wrap;
        }

        /*
        #biz1 {
            width: 7ch !important;
            padding: .45rem .5rem !important;
            font-size: .95rem;
        }

        #biz2 {
            width: 5ch !important;
            padding: .45rem .5rem !important;
            font-size: .95rem;
        }

        #biz3 {
            width: 9ch !important;
            padding: .45rem .5rem !important;
            font-size: .95rem;
        }
        */

        #bizRow .neo-btn {
            margin-top: .5rem;
        }

        .mnu-file {
            width: 9rem;
            padding: .4rem .5rem;
            font-size: .875rem;
        }

        input.mnu-file[type="file"] {
            width: 9rem;
            padding: .4rem .5rem;
            font-size: .875rem;
            text-align: center;
        }

        input.mnu-file[type="file"]::file-selector-button {
            padding: .4rem .6rem;
            border: 1px solid rgba(96, 122, 255, .35);
            border-radius: .5rem;
            background: linear-gradient(180deg, #fff, #eef2ff);
            cursor: pointer;
        }

        .mnu-cell-center {
            justify-self: center;
        }
    </style>
</head>

<body class="flex flex-col min-h-screen">
    <!-- í—¤ë” -->
    <div id="header-placeholder"></div>

    <!-- ë©”ì¸ -->
    <main class="flex-grow container mx-auto px-4 py-10">
        <div class="neo-shell max-w-2xl mx-auto p-5 sm:p-8">
            <h2 class="text-3xl md:text-4xl font-extrabold text-center text-blue-900 tracking-tight">ì •ë³´ ì…ë ¥</h2>
            <p class="text-center mt-2 hint">ì‚¬ì—…ì ì¸ì¦ë¶€í„° ë©”ë‰´ ë“±ë¡, ì§€ë„ê¹Œì§€ í•œ ë²ˆì— ë“±ë¡í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>

            <!-- âœ… ë‹¨ì¼ form (ê°€ê²Œì •ë³´ + ë©”ë‰´) -->
            <form id="storeForm" class="mt-8 space-y-6" enctype="multipart/form-data" method="POST">
                <input type="hidden" id="storeId" name="storeId" />
                <input type="hidden" id="bizVerified" name="bizVerified" value="N">
                <input type="hidden" id="bizNumber" name="bizNumber" value="">

                <!-- â‘  ì‚¬ì—…ì ë“±ë¡ ì¸ì¦ (Tailwind-only) -->
                <!-- â‘  ì‚¬ì—…ì ë“±ë¡ ì¸ì¦ -->
                <section class="neo-section p-5">
                    <h3 class="text-xl font-bold text-blue-900 mb-4">â‘  ì‚¬ì—…ì ë“±ë¡ ì¸ì¦</h3>

                    <!-- ê³µí†µ 2ì—´: ë¼ë²¨ / ì…ë ¥ -->
                    <div class="grid grid-cols-1 md:grid-cols-[9rem_1fr] gap-3 items-center">

                        <!-- ì‚¬ì—…ì ë²ˆí˜¸ -->
                        <label class="text-blue-900 font-medium md:text-right">ì‚¬ì—…ì ë²ˆí˜¸</label>
                        <div class="flex items-center gap-2">
                            <!-- ì…ë ¥ì¹¸ ë¬¶ìŒì€ flex-1 ë¡œ í™•ì¥ â†’ ë²„íŠ¼ì€ ìë™ìœ¼ë¡œ ìš°ì¸¡ ëìœ¼ë¡œ ì´ë™ -->
                            <div class="flex items-center gap-2 flex-1">
                                <input id="biz1" class="neo-input h-12 w-[10ch] px-3 text-center" placeholder="123"
                                    inputmode="numeric" />
                                <span class="text-slate-500">-</span>
                                <input id="biz2" class="neo-input h-12 w-[7ch] px-3 text-center" placeholder="45"
                                    inputmode="numeric" />
                                <span class="text-slate-500">-</span>
                                <input id="biz3" class="neo-input h-12 w-[12ch] px-3 text-center" placeholder="67890"
                                    inputmode="numeric" />
                            </div>
                            <!-- ë“±ë¡ì¦ íŒŒì¼ ì…ë ¥ì˜ ì˜¤ë¥¸ìª½ ëì— ë§ì¶° ì •ë ¬ë¨ -->
                            <button id="btnVerifyBiz" type="button" class="neo-btn h-12 px-5 shrink-0 ml-2">ì¸ì¦</button>
                        </div>

                        <!-- ë“±ë¡ì¦ ì´ë¯¸ì§€ -->
                        <label for="businessCertImage" class="text-blue-900 font-medium md:text-right">ë“±ë¡ì¦ ì´ë¯¸ì§€</label>
                        <input id="businessCertImage" name="businessCertImage" type="file"
                            accept="image/*,application/pdf" class="neo-input h-12 w-full px-3
             file:mr-3 file:px-4 file:py-2 file:rounded
             file:border file:border-blue-200 file:bg-blue-50" />
                    </div>

                    <p class="text-sm text-center mt-2">
                        * ë“±ë¡ì¦ì€ <span class="text-red-600 font-semibold">3ê°œì›” ì´ë‚´ ë°œê¸‰ë¶„</span>ë§Œ ì¸ì •
                    </p>
                    <p id="bizVerifyResult" class="text-sm text-center mt-1"></p>
                </section>

                <!-- 2) ëŒ€í‘œ ì •ë³´ -->
                <section class="neo-section p-5">
                    <h3 class="text-xl font-bold text-blue-900 mb-4">â‘¡ ëŒ€í‘œ ì •ë³´</h3>

                    <div class="flex flex-col md:flex-row md:items-center gap-3 mb-3">
                        <label class="w-36 font-medium text-blue-900 text-center shrink-0" for="ownerName">ëŒ€í‘œì
                            ì„±í•¨</label>
                        <input id="ownerName" name="ownerName" placeholder="ì˜ˆ: í™ê¸¸ë™" class="neo-input flex-1 px-3 py-2">
                    </div>

                    <div class="flex flex-col md:flex-row md:items-center gap-3 mb-3">
                        <label class="w-36 font-medium text-blue-900 text-center shrink-0" for="birthDate">ìƒë…„ì›”ì¼</label>
                        <input type="date" id="birthDate" name="birthDate" class="neo-input flex-1 px-3 py-2">
                    </div>

                    <div class="flex flex-col md:flex-row md:items-center gap-3 mb-3">
                        <label class="w-36 font-medium text-blue-900 text-center shrink-0">ì´ë©”ì¼</label>
                        <div class="flex flex-wrap items-center gap-2 flex-1 min-w-0">
                            <input id="emailId" placeholder="ì•„ì´ë””" class="neo-input flex-1 min-w-0 px-3 py-2">
                            <span class="shrink-0">@</span>
                            <select id="emailDomainSelect" class="neo-input flex-1 min-w-0 px-3 py-2">
                                <option value="">ì„ íƒí•˜ì„¸ìš”</option>
                                <option value="naver.com">naver.com</option>
                                <option value="gmail.com">gmail.com</option>
                                <option value="daum.net">daum.net</option>
                                <option value="kakao.com">kakao.com</option>
                                <option value="nate.com">nate.com</option>
                                <option value="custom">ì§ì ‘ì…ë ¥</option>
                            </select>
                            <input id="customDomainInput" placeholder="ë„ë©”ì¸"
                                class="hidden neo-input flex-1 min-w-0 px-3 py-2">
                        </div>
                        <input type="hidden" id="ownerEmail" name="ownerEmail">
                    </div>

                    <div class="flex flex-col md:flex-row md:items-center gap-3 mb-3">
                        <label class="w-36 font-medium text-blue-900 text-center shrink-0" for="ownerAddress">ëŒ€í‘œ
                            ì£¼ì†Œ</label>
                        <input id="ownerAddress" name="ownerAddress" placeholder="ì˜ˆ: ì„œìš¸ì‹œ â€¦"
                            class="neo-input flex-1 px-3 py-2">
                    </div>

                    <div class="flex flex-col md:flex-row md:items-center gap-3">
                        <label class="w-36 font-medium text-blue-900 text-center shrink-0" for="ownerPhone">í•¸ë“œí°
                            ë²ˆí˜¸</label>
                        <input id="ownerPhone" name="ownerPhone" placeholder="010-1234-5678"
                            class="neo-input flex-1 px-3 py-2">
                    </div>
                </section>

                <!-- 3) íœ´ëŒ€ì „í™” ì¸ì¦ -->
                <section class="neo-section p-5">
                    <h3 class="text-xl font-bold text-blue-900 mb-4">â‘¢ íœ´ëŒ€ì „í™” ì¸ì¦</h3>
                    <div class="flex flex-col md:flex-row md:items-center gap-3 mb-2">
                        <label class="w-36 font-medium text-blue-900 text-center shrink-0" for="phoneAuth">ì¸ì¦ë²ˆí˜¸</label>
                        <input id="phoneAuth" name="phoneAuth" placeholder="ì¸ì¦ë²ˆí˜¸ ì…ë ¥" class="neo-input flex-1 px-3 py-2">
                        <button type="button" id="verifyPhoneButton" class="neo-btn px-4 py-2">ì¸ì¦ ìš”ì²­</button>
                    </div>
                    <p id="phoneVerifyResult" class="text-sm text-center"></p>
                </section>

                <!-- 4) ê¸°ë³¸ ì •ë³´ -->
                <section class="neo-section p-5">
                    <h3 class="text-xl font-bold text-blue-900 mb-4">â‘£ ê¸°ë³¸ ì •ë³´</h3>

                    <div class="flex flex-col md:flex-row md:items-center gap-3 mb-3">
                        <label class="w-36 font-medium text-blue-900 text-center shrink-0" for="businessName">ìƒí˜¸</label>
                        <input id="businessName" name="businessName" placeholder="OO ì‹ë‹¹ â€¦"
                            class="neo-input flex-1 px-3 py-2">
                    </div>

                    <div class="flex flex-col md:flex-row md:items-center gap-3 mb-3 relative">
                        <label class="w-36 font-medium text-blue-900 text-center shrink-0">ì—…ì¢…</label>
                        <div class="flex items-center gap-2 relative flex-1">
                            <input name="businessType" placeholder="ì˜ˆ: ìŒì‹ì , ì¹´í˜, ìˆ™ë°• ë“±"
                                class="neo-input flex-1 px-3 py-2" />

                            <!-- ğŸ”¹ onclickì—ì„œ event ì œê±° -->
                            <button id="helpBtn" type="button" onclick="toggleTip()"
                                class="neo-btn shrink-0 px-3 py-2 rounded-full !font-bold">?</button>

                            <!-- ğŸ”¹ fixed â†’ absolute, ë²„íŠ¼ ì•„ë˜ì— ë‚˜ì˜¤ë„ë¡ ì •ë ¬ -->
                            <div id="tipBox"
                                class="absolute right-0 top-full mt-2 w-64 p-4 neo-section text-sm z-20 hidden">
                                <strong class="block mb-2 text-blue-700">ì—…ì¢… ì˜ˆì‹œ</strong>
                                ì‹ë‹¹, ë³‘ì›, ì•½êµ­, ì–´ë¦°ì´ì§‘, í•™ì›, ë§ˆíŠ¸<br>
                                í¸ì˜ì , ìš´ë™, ë¯¸ìš©, ì´ë°œ, ì„¸íƒ, ì˜·ìˆ˜ì„ <br>
                                ìŠ¤í„°ë””ë£¸, ë…ì„œì‹¤, ëª©ìš•, ìˆ™ë°•, ì¤‘ê³ , êµ¬ì œ<br>
                                ìë™ì°¨ ì •ë¹„, ì£¼ìœ ì†Œ, ë°˜ë ¤ë™ë¬¼, ê°€ì „ì œí’ˆ<br>
                                ì² ë¬¼, ìì¬, ê°„íŒ, ê´‘ê³ , í†µì‹ , ì¸í„°ë„·, TV<br>
                                ì•ˆê²½, ì‚¬ì§„, ê½ƒì§‘ ë“± ì—…ì— ê´€ë ¨ëœ ì¢…ëª© ê¸°ì…
                            </div>
                        </div>
                    </div>

                    <!-- ì—…ì¢… êµ¬ë¶„ -->
                    <div class="flex flex-col md:flex-row md:items-center gap-3 mb-3 relative">
                        <label class="w-36 font-medium text-blue-900 text-center shrink-0"
                            for="businessType">ì—…ì¢…êµ¬ë¶„</label>
                        <input id="businessCategoryDisplay" readonly placeholder="ì„ íƒ"
                            class="neo-input flex-1 px-3 py-2 bg-gray-100 cursor-pointer">
                        <button type="button" id="categoryToggle" class="neo-btn px-3 py-2 shrink-0">â–¼</button>
                        <ul id="categoryList" class="absolute left-36 top-full mt-1 w-60 neo-section hidden z-50">
                            <li data-value="í•œì‹" class="px-3 py-2 hover:bg-blue-50 cursor-pointer rounded">í•œì‹</li>
                            <li data-value="ì–‘ì‹" class="px-3 py-2 hover:bg-blue-50 cursor-pointer rounded">ì–‘ì‹</li>
                            <li data-value="ì¤‘ì‹" class="px-3 py-2 hover:bg-blue-50 cursor-pointer rounded">ì¤‘ì‹</li>
                            <li data-value="ì¼ì‹" class="px-3 py-2 hover:bg-blue-50 cursor-pointer rounded">ì¼ì‹</li>
                            <li data-value="íŒ¨ìŠ¤íŠ¸í‘¸ë“œ" class="px-3 py-2 hover:bg-blue-50 cursor-pointer rounded">íŒ¨ìŠ¤íŠ¸í‘¸ë“œ</li>
                            <li data-value="ì¹˜í‚¨" class="px-3 py-2 hover:bg-blue-50 cursor-pointer rounded">ì¹˜í‚¨</li>
                            <li data-value="ì¹´í˜" class="px-3 py-2 hover:bg-blue-50 cursor-pointer rounded">ì¹´í˜</li>
                            <li data-value="ìŠ¤íŠ¸ë¦¬íŠ¸í‘¸ë“œ" class="px-3 py-2 hover:bg-blue-50 cursor-pointer rounded">ìŠ¤íŠ¸ë¦¬íŠ¸í‘¸ë“œ
                            </li>
                            <li data-value="ë¶„ì‹" class="px-3 py-2 hover:bg-blue-50 cursor-pointer rounded">ë¶„ì‹</li>
                            <li data-value="ê¸°íƒ€" class="px-3 py-2 hover:bg-blue-50 cursor-pointer rounded">ê¸°íƒ€</li>
                        </ul>
                        <input type="hidden" id="businessCategory" name="businessCategory">
                    </div>

                    <!-- í•œì‹ ì„¸ë¶€ ì¹´í…Œê³ ë¦¬ -->
                    <div id="subcatRow" class="flex flex-col md:flex-row md:items-center gap-3 mb-3 relative hidden">
                        <label class="w-36 font-medium text-blue-900 text-center shrink-0" for="subcategoryDisplay">í•œì‹
                            ì¹´í…Œê³ ë¦¬</label>
                        <input id="subcategoryDisplay" readonly placeholder="ì„ íƒ"
                            class="neo-input flex-1 px-3 py-2 bg-gray-100 cursor-pointer">
                        <button type="button" id="subcategoryToggle" class="neo-btn px-3 py-2 shrink-0">â–¼</button>
                        <ul id="subcategoryList" class="absolute left-36 top-full mt-1 w-60 neo-section hidden z-10">
                            <li data-value="ë°¥ë¥˜" class="px-3 py-2 hover:bg-blue-50 cursor-pointer rounded">ë°¥ (ë¹„ë¹”ë°¥/ë®ë°¥/ë°±ë°˜)
                            </li>
                            <li data-value="ì°Œê°œ/íƒ•" class="px-3 py-2 hover:bg-blue-50 cursor-pointer rounded">ì°Œê°œ/íƒ•</li>
                            <li data-value="ê³ ê¸°/êµ¬ì´" class="px-3 py-2 hover:bg-blue-50 cursor-pointer rounded">ê³ ê¸°/êµ¬ì´
                                (ì œìœ¡ë³¶ìŒ)</li>
                            <li data-value="ìƒì„ " class="px-3 py-2 hover:bg-blue-50 cursor-pointer rounded">ìƒì„ </li>
                            <li data-value="ì¡±ë°œ/ë³´ìŒˆ" class="px-3 py-2 hover:bg-blue-50 cursor-pointer rounded">ì¡±ë°œ/ë³´ìŒˆ</li>
                            <li data-value="êµ­ë°¥" class="px-3 py-2 hover:bg-blue-50 cursor-pointer rounded">êµ­ë°¥</li>
                            <li data-value="ë°˜ì°¬" class="px-3 py-2 hover:bg-blue-50 cursor-pointer rounded">ë°˜ì°¬</li>
                            <li data-value="ê¸°íƒ€" class="px-3 py-2 hover:bg-blue-50 cursor-pointer rounded">ê¸°íƒ€</li>
                        </ul>
                        <input type="hidden" id="businessSubcategory" name="businessSubcategory">
                    </div>

                    <div class="flex flex-col md:flex-row md:items-center gap-3 mb-3">
                        <label class="w-36 font-medium text-blue-900 text-center shrink-0"
                            for="businessHours">ì˜ì—…ì‹œê°„</label>
                        <input id="businessHours" name="businessHours" placeholder="09:00 ~ 22:00"
                            class="neo-input flex-1 px-3 py-2">
                    </div>

                    <div id="deliveryRow" class="flex flex-col md:flex-row md:items-center gap-3">
                        <label class="w-36 font-medium text-blue-900 text-center shrink-0 leading-tight">ë°°ë‹¬ ì—¬ë¶€</label>
                        <div class="flex-1">
                            <select id="deliveryOption" name="deliveryOption" class="neo-input w-full px-3 py-2 h-12"
                                required>
                                <option value="" disabled selected>ì„ íƒí•˜ì„¸ìš”</option>
                                <option value="ê°€ëŠ¥">ê°€ëŠ¥</option>
                                <option value="ë¶ˆê°€">ë¶ˆê°€</option>
                                <option value="ì¼ë¶€ ê°€ëŠ¥">ì¼ë¶€ ê°€ëŠ¥</option>
                            </select>
                        </div>
                    </div>
                </section>

                <!-- 5) ì„œë¹„ìŠ¤ ë‚´ìš© -->
                <section class="neo-section p-5">
                    <h3 class="text-xl font-bold text-blue-900 mb-3">â‘¤ ì„œë¹„ìŠ¤ ë‚´ìš©</h3>
                    <textarea id="serviceDetails" name="serviceDetails" rows="4" placeholder="ì„œë¹„ìŠ¤Â·ë©”ë‰´Â·ì˜ˆì•½ ì •ë³´ â€¦"
                        class="neo-input w-full px-3 py-2"></textarea>
                </section>

                <!-- 6) ê³ ê° ì´ë²¤íŠ¸ -->
                <section class="neo-section p-5">
                    <h3 class="text-xl font-bold text-blue-900 mb-4">â‘¥ ê³ ê° ì´ë²¤íŠ¸</h3>
                    <div class="mb-3">
                        <label class="block font-medium text-blue-900 mb-1" for="event1">ì´ë²¤íŠ¸ ë‚´ìš© 1</label>
                        <input id="event1" name="event1" placeholder="ì´ë²¤íŠ¸ ë‚´ìš© 1" class="neo-input w-full px-3 py-2">
                    </div>
                    <div>
                        <label class="block font-medium text-blue-900 mb-1" for="event2">ì´ë²¤íŠ¸ ë‚´ìš© 2</label>
                        <input id="event2" name="event2" placeholder="ì´ë²¤íŠ¸ ë‚´ìš© 2" class="neo-input w-full px-3 py-2">
                    </div>
                </section>

                <!-- 7) ê¸°íƒ€ ì •ë³´ -->
                <section class="neo-section p-5">
                    <h3 class="text-xl font-bold text-blue-900 mb-4">â‘¦ ê¸°íƒ€ ì •ë³´</h3>
                    <div class="flex flex-col md:flex-row md:items-center gap-3 mb-3">
                        <label class="w-36 font-medium text-blue-900 text-center shrink-0" for="facility">ì¥ì• ì¸
                            í¸ì˜ì‹œì„¤</label>
                        <input id="facility" name="facilities" placeholder="ì™€ì´íŒŒì´, ì£¼ì°¨, í¬ì¥ ê°€ëŠ¥"
                            class="neo-input flex-1 px-3 py-2">
                    </div>
                    <div class="flex flex-col md:flex-row md:items-center gap-3 mb-3">
                        <label class="w-36 font-medium text-blue-900 text-center shrink-0" for="pets">ë°˜ë ¤ë™ë¬¼ ì¶œì…</label>
                        <select id="pets" name="petsAllowed" class="neo-input flex-1 px-3 py-2">
                            <option value="">ì„ íƒ</option>
                            <option value="true">ê°€ëŠ¥</option>
                            <option value="false">ë¶ˆê°€</option>
                        </select>
                    </div>
                    <div class="flex flex-col md:flex-row md:items-center gap-3">
                        <label class="w-36 font-medium text-blue-900 text-center shrink-0" for="parking">ì£¼ì°¨ ì •ë³´</label>
                        <input id="parking" name="parking" placeholder="ì „ìš© / ìœ ë£Œ â€¦" class="neo-input flex-1 px-3 py-2">
                    </div>
                </section>

                <!-- â‘§ ë©”ë‰´ ë“±ë¡ (ë‹¨ìˆœ í¼) -->
                <section class="neo-section p-5 mb-16" id="mnu-section">
                    <h3 class="text-xl font-bold text-blue-900 mb-4">â‘§ ë©”ë‰´ ë“±ë¡ (ì¹´í…Œê³ ë¦¬ â†’ í’ˆëª©)</h3>

                    <!-- âœ… ìƒˆ ì¹´í…Œê³ ë¦¬ ì…ë ¥/ì¶”ê°€ UI (ì—¬ê¸°ì— ì¶”ê°€) -->
                    <div class="flex flex-col sm:flex-row items-center gap-2 mb-3">
                        <input id="newCatInput" type="text" placeholder="ìƒˆ ì¹´í…Œê³ ë¦¬ ì´ë¦„ (ì˜ˆ: ì„¸íŠ¸ë©”ë‰´)"
                            class="neo-input px-3 py-2 w-full sm:flex-1">
                        <button type="button" id="btnAddCat" class="neo-btn px-4 py-2 shrink-0">ì¹´í…Œê³ ë¦¬ ì¶”ê°€</button>
                    </div>

                    <!-- ì¹´í…Œê³ ë¦¬ë³„ í’ˆëª© ë¦¬ìŠ¤íŠ¸ íŒ¨ë„ -->
                    <div id="menuCategoryPanels" class="space-y-6"></div>

                    <!-- âœ… í•˜ë‹¨ ì»¨íŠ¸ë¡¤ ë°” -->
                    <div class="mt-5 pt-3 border-t flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between">
                        <div class="text-sm hint">
                            í˜„ì¬ ì¹´í…Œê³ ë¦¬: <span id="currentCatText" class="font-semibold text-blue-900">ì„ íƒ ì „</span>
                        </div>
                        <div class="flex flex-wrap items-center gap-2">
                            <!-- ìƒˆ ì¹´í…Œê³ ë¦¬ ì…ë ¥ -->
                            <input id="newCatInput2" type="text" placeholder="ìƒˆ ì¹´í…Œê³ ë¦¬" class="neo-input px-3 py-2 w-40">
                            <button type="button" id="btnAddCat2" class="neo-btn px-3 py-2 text-sm">ì¶”ê°€</button>

                            <!-- í’ˆëª© ì¶”ê°€ -->
                            <button type="button" id="btnAddItem" class="neo-btn px-3 py-2 text-sm" disabled>í’ˆëª©
                                ì¶”ê°€</button>
                        </div>
                    </div>

                    <!-- í’ˆëª© í–‰ í…œí”Œë¦¿ -->
                    <template id="menuRowTmpl">
                        <div class="grid grid-cols-1 md:grid-cols-[auto_minmax(0,2fr)_minmax(0,1fr)_minmax(0,1fr)_auto]
              gap-3 items-start border rounded-lg p-3 bg-white overflow-hidden">
                            <input type="file" name="menuImage[]" accept="image/*"
                                class="neo-input mnu-file mnu-cell-center shrink-0 w-28 md:w-36" />

                            <input type="text" name="menuName[]" placeholder="ë©”ë‰´ëª…" class="neo-input px-3 py-2 min-w-0"
                                required />

                            <input type="text" name="menuPrice[]" placeholder="ê°€ê²©(ìˆ«ì)"
                                class="neo-input px-3 py-2 min-w-0" inputmode="numeric" />

                            <!-- âœ… í…Œë§ˆ ì„ íƒ ì¶”ê°€ -->
                            <select name="menuTheme[]" class="neo-input px-2 py-2 text-sm text-gray-700">
                                <option value="">í…Œë§ˆ ì„ íƒ</option>
                                <option value="í•´ì¥ í•„ìš”">í•´ì¥ í•„ìš”</option>
                                <option value="ê¸°ë¶„ ì¢‹ìŒ">ê¸°ë¶„ ì¢‹ìŒ</option>
                                <option value="í”¼ê³¤í•¨">í”¼ê³¤í•¨</option>
                                <option value="ë°ì´íŠ¸">ë°ì´íŠ¸</option>
                                <option value="ê°€ì¡± ëª¨ì„">ê°€ì¡± ëª¨ì„</option>
                                <option value="ìš°ìš¸í•  ë•Œ">ìš°ìš¸í•  ë•Œ</option>
                                <option value="íšŒì‹ ìë¦¬">íšŒì‹ ìë¦¬</option>
                                <option value="ìŠ¤íŠ¸ë ˆìŠ¤ ë°›ì„ ë•Œ">ìŠ¤íŠ¸ë ˆìŠ¤ ë°›ì„ ë•Œ</option>
                                <option value="ì¶•í•˜/íŒŒí‹°">ì¶•í•˜/íŒŒí‹°</option>
                                <option value="ìš´ë™ í›„">ìš´ë™ í›„</option>
                                <option value="ë¹„ ì˜¤ëŠ” ë‚ ">ë¹„ ì˜¤ëŠ” ë‚ </option>
                                <option value="í˜¼ë°¥í•  ë•Œ">í˜¼ë°¥í•  ë•Œ</option>
                            </select>

                            <button type="button" class="neo-btn neo-danger px-3 py-2 btn-remove shrink-0">ì‚­ì œ</button>

                            <textarea name="menuDesc[]" placeholder="ì„¤ëª…(ì„ íƒ)" rows="2"
                                class="neo-input px-3 py-2 md:col-span-5 min-w-0"></textarea>

                            <input type="hidden" name="menuCategory[]" class="menu-cat-hidden" value="">
                        </div>
                    </template>
                </section>

                <!-- 9) ì—°ë½ì²˜ -->
                <section class="neo-section p-5">
                    <h3 class="text-xl font-bold text-blue-900 mb-4">â‘¨ ì—°ë½ì²˜</h3>
                    <div class="flex flex-col md:flex-row md:items-center gap-3 mb-3">
                        <label class="w-36 font-medium text-blue-900 text-center shrink-0"
                            for="phoneNumber">ëŒ€í‘œì „í™”</label>
                        <input id="phoneNumber" name="phone" placeholder="02-123-4567"
                            class="neo-input flex-1 px-3 py-2">
                    </div>
                    <div class="flex flex-col md:flex-row md:items-center gap-3 mb-3">
                        <label class="w-36 font-medium text-blue-900 text-center shrink-0" for="homepage">í™ˆí˜ì´ì§€</label>
                        <input id="homepage" name="homepage" placeholder="URL" class="neo-input flex-1 px-3 py-2">
                    </div>
                    <div class="flex flex-col md:flex-row md:items-center gap-3 mb-3">
                        <label class="w-36 font-medium text-blue-900 text-center shrink-0" for="instagram">ì¸ìŠ¤íƒ€ê·¸ë¨</label>
                        <input id="instagram" name="instagram" placeholder="Instagram URL"
                            class="neo-input flex-1 px-3 py-2">
                    </div>
                    <div class="flex flex-col md:flex-row md:items-center gap-3">
                        <label class="w-36 font-medium text-blue-900 text-center shrink-0" for="facebook">í˜ì´ìŠ¤ë¶</label>
                        <input id="facebook" name="facebook" placeholder="Facebook URL"
                            class="neo-input flex-1 px-3 py-2">
                    </div>
                </section>

                <!-- 10) ì¶”ê°€ ì„¤ëª… -->
                <section class="neo-section p-5">
                    <h3 class="text-xl font-bold text-blue-900 mb-3">â‘© ì¶”ê°€ ì„¤ëª…</h3>
                    <textarea id="additionalDesc" name="additionalDesc" rows="4" placeholder="ì¶”ê°€ ì„¤ëª…ì„ ì…ë ¥í•˜ì„¸ìš”."
                        class="neo-input w-full px-3 py-2"></textarea>
                </section>

                <!-- â‘ª ì´ë¯¸ì§€ (ìµœëŒ€ 3ì¥) -->
                <section class="neo-section p-5">
                    <h3 class="text-xl font-bold text-blue-900 mb-4">â‘ª ì´ë¯¸ì§€ (ìµœëŒ€ 3ì¥)</h3>
                    <input type="file" id="imagesInput" name="storeImages" multiple accept="image/*"
                        class="neo-input block w-full mb-3 px-3 py-2 file:mr-4 file:py-2 file:px-4 file:rounded file:bg-blue-100 file:text-blue-700 hover:file:bg-blue-200" />
                    <div id="imagesPreview" class="flex gap-3"></div>
                </section>

                <!-- 12) ì£¼ì†Œ ì…ë ¥ + ì§€ë„ -->
                <section class="neo-section p-5">
                    <h3 class="text-xl font-bold text-blue-900 mb-4">â‘« ì£¼ì†Œ ì…ë ¥</h3>
                    <div class="flex flex-col md:flex-row md:items-center gap-3 mb-3">
                        <label class="w-36 font-medium text-blue-900 text-center shrink-0" for="postalCode">ìš°í¸ë²ˆí˜¸</label>
                        <div class="flex-1 grid grid-cols-1 md:grid-cols-[1fr_auto_auto] gap-2 min-w-0">
                            <input id="postalCode" name="postalCode" placeholder="ìš°í¸ë²ˆí˜¸" readonly
                                class="neo-input w-full h-12 px-4">
                            <button type="button" onclick="openDaumPostcode()" class="neo-btn h-12 px-4 md:col-auto">ì£¼ì†Œ
                                ì°¾ê¸°</button>
                            <button type="button" onclick="clearAddress()"
                                class="neo-btn neo-danger h-12 px-4 md:col-auto">ì£¼ì†Œ ì‚­ì œ</button>
                        </div>
                    </div>

                    <div class="flex flex-col md:flex-row md:items-center gap-3 mb-3">
                        <label class="w-36 font-medium text-blue-900 text-center shrink-0" for="roadAddress">ë„ë¡œëª…
                            ì£¼ì†Œ</label>
                        <input id="roadAddress" name="roadAddress" placeholder="ë„ë¡œëª… ì£¼ì†Œ" readonly
                            class="neo-input flex-1 px-3 py-2">
                    </div>

                    <div class="flex flex-col md:flex-row md:items-center gap-3">
                        <label class="w-36 font-medium text-blue-900 text-center shrink-0" for="detailAddress">ìƒì„¸
                            ì£¼ì†Œ</label>
                        <input id="detailAddress" name="detailAddress" placeholder="ìƒì„¸ ì£¼ì†Œ"
                            class="neo-input flex-1 px-3 py-2">
                    </div>

                    <div id="map" class="w-full h-64 border border-blue-100 rounded-xl mt-4 neo-section"></div>
                </section>

                <!-- ë²„íŠ¼ -->
                <div class="text-center space-x-4 pt-2">
                    <button type="submit" class="neo-btn px-6 py-2">ì…ë ¥ ì™„ë£Œ</button>
                    <button type="button" onclick="updateData()" class="neo-btn px-6 py-2">ìˆ˜ì •</button>
                </div>
            </form>
        </div>

        <!-- ë“±ë¡ ì™„ë£Œ ëª¨ë‹¬ -->
        <div id="successModal" class="fixed inset-0 hidden z-[9999]">
            <div class="absolute inset-0 bg-black/40"></div>
            <div class="absolute inset-0 flex items-center justify-center p-4">
                <div class="neo-section w-full max-w-md p-6 text-center">
                    <h4 class="text-xl font-bold text-blue-900 mb-2">ë“±ë¡ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤</h4>
                    <p id="successText" class="text-slate-600 mb-5">ì ì‹œ í›„ ìƒì„¸ í˜ì´ì§€ë¡œ ì´ë™í•©ë‹ˆë‹¤.</p>
                    <button id="successOk" type="button" class="neo-btn px-6 py-2">í™•ì¸</button>
                </div>
            </div>
        </div>

        <!-- âœ… ìš°ì¸¡ í•˜ë‹¨ ê³ ì • ë„¤ë¹„ê²Œì´ì…˜ ë²„íŠ¼ -->
        <div class="fixed bottom-6 right-6 flex flex-col items-center space-y-3 z-50">

            <!-- ì´ì „ -->
            <button onclick="history.back()"
                class="w-12 h-12 rounded-full bg-gradient-to-br from-gray-200 to-gray-400 shadow-lg flex items-center justify-center hover:scale-105 transition">
                â†
            </button>

            <!-- ë‹¤ìŒ -->
            <button onclick="history.forward()"
                class="w-12 h-12 rounded-full bg-gradient-to-br from-green-400 to-blue-500 text-white shadow-lg flex items-center justify-center hover:scale-105 transition">
                â†’
            </button>

            <!-- í™ˆ -->
            <a href="/index.html"
                class="w-12 h-12 rounded-full bg-gradient-to-br from-blue-500 to-purple-500 text-white shadow-lg flex items-center justify-center hover:scale-105 transition">
                ğŸ 
            </a>
        </div>
    </main>

    <!-- í‘¸í„° -->
    <div id="footer-placeholder"></div>

    <!-- SCRIPT -->
    <script>
        /* =========================================================
           ê¸°ë³¸ ìƒìˆ˜ / ìƒíƒœ
        ========================================================= */
        const API = {
            REGISTER: "https://www.hongbono1.com/store",
            VERIFY_BIZ: "https://www.hongbono1.com/verify-biz"
        };
        const state = { map: null, mapMarker: null, mapGeocoder: null };

        /* =========================================================
           ìœ í‹¸
        ========================================================= */
        const qs = (sel, el = document) => el.querySelector(sel);
        const qsa = (sel, el = document) => Array.from(el.querySelectorAll(sel));
        const onlyDigits = s => String(s || "").replace(/[^\d]/g, "");
        const formatPriceView = v => (v ? onlyDigits(v).replace(/\B(?=(\d{3})+(?!\d))/g, ",") : "");

        /* ==== ì‚¬ì—…ìë²ˆí˜¸ 3ì¹¸ ì…ë ¥ UX ==== */
        function getBizNumberParts() {
            const d = s => (s || "").replace(/[^\d]/g, "");
            const b1 = d(qs("#biz1")?.value), b2 = d(qs("#biz2")?.value), b3 = d(qs("#biz3")?.value);
            return { b1, b2, b3, full: (b1 || "") + (b2 || "") + (b3 || "") };
        }
        function initBizInputs() {
            const i1 = qs("#biz1"), i2 = qs("#biz2"), i3 = qs("#biz3"), out = qs("#bizVerifyResult");
            const d = s => (s || "").replace(/[^\d]/g, "");
            const jump = (from, to, max) => {
                from?.addEventListener("input", () => {
                    from.value = d(from.value).slice(0, max);
                    if (from.value.length === max) to?.focus();
                    if (out) out.textContent = "";
                });
                from?.addEventListener("keydown", e => { if (e.key === "Backspace" && from.value.length === 0) to?.focus(); });
                from?.addEventListener("focus", () => from.select());
            };
            if (i1 && i2 && i3) {
                jump(i1, i2, 3); jump(i2, i3, 2);
                i3.addEventListener("input", () => { i3.value = d(i3.value).slice(0, 5); if (out) out.textContent = ""; });
                i1.addEventListener("paste", e => {
                    const t = (e.clipboardData || window.clipboardData).getData("text") || "";
                    const dd = t.replace(/[^\d]/g, "");
                    if (dd.length === 10) {
                        e.preventDefault();
                        i1.value = dd.slice(0, 3); i2.value = dd.slice(3, 5); i3.value = dd.slice(5); i3.focus();
                        if (out) out.textContent = "";
                    }
                });
            }
        }

        /* =========================================================
           í—¤ë”/í‘¸í„° í¬í•¨
        ========================================================= */
        async function includePartials() {
            try {
                const header = await fetch("/components/header.html").then(r => r.ok ? r.text() : "");
                const footer = await fetch("/components/footer.html").then(r => r.ok ? r.text() : "");
                if (header) qs("#header-placeholder")?.replaceChildren(document.createRange().createContextualFragment(header));
                if (footer) qs("#footer-placeholder")?.replaceChildren(document.createRange().createContextualFragment(footer));
            } catch { }
        }

        /* =========================================================
   ì‚¬ì—…ìë²ˆí˜¸ ì¸ì¦ (ì‘ë‹µ í¬ë§· ëª¨ë‘ ëŒ€ì‘)
========================================================= */
        async function verifyBiz() {
            const out = qs("#bizVerifyResult");
            const btn = qs("#btnVerifyBiz");
            const bizVerified = qs("#bizVerified");
            const bizNumber = qs("#bizNumber");
            const nameInput = qs("#businessName");

            const { b1, b2, b3, full } = getBizNumberParts();
            if (out) {
                out.textContent = "";
                out.className = "text-sm text-center";
            }

            // í˜•ì‹ ì²´í¬
            if (b1.length !== 3 || b2.length !== 2 || b3.length !== 5) {
                if (out) {
                    out.textContent = "ì‚¬ì—…ìë²ˆí˜¸ í˜•ì‹ì´ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤.";
                    out.classList.add("text-red-600");
                }
                if (bizVerified) bizVerified.value = "N";
                return;
            }

            btn && (btn.disabled = true);
            if (out) {
                out.textContent = "ì¸ì¦ ì¡°íšŒ ì¤‘â€¦";
                out.className = "text-sm text-slate-600 text-center";
            }

            try {
                const res = await fetch(API.VERIFY_BIZ, {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify({ bizNo: full })   // â˜… ì„œë²„ì™€ ì•½ì†: bizNo
                });

                if (!res.ok) throw new Error(`HTTP ${res.status}`);

                const data = await res.json();
                console.log("[verify-biz] raw response:", data);

                // âœ… ì‘ë‹µ í¬ë§· í†µí•© ì²˜ë¦¬
                let rec = null;

                if (data && typeof data === "object") {
                    // 1) { ok:true, data:{...} }
                    if (data.data && !Array.isArray(data.data) && typeof data.data === "object") {
                        rec = data.data;
                    }
                    // 2) { data:[{...}] } (odcloud ì›ë³¸)
                    else if (Array.isArray(data.data) && data.data.length > 0) {
                        rec = data.data[0];
                    }
                    // 3) í˜¹ì‹œ ë‹¤ë¥¸ í‚¤(b_no ë“±)ë¥¼ ì“¸ ìˆ˜ë„ ìˆì–´ì„œ ì˜ˆë¹„ ì²˜ë¦¬
                    else if (Array.isArray(data.b_no) && data.b_no.length > 0) {
                        rec = data.b_no[0];
                    }
                }

                if (!rec) {
                    // ë°ì´í„° êµ¬ì¡°ë¥¼ ëª» ì½ì€ ê²½ìš°
                    if (bizVerified) bizVerified.value = "N";
                    if (out) {
                        out.textContent = "ì¸ì¦ ì‹¤íŒ¨ ë˜ëŠ” ìƒíƒœ í™•ì¸ ë¶ˆê°€ (êµ­ì„¸ì²­ ì‘ë‹µ êµ¬ì¡° í™•ì¸ í•„ìš”)";
                        out.className = "text-sm text-red-600 text-center";
                    }
                    return;
                }

                console.log("[verify-biz] parsed record:", rec);

                // âœ… ê³„ì†ì‚¬ì—…ì ì—¬ë¶€ íŒì • (ì—¬ëŸ¬ ê²½ìš° í—ˆìš©)
                const sttCode = rec.b_stt_cd || rec.status_cd;
                const sttText = (rec.b_stt || rec.status || "").trim();

                const isActive =
                    sttCode === "01" ||                      // ê°€ì¥ í™•ì‹¤í•œ ì½”ë“œ
                    sttText === "ê³„ì†ì‚¬ì—…ì" ||
                    sttText.includes("ê³„ì†") ||             // í˜¹ì‹œ ê³µë°± ì„ì—¬ ìˆì„ ë•Œ
                    (data.ok === true && (data.valid === true || data.status === "OK"));

                if (isActive) {
                    if (bizVerified) bizVerified.value = "Y";
                    if (bizNumber) bizNumber.value = full;

                    // ìƒí˜¸ëª… ìë™ ì…ë ¥
                    const bizName = (rec.b_nm || rec.biz_name || "").trim();
                    if (bizName && nameInput && !nameInput.value.trim()) {
                        nameInput.value = bizName;
                    }

                    if (out) {
                        out.textContent = "ì¸ì¦ ì™„ë£Œ: ê³„ì†ì‚¬ì—…ì ìƒíƒœì…ë‹ˆë‹¤.";
                        out.className = "text-sm text-green-700 text-center";
                    }
                } else {
                    if (bizVerified) bizVerified.value = "N";
                    const msg = sttText || "ë“±ë¡ë˜ì§€ ì•Šì•˜ê±°ë‚˜ íì—…/íœ´ì—… ì‚¬ì—…ìì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.";
                    if (out) {
                        out.textContent = `ì¸ì¦ ì‹¤íŒ¨: ${msg}`;
                        out.className = "text-sm text-red-600 text-center";
                    }
                }
            } catch (e) {
                console.error("verifyBiz error:", e);
                if (bizVerified) bizVerified.value = "N";
                if (out) {
                    out.textContent = "ì¸ì¦ API ë¯¸ì—°ë™ ë˜ëŠ” ì‘ë‹µ ì‹¤íŒ¨ (ë‚˜ì¤‘ì— ì‹¤ì œ ì—°ë™ ì˜ˆì •)";
                    out.className = "text-sm text-orange-600 text-center";
                }
            } finally {
                btn && (btn.disabled = false);
            }
        }


        /* =========================================================
           ì´ë©”ì¼ ë„ë©”ì¸ ì²˜ë¦¬
        ========================================================= */
        function updateEmail() {
            const idPart = qs("#emailId")?.value.trim() || "";
            const sel = qs("#emailDomainSelect")?.value || "";
            const custom = qs("#customDomainInput");
            const dom = sel === "custom" ? (custom?.value.trim() || "") : sel;
            const full = (idPart && dom) ? `${idPart}@${dom}` : "";
            const hidden = qs("#ownerEmail");
            if (hidden) hidden.value = full;
        }
        function handleDomainChange(el) {
            const custom = qs("#customDomainInput");
            if (el.value === "custom") { custom?.classList.remove("hidden"); custom?.focus(); }
            else { custom?.classList.add("hidden"); if (custom) custom.value = ""; }
            updateEmail();
        }

        /* =========================================================
           ì¹´í…Œê³ ë¦¬/ì„œë¸Œì¹´í…Œê³ ë¦¬ ë“œë¡­ë‹¤ìš´
        ========================================================= */
        function initCategoryDropdowns() {
            const display = qs("#businessCategoryDisplay");
            const list = qs("#categoryList");
            const hidden = qs("#businessCategory");
            const btn = qs("#categoryToggle");

            // â–¼ ë²„íŠ¼ í† ê¸€
            btn?.addEventListener("click", () => list.classList.toggle("hidden"));
            // âœ… ì…ë ¥ì°½ í´ë¦­ë„ í† ê¸€
            display?.addEventListener("click", () => list.classList.toggle("hidden"));

            // í•­ëª© ì„ íƒ
            list?.querySelectorAll("li").forEach(li => {
                li.addEventListener("click", () => {
                    hidden.value = li.dataset.value;
                    display.value = li.dataset.value;
                    list.classList.add("hidden");

                    const subWrap = qs("#subcatRow");
                    if (li.dataset.value === "í•œì‹") subWrap?.classList.remove("hidden");
                    else {
                        subWrap?.classList.add("hidden");
                        qs("#subcategoryDisplay") && (qs("#subcategoryDisplay").value = "");
                        qs("#businessSubcategory") && (qs("#businessSubcategory").value = "");
                    }
                });
                // ì„œë¸Œì¹´í…Œê³ ë¦¬ í† ê¸€/ì„ íƒ
                const subDisplay = qs("#subcategoryDisplay");
                const subList = qs("#subcategoryList");
                const subHidden = qs("#businessSubcategory");
                const subBtn = qs("#subcategoryToggle");

                subBtn?.addEventListener("click", () => subList.classList.toggle("hidden"));
                subDisplay?.addEventListener("click", () => subList.classList.toggle("hidden"));

                /* âœ… ì—¬ê¸° ì¶”ê°€: ì„œë¸Œì¹´í…Œê³ ë¦¬ í•­ëª© í´ë¦­ ì‹œ ê°’ ì„¸íŒ… */
                subList?.addEventListener("click", (e) => {
                    const li = e.target.closest("li[data-value]");
                    if (!li) return;
                    subHidden.value = li.dataset.value;                 // í¼ ì „ì†¡ìš© hidden
                    subDisplay.value = li.textContent.trim();           // í™”ë©´ í‘œì‹œ
                    subList.classList.add("hidden");
                });

                /* ë°”ê¹¥ í´ë¦­ ì‹œ ë‹«ê¸° */
                document.addEventListener("click", (e) => {
                    if (list && !list.contains(e.target) && e.target !== btn && e.target !== display) list.classList.add("hidden");
                    if (subList && !subList.contains(e.target) && e.target !== subBtn && e.target !== subDisplay) subList.classList.add("hidden");
                });
            });

            // ì„œë¸Œì¹´í…Œê³ ë¦¬ í† ê¸€/ì„ íƒ
            const subDisplay = qs("#subcategoryDisplay");
            const subList = qs("#subcategoryList");
            const subHidden = qs("#businessSubcategory");
            const subBtn = qs("#subcategoryToggle");

            subBtn?.addEventListener("click", () => subList.classList.toggle("hidden"));
            subDisplay?.addEventListener("click", () => subList.classList.toggle("hidden"));

            // ë°”ê¹¥ í´ë¦­ ì‹œ ë‹«ê¸°
            document.addEventListener("click", (e) => {
                if (list && !list.contains(e.target) && e.target !== btn && e.target !== display) list.classList.add("hidden");
                if (subList && !subList.contains(e.target) && e.target !== subBtn && e.target !== subDisplay) subList.classList.add("hidden");
            });

        }

        /* =========================================================
           ìš°í¸ë²ˆí˜¸/ì¹´ì¹´ì˜¤ ì§€ë„
        ========================================================= */
        function openDaumPostcode() {
            new daum.Postcode({
                oncomplete: function (data) {
                    qs("#postalCode").value = data.zonecode || "";
                    qs("#roadAddress").value = data.roadAddress || data.address || "";
                    updateMapByAddress(qs("#roadAddress").value);
                }
            }).open({
                left: (window.screen.width / 2) - (500 / 2),   // ê°€ë¡œ ì¤‘ì•™ (íŒì—… ë„ˆë¹„ 500px ê°€ì •)
                top: (window.screen.height / 2) - (600 / 2)    // ì„¸ë¡œ ì¤‘ì•™ (íŒì—… ë†’ì´ 600px ê°€ì •)
            });
        }
        window.openDaumPostcode = openDaumPostcode;

        function clearAddress() {
            qs("#postalCode").value = ""; qs("#roadAddress").value = ""; qs("#detailAddress").value = "";
            if (state.map && state.mapMarker) { state.mapMarker.setMap(null); state.mapMarker = null; }
        }
        window.clearAddress = clearAddress;

        function initKakaoMap() {
            if (!window.kakao || !window.kakao.maps) return;
            window.kakao.maps.load(function () {
                const container = qs("#map");
                const center = new kakao.maps.LatLng(37.5665, 126.9780);
                state.map = new kakao.maps.Map(container, { center, level: 5 });
                state.mapGeocoder = new kakao.maps.services.Geocoder();
            });
        }
        function updateMapByAddress(addr) {
            if (!addr || !state.mapGeocoder) return;
            state.mapGeocoder.addressSearch(addr, function (result, status) {
                if (status === kakao.maps.services.Status.OK) {
                    const coords = new kakao.maps.LatLng(result[0].y, result[0].x);
                    state.map.setCenter(coords);
                    if (state.mapMarker) state.mapMarker.setMap(null);
                    state.mapMarker = new kakao.maps.Marker({ map: state.map, position: coords });
                }
            });
        }

        /* =========================================================
           ì´ë¯¸ì§€ ë¯¸ë¦¬ë³´ê¸°
        ========================================================= */
        function initImagePreview() {
            const input = qs("#imagesInput");
            const preview = qs("#imagesPreview");
            input?.addEventListener("change", () => {
                if (!preview) return;
                preview.innerHTML = "";
                const files = Array.from(input.files || []).slice(0, 3);
                files.forEach(file => {
                    const url = URL.createObjectURL(file);
                    const img = document.createElement("img");
                    img.src = url; img.className = "w-24 h-24 object-cover rounded-lg border";
                    preview.appendChild(img);
                });
            });
        }

        /* =========================================================
   ë„ì›€ë§ í† ê¸€ (ì—…ì¢… ì˜ˆì‹œ)
========================================================= */
        function toggleTip() {
            const tip = qs("#tipBox");
            if (!tip) return;
            tip.classList.toggle("hidden");
        }
        window.toggleTip = toggleTip;

        // ğŸ”¹ ë°”ê¹¥ í´ë¦­í•˜ë©´ ìë™ìœ¼ë¡œ ë‹«íˆê²Œ (ì„ íƒì‚¬í•­ì´ì§€ë§Œ ì¶”ì²œ)
        document.addEventListener("click", (e) => {
            const tip = qs("#tipBox");
            const btn = qs("#helpBtn");
            if (!tip || !btn) return;

            // ì´ë¯¸ ìˆ¨ê¹€ì´ë©´ ì‹ ê²½ X
            if (tip.classList.contains("hidden")) return;

            // ë²„íŠ¼ì´ë‚˜ ë§í’ì„  ë‚´ë¶€ë¥¼ í´ë¦­í•œ ê²½ìš°ëŠ” ìœ ì§€
            if (btn.contains(e.target) || tip.contains(e.target)) return;

            // ê·¸ ì™¸ ì•„ë¬´ ê³³ì´ë‚˜ í´ë¦­ ì‹œ ë‹«ê¸°
            tip.classList.add("hidden");
        });

        /* =========================================================
           ì„ì‹œ ìˆ˜ì • ë²„íŠ¼
        ========================================================= */
        function updateData() { alert("ìˆ˜ì • ê¸°ëŠ¥ì€ ì¶”í›„ êµ¬í˜„ ì˜ˆì •ì…ë‹ˆë‹¤."); }
        window.updateData = updateData;

        /* =========================================================
           ì „í™” ì¸ì¦ (ëª©ì—…)
        ========================================================= */
        function initPhoneAuth() {
            const btn = qs("#verifyPhoneButton");
            const out = qs("#phoneVerifyResult");
            btn?.addEventListener("click", () => {
                if (!out) return;
                out.textContent = "ì¸ì¦ìš”ì²­ ì „ì†¡(ëª©ì—…) - ì‹¤ì œ ì—°ë™ì€ ì¶”í›„ ì ìš©";
                out.className = "text-sm text-blue-700 text-center";
            });
        }

        /* =========================================================
           FAB/Prev-Next/í”Œë¡œíŒ… Add
        ========================================================= */
        function initFABS() {
            const prev = qs("#fab-prev"), next = qs("#fab-next");
            const prevSm = qs("#fab-prev-sm"), nextSm = qs("#fab-next-sm");
            [prev, prevSm].forEach(b => b && (b.onclick = () => window.history.back()));
            [next, nextSm].forEach(b => b && (b.onclick = () => window.scrollTo({ top: document.body.scrollHeight, behavior: "smooth" })));
        }

        // ============================
        // ë©”ë‰´ ì¹´í…Œê³ ë¦¬ â†’ í’ˆëª© ëª¨ë“ˆ (ì •ë¦¬ë³¸)
        // ============================

        // ì „ì—­ ìƒíƒœ
        const menuState = { currentCategory: "", panels: new Map(), opened: new Set(), panelsWrap: null };

        function initMenuModule() {
            const panelsWrap = qs('#menuCategoryPanels');
            const addBtn = qs('#btnAddItem');
            const addCatBtn = qs('#btnAddCat');
            const newCatInput = qs('#newCatInput');
            const addCatBtn2 = qs('#btnAddCat2');
            const newCatInput2 = qs('#newCatInput2');

            menuState.panelsWrap = panelsWrap;

            // ìƒë‹¨ ì¹´í…Œê³ ë¦¬ ì¶”ê°€ ë²„íŠ¼
            addCatBtn?.addEventListener('click', () => {
                const name = (newCatInput?.value || "").trim();
                if (!name) return alert('ì¹´í…Œê³ ë¦¬ ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”.');
                if (menuState.panels.has(name)) { alert('ì´ë¯¸ ì¡´ì¬í•˜ëŠ” ì¹´í…Œê³ ë¦¬ì…ë‹ˆë‹¤.'); showCategory(name); return; }
                addCategory(name);
                newCatInput.value = "";
                showCategory(name);
            });
            newCatInput?.addEventListener('keydown', e => { if (e.key === 'Enter') { e.preventDefault(); addCatBtn?.click(); } });

            // í•˜ë‹¨ ì¹´í…Œê³ ë¦¬ ì¶”ê°€ ë²„íŠ¼
            addCatBtn2?.addEventListener('click', () => {
                const name = (newCatInput2?.value || "").trim();
                if (!name) return alert('ì¹´í…Œê³ ë¦¬ ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”.');
                if (menuState.panels.has(name)) { alert('ì´ë¯¸ ì¡´ì¬í•˜ëŠ” ì¹´í…Œê³ ë¦¬ì…ë‹ˆë‹¤.'); showCategory(name); return; }
                addCategory(name);
                newCatInput2.value = "";
                showCategory(name);
            });
            newCatInput2?.addEventListener('keydown', e => { if (e.key === 'Enter') { e.preventDefault(); addCatBtn2?.click(); } });

            // í’ˆëª© ì¶”ê°€ ë²„íŠ¼
            addBtn?.addEventListener('click', () => {
                if (!menuState.currentCategory) return alert('ì¹´í…Œê³ ë¦¬ë¥¼ ë¨¼ì € ì„ íƒí•˜ì„¸ìš”.');
                addMenuRowTo(menuState.currentCategory);
            });
        }

        // ==== ë³´ì¡° í•¨ìˆ˜ë“¤ì€ initMenuModule ë°”ê¹¥ì— ìœ„ì¹˜ ====
        function addCategory(cat) {
            const panelsWrap = menuState.panelsWrap;
            const panel = document.createElement('div');
            panel.dataset.panel = cat;
            panel.className = "hidden neo-section p-4";
            panel.innerHTML = `
      <div class="flex items-center justify-between mb-3">
        <h4 class="text-lg font-semibold text-blue-900">${cat}</h4>
        <button type="button" class="neo-btn neo-danger px-3 py-1 text-xs cat-delete" data-cat="${cat}">
          ì¹´í…Œê³ ë¦¬ ì‚­ì œ
        </button>
      </div>
      <div class="space-y-4" data-cat-list="${cat}"></div>
    `;
            panelsWrap.appendChild(panel);
            menuState.panels.set(cat, panel);

            // ì‚­ì œ ì´ë²¤íŠ¸
            panel.querySelector('.cat-delete').addEventListener('click', () => deleteCategory(cat));
        }

        function showCategory(cat) {
            menuState.currentCategory = cat;
            const addBtn = qs('#btnAddItem');
            const currentTxt = qs('#currentCatText');
            const panel = menuState.panels.get(cat);

            if (!cat || !panel) {
                if (addBtn) addBtn.disabled = true;
                if (currentTxt) currentTxt.textContent = 'ì„ íƒ ì „';
                return;
            }

            // ëª¨ë“  íŒ¨ë„ í† ê¸€
            menuState.panels.forEach((p, name) => {
                p.classList.toggle('hidden', name !== cat);
                p.classList.toggle('ring-2', name === cat);
                p.classList.toggle('ring-blue-300', name === cat);
            });

            if (addBtn) addBtn.disabled = false;
            if (currentTxt) currentTxt.textContent = cat;
            panel.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }

        function deleteCategory(cat) {
            const panel = menuState.panels.get(cat);
            if (!panel) return;

            const list = panel.querySelector(`[data-cat-list="${cat}"]`);
            const count = list ? list.children.length : 0;
            if (!confirm(`â€˜${cat}â€™ ì¹´í…Œê³ ë¦¬${count ? ` (í’ˆëª© ${count}ê°œ í¬í•¨)` : ""}ë¥¼ ì‚­ì œí• ê¹Œìš”?`)) return;

            panel.remove();
            menuState.panels.delete(cat);

            if (menuState.currentCategory === cat) {
                menuState.currentCategory = '';
                qs('#btnAddItem').disabled = true;
                qs('#currentCatText').textContent = 'ì„ íƒ ì „';
            }
        }

        function addMenuRowTo(cat) {
            const tmpl = qs('#menuRowTmpl');
            const node = tmpl.content.cloneNode(true);
            const row = node.querySelector('.grid');

            // ê°€ê²© ìˆ«ìë§Œ
            const price = node.querySelector('input[name="menuPrice[]"]');
            price.addEventListener('input', (e) => { e.target.value = onlyDigits(e.target.value); });

            // ì‚­ì œ ë²„íŠ¼
            node.querySelector('.btn-remove').addEventListener('click', () => row.remove());

            // ì¹´í…Œê³ ë¦¬ ì£¼ì…
            node.querySelector('.menu-cat-hidden').value = cat;

            // ì¶”ê°€ + í¬ì»¤ìŠ¤
            const list = qs(`[data-cat-list="${cat}"]`);
            list.appendChild(node);
            row.scrollIntoView({ behavior: 'smooth', block: 'center' });
            row.querySelector('input[name="menuName[]"]')?.focus();
        }


        function showCategory(cat) {
            menuState.currentCategory = cat;

            const addBtn = qs('#btnAddItem');
            const currentTxt = qs('#currentCatText');
            const panel = menuState.panels.get(cat);

            if (!cat || !panel) {
                if (addBtn) addBtn.disabled = true;
                if (currentTxt) currentTxt.textContent = 'ì„ íƒ ì „';
                return;
            }

            // âœ… ì²˜ìŒ í¼ì¹  ë•Œë§Œ: ì„ íƒ ìˆœì„œ ë³´ì¥ì„ ìœ„í•´ ë§¨ ì•„ë˜ë¡œ ì¬ë°°ì¹˜
            if (!panel.dataset.opened) {
                panel.dataset.opened = '1';
                menuState.opened.add(cat);
                menuState.panelsWrap.appendChild(panel);
            }

            panel.classList.remove('hidden');
            if (addBtn) addBtn.disabled = false;
            if (currentTxt) currentTxt.textContent = cat;

            // ì„ íƒ í‘œì‹œ(ì˜µì…˜)
            menuState.panels.forEach((p, name) => {
                p.classList.toggle('ring-2', name === cat);
                p.classList.toggle('ring-blue-300', name === cat);
            });

            panel.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }

        function deleteCategory(cat) {
            const panel = menuState.panels.get(cat);
            if (!panel) return;

            const list = panel.querySelector(`[data-cat-list="${cat}"]`);
            const count = list ? list.children.length : 0;
            const ok = confirm(`â€˜${cat}â€™ ì¹´í…Œê³ ë¦¬${count ? ` (í’ˆëª© ${count}ê°œ í¬í•¨)` : ""}ë¥¼ ì‚­ì œí• ê¹Œìš”?\nì…ë ¥ëœ í’ˆëª©ë“¤ë„ ê°™ì´ ì‚­ì œë©ë‹ˆë‹¤.`);
            if (!ok) return;

            if (list) list.innerHTML = '';
            panel.classList.add('hidden');

            // ì„ íƒ ìˆœì„œ ê´€ë¦¬ ì´ˆê¸°í™”
            panel.removeAttribute('data-opened');
            if (menuState.opened) menuState.opened.delete(cat);

            if (menuState.currentCategory === cat) {
                menuState.currentCategory = '';
                const addBtn = qs('#btnAddItem'); if (addBtn) addBtn.disabled = true;
                const currentTxt = qs('#currentCatText'); if (currentTxt) currentTxt.textContent = 'ì„ íƒ ì „';

            }
        }

        function addMenuRowTo(cat) {
            const tmpl = qs('#menuRowTmpl');
            const node = tmpl.content.cloneNode(true);
            const row = node.querySelector('.grid');

            // ê°€ê²© ìˆ«ìë§Œ
            const price = node.querySelector('input[name="menuPrice[]"]');
            price.addEventListener('input', (e) => { e.target.value = onlyDigits(e.target.value); });

            // í’ˆëª©í–‰ ì‚­ì œ
            node.querySelector('.btn-remove').addEventListener('click', () => row.remove());

            // ì¹´í…Œê³ ë¦¬ ì£¼ì…
            node.querySelector('.menu-cat-hidden').value = cat;

            // ì¶”ê°€ + í¬ì»¤ìŠ¤/ìŠ¤í¬ë¡¤
            const list = qs(`[data-cat-list="${cat}"]`);
            list.appendChild(node);
            const lastRow = list.lastElementChild;
            lastRow?.scrollIntoView({ behavior: 'smooth', block: 'center' });
            lastRow?.querySelector('input[name="menuName[]"]')?.focus();
        }

        // ì´ë²¤íŠ¸ ë°”ì¸ë”© (í•œ ë²Œë§Œ)
        function bindEvents() {
            qs("#btnVerifyBiz")?.addEventListener("click", verifyBiz);
            qs("#emailId")?.addEventListener("input", updateEmail);
            qs("#customDomainInput")?.addEventListener("input", updateEmail);
            qs("#emailDomainSelect")?.addEventListener("change", (e) => handleDomainChange(e.target));
            qs("#storeForm")?.addEventListener("submit", onSubmitSimple);
        }

        async function onSubmitSimple(e) {
            e.preventDefault();

            const businessName = qs("#businessName")?.value.trim();
            const roadAddress = qs("#roadAddress")?.value.trim();
            if (!businessName || !roadAddress) {
                alert("ìƒí˜¸ì™€ ë„ë¡œëª… ì£¼ì†ŒëŠ” í•„ìˆ˜ì…ë‹ˆë‹¤.");
                return;
            }

            const hasAnyMenu = qsa('input[name="menuName[]"]').some(i => i.value.trim() !== "");
            if (!hasAnyMenu) { alert("ë©”ë‰´ë¥¼ ìµœì†Œ 1ê°œ ì´ìƒ ì…ë ¥í•´ ì£¼ì„¸ìš”."); return; }

            // ìˆ«ìë§Œ ë‚¨ê¸°ê¸° (ê¸°ì¡´ ë¡œì§ ìœ ì§€)
            qsa('input[name="menuPrice[]"]').forEach(i => { i.value = onlyDigits(i.value); });

            // ë””ë²„ê·¸: ì œì¶œ ì „ ì…ë ¥ ê°œìˆ˜/ìš”ì•½
            const menuNames = qsa('input[name="menuName[]"]').map(i => i.value.trim()).filter(Boolean);
            const menuPrices = qsa('input[name="menuPrice[]"]').map(i => i.value.trim()).filter(Boolean);
            const menuCats = qsa('input[name="menuCategory[]"]').map(i => i.value.trim()).filter(Boolean);
            const menuImageInputs = qsa('input[name="menuImage[]"]');
            const menuImageCount = menuImageInputs.reduce((n, el) => n + (el.files?.length || 0), 0);

            const fd = new FormData(qs('#storeForm'));

            // ğŸ’¡ FormData ë‚´ìš© ìš”ì•½ ë¡œê±° (íŒŒì¼ì€ ì´ë¦„/í¬ê¸°ë§Œ)
            (function logFormDataSummary() {
                const summary = {};
                for (const [k, v] of fd.entries()) {
                    if (v instanceof File) {
                        (summary[k] ||= []).push({ name: v.name, size: v.size, type: v.type });
                    } else {
                        (summary[k] ||= []).push(String(v));
                    }
                }
                console.groupCollapsed('[REGISTER] FormData summary');
                console.log('menuNames:', menuNames.length, menuNames);
                console.log('menuPrices:', menuPrices.length, menuPrices);
                console.log('menuCategories:', menuCats.length, menuCats);
                console.log('menuImage files total:', menuImageCount);
                console.dir(summary);
                console.groupEnd();
            })();

            try {
                const res = await fetch(API.REGISTER, {
                    method: 'POST',
                    body: fd,
                    // í—¤ë”ëŠ” ë„£ì§€ ë§ˆì„¸ìš”: Content-Typeì€ ë¸Œë¼ìš°ì €ê°€ boundary í¬í•¨í•´ ìë™ ì§€ì •
                });

                // ğŸ” ì‘ë‹µ ë©”íƒ€/í—¤ë”/ë³¸ë¬¸(ìŠ¤ë‹ˆí«)ê¹Œì§€ ë¡œê·¸
                const meta = {
                    ok: res.ok,
                    status: res.status,
                    statusText: res.statusText,
                    url: res.url
                };
                const headers = Object.fromEntries(res.headers.entries());
                const raw = await res.text(); // ë³¸ë¬¸ ì„ í™•ë³´ (JSONì´ ì•„ë‹ˆì–´ë„ í™•ì¸ ê°€ëŠ¥)
                const rawSnippet = raw?.slice(0, 2000); // ë„ˆë¬´ ê¸¸ë©´ ì˜ë¼ì„œ

                console.groupCollapsed('[REGISTER] Response debug');
                console.log('meta:', meta);
                console.log('headers:', headers);
                console.log('body(raw):', rawSnippet);
                console.groupEnd();

                if (!res.ok) {
                    // ì„œë²„ê°€ ì—ëŸ¬ ë©”ì‹œì§€ë¥¼ í…ìŠ¤íŠ¸ë¡œ ë‚´ë ¤ì£¼ë©´ ê·¸ëŒ€ë¡œ ë„ì›€
                    throw new Error(`HTTP ${res.status}${rawSnippet ? `: ${rawSnippet}` : ''}`);
                }

                // OKì´ë©´ JSON íŒŒì‹± ì‹œë„
                let data = {};
                try {
                    data = raw ? JSON.parse(raw) : {};
                } catch (e) {
                    console.warn('[REGISTER] JSON parse ì‹¤íŒ¨, raw ì‚¬ìš©:', e);
                    data = {};
                }

                if (!data?.ok || !data?.id) throw new Error("ë“±ë¡ ì‘ë‹µì— idê°€ ì—†ìŠµë‹ˆë‹¤.");

                // ì„±ê³µ ì²˜ë¦¬
                const modal = qs("#successModal");
                const okBtn = qs("#successOk");
                const goDetail = () =>
                    location.href = `/ndetail.html?id=${encodeURIComponent(data.id)}&type=food`;
                if (modal) {
                    modal.classList.remove("hidden");
                    if (okBtn) okBtn.onclick = goDetail;
                    setTimeout(goDetail, 1200);
                } else {
                    alert("ë“±ë¡ ì™„ë£Œ!"); goDetail();
                }

            } catch (err) {
                console.error('[REGISTER] ì‹¤íŒ¨:', err);
                alert("ë“±ë¡ ì‹¤íŒ¨: " + (err?.message || "unknown"));
            }
        }

        function init() {
            includePartials();
            bindEvents();
            initCategoryDropdowns();
            initImagePreview();
            initPhoneAuth();
            initFABS();
            initBizInputs();
            initMenuModule();
            bindPriceFormatters();

            if (window.kakao?.maps?.load) {
                initKakaoMap();
            } else {
                const iv = setInterval(() => {
                    if (window.kakao?.maps?.load) { clearInterval(iv); initKakaoMap(); }
                }, 200);
                setTimeout(() => clearInterval(iv), 5000);
            }
        }

        document.addEventListener("DOMContentLoaded", init);

        // ===== ê°€ê²© ì…ë ¥ í¬ë§· =====
        function bindPriceFormatters() {
            document.addEventListener('input', (e) => {
                const el = e.target.closest('input[name="menuPrice[]"]');
                if (!el) return;
                const right = el.value.length - (el.selectionEnd ?? el.value.length);
                el.value = formatPriceView(el.value);
                const pos = Math.max(0, el.value.length - right);
                requestAnimationFrame(() => el.setSelectionRange(pos, pos));
            });

            document.addEventListener('paste', (e) => {
                const el = e.target.closest('input[name="menuPrice[]"]');
                if (!el) return;
                e.preventDefault();
                const text = (e.clipboardData || window.clipboardData).getData('text');
                el.value = formatPriceView(onlyDigits(text));
            });
        }

    </script>
</body>

</html>