<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>지역 글쓰기</title>
<script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-gray-100">

<div id="header"></div>

<div class="max-w-2xl mx-auto bg-white mt-10 p-8 rounded-2xl shadow-lg">

<h1 class="text-3xl font-bold mb-6">✏️ 지역 게시글 작성</h1>

<form id="writeForm" enctype="multipart/form-data" class="flex flex-col gap-4">

  <select id="region" name="region" class="border p-3 rounded-lg">
    <option>의정부</option>
    <option>호원동</option>
    <option>민락동</option>
    <option>가능동</option>
  </select>

  <input id="title" name="title" class="border p-3 rounded-lg" placeholder="제목">

  <textarea id="content" name="content" class="border p-3 h-48 rounded-lg"
    placeholder="내용"></textarea>

  <input id="writer" name="writer" class="border p-3 rounded-lg" placeholder="작성자">

  <input type="file" name="images" multiple class="border p-3 rounded-lg">

  <button class="px-4 py-2 bg-indigo-600 text-white rounded-lg">등록</button>

</form>

</div>

<div id="footer"></div>

<script>
fetch('components/header.html').then(r => r.text()).then(h => header.innerHTML = h);
fetch('components/footer.html').then(r => r.text()).then(f => footer.innerHTML = f);

document.getElementById("writeForm").addEventListener("submit", async e => {
  e.preventDefault();

  const formData = new FormData(writeForm);

  const res = await fetch("/api/localboard", {
    method: "POST",
    body: formData
  });

  const result = await res.json();

  if (result.success) {
    location.href = "localboardDetail.html?id=" + result.id;
  }
});
</script>

</body>
</html>
