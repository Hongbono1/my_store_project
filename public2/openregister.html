<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ì˜¤í”ˆì˜ˆì • ë“±ë¡ | MALL HANKOOK</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>
    <script
        src="https://dapi.kakao.com/v2/maps/sdk.js?appkey=6286d4d9bc1d503495b03f46622b5dc8&autoload=false&libraries=services"></script>

    <style>
        body {
            font-family: Pretendard, system-ui, -apple-system, Segoe UI, Roboto, 'Noto Sans KR', sans-serif;
            background: linear-gradient(135deg, #f8fafc, #e0e7ff);
            color: #111827;
            min-height: 100vh;
        }

        .neo-card {
            background: rgba(255, 255, 255, .65);
            backdrop-filter: blur(14px);
            border: 1px solid rgba(255, 255, 255, .45);
            border-radius: 1.25rem;
            box-shadow: 8px 8px 24px rgba(0, 0, 0, .07);
        }

        [contenteditable][data-placeholder]:empty:before {
            content: attr(data-placeholder);
            color: #9ca3af;
            pointer-events: none;
        }

        .editor img {
            display: block;
            max-width: 100%;
            border-radius: .75rem;
            margin: .5rem 0;
        }

        /* â† ì—¬ê¸°! ì´ë¯¸ì§€ + ì˜†ê¸€ ë°•ìŠ¤ */
        .side-container {
            display: flex;
            align-items: flex-start;
            gap: 1rem;
            margin: 1rem 0;
        }

        .side-container img {
            width: 42%;
            max-width: 280px;
            border-radius: .75rem;
        }

        .side-container .text {
            flex: 1;
            min-height: 120px;
        }

        /* íˆ´ë°” ê³µí†µ ë²„íŠ¼ */
        .tbtn {
            display: flex;
            align-items: center;
            justify-content: center;
            height: 36px;
            padding: 0 .75rem;
            background: #fff;
            border: 1px solid #d1d5db;
            border-radius: .5rem;
            font-size: .875rem;
            font-weight: 600;
            color: #111827;
            gap: .25rem;
            position: relative;
            cursor: pointer;
            transition: background .15s ease;
        }

        .tbtn:hover {
            background: #f3f4f6;
        }

        /* í™œì„±í™”(êµµê²Œ ëˆŒë¦¼) */
        .tbtn-active {
            background: #2563eb !important;
            color: #fff !important;
            border-color: #1d4ed8 !important;
        }

        /* ë§í’ì„  */
        .tbtn[data-tip]:hover::after,
        label[data-tip]:hover::after {
            content: attr(data-tip);
            position: absolute;
            top: 50%;
            left: calc(100% + 8px);
            transform: translateY(-50%);
            background: rgba(17, 24, 39, .92);
            color: #fff;
            font-size: 12px;
            padding: 4px 8px;
            border-radius: 6px;
            white-space: nowrap;
            pointer-events: none;
            z-index: 50;
        }

        /* ê¸€ì í¬ê¸° íŒì—… ìŠ¤íƒ€ì¼ */
        .font-size-popup {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 5px;
            padding: 10px;
            min-width: 200px;
        }
        
        .font-size-popup button {
            padding: 8px 12px;
            border: 1px solid #ddd;
            background: white;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
            color: #333;
        }
        
        .font-size-popup button:hover {
            background-color: #f0f0f0;
            border-color: #007bff;
        }

        /* í•œê¸€ íŠ¹í™” íŒì—… ìŠ¤íƒ€ì¼ */
        .text-align-popup {
            display: flex;
            gap: 5px;
            padding: 10px;
        }

        .text-align-popup button {
            width: 40px;
            height: 40px;
            border: 1px solid #ddd;
            background: white;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .text-align-popup button:hover {
            background-color: #e3f2fd;
            border-color: #2196f3;
        }

        .color-popup {
            padding: 10px;
            min-width: 200px;
        }

        .color-section {
            margin-bottom: 10px;
        }

        .color-section p {
            margin: 0 0 5px 0;
            font-size: 12px;
            font-weight: bold;
            color: #555;
        }

        .color-section button {
            width: 30px;
            height: 30px;
            border: 2px solid #ddd;
            border-radius: 4px;
            cursor: pointer;
            margin: 2px;
            position: relative;
        }

        .color-section button:hover {
            border-color: #333;
            transform: scale(1.1);
        }

        .korean-char-popup {
            padding: 10px;
            max-width: 300px;
        }

        .char-section {
            margin-bottom: 10px;
        }

        .char-section p {
            margin: 0 0 5px 0;
            font-size: 12px;
            font-weight: bold;
            color: #555;
        }

        .char-section button {
            width: 35px;
            height: 35px;
            border: 1px solid #ddd;
            background: white;
            border-radius: 4px;
            cursor: pointer;
            margin: 2px;
            font-size: 16px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
        }

        .char-section button:hover {
            background-color: #e8f5e8;
            border-color: #4caf50;
        }

        /* í•œê¸€ íŠ¹í™” íˆ´ë°” ìŠ¤íƒ€ì¼ */
        .korean-toolbar {
            background: linear-gradient(135deg, #f8fafc, #e2e8f0);
            border: 1px solid #cbd5e1;
        }

        .korean-btn {
            width: 32px;
            height: 32px;
            border: 1px solid #d1d5db;
            background: white;
            border-radius: 6px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            transition: all 0.2s;
        }

        .korean-btn:hover {
            background: #e0e7ff;
            border-color: #6366f1;
            transform: translateY(-1px);
        }

        .korean-select {
            padding: 4px 8px;
            border: 1px solid #d1d5db;
            border-radius: 6px;
            background: white;
            font-size: 12px;
            cursor: pointer;
        }

        .korean-select:focus {
            outline: none;
            border-color: #6366f1;
            box-shadow: 0 0 0 2px rgba(99, 102, 241, 0.1);
        }

        .color-btn {
            width: 24px;
            height: 24px;
            border: 2px solid #d1d5db;
            border-radius: 4px;
            cursor: pointer;
            margin: 0 2px;
            transition: all 0.2s;
        }

        .color-btn:hover {
            border-color: #374151;
            transform: scale(1.1);
        }

        .char-btn {
            width: 28px;
            height: 28px;
            border: 1px solid #d1d5db;
            background: white;
            border-radius: 4px;
            cursor: pointer;
            margin: 0 1px;
            font-size: 14px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
        }

        .char-btn:hover {
            background: #dcfce7;
            border-color: #16a34a;
            transform: translateY(-1px);
        }

        .btn-group {
            display: flex;
            gap: 2px;
        }

        .color-group, .char-group {
            display: flex;
            align-items: center;
            gap: 4px;
        }

        /* ì»¤ìŠ¤í…€ ì—ë””í„° ìŠ¤íƒ€ì¼ */
        .custom-editor {
            font-family: 'Noto Sans KR', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        }

        .custom-editor:empty:before {
            content: attr(data-placeholder);
            color: #9ca3af;
            pointer-events: none;
        }

        .custom-editor:focus {
            border-color: #3b82f6;
            box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.1);
        }

        .custom-editor p {
            margin: 0 0 8px 0;
        }

        .custom-editor h1, .custom-editor h2, .custom-editor h3 {
            margin: 16px 0 8px 0;
            font-weight: bold;
        }

        .custom-editor h1 { font-size: 28px; }
        .custom-editor h2 { font-size: 24px; }
        .custom-editor h3 { font-size: 20px; }

        /* ê¸°ë³¸ íˆ´ë°” ìŠ¤íƒ€ì¼ */
        .editor-toolbar {
            background: linear-gradient(135deg, #f8fafc, #f1f5f9);
        }

        .toolbar-btn {
            padding: 6px 12px;
            border: 1px solid #d1d5db;
            background: white;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
            transition: all 0.2s;
        }

        .toolbar-btn:hover {
            background: #e0e7ff;
            border-color: #6366f1;
        }

        .toolbar-btn.active {
            background: #3b82f6;
            color: white;
            border-color: #3b82f6;
        }

        .toolbar-select {
            padding: 4px 8px;
            border: 1px solid #d1d5db;
            border-radius: 4px;
            background: white;
            font-size: 12px;
            cursor: pointer;
        }

        /* ìŠ¤íƒ€ì¼ ë¯¸ë¦¬ë³´ê¸° ì• ë‹ˆë©”ì´ì…˜ */
        @keyframes fadeInOut {
            0% { opacity: 0; transform: translateY(-10px); }
            15% { opacity: 1; transform: translateY(0); }
            85% { opacity: 1; transform: translateY(0); }
            100% { opacity: 0; transform: translateY(-10px); }
        }
    </style>
</head>

<body class="flex flex-col items-center py-10">
    <main class="w-full max-w-3xl p-8 neo-card mt-10">
        <h1
            class="text-3xl font-extrabold text-center mb-8 bg-gradient-to-r from-blue-500 to-indigo-500 text-transparent bg-clip-text">
            ì˜¤í”ˆ ë§¤ì¥ ë“±ë¡
        </h1>

        <form id="openForm" class="space-y-6" enctype="multipart/form-data">
            <!-- ê¸°ë³¸ì •ë³´ -->
            <div>
                <label class="block font-semibold mb-1">ìƒí˜¸ëª…</label>
                <input name="store_name" type="text" required
                    class="w-full border rounded px-3 py-2 focus:ring-2 focus:ring-blue-400" />
            </div>

            <div>
                <label class="block font-semibold mb-1">ì˜¤í”ˆì¼</label>
                <input name="open_date" type="date" required
                    class="w-full border rounded px-3 py-2 focus:ring-2 focus:ring-blue-400" />
            </div>

            <div>
                <label class="block font-semibold mb-1">ì—…ì¢…(ì¹´í…Œê³ ë¦¬)</label>
                <input name="category" type="text" placeholder="ì˜ˆ: í•œì‹, ì¹´í˜, ë³‘ì› ë“±"
                    class="w-full border rounded px-3 py-2 focus:ring-2 focus:ring-blue-400" />
            </div>

            <div>
                <label class="block font-semibold mb-1">ì „í™”ë²ˆí˜¸</label>
                <input name="phone" type="text" required placeholder="010-0000-0000"
                    class="w-full border rounded px-3 py-2 focus:ring-2 focus:ring-blue-400" />
            </div>

            <!-- ì£¼ì†Œ -->
            <div>
                <label class="block font-semibold mb-1">ì£¼ì†Œ</label>
                <div class="flex gap-2">
                    <input id="address" name="address" type="text" readonly
                        class="flex-1 border rounded px-3 py-2 focus:ring-2 focus:ring-blue-400" />
                    <button type="button" onclick="searchAddress()"
                        class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700">ê²€ìƒ‰</button>
                </div>
            </div>

            <!-- ìƒì„¸ ì£¼ì†Œ -->
            <div>
                <label class="block font-semibold mb-1 mt-2">ìƒì„¸ ì£¼ì†Œ</label>
                <input id="detailAddress" name="detail_address" type="text" placeholder="ì˜ˆ: 2ì¸µ, 203í˜¸"
                    class="w-full border rounded px-3 py-2 focus:ring-2 focus:ring-blue-400" />
            </div>

            <!-- ì§€ë„ -->
            <div class="flex justify-center">
                <div id="map" class="rounded border border-gray-300 my-4 shadow-sm"
                    style="width:100%; height:260px; max-width:480px;"></div>
            </div>

            <!-- ëŒ€í‘œ ì´ë¯¸ì§€ -->
            <div>
                <label class="block font-semibold mb-1">ëŒ€í‘œ ì´ë¯¸ì§€</label>
                <input name="img" type="file" accept="image/*" class="w-full border rounded px-3 py-2 text-gray-700" />
            </div>

            <!-- ì„¤ëª… ì‘ì„± -->
            <div>
                <label class="block font-semibold mb-2">ì„¤ëª…</label>
                
                <!-- ë…ìì ì¸ í•œê¸€ íŠ¹í™” ì—ë””í„° -->
                <!-- ê¸°ë³¸ íˆ´ë°” -->
                <div class="editor-toolbar p-3 bg-white border border-gray-300 rounded-t-lg border-b-0">
                    <div class="flex flex-wrap gap-1 items-center">
                        <!-- ê¸°ë³¸ ì„œì‹ -->
                        <button type="button" class="toolbar-btn" data-action="bold" title="êµµê²Œ">
                            <strong>B</strong>
                        </button>
                        <button type="button" class="toolbar-btn" data-action="italic" title="ê¸°ìš¸ì„">
                            <em>I</em>
                        </button>
                        <button type="button" class="toolbar-btn" data-action="underline" title="ë°‘ì¤„">
                            <u>U</u>
                        </button>
                        
                        <div class="border-l border-gray-300 h-6 mx-2"></div>
                        
                        <!-- ì œëª© -->
                        <select class="toolbar-select" data-action="heading">
                            <option value="">ì¼ë°˜</option>
                            <option value="h1">ì œëª©1</option>
                            <option value="h2">ì œëª©2</option>
                            <option value="h3">ì œëª©3</option>
                        </select>
                        
                        <div class="border-l border-gray-300 h-6 mx-2"></div>
                        
                        <!-- ëª©ë¡ -->
                        <button type="button" class="toolbar-btn" data-action="ul" title="ê¸€ë¨¸ë¦¬ ê¸°í˜¸">
                            â€¢ ëª©ë¡
                        </button>
                        <button type="button" class="toolbar-btn" data-action="ol" title="ë²ˆí˜¸ ë§¤ê¸°ê¸°">
                            1. ëª©ë¡
                        </button>
                        
                        <div class="border-l border-gray-300 h-6 mx-2"></div>
                        
                        <!-- ì´ë¯¸ì§€ ì‚½ì… -->
                        <button type="button" class="toolbar-btn" id="imageUploadBtn" title="ì´ë¯¸ì§€ ì‚½ì…">
                            ğŸ“· ì´ë¯¸ì§€
                        </button>
                        <input type="file" id="imageUploadInput" accept="image/*" style="display: none;">
                        
                        <!-- ì´ë¯¸ì§€ ì •ë ¬ -->
                        <select class="toolbar-select" id="imageAlignSelect" style="display: none;" title="ì´ë¯¸ì§€ ì •ë ¬">
                            <option value="left">â† ì™¼ìª½</option>
                            <option value="center">â†” ê°€ìš´ë°</option>
                            <option value="right">â†’ ì˜¤ë¥¸ìª½</option>
                        </select>
                    </div>
                </div>
                
                <div id="customEditor" class="custom-editor border border-gray-300 rounded-b-lg border-t-0 p-4" 
                     contenteditable="true" 
                     data-placeholder="ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”..."
                     style="min-height: 400px; font-size: 14px; line-height: 1.6; outline: none; background: white;">
                </div>
                
                <!-- í•œê¸€ íŠ¹í™” ì¶”ê°€ íˆ´ë°” -->
                <div class="korean-toolbar mt-2 p-3 bg-gray-50 rounded-lg border">
                    <div class="flex flex-wrap gap-2 items-center">
                        <span class="text-sm font-semibold text-gray-700">í•œê¸€ ë„êµ¬:</span>
                        
                        <!-- í…ìŠ¤íŠ¸ ì •ë ¬ -->
                        <div class="btn-group">
                            <button type="button" class="korean-btn" data-action="align-left" title="ì™¼ìª½ ì •ë ¬">
                                <span>â—€</span>
                            </button>
                            <button type="button" class="korean-btn" data-action="align-center" title="ê°€ìš´ë° ì •ë ¬">
                                <span>â—†</span>
                            </button>
                            <button type="button" class="korean-btn" data-action="align-right" title="ì˜¤ë¥¸ìª½ ì •ë ¬">
                                <span>â–¶</span>
                            </button>
                        </div>

                        <div class="border-l border-gray-300 h-6 mx-2"></div>

                        <!-- ê¸€ì í¬ê¸° -->
                        <select class="korean-select" data-action="font-size">
                            <option value="">ê¸€ì í¬ê¸° ì„ íƒ</option>
                            <option value="reset">ì¼ë°˜ í¬ê¸°ë¡œ ë˜ëŒë¦¬ê¸°</option>
                            <option value="10px">ë§¤ìš° ì‘ê²Œ (10px)</option>
                            <option value="12px">ì‘ê²Œ (12px)</option>
                            <option value="14px">ë³´í†µ (14px)</option>
                            <option value="16px">í¬ê²Œ (16px)</option>
                            <option value="18px">ë” í¬ê²Œ (18px)</option>
                            <option value="20px">ì œëª©ìš© (20px)</option>
                            <option value="24px">í° ì œëª© (24px)</option>
                        </select>                        <!-- ê¸€ììƒ‰ -->
                        <div class="color-group">
                            <span class="text-xs text-gray-600">ìƒ‰ìƒ:</span>
                            <button type="button" class="color-btn" data-color="reset" style="background: linear-gradient(45deg, #000 25%, transparent 25%, transparent 50%, #000 50%, #000 75%, transparent 75%); background-size: 8px 8px;" title="ê¸°ë³¸ìƒ‰"></button>
                            <button type="button" class="color-btn" data-color="#000000" style="background: #000000" title="ê²€ì •"></button>
                            <button type="button" class="color-btn" data-color="#FF0000" style="background: #FF0000" title="ë¹¨ê°•"></button>
                            <button type="button" class="color-btn" data-color="#0066CC" style="background: #0066CC" title="íŒŒë‘"></button>
                            <button type="button" class="color-btn" data-color="#008000" style="background: #008000" title="ì´ˆë¡"></button>
                            <button type="button" class="color-btn" data-color="#FF6600" style="background: #FF6600" title="ì£¼í™©"></button>
                        </div>

                        <div class="border-l border-gray-300 h-6 mx-2"></div>

                        <!-- ìŠ¤íƒ€ì¼ ì´ˆê¸°í™” -->
                        <button type="button" class="korean-btn" onclick="resetAllStyles()" title="ëª¨ë“  ìŠ¤íƒ€ì¼ ì´ˆê¸°í™”">
                            <span>ğŸ”„</span>
                        </button>

                        <div class="border-l border-gray-300 h-6 mx-2"></div>

                        <!-- í•œê¸€ íŠ¹ìˆ˜ë¬¸ì -->
                        <div class="char-group">
                            <span class="text-xs text-gray-600">íŠ¹ìˆ˜ë¬¸ì:</span>
                            <button type="button" class="char-btn" data-char="Â·" title="ê°€ìš´ëƒì ">Â·</button>
                            <button type="button" class="char-btn" data-char="â€¦" title="ì¤„ì„í‘œ">â€¦</button>
                            <button type="button" class="char-btn" data-char="â€»" title="ì°¸ê³ í‘œ">â€»</button>
                            <button type="button" class="char-btn" data-char="â˜…" title="ë³„í‘œ">â˜…</button>
                            <button type="button" class="char-btn" data-char="â‘ " title="ì›ë¬¸ì1">â‘ </button>
                            <button type="button" class="char-btn" data-char="â‘¡" title="ì›ë¬¸ì2">â‘¡</button>
                            <button type="button" class="char-btn" data-char="â‘¢" title="ì›ë¬¸ì3">â‘¢</button>
                            <button type="button" class="char-btn" data-char="ã€Œ" title="ëª¨ë”°ê¸°ê´„í˜¸ì—´ê¸°">ã€Œ</button>
                            <button type="button" class="char-btn" data-char="ã€" title="ëª¨ë”°ê¸°ê´„í˜¸ë‹«ê¸°">ã€</button>
                        </div>
                    </div>
                </div>

                <textarea id="descHtml" name="description" class="hidden"></textarea>
            </div>

            <!-- ë“±ë¡ ë²„íŠ¼ -->
            <div class="flex justify-center">
                <button type="submit"
                    class="mt-4 py-3 px-12 bg-blue-600 text-white rounded-xl text-lg font-semibold hover:bg-blue-700 transition">
                    ë“±ë¡
                </button>
            </div>
        </form>
    </main>

    <script>
        /* =========================================
           1. ì£¼ì†Œê²€ìƒ‰ + ì§€ë„
        ========================================== */
        function searchAddress() {
            new daum.Postcode({
                oncomplete: function (data) {
                    const addr = data.address;
                    document.getElementById("address").value = addr;
                    updateMapByAddress(addr);
                    const detail = document.getElementById("detailAddress");
                    if (detail) detail.focus();
                }
            }).open();
        }

        window.map = null;
        window.marker = null;
        kakao.maps.load(function () {
            const mapContainer = document.getElementById("map");
            const pos = new kakao.maps.LatLng(37.5665, 126.9780);
            window.map = new kakao.maps.Map(mapContainer, { center: pos, level: 3 });
            window.marker = new kakao.maps.Marker({ map: window.map, position: pos });
        });

        function updateMapByAddress(address) {
            const geocoder = new kakao.maps.services.Geocoder();
            geocoder.addressSearch(address, function (result, status) {
                if (status === kakao.maps.services.Status.OK) {
                    const lat = result[0].y, lng = result[0].x;
                    const loc = new kakao.maps.LatLng(lat, lng);
                    window.map.setCenter(loc);
                    window.marker.setPosition(loc);
                }
            });
        }

        /* =========================================
           2. ì»¤ìŠ¤í…€ í•œê¸€ íŠ¹í™” ì—ë””í„° ì´ˆê¸°í™”
        ========================================== */
        let customEditor;
        
        // í˜„ì¬ ìŠ¤íƒ€ì¼ ìƒíƒœ ê´€ë¦¬ (ì „ì—­ ë³€ìˆ˜)
        let currentFontSize = null;
        let currentTextColor = null;

        // ì—ë””í„° ì´ˆê¸°í™”
        document.addEventListener("DOMContentLoaded", function() {
            customEditor = document.getElementById('customEditor');
            
            // ì´ë¯¸ì§€ ì—…ë¡œë“œ ê¸°ëŠ¥ ì´ˆê¸°í™”
            setupImageUpload();
            
            // ê¸°ë³¸ íˆ´ë°” ì´ë²¤íŠ¸ ì²˜ë¦¬
            document.querySelectorAll('.toolbar-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const action = this.getAttribute('data-action');
                    
                    // ëª©ë¡ ì²˜ë¦¬
                    if (action === 'ul' || action === 'ol') {
                        applyListFormat(action);
                    } else {
                        applyFormat(action);
                    }
                    updateToolbarState();
                });
            });

            // ì œëª© ì„ íƒ
            document.querySelector('[data-action="heading"]').addEventListener('change', function() {
                if (this.value) {
                    applyHeading(this.value);
                } else {
                    removeHeading();
                }
                updateToolbarState();
            });

            // í•œê¸€ íŠ¹í™” íˆ´ë°” ì´ë²¤íŠ¸ ì²˜ë¦¬
            // í…ìŠ¤íŠ¸ ì •ë ¬ ë²„íŠ¼
            document.querySelectorAll('[data-action^="align-"]').forEach(btn => {
                btn.addEventListener('click', function() {
                    const alignment = this.getAttribute('data-action').replace('align-', '');
                    applyTextAlign(alignment);
                });
            });

            // ê¸€ì í¬ê¸° ì„ íƒ
            document.querySelector('[data-action="font-size"]').addEventListener('change', function() {
                if (this.value) {
                    console.log('ê¸€ì í¬ê¸° ë³€ê²½:', this.value);
                    if (this.value === 'reset') {
                        resetFontSize();
                    } else {
                        applyFontSize(this.value);
                    }
                    this.value = ''; // ì„ íƒ ì´ˆê¸°í™”
                }
            });

            // ê¸€ììƒ‰ ë²„íŠ¼
            document.querySelectorAll('.color-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const color = this.getAttribute('data-color');
                    console.log('ê¸€ììƒ‰ ë³€ê²½:', color);
                    if (color === 'reset') {
                        resetTextColor();
                    } else {
                        applyTextColor(color);
                    }
                });
            });

            // íŠ¹ìˆ˜ë¬¸ì ë²„íŠ¼
            document.querySelectorAll('.char-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const char = this.getAttribute('data-char');
                    insertCharacter(char);
                });
            });

            // ì—ë””í„° ìƒíƒœ ì—…ë°ì´íŠ¸
            customEditor.addEventListener('input', updateToolbarState);
            customEditor.addEventListener('keyup', updateToolbarState);
            customEditor.addEventListener('mouseup', updateToolbarState);

            // ê¸°ë³¸ ì„œì‹ ì ìš© í•¨ìˆ˜
            function applyFormat(command) {
                customEditor.focus();
                document.execCommand(command, false, null);
            }

            // ì œëª© ì ìš©
            function applyHeading(tag) {
                customEditor.focus();
                document.execCommand('formatBlock', false, tag);
            }

            // ì œëª© ì œê±°
            function removeHeading() {
                customEditor.focus();
                document.execCommand('formatBlock', false, 'p');
            }

            // í…ìŠ¤íŠ¸ ì •ë ¬
            function applyTextAlign(alignment) {
                customEditor.focus();
                document.execCommand('justify' + alignment.charAt(0).toUpperCase() + alignment.slice(1), false, null);
            }

            // ëª©ë¡ ì²˜ë¦¬ í•¨ìˆ˜
            function applyListFormat(listType) {
                console.log('ëª©ë¡ ì ìš©:', listType);
                customEditor.focus();
                
                if (listType === 'ul') {
                    document.execCommand('insertUnorderedList', false, null);
                    console.log('âœ… ê¸€ë¨¸ë¦¬ ê¸°í˜¸ ëª©ë¡ ì ìš©');
                } else if (listType === 'ol') {
                    document.execCommand('insertOrderedList', false, null);
                    console.log('âœ… ë²ˆí˜¸ ë§¤ê¸°ê¸° ëª©ë¡ ì ìš©');
                }
            }

            // ì´ë¯¸ì§€ ì—…ë¡œë“œ ì²˜ë¦¬
            function setupImageUpload() {
                const imageBtn = document.getElementById('imageUploadBtn');
                const imageInput = document.getElementById('imageUploadInput');
                
                // ì´ë¯¸ì§€ ë²„íŠ¼ í´ë¦­ ì‹œ íŒŒì¼ ì„ íƒ ì°½ ì—´ê¸°
                imageBtn.addEventListener('click', function() {
                    imageInput.click();
                });
                
                // íŒŒì¼ ì„ íƒ ì‹œ ì—…ë¡œë“œ ì²˜ë¦¬
                imageInput.addEventListener('change', async function(e) {
                    const file = e.target.files[0];
                    if (!file) return;
                    
                    console.log('ì´ë¯¸ì§€ ì—…ë¡œë“œ ì‹œì‘:', file.name);
                    
                    try {
                        // FormDataë¡œ ì´ë¯¸ì§€ ì „ì†¡
                        const formData = new FormData();
                        formData.append('image', file);
                        
                        const response = await fetch('/upload/image', {
                            method: 'POST',
                            body: formData
                        });
                        
                        const result = await response.json();
                        console.log('ğŸ“¥ ì„œë²„ ì‘ë‹µ:', result);
                        
                        if (result.success) {
                            // ì´ë¯¸ì§€ ì •ë ¬ ì„ íƒ í‘œì‹œ
                            showImageAlignOptions(result.imagePath);
                            console.log('âœ… ì´ë¯¸ì§€ ì—…ë¡œë“œ ì„±ê³µ:', result.imagePath);
                            console.log('ğŸ”— ìµœì¢… ì´ë¯¸ì§€ URL:', window.location.origin + result.imagePath);
                        } else {
                            console.error('âŒ ì—…ë¡œë“œ ì‹¤íŒ¨:', result);
                            alert('ì´ë¯¸ì§€ ì—…ë¡œë“œ ì‹¤íŒ¨: ' + result.error);
                        }
                    } catch (error) {
                        console.error('ì´ë¯¸ì§€ ì—…ë¡œë“œ ì˜¤ë¥˜:', error);
                        alert('ì´ë¯¸ì§€ ì—…ë¡œë“œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
                    }
                    
                    // íŒŒì¼ ì„ íƒ ì´ˆê¸°í™”
                    imageInput.value = '';
                });
            }
            
            // ì´ë¯¸ì§€ ì •ë ¬ ì˜µì…˜ í‘œì‹œ
            function showImageAlignOptions(imagePath) {
                // ì •ë ¬ ì„ íƒ íŒì—… ìƒì„±
                const popup = document.createElement('div');
                popup.style.cssText = `
                    position: fixed;
                    top: 50%;
                    left: 50%;
                    transform: translate(-50%, -50%);
                    background: white;
                    border: 1px solid #ddd;
                    border-radius: 8px;
                    padding: 20px;
                    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
                    z-index: 1000;
                `;
                
                popup.innerHTML = `
                    <h3 style="margin: 0 0 15px 0; font-size: 16px;">ì´ë¯¸ì§€ ì •ë ¬ ì„ íƒ</h3>
                    <div style="display: flex; gap: 10px; margin-bottom: 15px;">
                        <button id="alignLeft" style="padding: 8px 12px; border: 1px solid #ddd; border-radius: 4px; cursor: pointer;">â† ì™¼ìª½</button>
                        <button id="alignCenter" style="padding: 8px 12px; border: 1px solid #ddd; border-radius: 4px; cursor: pointer;">â†” ê°€ìš´ë°</button>
                        <button id="alignRight" style="padding: 8px 12px; border: 1px solid #ddd; border-radius: 4px; cursor: pointer;">â†’ ì˜¤ë¥¸ìª½</button>
                    </div>
                    <button id="cancelAlign" style="padding: 6px 15px; border: 1px solid #ccc; border-radius: 4px; cursor: pointer; float: right;">ì·¨ì†Œ</button>
                `;
                
                document.body.appendChild(popup);
                
                // ì •ë ¬ ë²„íŠ¼ ì´ë²¤íŠ¸
                popup.querySelector('#alignLeft').onclick = () => {
                    insertImageToEditor(imagePath, 'left');
                    document.body.removeChild(popup);
                };
                popup.querySelector('#alignCenter').onclick = () => {
                    insertImageToEditor(imagePath, 'center');
                    document.body.removeChild(popup);
                };
                popup.querySelector('#alignRight').onclick = () => {
                    insertImageToEditor(imagePath, 'right');
                    document.body.removeChild(popup);
                };
                popup.querySelector('#cancelAlign').onclick = () => {
                    document.body.removeChild(popup);
                };
            }
            
            // ì—ë””í„°ì— ì´ë¯¸ì§€ ì‚½ì… (ì •ë ¬ ì§€ì›)
            function insertImageToEditor(imagePath, alignment = 'left') {
                console.log('ğŸ–¼ï¸ ì´ë¯¸ì§€ ì‚½ì… ì‹œì‘:', imagePath, 'ì •ë ¬:', alignment);
                customEditor.focus();
                
                const selection = window.getSelection();
                const range = selection.getRangeAt(0);
                
                // img íƒœê·¸ ìƒì„±
                const img = document.createElement('img');
                img.src = imagePath;
                img.style.maxWidth = '100%';
                img.style.height = 'auto';
                img.style.margin = '10px 0';
                img.style.borderRadius = '4px';
                img.style.border = '1px solid #ddd'; // ë””ë²„ê¹…ìš© ê²½ê³„ì„ 
                
                // ì •ë ¬ ì ìš©
                if (alignment === 'center') {
                    img.style.display = 'block';
                    img.style.marginLeft = 'auto';
                    img.style.marginRight = 'auto';
                } else if (alignment === 'right') {
                    img.style.float = 'right';
                    img.style.marginLeft = '10px';
                } else { // left
                    img.style.float = 'left';
                    img.style.marginRight = '10px';
                }
                
                // ì´ë¯¸ì§€ ë¡œë“œ ì´ë²¤íŠ¸ ì¶”ê°€
                img.onload = function() {
                    console.log('âœ… ì´ë¯¸ì§€ ë¡œë“œ ì„±ê³µ:', imagePath);
                };
                img.onerror = function() {
                    console.error('âŒ ì´ë¯¸ì§€ ë¡œë“œ ì‹¤íŒ¨:', imagePath);
                    console.error('âŒ ì‹¤ì œ URL:', this.src);
                };
                
                // í˜„ì¬ ìœ„ì¹˜ì— ì´ë¯¸ì§€ ì‚½ì…
                range.insertNode(img);
                
                // ì»¤ì„œë¥¼ ì´ë¯¸ì§€ ë’¤ë¡œ ì´ë™
                range.setStartAfter(img);
                range.collapse(true);
                selection.removeAllRanges();
                selection.addRange(range);
                
                console.log('âœ… ì´ë¯¸ì§€ê°€ ì—ë””í„°ì— ì‚½ì…ë¨ (ì •ë ¬: ' + alignment + '):', img);
            }

            // ê¸€ì í¬ê¸° ì ìš© - ì¦‰ì‹œ ë°˜ì˜ë˜ëŠ” ê°„ë‹¨í•œ ë°©ì‹
            function applyFontSize(size) {
                console.log('ê¸€ì í¬ê¸° ì ìš©:', size);
                
                const editor = document.getElementById('customEditor');
                editor.focus();
                
                const selection = window.getSelection();
                if (selection.rangeCount === 0) return;
                
                if (!selection.isCollapsed) {
                    // ì„ íƒëœ í…ìŠ¤íŠ¸ê°€ ìˆëŠ” ê²½ìš°
                    const range = selection.getRangeAt(0);
                    const span = document.createElement('span');
                    span.style.fontSize = size;
                    span.textContent = selection.toString();
                    
                    range.deleteContents();
                    range.insertNode(span);
                    
                    // ì»¤ì„œë¥¼ span ë’¤ë¡œ ì´ë™
                    range.setStartAfter(span);
                    range.collapse(true);
                    selection.removeAllRanges();
                    selection.addRange(range);
                    
                } else {
                    // ì„ íƒëœ í…ìŠ¤íŠ¸ê°€ ì—†ëŠ” ê²½ìš° - ë‹¤ìŒ íƒ€ì´í•‘ì„ ìœ„í•´ ì„¤ì •
                    currentFontSize = size;
                    console.log('âœ… ë‹¤ìŒ íƒ€ì´í•‘ë¶€í„° ì ìš©í•  ê¸€ì í¬ê¸°:', size);
                    showStylePreview('ê¸€ì í¬ê¸°: ' + size);
                }
            }

            // ê¸€ììƒ‰ ì ìš©
            function applyTextColor(color) {
                customEditor.focus();
                const selection = window.getSelection();
                
                if (selection.rangeCount > 0 && !selection.isCollapsed) {
                    // 1. í…ìŠ¤íŠ¸ê°€ ì„ íƒëœ ê²½ìš° - ì„ íƒëœ í…ìŠ¤íŠ¸ì— ì ìš©
                    const range = selection.getRangeAt(0);
                    const selectedText = selection.toString();
                    
                    range.deleteContents();
                    
                    const span = document.createElement('span');
                    span.style.color = color;
                    span.textContent = selectedText;
                    
                    range.insertNode(span);
                    
                    range.setStartAfter(span);
                    range.collapse(true);
                    selection.removeAllRanges();
                    selection.addRange(range);
                    
                    console.log('ì„ íƒëœ í…ìŠ¤íŠ¸ì— ê¸€ììƒ‰ ì ìš©:', color);
                } else {
                    // 2. í…ìŠ¤íŠ¸ê°€ ì„ íƒë˜ì§€ ì•Šì€ ê²½ìš° - ì•ìœ¼ë¡œ ì…ë ¥í•  í…ìŠ¤íŠ¸ì— ì ìš©
                    currentTextColor = color;
                    
                    // í˜„ì¬ ì»¤ì„œ ìœ„ì¹˜ì— ìŠ¤íƒ€ì¼ì´ ì ìš©ëœ span ì‚½ì…
                    const span = document.createElement('span');
                    span.style.color = color;
                    span.setAttribute('data-typing-style', 'true');
                    
                    const range = selection.getRangeAt(0);
                    range.insertNode(span);
                    
                    // ì»¤ì„œë¥¼ span ì•ˆìœ¼ë¡œ ì´ë™
                    range.setStart(span, 0);
                    range.collapse(true);
                    selection.removeAllRanges();
                    selection.addRange(range);
                    
                    console.log('ì•ìœ¼ë¡œ ì…ë ¥í•  í…ìŠ¤íŠ¸ ìƒ‰ìƒ ì„¤ì •:', color);
                    
                    const colorName = getColorName(color);
                    showStylePreview('ê¸€ììƒ‰: ' + colorName);
                }
            }

            // íŠ¹ìˆ˜ë¬¸ì ì‚½ì…
            function insertCharacter(char) {
                customEditor.focus();
                document.execCommand('insertText', false, char);
            }

            // íˆ´ë°” ìƒíƒœ ì—…ë°ì´íŠ¸
            function updateToolbarState() {
                // êµµê²Œ, ê¸°ìš¸ì„, ë°‘ì¤„ ìƒíƒœ ì²´í¬
                document.querySelector('[data-action="bold"]').classList.toggle('active', document.queryCommandState('bold'));
                document.querySelector('[data-action="italic"]').classList.toggle('active', document.queryCommandState('italic'));
                document.querySelector('[data-action="underline"]').classList.toggle('active', document.queryCommandState('underline'));
            }

            // ì—ë””í„° ìŠ¤íƒ€ì¼ ì—…ë°ì´íŠ¸ (ì•ìœ¼ë¡œ ì…ë ¥í•  í…ìŠ¤íŠ¸ìš©)
            function updateEditorStyle() {
                // í˜„ì¬ ìŠ¤íƒ€ì¼ ìƒíƒœë§Œ ì €ì¥ (ì‹¤ì œ ì ìš©ì€ keypressì—ì„œ)
                console.log('í˜„ì¬ ìŠ¤íƒ€ì¼ ìƒíƒœ:', { fontSize: currentFontSize, color: currentTextColor });
            }

            // ìŠ¤íƒ€ì¼ ë¯¸ë¦¬ë³´ê¸° í‘œì‹œ
            function showStylePreview(text) {
                // ê¸°ì¡´ ë¯¸ë¦¬ë³´ê¸° ì œê±°
                const existingPreview = document.getElementById('stylePreview');
                if (existingPreview) {
                    existingPreview.remove();
                }
                
                // ìƒˆ ë¯¸ë¦¬ë³´ê¸° ìƒì„±
                const preview = document.createElement('div');
                preview.id = 'stylePreview';
                preview.textContent = text;
                preview.style.cssText = `
                    position: fixed;
                    top: 20px;
                    right: 20px;
                    background: #3b82f6;
                    color: white;
                    padding: 8px 12px;
                    border-radius: 6px;
                    font-size: 12px;
                    z-index: 1000;
                    animation: fadeInOut 2s ease-in-out;
                `;
                
                document.body.appendChild(preview);
                
                // 2ì´ˆ í›„ ìë™ ì œê±°
                setTimeout(() => {
                    if (preview.parentNode) {
                        preview.remove();
                    }
                }, 2000);
            }

            // ìƒ‰ìƒ ì´ë¦„ ë°˜í™˜
            function getColorName(color) {
                const colorMap = {
                    '#000000': 'ê²€ì •',
                    '#FF0000': 'ë¹¨ê°•',
                    '#0066CC': 'íŒŒë‘',
                    '#008000': 'ì´ˆë¡',
                    '#FF6600': 'ì£¼í™©'
                };
                return colorMap[color] || color;
            }

            // ê¸€ì í¬ê¸° ë¦¬ì…‹
            function resetFontSize() {
                console.log('ğŸ”„ ê¸€ì í¬ê¸° ì´ˆê¸°í™”');
                const editor = document.getElementById('customEditor');
                editor.focus();
                currentFontSize = null;
                
                // ê¸°ì¡´ ë°©ì‹ ì œê±° - ì—ë””í„° ì „ì²´ ìŠ¤íƒ€ì¼ ë³€ê²½í•˜ì§€ ì•ŠìŒ
                console.log('âœ… ê¸€ìí¬ê¸° ì´ˆê¸°í™” ì™„ë£Œ (ê¸°ì¡´ í…ìŠ¤íŠ¸ëŠ” ìœ ì§€)');
                showStylePreview('ê¸€ì í¬ê¸°: ê¸°ë³¸');
            }

            // ê¸€ììƒ‰ ë¦¬ì…‹
            function resetTextColor() {
                customEditor.focus();
                currentTextColor = null;
                document.execCommand('foreColor', false, '#000000'); // ê¸°ë³¸ ê²€ì •ìƒ‰
                console.log('ê¸€ììƒ‰ ì´ˆê¸°í™”');
                showStylePreview('ê¸€ììƒ‰: ê¸°ë³¸');
            }

            // íƒ€ì´í•‘ ì‹œ ê¸€ì í¬ê¸° ì¦‰ì‹œ ì ìš© - ìƒˆ ê¸€ìë§Œ ì ìš©
            customEditor.addEventListener('input', function(e) {
                // ë¬¸ì ì…ë ¥ì´ê³  ê¸€ì í¬ê¸°ê°€ ì„¤ì •ë˜ì–´ ìˆìœ¼ë©´
                if (e.data && currentFontSize) {
                    const selection = window.getSelection();
                    if (selection.rangeCount > 0) {
                        const range = selection.getRangeAt(0);
                        const textNode = range.startContainer;
                        
                        // ìƒˆë¡œ ì…ë ¥ëœ ë¬¸ìê°€ ìˆê³ , í…ìŠ¤íŠ¸ ë…¸ë“œì¸ ê²½ìš°
                        if (textNode.nodeType === Node.TEXT_NODE) {
                            const parent = textNode.parentElement;
                            const cursorOffset = range.startOffset;
                            
                            // ìƒˆë¡œ ì…ë ¥ëœ ë¬¸ìë§Œ ë¶„ë¦¬í•´ì„œ ìŠ¤íƒ€ì¼ ì ìš©
                            if (cursorOffset > 0) {
                                const beforeText = textNode.textContent.substring(0, cursorOffset - 1);
                                const newChar = textNode.textContent.substring(cursorOffset - 1, cursorOffset);
                                const afterText = textNode.textContent.substring(cursorOffset);
                                
                                // ê¸°ì¡´ í…ìŠ¤íŠ¸ëŠ” ê·¸ëŒ€ë¡œ ë‘ê³ , ìƒˆ ë¬¸ìë§Œ spanìœ¼ë¡œ ê°ì‹¸ê¸°
                                if (beforeText) {
                                    const beforeNode = document.createTextNode(beforeText);
                                    parent.insertBefore(beforeNode, textNode);
                                }
                                
                                // ìƒˆ ë¬¸ìë¥¼ ìŠ¤íƒ€ì¼ì´ ì ìš©ëœ spanìœ¼ë¡œ ê°ì‹¸ê¸°
                                const newSpan = document.createElement('span');
                                newSpan.style.fontSize = currentFontSize;
                                newSpan.textContent = newChar;
                                parent.insertBefore(newSpan, textNode);
                                
                                // ë‚¨ì€ í…ìŠ¤íŠ¸ ì²˜ë¦¬
                                if (afterText) {
                                    textNode.textContent = afterText;
                                    // ì»¤ì„œë¥¼ ë‚¨ì€ í…ìŠ¤íŠ¸ ì‹œì‘ ë¶€ë¶„ìœ¼ë¡œ
                                    range.setStart(textNode, 0);
                                } else {
                                    // ë‚¨ì€ í…ìŠ¤íŠ¸ê°€ ì—†ìœ¼ë©´ ì›ë³¸ ë…¸ë“œ ì œê±°í•˜ê³  span ë’¤ë¡œ ì»¤ì„œ ì´ë™
                                    parent.removeChild(textNode);
                                    range.setStartAfter(newSpan);
                                }
                                
                                range.collapse(true);
                                selection.removeAllRanges();
                                selection.addRange(range);
                                
                                console.log('âœ… ìƒˆ ë¬¸ìë§Œ ê¸€ì í¬ê¸° ì ìš©:', newChar, currentFontSize);
                            }
                        }
                    }
                }
                
                updateToolbarState();
                console.log('=== INPUT ì´ë²¤íŠ¸ ì™„ë£Œ ===');
            });

            // Enter í‚¤ ì²˜ë¦¬ - ê¸€ì í¬ê¸° ìœ ì§€
            customEditor.addEventListener('keydown', function(e) {
                if (e.key === 'Enter') {
                    e.preventDefault();
                    
                    const selection = window.getSelection();
                    const range = selection.getRangeAt(0);
                    
                    // ì¤„ë°”ê¿ˆ ì¶”ê°€
                    const br = document.createElement('br');
                    range.insertNode(br);
                    
                    // ê¸€ì í¬ê¸°ê°€ ìˆìœ¼ë©´ ìƒˆ ì¤„ì—ë„ ì ìš©
                    if (currentFontSize) {
                        const span = document.createElement('span');
                        span.style.fontSize = currentFontSize;
                        span.textContent = '';
                        
                        range.setStartAfter(br);
                        range.insertNode(span);
                        
                        // ì»¤ì„œë¥¼ ìƒˆ span ì•ˆìœ¼ë¡œ
                        range.setStart(span, 0);
                        range.collapse(true);
                        selection.removeAllRanges();
                        selection.addRange(range);
                        
                        console.log('ìƒˆ ì¤„ì— ê¸€ì í¬ê¸° ìœ ì§€:', currentFontSize);
                    } else {
                        // ê¸€ì í¬ê¸° ì—†ìœ¼ë©´ br ë’¤ë¡œ
                        range.setStartAfter(br);
                        range.collapse(true);
                        selection.removeAllRanges();
                        selection.addRange(range);
                    }
                }
            });
        });

        // ì „ì²´ ìŠ¤íƒ€ì¼ ì´ˆê¸°í™” (ì „ì—­ í•¨ìˆ˜)
        function resetAllStyles() {
            currentFontSize = null;
            currentTextColor = null;
            
            const editor = document.getElementById('customEditor');
            editor.focus();
            
            // ëª¨ë“  ì„œì‹ ì œê±°
            document.execCommand('removeFormat', false, null);
            document.execCommand('fontSize', false, '3');
            document.execCommand('foreColor', false, '#000000');
            
            console.log('ëª¨ë“  ìŠ¤íƒ€ì¼ ì´ˆê¸°í™”');
            
            // í”¼ë“œë°± í‘œì‹œ
            const preview = document.createElement('div');
            preview.textContent = 'ëª¨ë“  ìŠ¤íƒ€ì¼ì´ ì´ˆê¸°í™”ë˜ì—ˆìŠµë‹ˆë‹¤';
            preview.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: #10b981;
                color: white;
                padding: 8px 12px;
                border-radius: 6px;
                font-size: 12px;
                z-index: 1000;
                animation: fadeInOut 3s ease-in-out;
            `;
            
            document.body.appendChild(preview);
            setTimeout(() => preview.remove(), 3000);
        }

        /* ì „ì†¡ ì‹œ description ë‹´ê¸° */
        document.getElementById("openForm").addEventListener("submit", async (e) => {
            e.preventDefault();
            
            console.log("ğŸ“ í¼ ì œì¶œ ì‹œì‘");
            
            // ì»¤ìŠ¤í…€ ì—ë””í„°ì—ì„œ HTML ë‚´ìš© ê°€ì ¸ì˜¤ê¸°
            if (customEditor) {
                const editorContent = customEditor.innerHTML;
                console.log("ğŸ“„ ì—ë””í„° ë‚´ìš©:", editorContent.substring(0, 100) + "...");
                document.getElementById("descHtml").value = editorContent;
            }
            
            // ì£¼ì†Œì™€ ìƒì„¸ì£¼ì†Œ ë”°ë¡œ ì „ì†¡ (DB ë¶„ë¦¬ ì €ì¥ìš©)
            const baseAddr = document.getElementById("address").value || "";
            const detailAddr = document.getElementById("detailAddress").value || "";
            console.log("ğŸ  ê¸°ë³¸ ì£¼ì†Œ:", baseAddr);
            console.log("ğŸ  ìƒì„¸ ì£¼ì†Œ:", detailAddr);
            
            // FormData ìƒì„±
            const formData = new FormData(e.target);
            
            // ê¸°ë³¸ì£¼ì†Œì™€ ìƒì„¸ì£¼ì†Œ ê°ê° ì„¤ì •
            formData.set("address", baseAddr);
            formData.set("detail_address", detailAddr);
            
            // description í•„ë“œëª…ì„ ì„œë²„ì—ì„œ ë°›ì„ ìˆ˜ ìˆë„ë¡ ì„¤ì •
            formData.set("description", document.getElementById("descHtml").value);
            
            // ì „ì†¡í•  ë°ì´í„° ë¡œê¹…
            console.log("ğŸ“¤ ì „ì†¡ ë°ì´í„°:");
            for (let [key, value] of formData.entries()) {
                if (key === 'description') {
                    console.log(`${key}: ${typeof value === 'string' ? value.substring(0, 100) + "..." : value}`);
                } else {
                    console.log(`${key}: ${value}`);
                }
            }
            
            try {
                console.log("ğŸš€ ì„œë²„ë¡œ ì „ì†¡ ì¤‘...");
                const response = await fetch("/openregister", {
                    method: "POST",
                    body: formData
                });
                
                const result = await response.json();
                console.log("ğŸ“¥ ì„œë²„ ì‘ë‹µ:", result);
                
                if (result.success) {
                    alert("ë“±ë¡ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!");
                    console.log("âœ… ë“±ë¡ ì„±ê³µ - ID:", result.id);
                    window.location.href = "/open.html";
                } else {
                    alert("ë“±ë¡ ì‹¤íŒ¨: " + (result.error || result.message || "ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜"));
                    console.error("âŒ ë“±ë¡ ì‹¤íŒ¨:", result);
                }
            } catch (err) {
                console.error("âŒ ì„œë²„ í†µì‹  ì˜¤ë¥˜:", err);
                alert("ì„œë²„ ì˜¤ë¥˜: " + err.message);
            }
        });
    </script>
</body>

</html>