<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ì˜¤í”ˆì˜ˆì • ë“±ë¡ | MALL HANKOOK v2.1</title>
  <!-- ğŸš€ ìºì‹œ ë°©ì§€: ë¸Œë¼ìš°ì €ê°€ í•­ìƒ ìµœì‹  ë²„ì „ì„ ë¡œë“œí•˜ë„ë¡ -->
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
  <meta http-equiv="Pragma" content="no-cache">
  <meta http-equiv="Expires" content="0">
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>
  <script
    src="https://dapi.kakao.com/v2/maps/sdk.js?appkey=6286d4d9bc1d503495b03f46622b5dc8&autoload=false&libraries=services"></script>
  
  <!-- ì›¹í°íŠ¸ ë¡œë“œ -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/static/pretendard.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Pretendard:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  
  <!-- ê²€ì¦ëœ í•œê¸€ ë¬´ë£Œ ì›¹í°íŠ¸ -->
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@100;300;400;500;700;900&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+KR:wght@200;300;400;500;600;700;900&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Nanum+Gothic:wght@400;700;800&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Nanum+Myeongjo:wght@400;700;800&display=swap" rel="stylesheet">
  
  <!-- ê³ í’ˆì§ˆ UI ìµœì í™” í°íŠ¸ -->
  <link href="https://fonts.googleapis.com/css2?family=Spoqa+Han+Sans+Neo:wght@100;300;400;500;700&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Gowun+Dodum&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Gowun+Batang:wght@400;700&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: Pretendard, system-ui, -apple-system, Segoe UI, Roboto, 'Noto Sans KR', sans-serif;
      background: linear-gradient(135deg, #f8fafc, #e0e7ff);
      color: #111827;
      min-height: 100vh
    }

    .neo-card {
      background: rgba(255, 255, 255, .65);
      backdrop-filter: blur(14px);
      border: 1px solid rgba(255, 255, 255, .45);
      border-radius: 1.25rem;
      box-shadow: 8px 8px 24px rgba(0, 0, 0, .07)
    }

    [contenteditable][data-placeholder]:empty:before {
      content: attr(data-placeholder);
      color: #9ca3af;
      pointer-events: none
    }

    .editor-toolbar {
      background: linear-gradient(135deg, #f8fafc, #f1f5f9)
    }

    .toolbar-btn {
      padding: 6px 12px;
      border: 1px solid #d1d5db;
      background: #fff;
      border-radius: 4px;
      cursor: pointer;
      font-size: 12px;
      transition: all .2s
    }

    .toolbar-btn:hover {
      background: #e0e7ff;
      border-color: #6366f1
    }

    .toolbar-select {
      padding: 4px 8px;
      border: 1px solid #d1d5db;
      border-radius: 4px;
      background: #fff;
      font-size: 12px;
      cursor: pointer
    }

    .korean-toolbar {
      background: linear-gradient(135deg, #f8fafc, #e2e8f0);
      border: 1px solid #cbd5e1
    }

    .korean-btn {
      width: 32px;
      height: 32px;
      border: 1px solid #d1d5db;
      background: #fff;
      border-radius: 6px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 14px;
      transition: .2s
    }

    .korean-btn:hover {
      background: #e0e7ff;
      border-color: #6366f1;
      transform: translateY(-1px)
    }

    .korean-select {
      padding: 4px 8px;
      border: 1px solid #d1d5db;
      border-radius: 6px;
      background: #fff;
      font-size: 12px;
      cursor: pointer
    }

    .color-btn {
      width: 24px;
      height: 24px;
      border: 2px solid #d1d5db;
      border-radius: 4px;
      cursor: pointer;
      margin: 0 2px;
      transition: .2s
    }

    .color-btn:hover {
      border-color: #374151;
      transform: scale(1.1)
    }

    /* âœ… í¼ ë°– íˆ´ë°” ìŠ¤íƒ€ì¼ */
    .k-toolbar button {
      padding: 8px 12px;
      border: 1px solid #d1d5db;
      background: rgba(255, 255, 255, 0.9);
      border-radius: 8px;
      cursor: pointer;
      font-size: 13px;
      transition: all 0.2s ease;
      color: #374151;
      font-weight: 500;
      backdrop-filter: blur(4px);
    }

    .k-toolbar button:hover {
      background: #e0e7ff;
      border-color: #6366f1;
      transform: translateY(-2px);
      box-shadow: 0 4px 8px rgba(99, 102, 241, 0.2);
    }

    .k-toolbar select,
    .k-toolbar input[type="color"] {
      padding: 6px 10px;
      border: 1px solid #d1d5db;
      border-radius: 8px;
      background: rgba(255, 255, 255, 0.9);
      font-size: 12px;
      cursor: pointer;
      transition: all 0.2s ease;
      backdrop-filter: blur(4px);
    }

    .k-toolbar select:hover,
    .k-toolbar input[type="color"]:hover {
      border-color: #6366f1;
      box-shadow: 0 2px 4px rgba(99, 102, 241, 0.1);
    }

    /* ì—ë””í„° ë‚´ ì´ë¯¸ì§€ ìŠ¤íƒ€ì¼ */
    #customEditor img {
      max-width: 100%;
      height: auto;
      border: 1px solid #e5e7eb;
      border-radius: 8px;
      margin: 8px 0;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }

    #customEditor:focus {
      border-color: #6366f1;
      box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
    }

    /* ğŸ”§ íˆ´ë°” ê°•ì œ í‘œì‹œ (ìˆ¨ê¹€ ë°©ì§€) - ìµœê°• ë²„ì „ */
    #k-toolbar {
      display: flex !important;
      visibility: visible !important;
      opacity: 1 !important;
      z-index: 100 !important;
      position: sticky !important;
      top: 0 !important;
    }

    /* ğŸ›¡ï¸ ì¶”ê°€ ë³´í˜¸ - ìˆ¨ê¹€ í´ë˜ìŠ¤ ë¬´ë ¥í™” */
    #k-toolbar.hidden,
    #k-toolbar.sr-only,
    #k-toolbar.opacity-0 {
      display: flex !important;
      visibility: visible !important;
      opacity: 1 !important;
    }

    .char-btn {
      width: 28px;
      height: 28px;
      border: 1px solid #d1d5db;
      background: #fff;
      border-radius: 4px;
      cursor: pointer;
      margin: 0 1px;
      font-size: 14px;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      transition: .2s
    }

    .char-btn:hover {
      background: #dcfce7;
      border-color: #16a34a;
      transform: translateY(-1px)
    }

    .img-full {
      width: 100%;
      max-width: 720px;
      height: auto;
      max-height: 480px;
      object-fit: contain;
      border-radius: .5rem
    }

    .img-side {
      width: 360px;
      max-width: 380px;
      height: auto;
      max-height: 320px;
      object-fit: cover;
      border-radius: .5rem
    }

    .img-thumb {
      width: 240px;
      height: auto;
      max-height: 240px;
      object-fit: cover;
      border-radius: .375rem
    }

    @media (max-width:768px) {
      .img-full {
        max-height: 360px
      }

      .img-side {
        width: min(70%, 320px);
        max-height: 300px
      }

      .img-thumb {
        width: 48%;
        max-height: 200px
      }
    }

    /* ì—ë””í„° ì „ìš© ìŠ¤íƒ€ì¼ */
    .editor {
      min-height: 300px;
    }

    .editor:focus {
      outline: none;
      border-color: #6366f1;
      box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
    }

    .btn {
      min-width: 2.25rem;
      height: 2.25rem;
    }

    /* ë ˆì´ì•„ì›ƒ í”ë“¤ë¦¼ ë°©ì§€: outline ëŒ€ì‹  inset box-shadow */
    .btn.active {
      box-shadow: inset 0 0 0 2px rgb(59 130 246);
      background: #eff6ff !important;
      border-color: rgb(59 130 246) !important;
    }

    .swatch {
      transition: transform 0.1s ease;
    }
    
    .swatch:hover {
      transform: scale(1.1);
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }

    .sep {
      width: 1px;
      height: 1.75rem;
      background: #e5e7eb;
    }

    /* í”Œë ˆì´ìŠ¤í™€ë” ìŠ¤íƒ€ì¼ */
    [contenteditable][data-placeholder]:empty:before {
      content: attr(data-placeholder);
      color: #9ca3af;
      pointer-events: none;
      font-style: italic;
    }
  </style>
</head>

<body class="bg-gray-50">
  <!-- âœ… í—¤ë” ì¶”ê°€ -->
  <div id="header"></div>

  <main class="w-full max-w-3xl p-8 neo-card mt-10">
    <h1
      class="text-3xl font-extrabold text-center mb-8 bg-gradient-to-r from-blue-500 to-indigo-500 text-transparent bg-clip-text">
      ì˜¤í”ˆ ë§¤ì¥ ë“±ë¡
    </h1>

    <form id="openForm" class="space-y-6" enctype="multipart/form-data">
      <!-- ê¸°ë³¸ì •ë³´ -->
      <div>
        <label class="block font-semibold mb-1">ìƒí˜¸ëª…</label>
        <input name="store_name" type="text" required
          class="w-full border rounded px-3 py-2 focus:ring-2 focus:ring-blue-400" />
      </div>

      <div>
        <label class="block font-semibold mb-1">ì˜¤í”ˆì¼</label>
        <input name="open_date" type="date" required
          class="w-full border rounded px-3 py-2 focus:ring-2 focus:ring-blue-400" />
      </div>

      <div>
        <label class="block font-semibold mb-1">ì—…ì¢…(ì¹´í…Œê³ ë¦¬)</label>
        <input name="category" type="text" placeholder="ì˜ˆ: í•œì‹, ì¹´í˜, ë³‘ì› ë“±"
          class="w-full border rounded px-3 py-2 focus:ring-2 focus:ring-blue-400" />
      </div>

      <div>
        <label class="block font-semibold mb-1">ì „í™”ë²ˆí˜¸</label>
        <input name="phone" type="text" required placeholder="010-0000-0000"
          class="w-full border rounded px-3 py-2 focus:ring-2 focus:ring-blue-400" />
      </div>

      <!-- ì£¼ì†Œ -->
      <div>
        <label class="block font-semibold mb-1">ì£¼ì†Œ</label>
        <div class="flex gap-2">
          <input id="address" name="address" type="text" readonly
            class="flex-1 border rounded px-3 py-2 focus:ring-2 focus:ring-blue-400" />
          <button type="button" id="btnSearchAddr"
            class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700">ê²€ìƒ‰</button>
        </div>
      </div>

      <!-- ìƒì„¸ ì£¼ì†Œ -->
      <div>
        <label class="block font-semibold mb-1 mt-2">ìƒì„¸ ì£¼ì†Œ</label>
        <input id="detailAddress" name="detail_address" type="text" placeholder="ì˜ˆ: 2ì¸µ, 203í˜¸"
          class="w-full border rounded px-3 py-2 focus:ring-2 focus:ring-blue-400" />
      </div>

      <!-- ì§€ë„ -->
      <div class="flex justify-center">
        <div id="map" class="rounded border border-gray-300 my-4 shadow-sm"
          style="width:100%; height:260px; max-width:480px;"></div>
      </div>

      <!-- ëŒ€í‘œ ì´ë¯¸ì§€ -->
      <div>
        <label class="block font-semibold mb-1">ëŒ€í‘œ ì´ë¯¸ì§€</label>
        <input name="img" type="file" accept="image/*" class="w-full border rounded px-3 py-2 text-gray-700" />
      </div>

      <!-- â–¼ ì„¤ëª…(ì†Œê°œ) ì…ë ¥ ì˜ì—­: ê³ ê¸‰ ë¦¬ì¹˜ í…ìŠ¤íŠ¸ ì—ë””í„° -->
      <div class="mt-6">
        <label for="customEditor" class="block font-semibold mb-2">ì„¤ëª…(ì†Œê°œ)</label>

        <!-- ê³ ê¸‰ ì—ë””í„° íˆ´ë°” -->
        <div id="editor-toolbar"
          class="sticky top-0 z-10 bg-white/80 backdrop-blur border rounded-xl shadow-sm p-2 flex flex-wrap items-center gap-2">
          <!-- í°íŠ¸/í¬ê¸° -->
          <div class="flex items-center gap-2">
            <label class="text-xs text-slate-500">ê¸€ê¼´</label>
            <div class="relative">
              <button id="fontNameBtn" class="h-9 px-3 border rounded-md bg-white hover:bg-slate-50 flex items-center gap-2">
                <span id="fontNameLabel">ê¸°ë³¸</span>
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                </svg>
              </button>
              <div id="fontNameMenu" class="absolute top-full left-0 mt-1 bg-white border rounded-md shadow-lg z-20 min-w-[200px] hidden max-h-60 overflow-y-auto">
                <button data-font="" class="w-full px-3 py-2 text-left hover:bg-slate-50 border-b border-slate-100">ê¸°ë³¸</button>
                
                <!-- êµ¬ê¸€ ì œì‘ - í­ë„“ì€ êµµê¸°Â·ë¬¸ì ì»¤ë²„ë¦¬ì§€ -->
                <button data-font="'Noto Sans KR', sans-serif" class="w-full px-3 py-2 text-left hover:bg-slate-50 border-b border-slate-100" style="font-family: 'Noto Sans KR', sans-serif">ğŸ“ Noto Sans KR</button>
                <button data-font="'Noto Serif KR', serif" class="w-full px-3 py-2 text-left hover:bg-slate-50 border-b border-slate-100" style="font-family: 'Noto Serif KR', serif">ğŸ“œ Noto Serif KR</button>
                
                <!-- ë„¤ì´ë²„ ë°°í¬ - ì˜¤ë˜ ê²€ì¦ë¨ -->
                <button data-font="'Nanum Gothic', sans-serif" class="w-full px-3 py-2 text-left hover:bg-slate-50 border-b border-slate-100" style="font-family: 'Nanum Gothic', sans-serif">ğŸ’« ë‚˜ëˆ”ê³ ë”•</button>
                <button data-font="'Nanum Myeongjo', serif" class="w-full px-3 py-2 text-left hover:bg-slate-50 border-b border-slate-100" style="font-family: 'Nanum Myeongjo', serif">ğŸ–‹ï¸ ë‚˜ëˆ”ëª…ì¡°</button>
                
                <!-- UI ìµœì í™” - ì–‡ì€ êµµê¸° í’ˆì§ˆ ìš°ìˆ˜ -->
                <button data-font="'Spoqa Han Sans Neo', sans-serif" class="w-full px-3 py-2 text-left hover:bg-slate-50 border-b border-slate-100" style="font-family: 'Spoqa Han Sans Neo', sans-serif">ğŸ¨ Spoqa Han Sans Neo</button>
                
                <!-- ê°€ë…ì„± ìš°ìˆ˜ - ì–‡ì€ ëŠë‚Œ -->
                <button data-font="'Gowun Dodum', sans-serif" class="w-full px-3 py-2 text-left hover:bg-slate-50 border-b border-slate-100" style="font-family: 'Gowun Dodum', sans-serif">ğŸŒ¿ ê³ ìš´ ë‹ì›€</button>
                <button data-font="'Gowun Batang', serif" class="w-full px-3 py-2 text-left hover:bg-slate-50 border-b border-slate-100" style="font-family: 'Gowun Batang', serif">ğŸƒ ê³ ìš´ ë°”íƒ•</button>
                
                <!-- ì‹œìŠ¤í…œ í°íŠ¸ -->
                <button data-font="Pretendard, sans-serif" class="w-full px-3 py-2 text-left hover:bg-slate-50 border-b border-slate-100" style="font-family: Pretendard, sans-serif">âš¡ Pretendard</button>
                <button data-font="'Malgun Gothic', sans-serif" class="w-full px-3 py-2 text-left hover:bg-slate-50 border-b border-slate-100" style="font-family: 'Malgun Gothic', sans-serif">ğŸ”µ ë§‘ì€ ê³ ë”•</button>
                
                <!-- ì˜ì–´ í°íŠ¸ -->
                <button data-font="Arial, sans-serif" class="w-full px-3 py-2 text-left hover:bg-slate-50 border-b border-slate-100" style="font-family: Arial, sans-serif">ğŸ”¤ Arial</button>
                <button data-font="'Times New Roman', serif" class="w-full px-3 py-2 text-left hover:bg-slate-50" style="font-family: 'Times New Roman', serif">ğŸ“– Times New Roman</button>
              </div>
            </div>
            <label class="text-xs text-slate-500">í¬ê¸°</label>
            <div class="relative">
              <button id="fontSizeBtn" class="h-9 px-3 border rounded-md bg-white hover:bg-slate-50 flex items-center gap-2">
                <span id="fontSizeLabel">ê¸°ë³¸(3)</span>
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                </svg>
              </button>
              <div id="fontSizeMenu" class="absolute top-full left-0 mt-1 bg-white border rounded-md shadow-lg z-20 min-w-[120px] hidden">
                <button data-size="1" class="w-full px-3 py-2 text-left hover:bg-slate-50 border-b border-slate-100 text-xs">1 (ë§¤ìš° ì‘ê²Œ)</button>
                <button data-size="2" class="w-full px-3 py-2 text-left hover:bg-slate-50 border-b border-slate-100 text-sm">2 (ì‘ê²Œ)</button>
                <button data-size="3" class="w-full px-3 py-2 text-left hover:bg-slate-50 border-b border-slate-100 text-base">3 (ê¸°ë³¸)</button>
                <button data-size="4" class="w-full px-3 py-2 text-left hover:bg-slate-50 border-b border-slate-100 text-lg">4 (í¬ê²Œ)</button>
                <button data-size="5" class="w-full px-3 py-2 text-left hover:bg-slate-50 border-b border-slate-100 text-xl">5 (ë” í¬ê²Œ)</button>
                <button data-size="6" class="w-full px-3 py-2 text-left hover:bg-slate-50 border-b border-slate-100 text-2xl">6 (ë§¤ìš° í¬ê²Œ)</button>
                <button data-size="7" class="w-full px-3 py-2 text-left hover:bg-slate-50 text-3xl">7 (ìµœëŒ€)</button>
              </div>
            </div>
          </div>

          <div class="sep" style="width: 1px; height: 1.75rem; background: #e5e7eb;" aria-hidden="true"></div>

          <!-- B I U S -->
          <div class="flex items-center gap-2">
            <button data-cmd="bold" class="btn border rounded-md bg-white hover:bg-slate-50 font-bold min-w-[2.25rem] h-[2.25rem]">B</button>
            <button data-cmd="italic" class="btn border rounded-md bg-white hover:bg-slate-50 italic min-w-[2.25rem] h-[2.25rem]">I</button>
            <button data-cmd="underline" class="btn border rounded-md bg-white hover:bg-slate-50 underline min-w-[2.25rem] h-[2.25rem]">U</button>
            <button data-cmd="strikeThrough" class="btn border rounded-md bg-white hover:bg-slate-50 line-through min-w-[2.25rem] h-[2.25rem]">S</button>
          </div>

          <div class="sep" style="width: 1px; height: 1.75rem; background: #e5e7eb;" aria-hidden="true"></div>

          <!-- Align / list / indent -->
          <div class="flex items-center gap-2">
            <button data-cmd="justifyLeft" class="btn border rounded-md bg-white hover:bg-slate-50 min-w-[2.25rem] h-[2.25rem]">âŸ¸</button>
            <button data-cmd="justifyCenter" class="btn border rounded-md bg-white hover:bg-slate-50 min-w-[2.25rem] h-[2.25rem]">â‡”</button>
            <button data-cmd="justifyRight" class="btn border rounded-md bg-white hover:bg-slate-50 min-w-[2.25rem] h-[2.25rem]">âŸ¹</button>
            <button data-cmd="insertUnorderedList" class="btn border rounded-md bg-white hover:bg-slate-50 min-w-[2.25rem] h-[2.25rem]">â€¢</button>
            <button data-cmd="insertOrderedList" class="btn border rounded-md bg-white hover:bg-slate-50 min-w-[2.25rem] h-[2.25rem]">1.</button>
            <button data-cmd="outdent" class="btn border rounded-md bg-white hover:bg-slate-50 min-w-[2.25rem] h-[2.25rem]">â‡¤</button>
            <button data-cmd="indent" class="btn border rounded-md bg-white hover:bg-slate-50 min-w-[2.25rem] h-[2.25rem]">â‡¥</button>
          </div>

          <div class="sep" style="width: 1px; height: 1.75rem; background: #e5e7eb;" aria-hidden="true"></div>

          <!-- Color (simple palette) -->
          <div class="flex items-center gap-2">
            <span class="text-xs text-slate-500">ê¸€ì</span>
            <div id="forePalette" class="flex gap-1">
              <button class="swatch border-2" data-fore="remove" style="width: 1.25rem; height: 1.25rem; background:#ffffff; position:relative; border: 1px solid #e5e7eb; border-radius: .375rem; cursor: pointer;" title="ê¸€ììƒ‰ ì œê±°">
                <span style="position:absolute; top:50%; left:50%; transform:translate(-50%,-50%); color:#ef4444; font-weight:bold; font-size:10px;">Ã—</span>
              </button>
              <button class="swatch" data-fore="#000000" style="width: 1.25rem; height: 1.25rem; background:#000000; border: 1px solid #e5e7eb; border-radius: .375rem; cursor: pointer;" title="ê²€ì€ìƒ‰"></button>
              <button class="swatch" data-fore="#ef4444" style="width: 1.25rem; height: 1.25rem; background:#ef4444; border: 1px solid #e5e7eb; border-radius: .375rem; cursor: pointer;" title="ë¹¨ê°„ìƒ‰"></button>
              <button class="swatch" data-fore="#f59e0b" style="width: 1.25rem; height: 1.25rem; background:#f59e0b; border: 1px solid #e5e7eb; border-radius: .375rem; cursor: pointer;" title="ì£¼í™©ìƒ‰"></button>
              <button class="swatch" data-fore="#10b981" style="width: 1.25rem; height: 1.25rem; background:#10b981; border: 1px solid #e5e7eb; border-radius: .375rem; cursor: pointer;" title="ì´ˆë¡ìƒ‰"></button>
              <button class="swatch" data-fore="#3b82f6" style="width: 1.25rem; height: 1.25rem; background:#3b82f6; border: 1px solid #e5e7eb; border-radius: .375rem; cursor: pointer;" title="íŒŒë€ìƒ‰"></button>
              <button class="swatch" data-fore="#8b5cf6" style="width: 1.25rem; height: 1.25rem; background:#8b5cf6; border: 1px solid #e5e7eb; border-radius: .375rem; cursor: pointer;" title="ë³´ë¼ìƒ‰"></button>
              <button class="swatch" data-fore="#ec4899" style="width: 1.25rem; height: 1.25rem; background:#ec4899; border: 1px solid #e5e7eb; border-radius: .375rem; cursor: pointer;" title="ë¶„í™ìƒ‰"></button>
            </div>
            <span class="text-xs text-slate-500 ml-2">ë°°ê²½</span>
            <div id="backPalette" class="flex gap-1">
              <button class="swatch border-2" data-back="remove" style="width: 1.25rem; height: 1.25rem; background:#ffffff; position:relative; border: 1px solid #e5e7eb; border-radius: .375rem; cursor: pointer;" title="ë°°ê²½ìƒ‰ ì œê±°">
                <span style="position:absolute; top:50%; left:50%; transform:translate(-50%,-50%); color:#ef4444; font-weight:bold; font-size:10px;">Ã—</span>
              </button>
              <button class="swatch" data-back="#fef3c7" style="width: 1.25rem; height: 1.25rem; background:#fef3c7; border: 1px solid #e5e7eb; border-radius: .375rem; cursor: pointer;" title="ì—°í•œ ë…¸ë€ìƒ‰"></button>
              <button class="swatch" data-back="#fee2e2" style="width: 1.25rem; height: 1.25rem; background:#fee2e2; border: 1px solid #e5e7eb; border-radius: .375rem; cursor: pointer;" title="ì—°í•œ ë¹¨ê°„ìƒ‰"></button>
              <button class="swatch" data-back="#dcfce7" style="width: 1.25rem; height: 1.25rem; background:#dcfce7; border: 1px solid #e5e7eb; border-radius: .375rem; cursor: pointer;" title="ì—°í•œ ì´ˆë¡ìƒ‰"></button>
              <button class="swatch" data-back="#e0e7ff" style="width: 1.25rem; height: 1.25rem; background:#e0e7ff; border: 1px solid #e5e7eb; border-radius: .375rem; cursor: pointer;" title="ì—°í•œ íŒŒë€ìƒ‰"></button>
              <button class="swatch" data-back="#f3e8ff" style="width: 1.25rem; height: 1.25rem; background:#f3e8ff; border: 1px solid #e5e7eb; border-radius: .375rem; cursor: pointer;" title="ì—°í•œ ë³´ë¼ìƒ‰"></button>
              <button class="swatch" data-back="#fdf2f8" style="width: 1.25rem; height: 1.25rem; background:#fdf2f8; border: 1px solid #e5e7eb; border-radius: .375rem; cursor: pointer;" title="ì—°í•œ ë¶„í™ìƒ‰"></button>
              <button class="swatch" data-back="#f0fdf4" style="width: 1.25rem; height: 1.25rem; background:#f0fdf4; border: 1px solid #e5e7eb; border-radius: .375rem; cursor: pointer;" title="ì—°í•œ ë¯¼íŠ¸ìƒ‰"></button>
            </div>
          </div>

          <div class="ml-auto flex items-center gap-2">
            <button id="linkBtn" class="btn border rounded-md bg-white hover:bg-slate-50 min-w-[2.25rem] h-[2.25rem]" title="ë§í¬">ğŸ”—</button>
            <button id="clearBtn" class="btn border rounded-md bg-white hover:bg-slate-50 min-w-[2.25rem] h-[2.25rem]" title="ì„œì‹ì œê±°">âš</button>
            <button id="undoBtn" class="btn border rounded-md bg-white hover:bg-slate-50 min-w-[2.25rem] h-[2.25rem]" title="ë˜ëŒë¦¬ê¸°">â†¶</button>
            <button id="redoBtn" class="btn border rounded-md bg-white hover:bg-slate-50 min-w-[2.25rem] h-[2.25rem]" title="ë‹¤ì‹œí•˜ê¸°">â†·</button>
          </div>
        </div>

        <!-- ì—ë””í„° -->
        <div id="customEditor" contenteditable="true" 
          class="bg-white border rounded-xl shadow-sm p-4 mt-3 min-h-[300px] outline-none"
          style="line-height: 1.6; font-size: 16px;"
          data-placeholder="ê°€ê²Œ ì†Œê°œë¥¼ ì…ë ¥í•˜ì„¸ìš”...">
          <p>ğŸ¨ ê³ í’ˆì§ˆ ê¸€ê¼´ & ë°°ê²½ìƒ‰ í…ŒìŠ¤íŠ¸:</p>
          <p>ğŸ“ <span style="font-family: 'Noto Sans KR', sans-serif; color: #3b82f6;">Noto Sans KR - êµ¬ê¸€ì˜ ê³ í’ˆì§ˆ í°íŠ¸</span></p>
          <p>ğŸ¨ <span style="font-family: 'Spoqa Han Sans Neo', sans-serif; color: #8b5cf6;">Spoqa Han Sans Neo - UI ìµœì í™” í°íŠ¸</span></p>
          <p>ğŸŒ¿ <span style="font-family: 'Gowun Dodum', sans-serif; color: #10b981;">ê³ ìš´ ë‹ì›€ - ê°€ë…ì„± ìš°ìˆ˜í•œ ì–‡ì€ ëŠë‚Œ</span></p>
          <p>ğŸ¯ <strong>ê¸€ê¼´ ë“œë¡­ë‹¤ìš´</strong>ì—ì„œ ê²€ì¦ëœ ê³ í’ˆì§ˆ í•œê¸€ í°íŠ¸ ì„ íƒ!</p>
          <p>ğŸŒº ë¬´ê¶í™” ì‚¼ì²œë¦¬ í™”ë ¤ê°•ì‚° ëŒ€í•œì‚¬ëŒ ëŒ€í•œìœ¼ë¡œ ê¸¸ì´ ë³´ì „í•˜ì„¸</p>
          <p>1ï¸âƒ£ ê¸€ê¼´ ì„ íƒ â†’ ë°°ê²½ìƒ‰ í´ë¦­ â†’ í•œê¸€ ì…ë ¥</p>
          <p>2ï¸âƒ£ í…ìŠ¤íŠ¸ ì„ íƒ â†’ ë°°ê²½ìƒ‰ ì ìš©: <span style="background-color:#fef3c7;">ë¬´ê¶í™”ê½ƒì´í”¼ì—ˆìŠµë‹ˆë‹¤</span></p>
        </div>

        <!-- ì œì¶œìš© íˆë“  í•„ë“œ (ì„œë²„ë¡œ ì „ì†¡ë¨) -->
        <input type="hidden" name="descHtml" id="descHtml" />
      </div>
      <!-- â–² ì„¤ëª…(ì†Œê°œ) ì…ë ¥ ì˜ì—­ ë -->

      <!-- ë“±ë¡ ë²„íŠ¼ -->
      <div class="flex justify-center">
        <button type="submit"
          class="mt-4 py-3 px-12 bg-blue-600 text-white rounded-xl text-lg font-semibold hover:bg-blue-700 transition">
          ë“±ë¡
        </button>
      </div>
    </form>
  </main>

  <!-- í˜ì´ì§€ ì „ìš© ìŠ¤í¬ë¦½íŠ¸ -->
  <script>
    fetch("/components/header.html")
      .then(res => res.text())
      .then(data => document.getElementById("header").innerHTML = data)
      .catch(err => console.error("í—¤ë” ë¡œë”© ì‹¤íŒ¨:", err));

    fetch("/components/footer.html")
      .then(res => res.text())
      .then(data => document.getElementById("footer").innerHTML = data)
      .catch(err => console.error("í‘¸í„° ë¡œë”© ì‹¤íŒ¨:", err));

    // 1) ì£¼ì†Œ ê²€ìƒ‰ + ì§€ë„
    const btnSearchAddr = document.getElementById("btnSearchAddr");
    btnSearchAddr.addEventListener("click", () => {
      new daum.Postcode({
        oncomplete(data) {
          const addr = data.address;
          document.getElementById("address").value = addr;
          updateMapByAddress(addr);
          const detail = document.getElementById("detailAddress");
          if (detail) detail.focus();
        }
      }).open();
    });

    window.map = null;
    window.marker = null;
    kakao.maps.load(function () {
      const mapContainer = document.getElementById("map");
      const pos = new kakao.maps.LatLng(37.5665, 126.9780);
      window.map = new kakao.maps.Map(mapContainer, { center: pos, level: 3 });
      window.marker = new kakao.maps.Marker({ map: window.map, position: pos });
    });

    function updateMapByAddress(address) {
      const geocoder = new kakao.maps.services.Geocoder();
      geocoder.addressSearch(address, function (result, status) {
        if (status === kakao.maps.services.Status.OK) {
          const lat = result[0].y, lng = result[0].x;
          const loc = new kakao.maps.LatLng(lat, lng);
          window.map.setCenter(loc);
          window.marker.setPosition(loc);
        }
      });
    }

    // 3) ì œì¶œ ì‹œ HTML ì‹±í¬
    document.getElementById("openForm").addEventListener("submit", async (e) => {
      e.preventDefault();

      console.log("ğŸ“ í¼ ì œì¶œ ì‹œì‘");
      
      // ê°œë°œ í™˜ê²½ ê°ì§€
      const isDev = location.hostname === 'localhost' || location.hostname === '127.0.0.1';
      console.log("ğŸŒ í™˜ê²½:", isDev ? "ê°œë°œ(localhost)" : "ë°°í¬(" + location.hostname + ")");

      // âœ… ì œì¶œ ì§ì „ ì—ë””í„° ë‚´ìš© ì¬ë™ê¸°í™” (ì´ì¤‘ ì•ˆì „ì¥ì¹˜)
      const customEditor = document.getElementById("customEditor");
      const descHtmlField = document.getElementById("descHtml");
      if (customEditor && descHtmlField) {
        descHtmlField.value = customEditor.innerHTML.replace(/\u200B/g, '') || '';
      }

      // ì»¤ìŠ¤í…€ ì—ë””í„° ë‚´ìš© í™•ì¸
      const editorHtml = document.getElementById("descHtml").value;
      console.log("ğŸ“„ ì—ë””í„° ë‚´ìš©:", (editorHtml || "").substring(0, 120) + "...");

      const baseAddr = document.getElementById("address").value || "";
      const detailAddr = document.getElementById("detailAddress").value || "";
      console.log("ğŸ  ê¸°ë³¸ ì£¼ì†Œ:", baseAddr);
      console.log("ğŸ  ìƒì„¸ ì£¼ì†Œ:", detailAddr);

      const formData = new FormData(e.target);
      formData.set("address", baseAddr);
      formData.set("detail_address", detailAddr);

      console.log("ğŸ“¤ ì „ì†¡ ë°ì´í„°:");
      for (let [k, v] of formData.entries()) {
        if (k === "descHtml") {
          console.log(`${k}: ${typeof v === "string" ? v.substring(0, 100) + "..." : v}`);
        } else {
          console.log(`${k}: ${v}`);
        }
      }

      try {
        console.log("ğŸš€ ì„œë²„ë¡œ ì „ì†¡ ì¤‘... URL: /api/open/register");
        console.log("ğŸŒ í˜„ì¬ ë„ë©”ì¸:", window.location.origin);
        const fd = new FormData(e.target);
        
        // âœ… ë°°í¬ í™˜ê²½ ê°ì§€ ë° ì ì ˆí•œ URL ì„ íƒ
        const isDev = location.hostname === 'localhost' || location.hostname === '127.0.0.1';
        const apiUrl = isDev ? '/api/open/register' : '/api/open/register';
        console.log("ğŸ“¡ ì‚¬ìš©í•  API URL:", apiUrl);
        
        const data = await safeFetch(apiUrl, { method: 'POST', body: fd });
        
        console.log("ğŸ“¥ ì„œë²„ ì‘ë‹µ:", data);
        alert('ë“±ë¡ ì™„ë£Œ! id=' + (data.id ?? 'ok'));
        window.location.href = "/open.html";
      } catch (err) {
        console.error('âŒ HTTP ì˜¤ë¥˜:', err);
        alert('ë“±ë¡ ì‹¤íŒ¨: ' + err.message);
      }
    });

  </script>

  <!-- ì•ˆì „í•œ fetch ë˜í¼ -->
  <script>
    async function safeFetch(url, options = {}) {
      const res = await fetch(url, options);
      const text = await res.text();
      
      if (!res.ok) {
        throw new Error(`HTTP ${res.status} ${res.statusText}\n${text.slice(0, 200)}`);
      }
      
      const ct = res.headers.get('content-type') || '';
      if (ct.includes('application/json')) {
        return JSON.parse(text);
      }
      
      throw new Error(`ì˜ˆìƒ ì™¸ Content-Type: ${ct}\n${text.slice(0, 120)}`);
    }
  </script>

  <!-- ê³ ê¸‰ ë¦¬ì¹˜ í…ìŠ¤íŠ¸ ì—ë””í„° JavaScript -->
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // ğŸ¯ ê°„ë‹¨í•˜ê³  ì•ˆì •ì ì¸ ë¦¬ì¹˜ í…ìŠ¤íŠ¸ ì—ë””í„°
      const editor = document.getElementById('customEditor');
      const toolbar = document.getElementById('editor-toolbar');
      const form = document.getElementById('openForm');
      const hidden = document.getElementById('descHtml');

      if (!editor || !toolbar) {
        console.warn('ì—ë””í„° ë˜ëŠ” íˆ´ë°”ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
        return;
      }

      // CSS ì¸ë¼ì¸ ì ìš© ê°•ì œ
      try { document.execCommand('styleWithCSS', false, true); } catch (e) { }

      let savedRange = null;

      function saveSelection() {
        const sel = window.getSelection();
        if (sel.rangeCount) savedRange = sel.getRangeAt(0);
      }

      function restoreSelection() {
        if (savedRange) {
          const sel = window.getSelection();
          sel.removeAllRanges();
          sel.addRange(savedRange);
        }
      }

      // âœ… ì¸ë¼ì¸ ìŠ¤íƒ€ì¼ ì ìš© (ë¸Œë¼ìš°ì € í˜¸í™˜ì„± í–¥ìƒ)
      function applyInlineStyle(styleObj = {}) {
        editor.focus();
        const sel = window.getSelection();
        if (!sel || sel.rangeCount === 0) return;

        const range = sel.getRangeAt(0);
        const span = document.createElement('span');
        Object.assign(span.style, styleObj);

        if (!sel.isCollapsed) {
          try { 
            range.surroundContents(span); 
          } catch {
            const frag = range.extractContents();
            span.appendChild(frag);
            range.insertNode(span);
          }
        } else {
          // ì»¤ì„œë§Œ ìˆì„ ë•Œ: íƒ€ì´í•‘ìš© ìŠ¤íŒ¬ ë§Œë“¤ì–´ë‘ê¸°
          span.appendChild(document.createTextNode('\u200B')); // ZWSP
          range.insertNode(span);
          const r2 = document.createRange();
          r2.setStart(span.firstChild, 1);
          r2.collapse(true);
          sel.removeAllRanges();
          sel.addRange(r2);
        }
        editor.focus();
      }

      function removeInlineColors() {
        // ê¸€ììƒ‰/ë°°ê²½ìƒ‰ ì œê±°ë§Œ ì•ˆì „í•˜ê²Œ
        document.execCommand('removeFormat');
      }

      function doCmd(cmd, value = null) {
        restoreSelection();
        document.execCommand(cmd, false, value);
        editor.focus();
      }

      // ì„ íƒ ì˜ì—­ ì €ì¥
      editor.addEventListener('keyup', saveSelection);
      editor.addEventListener('mouseup', saveSelection);

      // íˆ´ë°” ë²„íŠ¼ í´ë¦­ ì²˜ë¦¬
      toolbar.addEventListener('mousedown', (e) => {
        if (e.target.closest('button')) {
          e.preventDefault();
        }
      });

      toolbar.addEventListener('click', (e) => {
        const btn = e.target.closest('button');
        if (!btn) return;

        const cmd = btn.dataset.cmd;
        if (cmd) {
          doCmd(cmd);
          return;
        }

        // ê¸°íƒ€ ê¸°ëŠ¥
        switch (btn.id) {
          case 'linkBtn':
            const url = prompt('ë§í¬ URL:', 'https://');
            if (url) doCmd('createLink', url);
            break;
          case 'clearBtn':
            doCmd('removeFormat');
            break;
          case 'undoBtn':
            doCmd('undo');
            break;
          case 'redoBtn':
            doCmd('redo');
            break;
        }
      });

      // ìƒ‰ìƒ íŒ”ë ˆíŠ¸
      document.getElementById('forePalette').addEventListener('click', (e) => {
        const swatch = e.target.closest('[data-fore]');
        if (!swatch) return;
        
        const color = swatch.getAttribute('data-fore');
        if (color === 'remove') {
          removeInlineColors();
        } else {
          applyInlineStyle({ color });
        }
      });

      document.getElementById('backPalette').addEventListener('click', (e) => {
        const swatch = e.target.closest('[data-back]');
        if (!swatch) return;
        
        const color = swatch.getAttribute('data-back');
        if (color === 'remove') {
          applyInlineStyle({ backgroundColor: 'transparent' });
        } else {
          applyInlineStyle({ backgroundColor: color });
        }
      });

      // í°íŠ¸ ë“œë¡­ë‹¤ìš´
      const fontNameBtn = document.getElementById('fontNameBtn');
      const fontNameMenu = document.getElementById('fontNameMenu');
      const fontNameLabel = document.getElementById('fontNameLabel');

      if (fontNameBtn && fontNameMenu) {
        fontNameBtn.addEventListener('click', (e) => {
          e.stopPropagation();
          fontNameMenu.classList.toggle('hidden');
        });

        fontNameMenu.addEventListener('click', (e) => {
          const fontBtn = e.target.closest('[data-font]');
          if (!fontBtn) return;
          
          const fontValue = fontBtn.getAttribute('data-font');
          const fontDisplay = fontBtn.textContent;
          
          if (fontNameLabel) fontNameLabel.textContent = fontDisplay;
          
          if (fontValue) {
            applyInlineStyle({ fontFamily: fontValue });
          }
          
          fontNameMenu.classList.add('hidden');
        });
      }

      // í°íŠ¸ í¬ê¸° ë“œë¡­ë‹¤ìš´
      const fontSizeBtn = document.getElementById('fontSizeBtn');
      const fontSizeMenu = document.getElementById('fontSizeMenu');
      const fontSizeLabel = document.getElementById('fontSizeLabel');

      if (fontSizeBtn && fontSizeMenu) {
        fontSizeBtn.addEventListener('click', (e) => {
          e.stopPropagation();
          fontSizeMenu.classList.toggle('hidden');
        });

        fontSizeMenu.addEventListener('click', (e) => {
          const sizeBtn = e.target.closest('[data-size]');
          if (!sizeBtn) return;
          
          const sizeValue = sizeBtn.getAttribute('data-size');
          const sizeDisplay = sizeBtn.textContent;
          
          if (fontSizeLabel) fontSizeLabel.textContent = sizeDisplay;
          doCmd('fontSize', sizeValue);
          
          fontSizeMenu.classList.add('hidden');
        });
      }

      // ë©”ë‰´ ë‹«ê¸°
      document.addEventListener('click', () => {
        if (fontNameMenu) fontNameMenu.classList.add('hidden');
        if (fontSizeMenu) fontSizeMenu.classList.add('hidden');
      });

      // í¼ ì œì¶œ ì‹œ ë™ê¸°í™”
      if (form && hidden) {
        form.addEventListener('submit', function () {
          hidden.value = editor.innerHTML || '';
          console.log('ì—ë””í„° ë‚´ìš© ë™ê¸°í™” ì™„ë£Œ');
        });
      }

      console.log('ğŸ¯ ë¦¬ì¹˜ í…ìŠ¤íŠ¸ ì—ë””í„° ì´ˆê¸°í™” ì™„ë£Œ');
    });
  </script>
</body>
</html>